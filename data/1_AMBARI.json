[
   {
      "_id": "13282971",
      "assignee": "aonishuk",
      "components": [],
      "created": "2020-02-03 12:16:34",
      "description": "The reason for this is because ambari-agent does not know start order. And so\nif INFRA_SOLR with timeout of 10 hours starts before ZOOKEEPER, which it\nrequires, it\u2019s a big problem. As well as it blocks agent queue for any other\ncommands. The solution is to run the commands in parallel. Also for fast\nautostart users might want to disable retry_gap: {noformat}/var/lib/ambari-\nserver/resources/scripts/configs.py -a set -l localhost -n cluster_name -u\nadmin -p admin -c cluster-env -k retry_gap_in_sec -v 0{noformat}\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "After node reboot autostart of components takes too much time."
   },
   {
      "_id": "13281670",
      "assignee": "aonishuk",
      "components": [],
      "created": "2020-01-27 09:41:53",
      "description": "If configurations where cached and didn't change during restart of agent (for some people they always change, they will not see the issue). Recovery didn't get enabled. Until some changes configs/topology changes where done.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Components autostart does not work sometimes after ambari-agent restart"
   },
   {
      "_id": "13280160",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2020-01-17 14:57:20",
      "description": "Steps to reproduce:\r\n # Deploy cluster.\r\n # Add repository version with \"****:****\" as credentials (set skip validation before saving).\r\n # Try to open versions page.\r\n\r\nambari-server log:\r\n{code:java}\r\n2020-01-18 00:45:14,915 ERROR [ambari-client-thread-388] ReadHandler:99 - Bad request:\r\n java.util.regex.PatternSyntaxException: Dangling meta character '*' near index 0\r\n *****:*****\r\n ^\r\n     at java.util.regex.Pattern.error(Pattern.java:1955)\r\n     at java.util.regex.Pattern.sequence(Pattern.java:2123)\r\n     at java.util.regex.Pattern.expr(Pattern.java:1996)\r\n     at java.util.regex.Pattern.compile(Pattern.java:1696)\r\n     at java.util.regex.Pattern.<init>(Pattern.java:1351)\r\n     at java.util.regex.Pattern.compile(Pattern.java:1028)\r\n     at java.lang.String.replaceFirst(String.java:2178)\r\n     at org.apache.ambari.server.utils.URLCredentialsHider.hideCredentials(URLCredentialsHider.java:48)\r\n     at org.apache.ambari.server.controller.internal.RepositoryResourceProvider.getResources(RepositoryResourceProvider.java:182)\r\n     at org.apache.ambari.server.controller.internal.ClusterControllerImpl$ExtendedResourceProviderWrapper.queryForResources(ClusterControllerImpl.java: 965)\r\n     at org.apache.ambari.server.controller.internal.ClusterControllerImpl.getResources(ClusterControllerImpl.java:139)\r\n     at org.apache.ambari.server.api.query.QueryImpl.doQuery(QueryImpl.java:529)\r\n     at org.apache.ambari.server.api.query.QueryImpl.queryForSubResources(QueryImpl.java:482)\r\n     at org.apache.ambari.server.api.query.QueryImpl.queryForSubResources(QueryImpl.java:503)\r\n     at org.apache.ambari.server.api.query.QueryImpl.queryForSubResources(QueryImpl.java:503)\r\n     at org.apache.ambari.server.api.query.QueryImpl.queryForResources(QueryImpl.java:454)\r\n     at org.apache.ambari.server.api.query.QueryImpl.execute(QueryImpl.java:222)\r\n     at org.apache.ambari.server.api.handlers.ReadHandler.handleRequest(ReadHandler.java:77)\r\n     at org.apache.ambari.server.api.services.BaseRequest.process(BaseRequest.java:144)\r\n     at org.apache.ambari.server.api.services.BaseService.handleRequest(BaseService.java:164)\r\n     at org.apache.ambari.server.api.services.BaseService.handleRequest(BaseService.java:128)\r\n     at org.apache.ambari.server.api.services.ClusterStackVersionService.getClusterStackVersions(ClusterStackVersionService.java:68)\r\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Ambari doesn't show versions page after invalid repo was added"
   },
   {
      "_id": "13274731",
      "assignee": "aonishuk",
      "components": [],
      "created": "2019-12-16 10:49:10",
      "description": "Package Manager failed to install packages: No package found for\nsqoop-$\\\\{stack_version}(expected name: sqoop-3-1-5-0-139) Traceback (most\nrecent call last): File \"/var/lib/ambari-\nagent/cache/custom_actions/scripts/install_packages.py\", line 493, in\nInstallPackages().execute() File \"/usr/lib/ambari-\nagent/lib/resource_management/libraries/script/script.py\", line 352, in\nexecute method(env) File \"/var/lib/ambari-\nagent/cache/custom_actions/scripts/install_packages.py\", line 156, in\nactionexecute raise Fail(\"Failed to distribute repositories/install packages\")\nresource_management.core.exceptions.Fail: Failed to distribute\nrepositories/install packages Live Cluster :\n[+http://172.27.120.193:8080/+|http://172.27.120.193:8080/] ambari-server\nversion : 2.7.5.0-67\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "[ubuntu16] HDP install failed for upgrade from  HDP-3.0.1.0-187 to HDP-3.1.5.0-139"
   },
   {
      "_id": "13273864",
      "assignee": "aonishuk",
      "components": [],
      "created": "2019-12-11 12:16:50",
      "description": "Please see screenshot attached. Ambari UI - Stack and Versions page shows\nusername and password in cleartext . We should atleast hide the password Also\nin Review page for UI install cc [~accountid:557058:af856db7-a0ad-\n4e2b-b848-f11f481bf96f] / [~accountid:5dc59258b6e6b50c58af136b] /\n[~accountid:557058:e797d548-8a74-4f63-a68d-616111201b1c]\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Credentials should not be shown on cleartext on Ambari UI"
   },
   {
      "_id": "13273682",
      "assignee": "aonishuk",
      "components": [],
      "created": "2019-12-10 18:24:38",
      "description": "Retrying deploy with latest build after BUG-122455 was fixed Here Stack\nregistration is failing with {code} An internal system exception occurred:\nCould not load url from https://1055c7c3-1b7b-\n43f6-80a7-3e72cb0f8912:Cloudera_TechPreview2@archive-test.cloudera.com/p/HDP-\nGPL/centos7/3.x/BUILDS/3.1.5.0-139/repodata/repomd.xml.\nsun.security.validator.ValidatorException: PKIX path building failed:\nsun.security.provider.certpath.SunCertPathBuilderException: unable to find\nvalid certification path to requested target {code} 172.27.74.1 is a live node\nwhere issue has occurred.\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "VDF registration fails with SunCertPathBuilderException: unable to find valid certification path to requested target' on HTTPS cluster "
   },
   {
      "_id": "13273376",
      "assignee": "aonishuk",
      "components": [],
      "created": "2019-12-09 13:21:41",
      "description": "We are trying to deploy with paywalled repos of HDP and Ambari (ones supplied\nin RELENG-7654) but deploy is failing at client install with {code}\nRuntimeError: Failed to execute command '/usr/bin/yum -y install hdp-select',\nexited with code '1', message: 'https://****:****@archive-test.cloudera.com/p\n/HDP-GPL/centos7/3.x/BUILDS/3.1.5.0-139/repodata/repomd.xml: [Errno 14] HTTPS\nError 401 - Unauthorized {code} This url is accessible with credentials RE has\nsupplied ie; https://1055c7c3-1b7b-\n43f6-80a7-3e72cb0f8912:Cloudera_TechPreview2@archive-test.cloudera.com/p/HDP-\nGPL/centos7/3.x/BUILDS/3.1.5.0-139/repodata/repomd.xml So not sure which\ncredential is Ambari picking as from the error it looks like the credentials\nAmbari is using on this repo is incorrect. Could you please take a look Live\ncluster : http://172.27.136.132:8080/ Repo urls used here for deploy: Ambari :\nhttps://1055c7c3-1b7b-43f6-80a7-3e72cb0f8912:Cloudera_TechPreview2@archive-\ntest.cloudera.com/p/ambari/2.7.5.0-64/centos7/ambaribn.repo HDP:\nhttps://1055c7c3-1b7b-43f6-80a7-3e72cb0f8912:Cloudera_TechPreview2@archive-\ntest.cloudera.com/p/HDP/centos7/3.x/BUILDS/3.1.5.0-139 cc\n[~accountid:557058:af856db7-a0ad-\n4e2b-b848-f11f481bf96f]/[~accountid:5dc59258b6e6b50c58af136b]\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Deploy fails with 401:Unauthorized on HDP-GPL"
   },
   {
      "_id": "13271936",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-12-03 12:40:00",
      "description": "Server sends host level parameters update with blueprint_provisioning_state=\"FINISHED\" right after start execution command generation. This may led to performing of autostart command on the agent side before execution of start command.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Server sets blueprint_provisioning_state for component to finished before start command execution"
   },
   {
      "_id": "13271267",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-11-28 17:12:06",
      "description": "UI should show error for URLs if credentials are required but missed there.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "No Validation error on UI for an 'Unauthorized' repo url"
   },
   {
      "_id": "13271187",
      "assignee": "aonishuk",
      "components": [],
      "created": "2019-11-28 11:03:40",
      "description": "This was pointed out in https://cloudera.slack.com/archives/CQYUPAV7A chat and\nwe decided that it would be un-secure for RelEng to store login/password\ninside url's in VDF's, hence ambari should add that to url's itself.\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari should add login and password to urls populated from VDF"
   },
   {
      "_id": "13271181",
      "assignee": "aonishuk",
      "components": [],
      "created": "2019-11-28 10:36:47",
      "description": "This was pointed out in https://cloudera.slack.com/archives/CQYUPAV7A chat and\nwe decided that it would be un-secure for RelEng to store login/password\ninside url's in VDF's, hence ambari should add that to url's itself.\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari should add login and password to urls populated from VDF"
   },
   {
      "_id": "13268296",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-11-14 12:29:57",
      "description": "Make heartbeat timeout configurable to prevent it loosing on slow or overloaded instances.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Configure heartbeat timeout"
   },
   {
      "_id": "13267160",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-11-08 18:07:59",
      "description": "Using VDF\u00a0https://<user>:<pass>@<pathToXML>\r\nresults in:\r\n{noformat}\r\nAn internal system exception occurred: Could not load url from https://<user>:<pass>@<pathToXML>. Can't get secure connection to https://****:****@<pathToXML>. Truststore path or password is not set.{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Cannot use HTTPS repourl and VDF url"
   },
   {
      "_id": "13265790",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-11-01 16:13:56",
      "description": "User should be able to provide credentials for basic authorization inside repo base URL:\r\n\r\n{code}\r\n\r\nhttp://user:password@<host>:<port>/...\r\n\r\n{code}\r\n\r\nAlso server should mask the credentials in URLs from API responses and logs.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Support basic auth for repositories"
   },
   {
      "_id": "13261131",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-10-08 14:40:22",
      "description": "Backport for\u00a0AMBARI-24842\u00a0and\u00a0[AMBARI-24876|https://hortonworks.jira.com/issues/?jql=project+in+%2810320%2C+11620%2C+11320%2C+10520%29+AND+cf%5B11018%5D+%3D+AMBARI-24876]\u00a0into ambari-2.7.5.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Backport: Performance Tune Hosts and service Configs Pages to 2.7.5"
   },
   {
      "_id": "13260554",
      "assignee": "aonishuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-10-04 11:03:28",
      "description": "GET /resources gives back the directory content of /var/lib/ambari-server/resources. The directory doesn't contain any sensitive information, only files which are already visible on github. But it might freak out security guys therefore it's best to disable the listing.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Ambari is indexing all subdirectories contents under /resources folder via API."
   },
   {
      "_id": "13259633",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-09-30 10:17:12",
      "description": "NameNode HA cluster was created via blueprint with specifying 'dfs_ha_initial_namenode_active' and 'dfs_ha_initial_namenode_standby' properties for hadoop-env with invalid values 'None'.\r\nAfterwards ambari upgrade from 2.6.* to 2.7.5 was failed with following stacktrace:\r\n{code}\r\nERROR [main] SchemaUpgradeHelper:240 - Upgrade failed. \r\njava.lang.IllegalArgumentException: NAMENODE HA hosts mapped incorrectly for properties 'dfs_ha_initial_namenode_active' and 'dfs_ha_initial_namenode_standby'. Expected hosts are: [<nnHAHost1>, <nnHAHost2>]\r\n\tat org.apache.ambari.server.topology.ClusterTopologyImpl.validateTopology(ClusterTopologyImpl.java:221)\r\n\tat org.apache.ambari.server.topology.ClusterTopologyImpl.<init>(ClusterTopologyImpl.java:79)\r\n\tat org.apache.ambari.server.topology.PersistedStateImpl.getAllRequests(PersistedStateImpl.java:217)\r\n\tat org.apache.ambari.server.topology.TopologyManager.ensureInitialized(TopologyManager.java:205)\r\n\tat org.apache.ambari.server.topology.TopologyManager.getPendingHostComponents(TopologyManager.java:819)\r\n\tat org.apache.ambari.server.utils.StageUtils.getClusterHostInfo(StageUtils.java:306)\r\n\tat org.apache.ambari.server.controller.KerberosHelperImpl.addAdditionalConfigurations(KerberosHelperImpl.java:2961)\r\n\tat org.apache.ambari.server.controller.KerberosHelperImpl.calculateConfigurations(KerberosHelperImpl.java:1723)\r\n\tat org.apache.ambari.server.upgrade.UpgradeCatalog270.updateKerberosConfigurations(UpgradeCatalog270.java:1630)\r\n\tat org.apache.ambari.server.upgrade.UpgradeCatalog270.executeDMLUpdates(UpgradeCatalog270.java:1060)\r\n\tat org.apache.ambari.server.upgrade.AbstractUpgradeCatalog.upgradeData(AbstractUpgradeCatalog.java:985)\r\n\tat org.apache.ambari.server.upgrade.SchemaUpgradeHelper.executeDMLUpdates(SchemaUpgradeHelper.java:238)\r\n\tat org.apache.ambari.server.upgrade.SchemaUpgradeHelper.main(SchemaUpgradeHelper.java:458)\r\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "dfs_ha_initial_* properties should be removed during upgrade"
   },
   {
      "_id": "13258779",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-09-25 11:40:56",
      "description": "Identify where time is spent during processing of blueprint-based cluster creation request.\r\n{noformat:title=HDInsight cluster with 7 nodes (14 seconds)}\r\n19 Dec 2016 09:41:58,225  INFO [ambari-client-thread-45] AbstractResourceProvider:518 - Creating Cluster 'hdfs-toader-1219-dev' based on blueprint 'hadoop_ha'.\r\n...\r\n19 Dec 2016 09:42:12,015  INFO [pool-18-thread-1] AmbariContext:441 - All required configuration types are in the TOPOLOGY_RESOLVED state.  Blueprint deployment can now continue.\r\n{noformat}\r\n{noformat:title=OpenStack cluster with 8 nodes (9 seconds)}\r\n19 Dec 2016 11:17:30,640  INFO [ambari-client-thread-23] AbstractResourceProvider:518 - Creating Cluster 'TEST' based on blueprint 'hadoop_ha'.\r\n...\r\n19 Dec 2016 11:17:39,875  INFO [pool-17-thread-1] AmbariContext:441 - All required configuration types are in the TOPOLOGY_RESOLVED state.  Blueprint deployment can now continue.{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Reduce cluster creation request processing time"
   },
   {
      "_id": "13256939",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2019-09-16 18:08:43",
      "description": "Steps to reproduce\r\n\r\n--------------------\r\n # Install Ambari 2.7.x and install a cluster\r\n # start/install any service and navigate to any of the task before starting.\r\n # Wait till the task is finished ( showing completed icon on top) \r\n # observe there is no task logs getting updated but it is completed refer: !Screen Shot 2019-09-16 at 11.01.39 AM.png!\r\n # now go back one step up and come back again.. now it shows task logs:\r\n # !Screen Shot 2019-09-16 at 11.01.49 AM.png!",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "UI does not reflect/update task logs "
   },
   {
      "_id": "13253919",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323902",
            "id": "12323902",
            "name": "ambari-admin",
            "description": "Ambari Admin"
         }
      ],
      "created": "2019-08-30 12:09:05",
      "description": "Hello, i found SSTI to RCE vulnerability in Apache ambari, and i send three mails with technical details to\u00a0 [private@ambari.apache.org,\u00a0|mailto:private@ambari.apache.org] [security@apache.org and\u00a0|mailto:private@ambari.apache.org] [root@apache.org|mailto:private@ambari.apache.org]\r\n\r\nIn dates: 4 jul 2019, 8 aug 2019, and 24 aug 2019, but you not responce, bug is critical, and i want cve approve, help me?\r\n\r\nbest regards",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "vulnerability"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "SSTI in Ambari config"
   },
   {
      "_id": "13253304",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-08-27 17:08:08",
      "description": "When running a simple REST API call from CLI, I could see two entries in ambari-audit.log file.\r\n\r\n\u00a0\r\n\r\nFollowing is my API call:\r\n\r\n{{curl -k -i -u admin:<passwd> -H \"X-Requested-By: ambari\" -X GET [http://<ambari-host>:8080/api/v1/clusters|http://saurabh-ambari:8080/api/v1/clusters]}}\r\n\r\n\u00a0\r\n\r\nFollowing are the 2 entries in ambari-audit.log:\r\n{quote}2019-04-08T10:19:04.991Z, User(null), RemoteIp(x.x.x.x), Operation(User login), Roles(\r\n ), Status(Failed), Reason(Authentication required), Consecutive failures(UNKNOWN USER)\r\n 2019-04-08T10:19:04.999Z, User(admin), RemoteIp(x.x.x.x), Operation(User login), Roles(\r\n \u00a0\u00a0\u00a0 Ambari: Ambari Administrator\r\n ), Status(Success)\r\n{quote}\r\n\u00a0\r\n\r\nThe second line seems to be valid. However, the first line (with the null user) shouldn't be there.\r\n\r\nNote: I'm not sure if it helps, but the cluster is Kerberized and Knox isn't involved.\r\n\r\n\u00a0\r\n\r\nEdit: This issue could be seen on both Ambari 2.5.2 and 2.7.3. Also, 2.5.2 version cluster is Kerberized, the 2.7.3 version is NOT Kerberized.\u00a0",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "newbie",
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
         "name": "Minor",
         "id": "4"
      },
      "projectname": "AMBARI",
      "summary": "CLONE - Ambari audit log shows \"null\" user when executing an API call as admin - Ambari 2.6.2"
   },
   {
      "_id": "13251844",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-08-20 13:43:06",
      "description": "Daily NameNode Heap Usage alert has *Unknown* status with *There are not enough data points to calculate the standard deviation (0 sampled)* response.\r\nIt is caused by invalid case of *appId* alert property in alert definition.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Daily Namenode Heap Usage alert does not work"
   },
   {
      "_id": "13250764",
      "assignee": "aonishuk",
      "components": [],
      "created": "2019-08-14 11:04:52",
      "description": "Hive Service Check fails during Rolling Upgrade from HDP-3.1.0.0 to\nHDP-3.1.4.0-301 {code} 2019-08-11 17:24:29,680 - Using hadoop conf dir:\n/usr/hdp/3.1.4.0-301/hadoop/conf 2019-08-11 17:24:29,698 - call['ambari-\npython-wrap /usr/bin/hdp-select status hive-server2'] {'timeout': 20}\n2019-08-11 17:24:29,732 - call returned (0, 'hive-server2 - 3.1.0.0-78')\n2019-08-11 17:24:29,734 - Stack Feature Version Info: Cluster Stack=3.1,\nCommand Stack=None, Command Version=3.1.4.0-301, Upgrade Direction=upgrade ->\n3.1.4.0-301 2019-08-11 17:24:29,775 - File['/var/lib/ambari-\nagent/cred/lib/CredentialUtil.jar'] {'content':\nDownloadSource('http://ctr-e141-1563959304486-21229-01-000007.hwx.site:8080/resources/CredentialUtil.jar'),\n'mode': 0755} 2019-08-11 17:24:29,777 - Not downloading the file from\nhttp://ctr-e141-1563959304486-21229-01-000007.hwx.site:8080/resources/CredentialUtil.jar,\nbecause /var/lib/ambari-agent/tmp/CredentialUtil.jar already exists 2019-08-11\n17:24:30,749 - Running Hive Server checks 2019-08-11 17:24:30,749 -\n-------------------------- 2019-08-11 17:24:30,752 - Server Address List :\n[u'ctr-e141-1563959304486-21229-01-000002.hwx.site',\nu'ctr-e141-1563959304486-21229-01-000004.hwx.site'], Port : 10000, SSL\nKeyStore : None 2019-08-11 17:24:30,752 - Waiting for the Hive Server to\nstart... 2019-08-11 17:24:30,753 - Execute['/usr/bin/kinit -kt\n/etc/security/keytabs/smokeuser.headless.keytab ambari-qa@EXAMPLE.COM; ']\n{'user': 'ambari-qa'} 2019-08-11 17:24:30,863 - Execute['beeline -u\n'jdbc:hive2://ctr-e141-1563959304486-21229-01-000002.hwx.site:10000/;transportMode=binary;principal=hive/_HOST@EXAMPLE.COM'\n-n cstm-hive -e ';' 2>&1 | awk '{print}' | grep -i -e 'Connected to:' -e\n'Transaction isolation:' -e 'inactive HS2 instance; use service discovery'']\n{'path': ['/bin/', '/usr/bin/', '/usr/lib/hive/bin/', '/usr/sbin/'],\n'timeout_kill_strategy': 2, 'timeout': 30, 'user': 'ambari-qa'} 2019-08-11\n17:24:36,712 - Successfully connected to\nctr-e141-1563959304486-21229-01-000002.hwx.site on port 10000 2019-08-11\n17:24:36,713 - Successfully stayed connected to 'Hive Server' on host:\nctr-e141-1563959304486-21229-01-000007.hwx.site and port 10000 after\n5.96049404144 seconds 2019-08-11 17:24:36,713 - Running Hive Server2 checks\n2019-08-11 17:24:36,713 - -------------------------- 2019-08-11 17:24:36,719 -\nServer Address List : [u'ctr-e141-1563959304486-21229-01-000002.hwx.site'],\nPort : 10500, SSL KeyStore : None 2019-08-11 17:24:36,719 - Waiting for the\nHive Server2 to start... 2019-08-11 17:24:36,719 - Execute['/usr/bin/kinit -kt\n/etc/security/keytabs/smokeuser.headless.keytab ambari-qa@EXAMPLE.COM; ']\n{'user': 'ambari-qa'} 2019-08-11 17:24:36,834 - Execute['beeline -u\n'jdbc:hive2://ctr-e141-1563959304486-21229-01-000002.hwx.site:10500/;transportMode=binary;principal=hive/_HOST@EXAMPLE.COM'\n-n cstm-hive -e ';' 2>&1 | awk '{print}' | grep -i -e 'Connected to:' -e\n'Transaction isolation:' -e 'inactive HS2 instance; use service discovery'']\n{'path': ['/bin/', '/usr/bin/', '/usr/lib/hive/bin/', '/usr/sbin/'],\n'timeout_kill_strategy': 2, 'timeout': 30, 'user': 'ambari-qa'} 2019-08-11\n17:24:42,100 - Connection to ctr-e141-1563959304486-21229-01-000002.hwx.site\non port 10500 failed 2019-08-11 17:24:47,106 - Execute['/usr/bin/kinit -kt\n/etc/security/keytabs/smokeuser.headless.keytab ambari-qa@EXAMPLE.COM; ']\n{'user': 'ambari-qa'} 2019-08-11 17:24:47,225 - Execute['beeline -u\n'jdbc:hive2://ctr-e141-1563959304486-21229-01-000002.hwx.site:10500/;transportMode=binary;principal=hive/_HOST@EXAMPLE.COM'\n-n cstm-hive -e ';' 2>&1 | awk '{print}' | grep -i -e 'Connected to:' -e\n'Transaction isolation:' -e 'inactive HS2 instance; use service discovery'']\n{'path': ['/bin/', '/usr/bin/', '/usr/lib/hive/bin/', '/usr/sbin/'],\n'timeout_kill_strategy': 2, 'timeout': 30, 'user': 'ambari-qa'} 2019-08-11\n17:24:52,456 - Connection to ctr-e141-1563959304486-21229-01-000002.hwx.site\non port 10500 failed 2019-08-11 17:24:57,462 - Execute['/usr/bin/kinit -kt\n/etc/security/keytabs/smokeuser.headless.keytab ambari-qa@EXAMPLE.COM; ']\n{'user': 'ambari-qa'} 2019-08-11 17:24:57,582 - Execute['beeline -u\n'jdbc:hive2://ctr-e141-1563959304486-21229-01-000002.hwx.site:10500/;transportMode=binary;principal=hive/_HOST@EXAMPLE.COM'\n-n cstm-hive -e ';' 2>&1 | awk '{print}' | grep -i -e 'Connected to:' -e\n'Transaction isolation:' -e 'inactive HS2 instance; use service discovery'']\n{'path': ['/bin/', '/usr/bin/', '/usr/lib/hive/bin/', '/usr/sbin/'],\n'timeout_kill_strategy': 2, 'timeout': 30, 'user': 'ambari-qa'} 2019-08-11\n17:25:02,793 - Connection to ctr-e141-1563959304486-21229-01-000002.hwx.site\non port 10500 failed 2019-08-11 17:25:07,798 - Execute['/usr/bin/kinit -kt\n/etc/security/keytabs/smokeuser.headless.keytab ambari-qa@EXAMPLE.COM; ']\n{'user': 'ambari-qa'} 2019-08-11 17:25:07,919 - Execute['beeline -u\n'jdbc:hive2://ctr-e141-1563959304486-21229-01-000002.hwx.site:10500/;transportMode=binary;principal=hive/_HOST@EXAMPLE.COM'\n-n cstm-hive -e ';' 2>&1 | awk '{print}' | grep -i -e 'Connected to:' -e\n'Transaction isolation:' -e 'inactive HS2 instance; use service discovery'']\n{'path': ['/bin/', '/usr/bin/', '/usr/lib/hive/bin/', '/usr/sbin/'],\n'timeout_kill_strategy': 2, 'timeout': 30, 'user': 'ambari-qa'} 2019-08-11\n17:25:13,260 - Connection to ctr-e141-1563959304486-21229-01-000002.hwx.site\non port 10500 failed 2019-08-11 17:25:18,265 - Execute['/usr/bin/kinit -kt\n/etc/security/keytabs/smokeuser.headless.keytab ambari-qa@EXAMPLE.COM; ']\n{'user': 'ambari-qa'} 2019-08-11 17:25:18,360 - Execute['beeline -u\n'jdbc:hive2://ctr-e141-1563959304486-21229-01-000002.hwx.site:10500/;transportMode=binary;principal=hive/_HOST@EXAMPLE.COM'\n-n cstm-hive -e ';' 2>&1 | awk '{print}' | grep -i -e 'Connected to:' -e\n'Transaction isolation:' -e 'inactive HS2 instance; use service discovery'']\n{'path': ['/bin/', '/usr/bin/', '/usr/lib/hive/bin/', '/usr/sbin/'],\n'timeout_kill_strategy': 2, 'timeout': 30, 'user': 'ambari-qa'} 2019-08-11\n17:25:23,658 - Connection to ctr-e141-1563959304486-21229-01-000002.hwx.site\non port 10500 failed 2019-08-11 17:25:28,664 - Execute['/usr/bin/kinit -kt\n/etc/security/keytabs/smokeuser.headless.keytab ambari-qa@EXAMPLE.COM; ']\n{'user': 'ambari-qa'} 2019-08-11 17:25:28,772 - Execute['beeline -u\n'jdbc:hive2://ctr-e141-1563959304486-21229-01-000002.hwx.site:10500/;transportMode=binary;principal=hive/_HOST@EXAMPLE.COM'\n-n cstm-hive -e ';' 2>&1 | awk '{print}' | grep -i -e 'Connected to:' -e\n'Transaction isolation:' -e 'inactive HS2 instance; use service discovery'']\n{'path': ['/bin/', '/usr/bin/', '/usr/lib/hive/bin/', '/usr/sbin/'],\n'timeout_kill_strategy': 2, 'timeout': 30, 'user': 'ambari-qa'} 2019-08-11\n17:25:34,144 - Connection to ctr-e141-1563959304486-21229-01-000002.hwx.site\non port 10500 failed 2019-08-11 17:25:39,146 - Execute['/usr/bin/kinit -kt\n/etc/security/keytabs/smokeuser.headless.keytab ambari-qa@EXAMPLE.COM; ']\n{'user': 'ambari-qa'} 2019-08-11 17:25:39,264 - Execute['beeline -u\n'jdbc:hive2://ctr-e141-1563959304486-21229-01-000002.hwx.site:10500/;transportMode=binary;principal=hive/_HOST@EXAMPLE.COM'\n-n cstm-hive -e ';' 2>&1 | awk '{print}' | grep -i -e 'Connected to:' -e\n'Transaction isolation:' -e 'inactive HS2 instance; use service discovery'']\n{'path': ['/bin/', '/usr/bin/', '/usr/lib/hive/bin/', '/usr/sbin/'],\n'timeout_kill_strategy': 2, 'timeout': 30, 'user': 'ambari-qa'} 2019-08-11\n17:25:44,573 - Connection to ctr-e141-1563959304486-21229-01-000002.hwx.site\non port 10500 failed 2019-08-11 17:25:49,579 - Execute['/usr/bin/kinit -kt\n/etc/security/keytabs/smokeuser.headless.keytab ambari-qa@EXAMPLE.COM; ']\n{'user': 'ambari-qa'} 2019-08-11 17:25:49,694 - Execute['beeline -u\n'jdbc:hive2://ctr-e141-1563959304486-21229-01-000002.hwx.site:10500/;transportMode=binary;principal=hive/_HOST@EXAMPLE.COM'\n-n cstm-hive -e ';' 2>&1 | awk '{print}' | grep -i -e 'Connected to:' -e\n'Transaction isolation:' -e 'inactive HS2 instance; use service discovery'']\n{'path': ['/bin/', '/usr/bin/', '/usr/lib/hive/bin/', '/usr/sbin/'],\n'timeout_kill_strategy': 2, 'timeout': 30, 'user': 'ambari-qa'} 2019-08-11\n17:25:54,972 - Connection to ctr-e141-1563959304486-21229-01-000002.hwx.site\non port 10500 failed 2019-08-11 17:25:59,977 - Execute['/usr/bin/kinit -kt\n/etc/security/keytabs/smokeuser.headless.keytab ambari-qa@EXAMPLE.COM; ']\n{'user': 'ambari-qa'} 2019-08-11 17:26:00,094 - Execute['beeline -u\n'jdbc:hive2://ctr-e141-1563959304486-21229-01-000002.hwx.site:10500/;transportMode=binary;principal=hive/_HOST@EXAMPLE.COM'\n-n cstm-hive -e ';' 2>&1 | awk '{print}' | grep -i -e 'Connected to:' -e\n'Transaction isolation:' -e 'inactive HS2 instance; use service discovery'']\n{'path': ['/bin/', '/usr/bin/', '/usr/lib/hive/bin/', '/usr/sbin/'],\n'timeout_kill_strategy': 2, 'timeout': 30, 'user': 'ambari-qa'} 2019-08-11\n17:26:05,416 - Connection to ctr-e141-1563959304486-21229-01-000002.hwx.site\non port 10500 failed 2019-08-11 17:26:10,422 - Execute['/usr/bin/kinit -kt\n/etc/security/keytabs/smokeuser.headless.keytab ambari-qa@EXAMPLE.COM; ']\n{'user': 'ambari-qa'} 2019-08-11 17:26:10,539 - Execute['beeline -u\n'jdbc:hive2://ctr-e141-1563959304486-21229-01-000002.hwx.site:10500/;transportMode=binary;principal=hive/_HOST@EXAMPLE.COM'\n-n cstm-hive -e ';' 2>&1 | awk '{print}' | grep -i -e 'Connected to:' -e\n'Transaction isolation:' -e 'inactive HS2 instance; use service discovery'']\n{'path': ['/bin/', '/usr/bin/', '/usr/lib/hive/bin/', '/usr/sbin/'],\n'timeout_kill_strategy': 2, 'timeout': 30, 'user': 'ambari-qa'} 2019-08-11\n17:26:15,973 - Connection to ctr-e141-1563959304486-21229-01-000002.hwx.site\non port 10500 failed 2019-08-11 17:26:20,979 - Execute['/usr/bin/kinit -kt\n/etc/security/keytabs/smokeuser.headless.keytab ambari-qa@EXAMPLE.COM; ']\n{'user': 'ambari-qa'} 2019-08-11 17:26:21,090 - Execute['beeline -u\n'jdbc:hive2://ctr-e141-1563959304486-21229-01-000002.hwx.site:10500/;transportMode=binary;principal=hive/_HOST@EXAMPLE.COM'\n-n cstm-hive -e ';' 2>&1 | awk '{print}' | grep -i -e 'Connected to:' -e\n'Transaction isolation:' -e 'inactive HS2 instance; use service discovery'']\n{'path': ['/bin/', '/usr/bin/', '/usr/lib/hive/bin/', '/usr/sbin/'],\n'timeout_kill_strategy': 2, 'timeout': 30, 'user': 'ambari-qa'} 2019-08-11\n17:26:26,397 - Connection to ctr-e141-1563959304486-21229-01-000002.hwx.site\non port 10500 failed 2019-08-11 17:26:31,401 - Execute['/usr/bin/kinit -kt\n/etc/security/keytabs/smokeuser.headless.keytab ambari-qa@EXAMPLE.COM; ']\n{'user': 'ambari-qa'} 2019-08-11 17:26:31,516 - Execute['beeline -u\n'jdbc:hive2://ctr-e141-1563959304486-21229-01-000002.hwx.site:10500/;transportMode=binary;principal=hive/_HOST@EXAMPLE.COM'\n-n cstm-hive -e ';' 2>&1 | awk '{print}' | grep -i -e 'Connected to:' -e\n'Transaction isolation:' -e 'inactive HS2 instance; use service discovery'']\n{'path': ['/bin/', '/usr/bin/', '/usr/lib/hive/bin/', '/usr/sbin/'],\n'timeout_kill_strategy': 2, 'timeout': 30, 'user': 'ambari-qa'} 2019-08-11\n17:26:36,865 - Connection to ctr-e141-1563959304486-21229-01-000002.hwx.site\non port 10500 failed 2019-08-11 17:26:41,866 - Execute['/usr/bin/kinit -kt\n/etc/security/keytabs/smokeuser.headless.keytab ambari-qa@EXAMPLE.COM; ']\n{'user': 'ambari-qa'} 2019-08-11 17:26:41,983 - Execute['beeline -u\n'jdbc:hive2://ctr-e141-1563959304486-21229-01-000002.hwx.site:10500/;transportMode=binary;principal=hive/_HOST@EXAMPLE.COM'\n-n cstm-hive -e ';' 2>&1 | awk '{print}' | grep -i -e 'Connected to:' -e\n'Transaction isolation:' -e 'inactive HS2 instance; use service discovery'']\n{'path': ['/bin/', '/usr/bin/', '/usr/lib/hive/bin/', '/usr/sbin/'],\n'timeout_kill_strategy': 2, 'timeout': 30, 'user': 'ambari-qa'} 2019-08-11\n17:26:47,237 - Connection to ctr-e141-1563959304486-21229-01-000002.hwx.site\non port 10500 failed 2019-08-11 17:26:52,243 - Execute['/usr/bin/kinit -kt\n/etc/security/keytabs/smokeuser.headless.keytab ambari-qa@EXAMPLE.COM; ']\n{'user': 'ambari-qa'} 2019-08-11 17:26:52,362 - Execute['beeline -u\n'jdbc:hive2://ctr-e141-1563959304486-21229-01-000002.hwx.site:10500/;transportMode=binary;principal=hive/_HOST@EXAMPLE.COM'\n-n cstm-hive -e ';' 2>&1 | awk '{print}' | grep -i -e 'Connected to:' -e\n'Transaction isolation:' -e 'inactive HS2 instance; use service discovery'']\n{'path': ['/bin/', '/usr/bin/', '/usr/lib/hive/bin/', '/usr/sbin/'],\n'timeout_kill_strategy': 2, 'timeout': 30, 'user': 'ambari-qa'} 2019-08-11\n17:26:57,704 - Connection to ctr-e141-1563959304486-21229-01-000002.hwx.site\non port 10500 failed 2019-08-11 17:27:02,710 - Execute['/usr/bin/kinit -kt\n/etc/security/keytabs/smokeuser.headless.keytab ambari-qa@EXAMPLE.COM; ']\n{'user': 'ambari-qa'} 2019-08-11 17:27:02,805 - Execute['beeline -u\n'jdbc:hive2://ctr-e141-1563959304486-21229-01-000002.hwx.site:10500/;transportMode=binary;principal=hive/_HOST@EXAMPLE.COM'\n-n cstm-hive -e ';' 2>&1 | awk '{print}' | grep -i -e 'Connected to:' -e\n'Transaction isolation:' -e 'inactive HS2 instance; use service discovery'']\n{'path': ['/bin/', '/usr/bin/', '/usr/lib/hive/bin/', '/usr/sbin/'],\n'timeout_kill_strategy': 2, 'timeout': 30, 'user': 'ambari-qa'} 2019-08-11\n17:27:08,094 - Connection to ctr-e141-1563959304486-21229-01-000002.hwx.site\non port 10500 failed 2019-08-11 17:27:13,099 - Execute['/usr/bin/kinit -kt\n/etc/security/keytabs/smokeuser.headless.keytab ambari-qa@EXAMPLE.COM; ']\n{'user': 'ambari-qa'} 2019-08-11 17:27:13,215 - Execute['beeline -u\n'jdbc:hive2://ctr-e141-1563959304486-21229-01-000002.hwx.site:10500/;transportMode=binary;principal=hive/_HOST@EXAMPLE.COM'\n-n cstm-hive -e ';' 2>&1 | awk '{print}' | grep -i -e 'Connected to:' -e\n'Transaction isolation:' -e 'inactive HS2 instance; use service discovery'']\n{'path': ['/bin/', '/usr/bin/', '/usr/lib/hive/bin/', '/usr/sbin/'],\n'timeout_kill_strategy': 2, 'timeout': 30, 'user': 'ambari-qa'} 2019-08-11\n17:27:18,498 - Connection to ctr-e141-1563959304486-21229-01-000002.hwx.site\non port 10500 failed 2019-08-11 17:27:23,504 - Execute['/usr/bin/kinit -kt\n/etc/security/keytabs/smokeuser.headless.keytab ambari-qa@EXAMPLE.COM; ']\n{'user': 'ambari-qa'} 2019-08-11 17:27:23,622 - Execute['beeline -u\n'jdbc:hive2://ctr-e141-1563959304486-21229-01-000002.hwx.site:10500/;transportMode=binary;principal=hive/_HOST@EXAMPLE.COM'\n-n cstm-hive -e ';' 2>&1 | awk '{print}' | grep -i -e 'Connected to:' -e\n'Transaction isolation:' -e 'inactive HS2 instance; use service discovery'']\n{'path': ['/bin/', '/usr/bin/', '/usr/lib/hive/bin/', '/usr/sbin/'],\n'timeout_kill_strategy': 2, 'timeout': 30, 'user': 'ambari-qa'} 2019-08-11\n17:27:28,949 - Connection to ctr-e141-1563959304486-21229-01-000002.hwx.site\non port 10500 failed 2019-08-11 17:27:33,953 - Execute['/usr/bin/kinit -kt\n/etc/security/keytabs/smokeuser.headless.keytab ambari-qa@EXAMPLE.COM; ']\n{'user': 'ambari-qa'} 2019-08-11 17:27:34,071 - Execute['beeline -u\n'jdbc:hive2://ctr-e141-1563959304486-21229-01-000002.hwx.site:10500/;transportMode=binary;principal=hive/_HOST@EXAMPLE.COM'\n-n cstm-hive -e ';' 2>&1 | awk '{print}' | grep -i -e 'Connected to:' -e\n'Transaction isolation:' -e 'inactive HS2 instance; use service discovery'']\n{'path': ['/bin/', '/usr/bin/', '/usr/lib/hive/bin/', '/usr/sbin/'],\n'timeout_kill_strategy': 2, 'timeout': 30, 'user': 'ambari-qa'} 2019-08-11\n17:27:39,277 - Connection to ctr-e141-1563959304486-21229-01-000002.hwx.site\non port 10500 failed 2019-08-11 17:27:44,283 - Execute['/usr/bin/kinit -kt\n/etc/security/keytabs/smokeuser.headless.keytab ambari-qa@EXAMPLE.COM; ']\n{'user': 'ambari-qa'} 2019-08-11 17:27:44,399 - Execute['beeline -u\n'jdbc:hive2://ctr-e141-1563959304486-21229-01-000002.hwx.site:10500/;transportMode=binary;principal=hive/_HOST@EXAMPLE.COM'\n-n cstm-hive -e ';' 2>&1 | awk '{print}' | grep -i -e 'Connected to:' -e\n'Transaction isolation:' -e 'inactive HS2 instance; use service discovery'']\n{'path': ['/bin/', '/usr/bin/', '/usr/lib/hive/bin/', '/usr/sbin/'],\n'timeout_kill_strategy': 2, 'timeout': 30, 'user': 'ambari-qa'} 2019-08-11\n17:27:49,720 - Connection to ctr-e141-1563959304486-21229-01-000002.hwx.site\non port 10500 failed 2019-08-11 17:27:54,726 - Execute['/usr/bin/kinit -kt\n/etc/security/keytabs/smokeuser.headless.keytab ambari-qa@EXAMPLE.COM; ']\n{'user': 'ambari-qa'} 2019-08-11 17:27:54,846 - Execute['beeline -u\n'jdbc:hive2://ctr-e141-1563959304486-21229-01-000002.hwx.site:10500/;transportMode=binary;principal=hive/_HOST@EXAMPLE.COM'\n-n cstm-hive -e ';' 2>&1 | awk '{print}' | grep -i -e 'Connected to:' -e\n'Transaction isolation:' -e 'inactive HS2 instance; use service discovery'']\n{'path': ['/bin/', '/usr/bin/', '/usr/lib/hive/bin/', '/usr/sbin/'],\n'timeout_kill_strategy': 2, 'timeout': 30, 'user': 'ambari-qa'} 2019-08-11\n17:28:00,106 - Connection to ctr-e141-1563959304486-21229-01-000002.hwx.site\non port 10500 failed 2019-08-11 17:28:05,112 - Execute['/usr/bin/kinit -kt\n/etc/security/keytabs/smokeuser.headless.keytab ambari-qa@EXAMPLE.COM; ']\n{'user': 'ambari-qa'} 2019-08-11 17:28:05,229 - Execute['beeline -u\n'jdbc:hive2://ctr-e141-1563959304486-21229-01-000002.hwx.site:10500/;transportMode=binary;principal=hive/_HOST@EXAMPLE.COM'\n-n cstm-hive -e ';' 2>&1 | awk '{print}' | grep -i -e 'Connected to:' -e\n'Transaction isolation:' -e 'inactive HS2 instance; use service discovery'']\n{'path': ['/bin/', '/usr/bin/', '/usr/lib/hive/bin/', '/usr/sbin/'],\n'timeout_kill_strategy': 2, 'timeout': 30, 'user': 'ambari-qa'} 2019-08-11\n17:28:10,652 - Connection to ctr-e141-1563959304486-21229-01-000002.hwx.site\non port 10500 failed 2019-08-11 17:28:15,658 - Execute['/usr/bin/kinit -kt\n/etc/security/keytabs/smokeuser.headless.keytab ambari-qa@EXAMPLE.COM; ']\n{'user': 'ambari-qa'} 2019-08-11 17:28:15,778 - Execute['beeline -u\n'jdbc:hive2://ctr-e141-1563959304486-21229-01-000002.hwx.site:10500/;transportMode=binary;principal=hive/_HOST@EXAMPLE.COM'\n-n cstm-hive -e ';' 2>&1 | awk '{print}' | grep -i -e 'Connected to:' -e\n'Transaction isolation:' -e 'inactive HS2 instance; use service discovery'']\n{'path': ['/bin/', '/usr/bin/', '/usr/lib/hive/bin/', '/usr/sbin/'],\n'timeout_kill_strategy': 2, 'timeout': 30, 'user': 'ambari-qa'} 2019-08-11\n17:28:21,134 - Connection to ctr-e141-1563959304486-21229-01-000002.hwx.site\non port 10500 failed 2019-08-11 17:28:26,140 - Execute['/usr/bin/kinit -kt\n/etc/security/keytabs/smokeuser.headless.keytab ambari-qa@EXAMPLE.COM; ']\n{'user': 'ambari-qa'} 2019-08-11 17:28:26,266 - Execute['beeline -u\n'jdbc:hive2://ctr-e141-1563959304486-21229-01-000002.hwx.site:10500/;transportMode=binary;principal=hive/_HOST@EXAMPLE.COM'\n-n cstm-hive -e ';' 2>&1 | awk '{print}' | grep -i -e 'Connected to:' -e\n'Transaction isolation:' -e 'inactive HS2 instance; use service discovery'']\n{'path': ['/bin/', '/usr/bin/', '/usr/lib/hive/bin/', '/usr/sbin/'],\n'timeout_kill_strategy': 2, 'timeout': 30, 'user': 'ambari-qa'} 2019-08-11\n17:28:31,610 - Connection to ctr-e141-1563959304486-21229-01-000002.hwx.site\non port 10500 failed 2019-08-11 17:28:36,616 - Execute['/usr/bin/kinit -kt\n/etc/security/keytabs/smokeuser.headless.keytab ambari-qa@EXAMPLE.COM; ']\n{'user': 'ambari-qa'} 2019-08-11 17:28:36,734 - Execute['beeline -u\n'jdbc:hive2://ctr-e141-1563959304486-21229-01-000002.hwx.site:10500/;transportMode=binary;principal=hive/_HOST@EXAMPLE.COM'\n-n cstm-hive -e ';' 2>&1 | awk '{print}' | grep -i -e 'Connected to:' -e\n'Transaction isolation:' -e 'inactive HS2 instance; use service discovery'']\n{'path': ['/bin/', '/usr/bin/', '/usr/lib/hive/bin/', '/usr/sbin/'],\n'timeout_kill_strategy': 2, 'timeout': 30, 'user': 'ambari-qa'} 2019-08-11\n17:28:42,040 - Connection to ctr-e141-1563959304486-21229-01-000002.hwx.site\non port 10500 failed 2019-08-11 17:28:47,045 - Execute['/usr/bin/kinit -kt\n/etc/security/keytabs/smokeuser.headless.keytab ambari-qa@EXAMPLE.COM; ']\n{'user': 'ambari-qa'} 2019-08-11 17:28:47,161 - Execute['beeline -u\n'jdbc:hive2://ctr-e141-1563959304486-21229-01-000002.hwx.site:10500/;transportMode=binary;principal=hive/_HOST@EXAMPLE.COM'\n-n cstm-hive -e ';' 2>&1 | awk '{print}' | grep -i -e 'Connected to:' -e\n'Transaction isolation:' -e 'inactive HS2 instance; use service discovery'']\n{'path': ['/bin/', '/usr/bin/', '/usr/lib/hive/bin/', '/usr/sbin/'],\n'timeout_kill_strategy': 2, 'timeout': 30, 'user': 'ambari-qa'} 2019-08-11\n17:28:52,510 - Connection to ctr-e141-1563959304486-21229-01-000002.hwx.site\non port 10500 failed 2019-08-11 17:28:57,516 - Execute['/usr/bin/kinit -kt\n/etc/security/keytabs/smokeuser.headless.keytab ambari-qa@EXAMPLE.COM; ']\n{'user': 'ambari-qa'} 2019-08-11 17:28:57,633 - Execute['beeline -u\n'jdbc:hive2://ctr-e141-1563959304486-21229-01-000002.hwx.site:10500/;transportMode=binary;principal=hive/_HOST@EXAMPLE.COM'\n-n cstm-hive -e ';' 2>&1 | awk '{print}' | grep -i -e 'Connected to:' -e\n'Transaction isolation:' -e 'inactive HS2 instance; use service discovery'']\n{'path': ['/bin/', '/usr/bin/', '/usr/lib/hive/bin/', '/usr/sbin/'],\n'timeout_kill_strategy': 2, 'timeout': 30, 'user': 'ambari-qa'} 2019-08-11\n17:29:02,939 - Connection to ctr-e141-1563959304486-21229-01-000002.hwx.site\non port 10500 failed 2019-08-11 17:29:07,945 - Execute['/usr/bin/kinit -kt\n/etc/security/keytabs/smokeuser.headless.keytab ambari-qa@EXAMPLE.COM; ']\n{'user': 'ambari-qa'} 2019-08-11 17:29:08,064 - Execute['beeline -u\n'jdbc:hive2://ctr-e141-1563959304486-21229-01-000002.hwx.site:10500/;transportMode=binary;principal=hive/_HOST@EXAMPLE.COM'\n-n cstm-hive -e ';' 2>&1 | awk '{print}' | grep -i -e 'Connected to:' -e\n'Transaction isolation:' -e 'inactive HS2 instance; use service discovery'']\n{'path': ['/bin/', '/usr/bin/', '/usr/lib/hive/bin/', '/usr/sbin/'],\n'timeout_kill_strategy': 2, 'timeout': 30, 'user': 'ambari-qa'} 2019-08-11\n17:29:13,369 - Connection to ctr-e141-1563959304486-21229-01-000002.hwx.site\non port 10500 failed 2019-08-11 17:29:18,374 - Execute['/usr/bin/kinit -kt\n/etc/security/keytabs/smokeuser.headless.keytab ambari-qa@EXAMPLE.COM; ']\n{'user': 'ambari-qa'} 2019-08-11 17:29:18,475 - Execute['beeline -u\n'jdbc:hive2://ctr-e141-1563959304486-21229-01-000002.hwx.site:10500/;transportMode=binary;principal=hive/_HOST@EXAMPLE.COM'\n-n cstm-hive -e ';' 2>&1 | awk '{print}' | grep -i -e 'Connected to:' -e\n'Transaction isolation:' -e 'inactive HS2 instance; use service discovery'']\n{'path': ['/bin/', '/usr/bin/', '/usr/lib/hive/bin/', '/usr/sbin/'],\n'timeout_kill_strategy': 2, 'timeout': 30, 'user': 'ambari-qa'} 2019-08-11\n17:29:23,822 - Connection to ctr-e141-1563959304486-21229-01-000002.hwx.site\non port 10500 failed Command failed after 1 tries {code} Ambari was upgraded\nfrom 2.7.3.0 to 2.7.4.0\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Hive Service Check fails during Rolling Upgrade from HDP-3.1.0.0 to HDP-3.1.4.0"
   },
   {
      "_id": "13244312",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-07-11 13:02:31",
      "description": "Identify where time is spent during processing of blueprint-based cluster creation request.\r\n{noformat:title=HDInsight cluster with 7 nodes (14 seconds)}\r\n19 Dec 2016 09:41:58,225  INFO [ambari-client-thread-45] AbstractResourceProvider:518 - Creating Cluster 'hdfs-toader-1219-dev' based on blueprint 'hadoop_ha'.\r\n...\r\n19 Dec 2016 09:42:12,015  INFO [pool-18-thread-1] AmbariContext:441 - All required configuration types are in the TOPOLOGY_RESOLVED state.  Blueprint deployment can now continue.\r\n{noformat}\r\n{noformat:title=OpenStack cluster with 8 nodes (9 seconds)}\r\n19 Dec 2016 11:17:30,640  INFO [ambari-client-thread-23] AbstractResourceProvider:518 - Creating Cluster 'TEST' based on blueprint 'hadoop_ha'.\r\n...\r\n19 Dec 2016 11:17:39,875  INFO [pool-17-thread-1] AmbariContext:441 - All required configuration types are in the TOPOLOGY_RESOLVED state.  Blueprint deployment can now continue.{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Reduce cluster creation request processing time"
   },
   {
      "_id": "13243232",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2019-07-04 15:19:25",
      "description": "Adding and removing the Journal nodes, Resource manager is not starting",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "[HA] RESOURCEMANAGER is not starting after adding and removing journal nodes"
   },
   {
      "_id": "13239192",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-06-13 07:14:48",
      "description": "Request configurations when needed during server-side actions rather than rely on configuration data from the execution command.\r\n\r\nDue to a recent change, which appeared to remove configuration data from the execution command JSON document, data needed for Kerberos-related service-side actions is missing. This data may be requested when needed from the cluster data at the time of execution rather than when setting up the stages.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Request configurations when needed during server-side actions rather than rely on configuration data from the execution command"
   },
   {
      "_id": "13239030",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323902",
            "id": "12323902",
            "name": "ambari-admin",
            "description": "Ambari Admin"
         }
      ],
      "created": "2019-06-12 13:24:35",
      "description": "Cluster Information Page URL is broken \r\nBefore install HDP, login to ambari. The first page you will be navigated to is Cluster Information Page. The URL here is not what is expected\r\n\r\nExpected: views/ADMIN_VIEW/2.7.4.0/INSTANCE/#/clusterInformation\r\nActual: views/ADMIN_VIEW/2.7.4.0/INSTANCE/#!/clusterInformation#%2F\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Cluster Information Page URL is broken"
   },
   {
      "_id": "13237800",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-06-05 19:42:19",
      "description": "While deploying Druid with OneFS using the Ambari OneFS mpack, an error is emitted while assigning slaves and clients. If Druid Historical or Druid MiddleManager is assigned, the error reads \"Druid\u00a0[component] requires HDFS_CLIENT to be co-hosted\". If either is NOT assigned, the error reads \"You have selected 0 Druid [component]\u00a0components. Please consider that at least 1 Druid [component]\u00a0components should be installed in cluster.\"\r\n\r\n\u00a0\r\n\r\nSee the attached images.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Druid requires HDFS_CLIENT to be co-hosted, doesn't recognize ONEFS_CLIENT"
   },
   {
      "_id": "13235737",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2019-05-27 07:45:37",
      "description": "Below is the HTTP Request and Response issued when a user submits a note containing a JavaScript\r\nafter modifying some configuration in \"Tez\" service.\r\nHTTP Request:\r\nPUT /api/v1/clusters/<env> HTTP/1.1\r\nHost: xyz601:8080\r\nContent-Length: 199\r\nAccept: application/json, text/javascript, /; q=0.01\r\nOrigin: http://xyz601:8080\r\nX-Requested-With: XMLHttpRequest\r\nX-Requested-By: X-Requested-By\r\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML,\r\nlike Gecko) Chrome/70.0.3538.102 Safari/537.36\r\nContent-Type: application/x-www-form-urlencoded; charset=UTF-8\r\nReferer: http://xyz:8080/\r\nAccept-Encoding: gzip, deflate\r\nAccept-Language: en-US,en;q=0.9\r\nCookie: AMBARISESSIONID=vfiy4336mxwl1k5ehd6jrz43i\r\nConnection: close\r\n{\"Clusters\":{\"desired_service_config_versions\":\r\n\r\n{\"service_config_version\":4,\"service_name\":\"TEZ\",\"service_config_version_note\":\"Creat ed from service config version V4\\n<img src=x onerror=alert(1)>\"}\r\n}}\r\n\r\nRemediation Recommendations\r\nRestrict all input passed to the application to valid, whitelisted content, and ensure that all\r\nresponse/output sent by the server is HTML/URL/JavaScript encoded, depending on the context in\r\nwhich the data is used by the application.\r\nThe remediation should not attempt to blacklist content and remove, filter, or sanitize it. There are\r\ntoo many types of encoding it to get around filters for such content.\r\nWe strongly recommend a positive security policy that specifies what is allowed.\r\nNegative or attack signature based policies are difficult to maintain and are likely to be incomplete.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Persistent Cross Site Scripting (XSS) in Ambari"
   },
   {
      "_id": "13234567",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323902",
            "id": "12323902",
            "name": "ambari-admin",
            "description": "Ambari Admin"
         }
      ],
      "created": "2019-05-21 10:36:37",
      "description": "Ambari's UI evaluates Javascript blocks embedded in user input when adding hosts, adding remote clusters, and renaming the cluster.\r\n\r\nThe script evaluation appears to occur before the data is submitted and saved to the Ambari database (if save at all).  Therefore, no XSS vulnerability needs to be reported since the scope of the threat is only to the interactive user at the instance the data is evaluated.\r\n\r\n*Add remote cluster steps to reproduce:*\r\n# Log into ambari and navigate to admin > Manage Ambari> Cluster Management>  Remote Cluster > Register Remote Cluster\r\n# Enter malicious script in Ambari Cluster URL textbox and click on save. The output of XSS is reflected. \r\n\r\n*Add hosts steps to reproduce:*\r\n# Log into ambari and navigate to Hosts> Actions>  Add New Hosts\r\n# Enter malicious script in Target Hosts textbox and click on save. The output of XSS is reflected\r\n\r\n*Edit cluster name steps to reproduce:*\r\n# Log into ambari and navigate to admin > Manage Ambari> Cluster Management>  Cluster Information\r\n# Enter malicious script in Cluster Name textbox. The output of XSS is reflected",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari UI evaluates Javascript embedded in user input when adding hosts, adding remote clusters, and renaming the cluster"
   },
   {
      "_id": "13234519",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-05-21 07:47:53",
      "description": "Getting response from http://c7401:8080/api/v1/views/HIVE/versions/2.0.0/instances/AUTO_HIVE20_INSTANCE contains plain text password (hive.ranger.password). This only effects auto created views and default passwords.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Hive View API response contains plain-text password"
   },
   {
      "_id": "13231723",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-05-06 08:58:42",
      "description": "There is a erroneous equal sign in the following expression:\r\n\r\n{code}\r\nAMBARI_AGENT_ROOT_DIR==\"${ROOT}/usr/lib/ambari-agent\"\r\n{code}\r\n\r\nin /var/lib/ambari-server/install-helper.sh. The double equal sign causes the AMBARI_AGENT_ROOT_DIR to be evaluated to \"=/usr/lib/ambari-agent\" (note the leading =).",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari-server 2.7.3 uninstall removes ambari-python-wrap even when agent is still installed"
   },
   {
      "_id": "13231484",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323902",
            "id": "12323902",
            "name": "ambari-admin",
            "description": "Ambari Admin"
         }
      ],
      "created": "2019-05-03 16:58:04",
      "description": "{{ambari-admin}} build started failing with:\r\n\r\n{noformat:title=https://builds.apache.org/job/Ambari-branch-2.7/494/consoleText}\r\n[ERROR] npm ERR! notarget No compatible version found: ecstatic@'>=0.4.0 <0.5.0'\r\n[ERROR] npm ERR! notarget Valid install targets:\r\n[ERROR] npm ERR! notarget [\"4.1.2\"]\r\n...\r\n[ERROR] npm ERR! notarget It was specified as a dependency of 'http-server'\r\n{noformat}\r\n\r\nIt seems old versions of [ecstatic|https://www.npmjs.com/package/ecstatic?activeTab=versions] have been [removed|https://github.com/jfhbrook/node-ecstatic/issues/255] due to a security issue.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Admin View build fails due to unavailable npm package \"ecstatic\""
   },
   {
      "_id": "13231418",
      "assignee": "adoroszlai",
      "components": [],
      "created": "2019-05-03 09:10:27",
      "description": "With 2 HSI instances deployed in HA setup the _HiveServer2 Interactive Process_ alert is triggered for the inactive one:\r\n\r\n{noformat}\r\nConnecting to jdbc:hive2://...:10501/;transportMode=http;httpPath=cliservice\r\n19/05/02 09:13:11 [main]: WARN jdbc.HiveConnection: Failed to connect to ...:10501\r\nError: Could not open client transport with JDBC Uri: jdbc:hive2://...:10501/;transportMode=http;httpPath=cliservice: Cannot open sessions on an inactive HS2 instance; use service discovery to connect (state=08S01,code=0)\r\nCannot run commands specified using -e. No current connection\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Hive Server Interactive process alert triggered in HA setup"
   },
   {
      "_id": "13229346",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-04-22 09:24:58",
      "description": "Now service checks are performed for any appropriate host during HOU. We should tune behaviour without API change to add some host selection restrictions.\r\n{code:java}\r\n[\r\n\r\n{ \"hosts\": [\"host1\"], \"service_checks\": [\"KAFKA\", \"ZOOKEEPER\"] }\r\n,\r\n\r\n{ \"hosts\": [\"host2\"], \"service_checks\": [\"ZOOKEEPER\"] }\r\n,\r\n\r\n{ \"hosts\": [\"host3\", \"host4\"], \"service_checks\": [\"CUSTOMSERVICE\"] }\r\n]\r\n{code}\r\n - Each service check will be performed for all hosts from hosts section. e.g. CUSTOMSERVICE check will be run on both host3 and host4\r\n - In case there is no service component on proposed host the upgrade request will be failed. This means that user should change upgrade plan and post it again.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Service checks mentioned in HOU upgrade plan are run on the same node that was upgraded"
   },
   {
      "_id": "13228838",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2019-04-18 11:19:32",
      "description": "The application is running a vulnerable version of Moment.js.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "upgrade moment.js to v2.22.2"
   },
   {
      "_id": "13228348",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-04-16 13:36:40",
      "description": "There are still present couple of places that require extending default protocol set with abfs protocol:\r\n - Pig and File views check\u00a0*webhdfs.url*\u00a0property, which contains protocol name, but only for non-local view's configuration. List of allowed protocols is loaded from ambari.properties.\r\n - ranger hive plugin property\u00a0*ranger.plugin.hive.urlauth.filesystem.schemes*. We set default value during stack upgrade to HDP 2.6 stack.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Missed support for abfs protocol"
   },
   {
      "_id": "13228316",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-04-16 10:49:11",
      "description": "GET /resources gives back the directory content of /var/lib/ambari-server/resources. The directory doesn't contain any sensitive information, only files which are already visible on github. But it might freak out security guys therefore it's best to disable the listing.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Disable directory Indexing at /resources"
   },
   {
      "_id": "13228253",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-04-16 06:19:53",
      "description": "Livy can store its state in ZooKeeper for recovery ({{\"livy.server.recovery.state-store\": \"zookeeper\"}}).  In this case {{livy.server.recovery.state-store.url}} should point to the ZooKeeper quorum.\r\n\r\nSetting {{\"livy.server.recovery.state-store.url\": \"%HOSTGROUP::quorum%:2181\"}} should be enough to specify ZK servers in a host group named {{quorum}}.  However, since it is not explicitly handled in {{BlueprintConfigurationProcessor}}, the placeholder is replaced only with a single address.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
         "name": "Minor",
         "id": "4"
      },
      "projectname": "AMBARI",
      "summary": "Blueprint processor should support multiple ZooKeeper nodes for livy.server.recovery.state-store.url"
   },
   {
      "_id": "13228123",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2019-04-15 14:48:19",
      "description": "hive-interactive-site/hive.metastore.uris is not updated after move of Hive Metastore via wizard",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Hive service check is failing after moving Hive Metastore from node to another using system tests."
   },
   {
      "_id": "13227694",
      "assignee": "amagyar",
      "components": [],
      "created": "2019-04-12 12:02:35",
      "description": "ClassPath used by on the client side is: /usr/hdp/<NEW.HDP.VERSION>/hadoop/lib/hadoop-lzo-0.6.0.${NEW.HDP.VERSION}.jar\r\n\r\nLzoPackage is installed lazily therefore it's not available at the server side.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Tez/MR service check fails with ClassNotFoundException LzoCodec during host ordered upgrade"
   },
   {
      "_id": "13226921",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-04-09 11:30:16",
      "description": "# Install cluster with Ambari- 2.6.2.26 + HDP-2.6.5.3006\r\n # Set abfs protocol for mapreduce.application.framework.path/fs.defaultFS/tez.lib.uris properties.\r\n # Disable Service Auto Start\r\n # Register and Install stack HDP-2.6.5.3009\r\n # Run preupgrade checks. They fail with\r\n{code:java}\r\nMapReduce should reference Hadoop libraries from the distributed cache in HDFS\r\nReason: The mapred-site.xml property mapreduce.application.framework.path or the core-site.xml property fs.defaultFS should point to *dfs:/ url.\r\nFailed on: MAPREDUCE2 Tez should reference Hadoop libraries from the distributed cache in HDFS\r\nReason: The tez-site.xml property tez.lib.uris or the core-site.xml property fs.defaultFS should point to *dfs:/ url.\r\nFailed on: TEZ\r\n{code}\r\nFor ABFS, fs.defaultFS is\r\n{code:java}\r\nabfs://<hostname>\r\n{code}\r\nNot seeing this issue for WASB where the value was\r\n{code:java}\r\nwasb://<hostname>\r\n{code}\r\nAlso, we need to check if there are other places where we have this check, that will break too",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Host Ordered Upgrade: Pre Upgrade check of fs.defaultFS fails for ABFS"
   },
   {
      "_id": "13226920",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-04-09 11:20:53",
      "description": "Background:\r\n\r\nOn the cluster with 5-6 nodes conf-select cycles takes 3 seconds. Trying to create conf-dir for every single components. Which makes install stages like ~25-30seconds for hosts with a lot of clients.\r\n\r\nUsually we run conf-select during every task. Since with every single install new packages might appear and new conf-select links will be required.\r\n\r\nSolution:\r\n\r\nIf host_sysprep is true, run conf-select cycle only during first task and than create a file indicating this was done, so other tasks skip.\r\n\r\nSince all packages are preinstalled this should work fine as during first single run it will be possible to create all links.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Add a sysprep configurations to run conf-selects only a single time\t"
   },
   {
      "_id": "13225573",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2019-04-02 15:59:30",
      "description": "While moving Hive Metastore from one node to another, it is failing at test DB connection step in configure Component page.Seeing following error in ambari-agent logs:\r\n\r\n{noformat}19-03-22 11:15:38,527 - DB connection check started.\r\n2019-03-22 11:15:38,527 - There was an unknown error while checking database connectivity: Configuration parameter 'db_name' was not found in configurations dictionary!\r\nTraceback (most recent call last):\r\n  File \"/var/lib/ambari-agent/cache/custom_actions/scripts/check_host.py\", line 145, in actionexecute\r\n    db_connection_check_structured_output = self.execute_db_connection_check(config, tmp_dir)\r\n  File \"/var/lib/ambari-agent/cache/custom_actions/scripts/check_host.py\", line 281, in execute_db_connection_check\r\n    if db_name == DB_MYSQL:\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/config_dictionary.py\", line 73, in __getattr__\r\n    raise Fail(\"Configuration parameter '\" + self.name + \"' was not found in configurations dictionary!\")\r\nFail: Configuration parameter 'db_name' was not found in configurations dictionary!\r\n2019-03-22 11:15:38,528 - Host checks completed.\r\n2019-03-22 11:15:38,529 - Check db_connection_check was unsuccessful. Exit code: 1. Message: Configuration parameter 'db_name' was not found in configurations dictionary!\r\n\r\nCommand failed after 1 tries\r\n{noformat}\r\n\r\nReproduce steps:\r\n# Goto Hive Service.\r\n# Click on Actions tab and select Move Hive Metastore.\r\n# Fill appropriate values in Move Wizard.\r\n# Before going to configure component page from Review page, please run following ambari-server command on ambari server host:\r\n{{ambari-server setup --jdbc-db=mysql --jdbc-driver=/usr/share/java/mysql-connector-java.jar}}\r\n# Click next on review page, it will fail at test DB connection step in Configure component page.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Unable to move Hive metastore from one node to another "
   },
   {
      "_id": "13225463",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-04-02 10:40:21",
      "description": "When running\r\n\r\nambari-server setup-trusted-proxy --tproxy-enabled=true\r\n\r\nambari still asks the user interactively about enabling/disabling tproxy\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "tproxy-enabled flag is not used by ambari-server setup-trusted-proxy"
   },
   {
      "_id": "13223693",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-03-25 08:19:59",
      "description": "error message comes from SingleHostTopologyUpdater\r\n\r\n{code}\r\nLogical Request: Provision Cluster 'hadoop5832' FAILED: Unable to update configuration property 'fs.defaultFS' with topology information. Component 'NAMENODE' is mapped to an invalid number of host groups '0'.\r\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "ONEFS installation via blueprint fails"
   },
   {
      "_id": "13222987",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-03-21 02:57:35",
      "description": "hdfs to onefs convert script used to upgrade HDP2.6.5 to HDP3.0.1 stack is missing HDP3.1.* stack support. Please add HDP3.1.* support as well make it generic for all future stacks.\r\n\r\n!hdfs to onefs issue.jpg!",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "hdfs_to_onefs_convert.py script missing HDP3.1 + upgrade logic"
   },
   {
      "_id": "13222277",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2019-03-18 10:41:21",
      "description": "While performing Namenode (NN) move from one host to another. And if \"dfs.namenode.lifeline.rpc-address\" property is set., during the NN move, we see that the value associated with the property \"dfs.namenode.lifeline.rpc-address\" that is being moved is not updated. Hence, NN would fail to start during restart stage of the NN Move operation.\r\n\r\nThis can be reproduced as below,\r\n\r\n1. Have a HDFS HA cluster. \r\n2. Make sure \"dfs.namenode.lifeline.rpc-address\" is set for both the NNs.\r\n3. Perform the NN move operation from any NN to new host.\r\n4. Observe NN failure to startup during restart phase",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari does not update \"dfs.namenode.lifeline.rpc-address\" during Namenode move operation"
   },
   {
      "_id": "13222274",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-03-18 10:34:18",
      "description": "h2. Description\r\nProblem statement : ambari-server upgrade command is failing with below exception in ambari-server.log If using mysqlconnector-8.0.1.x.jar\r\n{code:java}\r\n2018-12-28 13:59:07,062  INFO [main] DBAccessorImpl:869 - Executing query: CREATE TABLE ambari_configuration (category_name VARCHAR(100) NOT NULL, property_name VARCHAR(100) NOT NULL, property_value VARCHAR(2048)) ENGINE=INNODB\r\n2018-12-28 13:59:07,087 ERROR [main] SchemaUpgradeHelper:209 - Upgrade failed.\r\njava.sql.SQLSyntaxErrorException: Unknown table 'ambari_configuration' in information_schema\r\n  at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120)\r\n  at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)\r\n  at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)\r\n  at com.mysql.cj.jdbc.StatementImpl.executeQuery(StatementImpl.java:1218)\r\n  at com.mysql.cj.jdbc.DatabaseMetaData$7.forEach(DatabaseMetaData.java:2965)\r\n  at com.mysql.cj.jdbc.DatabaseMetaData$7.forEach(DatabaseMetaData.java:2953)\r\n  at com.mysql.cj.jdbc.IterateBlock.doForAll(IterateBlock.java:56)\r\n  at com.mysql.cj.jdbc.DatabaseMetaData.getPrimaryKeys(DatabaseMetaData.java:3006)\r\n  at org.apache.ambari.server.orm.DBAccessorImpl.tableHasPrimaryKey(DBAccessorImpl.java:1086)\r\n  at org.apache.ambari.server.orm.DBAccessorImpl.addPKConstraint(DBAccessorImpl.java:577)\r\n  at org.apache.ambari.server.orm.DBAccessorImpl.addPKConstraint(DBAccessorImpl.java:588)\r\n  at org.apache.ambari.server.upgrade.UpgradeCatalog270.addAmbariConfigurationTable(UpgradeCatalog270.java:989)\r\n  at org.apache.ambari.server.upgrade.UpgradeCatalog270.executeDDLUpdates(UpgradeCatalog270.java:319)\r\n  at org.apache.ambari.server.upgrade.AbstractUpgradeCatalog.upgradeSchema(AbstractUpgradeCatalog.java:970)\r\n  at org.apache.ambari.server.upgrade.SchemaUpgradeHelper.executeUpgrade(SchemaUpgradeHelper.java:207)\r\n  at org.apache.ambari.server.upgrade.SchemaUpgradeHelper.main(SchemaUpgradeHelper.java:450)\r\n2018-12-28 13:59:07,093 ERROR [main] SchemaUpgradeHelper:475 - Exception occurred during upgrade, failed\r\norg.apache.ambari.server.AmbariException: Unknown table 'ambari_configuration' in information_schema\r\n  at org.apache.ambari.server.upgrade.SchemaUpgradeHelper.executeUpgrade(SchemaUpgradeHelper.java:210)\r\n  at org.apache.ambari.server.upgrade.SchemaUpgradeHelper.main(SchemaUpgradeHelper.java:450)\r\nCaused by: java.sql.SQLSyntaxErrorException: Unknown table 'ambari_configuration' in information_schema\r\n  at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120)\r\n  at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)\r\n  at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)\r\n{code}\r\nSupportmatrix says ambari supports mysql-5.7 version. but its not mentioning anything about connector jar or connector.jar version.\r\n\r\nCurrently there is this exception in Ambari upgrade is mysqlConnector jar version is 8.0.15 .\r\n\r\nIf ambari doesnt support mysqlConnector.jar version 8.x this should be documented in hortonworks docs and also in supportmatrix website.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "MYSQL connector exception while upgrading ambari to ambari-2.7.3"
   },
   {
      "_id": "13221909",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323505",
            "id": "12323505",
            "name": "ambari-views",
            "description": "Ambari Views framework and Views themselves.  Specific Views that are built on the framework will be handled with labels."
         }
      ],
      "created": "2019-03-15 13:07:08",
      "description": "Below is the error that is coming with the API Call\r\n\r\n[/api/v1/views/WORKFLOW_MANAGER/versions/1.0.0/instances/WFD/resources/proxy/hdfsCheck|https://ambviews-celws-igtc-143841.southeastasia.cloudapp.azure.com/api/v1/views/WORKFLOW_MANAGER/versions/1.0.0/instances/WFD/resources/proxy/hdfsCheck]\r\n{code:java}\r\n<html>\r\n<head>\r\n<meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\"/>\r\n<title>Error 500 Server Error</title>\r\n</head>\r\n<body><h2>HTTP ERROR 500</h2>\r\n<p>Problem accessing /api/v1/views/WORKFLOW_MANAGER/versions/1.0.0/instances/WFD/resources/proxy/hdfsCheck. Reason:\r\n<pre>    Server Error</pre></p><h3>Caused by:</h3><pre>javax.servlet.ServletException: java.lang.NoClassDefFoundError: org/eclipse/jetty/util/ajax/JSON$Convertor\r\n\tat com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:420)\r\n\tat com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:558)\r\n\tat com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:733)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\r\n\tat org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:865)\r\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1655)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:317)\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.apache.ambari.server.security.authorization.AmbariAuthorizationFilter.doFilter(AmbariAuthorizationFilter.java:291)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:114)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)\r\n\tat org.apache.ambari.server.security.authentication.AmbariBasicAuthenticationFilter.doFilterInternal(AmbariBasicAuthenticationFilter.java:139)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\tat org.apache.ambari.server.security.authentication.AmbariDelegatingAuthenticationFilter.doFilter(AmbariDelegatingAuthenticationFilter.java:123)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.apache.ambari.server.security.authorization.AmbariUserAuthorizationFilter.doFilter(AmbariUserAuthorizationFilter.java:95)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "HDFS Service Checking with an ClassNotFound Error in Ambari WFManager view"
   },
   {
      "_id": "13221085",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-03-12 10:59:45",
      "description": "INFO 2019-03-04 17:45:49,694 serverSetup.py:1088 - Setup ambari-server.\r\nERROR 2019-03-04 17:45:50,498 ambari-server.py:901 - 'Fatal exception: Unable to start PostgreSQL server. Exiting, exit code 4'\r\nTraceback (most recent call last):\r\n  File \"/usr/sbin/ambari-server.py\", line 884, in main\r\n    action_obj.execute()\r\n  File \"/usr/sbin/ambari-server.py\", line 79, in execute\r\n    self.fn(*self.args, **self.kwargs)\r\n  File \"/usr/lib/ambari-server/lib/ambari_server/serverSetup.py\", line 1145, in setup\r\n    _setup_database(options)\r\n  File \"/usr/lib/ambari-server/lib/ambari_server/serverSetup.py\", line 958, in _setup_database\r\n    dbmsAmbari.setup_database()\r\n  File \"/usr/lib/ambari-server/lib/ambari_server/dbConfiguration.py\", line 150, in setup_database\r\n    self._setup_local_database()\r\n  File \"/usr/lib/ambari-server/lib/ambari_server/dbConfiguration_linux.py\", line 474, in _setup_local_database\r\n    raise FatalException(retcode, err)\r\nFatalException: 'Fatal exception: Unable to start PostgreSQL server. Exiting, exit code 4'\r\nINFO 2019-03-04 17:45:51,001 ambari-server.py:798 - loglevel=logging.INFO\r\nINFO 2019-03-04 17:45:51,003 serverSetup.py:1208 - Reset ambari-server.\r\nERROR 2019-03-04 17:45:51,036 ambari-server.py:901 - 'Fatal exception: could not change directory to \"/root\": Permission denied\\npsql: could not connect to server: No such file or directory\\n\\tIs the server running locally and accepting\\n\\tconnections on Unix domain socket \"/tmp/.s.PGSQL.5432\"?\\n, exit code 1'\r\nTraceback (most recent call last):\r\n  File \"/usr/sbin/ambari-server.py\", line 884, in main\r\n    action_obj.execute()\r\n  File \"/usr/sbin/ambari-server.py\", line 79, in execute\r\n    self.fn(*self.args, **self.kwargs)\r\n  File \"/usr/lib/ambari-server/lib/ambari_server/serverSetup.py\", line 1236, in reset\r\n    _reset_database(options)\r\n  File \"/usr/lib/ambari-server/lib/ambari_server/serverSetup.py\", line 999, in _reset_database\r\n    dbmsAmbari.reset_database()\r\n  File \"/usr/lib/ambari-server/lib/ambari_server/dbConfiguration.py\", line 157, in reset_database\r\n    self._reset_local_database()\r\n  File \"/usr/lib/ambari-server/lib/ambari_server/dbConfiguration_linux.py\", line 513, in _reset_local_database\r\n    raise FatalException(1, drop_errdata)\r\nFatalException: 'Fatal exception: could not change directory to \"/root\": Permission denied\\npsql: could not connect to server: No such file or directory\\n\\tIs the server running locally and accepting\\n\\tconnections on Unix domain socket \"/tmp/.s.PGSQL.5432\"?\\n, exit code 1'\r\nINFO 2019-03-04 17:45:53,854 ambari-server.py:798 - loglevel=logging.INFO\r\nINFO 2019-03-04 17:45:53,856 ambari-server.py:161 - Stopping ambari-server.\r\nINFO 2019-03-04 17:45:53,857 ambari-server.py:190 - Ambari Server is not running",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari server setup failed with postgres connectivity error when using postgres 9.3"
   },
   {
      "_id": "13220810",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2019-03-11 11:04:54",
      "description": "Ambari UI is consuming almost 1.4 GB of browser memory.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Chrome and Firefox browsers are crashing while opening Ambari UI"
   },
   {
      "_id": "13219880",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2019-03-06 11:08:14",
      "description": "Host registration through Ambari UI failed with an error \"Unsupported Media Type\"",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Host registration through Ambari UI failed with an error \"Unsupported Media Type\""
   },
   {
      "_id": "13219594",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-03-05 16:03:35",
      "description": "The following HTTP requests failed in the console:\r\n\r\nGET https://ctr-e139-1542663976389-81666-01-000003.hwx.site:8443/gateway/default/ambari/api/v1/clusters/cl1/configurations/service_config_versions?is_current=true&group_id%3E0&fields=*&_=1551793258100\r\n\r\n{\"status\":400,\"message\":\"Unable to compile query predicate: Invalid Query Token: token='&', previous token type=PROPERTY_OPERAND\"}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "[Knox TP] Config Group selection is empty while Adding Service in Ambari"
   },
   {
      "_id": "13218836",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2019-03-01 08:24:11",
      "description": "Getting the error message below when trying to start/stop a service using Ambari UI through Knox.\r\n\r\n{code}\r\n{\r\n  \"status\" : 400,\r\n  \"message\" : \"Invalid Request: Malformed Request Body.  An exception occurred parsing the request body: Unexpected character ('%' (code 37)): expected a valid value (number, String, array, object, 'true', 'false' or 'null')\\n at [Source: java.io.StringReader@5e9b8d28; line: 1, column: 3]\"\r\n}\r\n{code}\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Start, Stop, Service Check and other request actions using PUT/POST from Ambari UI do not respond when tried via Knox TP"
   },
   {
      "_id": "13218285",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-02-27 08:22:00",
      "description": "Please backport all necessary changes from  Knox Trusted Proxy support into Ambari 2.7.4.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Backport Knox Trusted Proxy changes into 2.7.4"
   },
   {
      "_id": "13217149",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2019-02-21 09:57:27",
      "description": "In the new ambari-2.7.3 version, there is no way (via web ui) to generally refresh configs on a host . There is a way to refresh HDFS_CLIENT config on the Namenode host, but refreshing HDFS_CLIENT config *does not* refresh the topology_mappings.data file. \r\n\r\n\r\n*In Ambari 2.6.2: (During the \"Refresh Configs\")*\r\nWhen we refresh \"Refresh Configs\" then it refreshes all client configs which also includes HDFS and MapReduce2 config refresh. During the \"Restart MapReduce2 Client\" step it actually performs the \"/etc/hadoop/conf/topology_mappings.data\" file refresh with correct rack info which is updated via ambari ui.\r\nExample : \r\n{code}\r\n2019-02-09 21:31:05,642 - File['/usr/hdp/2.6.5.0-292/hadoop/conf/configuration.xsl'] {'owner': 'hdfs', 'group': 'hadoop'}\r\n2019-02-09 21:31:05,647 - File['/etc/hadoop/conf/topology_mappings.data'] {'owner': 'hdfs', 'content': Template('topology_mappings.data.j2'), 'only_if': 'test -d /etc/hadoop/conf', 'group': 'hadoop', 'mode': 0644}\r\n2019-02-09 21:31:05,655 - File['/etc/hadoop/conf/topology_script.py'] {'content': StaticFile('P@.py'), 'only_if': 'test -d /etc/hadoop/conf', 'mode': 0755}\r\n{code}\r\n\r\n\r\n*In Ambari 2.7.3:  (During the \"Refresh Configs\")*\r\nEven after refreshing HDFS Client (AND) MapReduce Clients individually using \"Refresh Configs\" iwe do not see above kind of message. Also no changes happens inside the \"/etc/hadoop/conf/topology_mappings.data\" is not updated until we restart daemon components like DataNode. So the behavior of client config refresh seems to be slightly changed from ambari side.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Rack \"Config Refresh\" behaviour is different in Ambari 2.6 and 2.7.3"
   },
   {
      "_id": "13216706",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-02-19 18:12:06",
      "description": "Updating the below configurations does not take affect in Ambari 2.7.x version\r\n\r\n\r\n{noformat}\r\nhttp.strict-transport-security=max-age=0\r\nviews.http.strict-transport-security=max-age=0\r\n{noformat}\r\n\r\nAfter setting the above configurations still API response gives below max-age headers.\r\n\r\n\r\n{noformat}\r\nStrict-Transport-Security: max-age=31536000 ; includeSubDomains\r\n{noformat}\r\n\r\nI see AmbariServerSecurityHeaderFilter.java setting the correctly defined params but later somehow it is going to default value.\r\n\r\nThis works fine in 2.6.x versions.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "http.strict-transport-security change does not take affect in 2.7.x"
   },
   {
      "_id": "13216658",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2019-02-19 14:30:58",
      "description": "I found a corner scenario where the dashboard never loads.\r\nIf we click on Dashboard link on landing page before dashboard completely loads upon login, dashboard never loads.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Dashboard is unable to load . Common console error : \"SEVERE TypeError: widgetGroups is undefined\""
   },
   {
      "_id": "13216621",
      "assignee": "aonishuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         }
      ],
      "created": "2019-02-19 12:41:38",
      "description": "As part of the status check, exception ClientComponentHasNoStatus\u00a0throws \"detected unhandled Python exception\" in /var/log/messages\u00a0every 20 seconds for each client installed.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "ClientComponentHasNoStatus exception clutters Operating System's /var/log/messages"
   },
   {
      "_id": "13214585",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2019-02-08 11:17:33",
      "description": "If ambari-web unit tests fail because of JS error thrown in test files outside the callbacks passed to {{it}}/{{before}}/{{beforeEach}}/{{after}}/{{afterEach}} methods, the execution is just stopped without reporting the cause. This might be confusing because failure isn't reported if none of the previous tests failed.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Implement additional error reporting for ambari-web unit tests"
   },
   {
      "_id": "13214345",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2019-02-07 10:58:10",
      "description": "Following files to cover:\r\n* app/views/main/service/widgets/create/expression_view.js\r\n* app/views/main/service/widgets/create/step2_view.js",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Cover views of Widget Create wizard with unit tests"
   },
   {
      "_id": "13213890",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2019-02-05 12:33:05",
      "description": "Remove the following models:\r\n- {{App.TargetCluster}}\r\n- {{App.RootService}}\r\n- {{App.RootServiceComponents}}\r\n- {{App.Rack}}\r\n- {{App.Authentication}}\r\n- {{App.BackgroundOperation}}\r\n- {{App.BackgroundOperationEvent}}\r\n- {{App.Form}}\r\n- {{App.FormField}}\r\n- {{App.CreateUserForm}}\r\n- {{App.ServiceAudit}}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Remove unused models from ambari-web"
   },
   {
      "_id": "13213697",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-02-04 14:29:34",
      "description": "In 2.7.x we store LDAP password within its own file; however the content of that file is not encrypted even if password encryption is on. To approach this issue the following should be done:\r\n - in case password encryption is enabled we will encrypt the LDAP password in the credential store and write the corresponding CS alias in the LDAP password file (just like we do with other passwords in\u00a0{{ambari.properties}})\r\n - in case the password encryption is disabled we will write the raw password in the LDAP password file\r\n\r\nIn both cases an additional level of security can be achieved by setting the appropriate user/group access on the file system to the LDAP password file.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "LDAP password in cleartext in ldap-password.dat file after encrypting passwords"
   },
   {
      "_id": "13213631",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2019-02-04 07:39:02",
      "description": "Following files to cover:\r\n* app/mixins/common/widgets/widget_mixin.js",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Cover widget mixin with unit tests"
   },
   {
      "_id": "13213376",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2019-02-01 18:23:45",
      "description": "Cover following files:\r\n- {{ambari-web/app/mappers/alert_notification_mapper.js}}\r\n- {{ambari-web/app/mappers/cluster_mapper.js}}\r\n- {{ambari-web/app/mappers/stack_version_mapper.js}}\r\n- {{ambari-web/app/mappers/widget_mapper.js}}\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Cover mappers files with unit tests"
   },
   {
      "_id": "13213024",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-01-31 09:22:29",
      "description": "The following request is accepted by Ambari, but the new host is assigned to {{/default-rack}}:\r\n\r\n{noformat}\r\n$ curl -X POST -d @- \"http://${AMBARI_SERVER}:8080/api/v1/clusters/TEST/hosts\" <<EOF\r\n[\r\n    {\r\n        \"blueprint\": \"blue\",\r\n        \"host_group\": \"node\",\r\n        \"host_name\": \"c7402.ambari.apache.org\",\r\n        \"rack_info\": \"/rack/a\"\r\n    }\r\n]\r\nEOF\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Scale hosts ignores rack_info"
   },
   {
      "_id": "13212611",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-01-29 17:38:41",
      "description": "{{StackAdvisorAdapterTest}} result depends on method execution order, {{getLayoutRecommendationInfo}} fails if executed after {{recommendConfigurations_alwaysApply}}.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "StackAdvisorAdapterTest result depends on method execution order"
   },
   {
      "_id": "13211812",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2019-01-25 12:03:18",
      "description": "Following files to cover app/mixins/common/widgets/widget_section.js.\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Cover widget mixin with unit tests"
   },
   {
      "_id": "13211473",
      "assignee": "aonishuk",
      "components": [],
      "created": "2019-01-24 07:09:58",
      "description": "As of Ambari 2.7, any changes to /var/lib/ambari-server/resources are not\npushed to ambari-agents cache (/var/lib/ambari-agent/cache/. This is not an\nissue in Ambari 2.6.\n\nAlso, if you remove files or need to wipe ambari-agent cache(s), the files\nwill never repopulate.\n\nAnother example, is custom ambari host_scripts not being pushed to the ambari-\nagents as should be done based on this article, and works in Ambari 2.6:\n<https://community.hortonworks.com/articles/38149/how-to-create-and-register-\ncustom-ambari-alerts.html>\n\nTo reproduce:\n\n  * 1\\. deploy hosts with Ambari 2.7.3 and have them connected to an ambari-server\n  * 2\\. turn on DEBUG logging in ambari-agent\n  * 3\\. go to an ambari-agent. Notice that there is no /var/lib/ambari-agent/cache/host_scripts/.hash but there are .hash files for the stack directories.\n  * 4\\. on the ambari-server, add files into /var/lib/ambari-server/resources/host_scripts\n  * 5\\. restart ambari-agent and notice that their host_scripts directory is never updated and .hash is never generated\n  * 6\\. check ambari-agent.log and notice that other paths were checked (by FileCache.py) but host_scripts were not\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "/var/lib/ambari-agent/cache not updating (Ambari 2.7)"
   },
   {
      "_id": "13211337",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2019-01-23 17:31:11",
      "description": "Error is thrown:\r\n{noformat}\r\nAmbari Web Unit tests \"after each\" hook:\r\nUncaught Error: assertion failed: You must pass at least an object and event name to Ember.addListener\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "UI unit tests are sometimes failing"
   },
   {
      "_id": "13210959",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2019-01-22 11:49:47",
      "description": "getting:\r\n\r\nhttps://c7401.ambari.apache.org:8443/gateway/default/ambari/api/v1/clusters/cc/hosts?fields=Hosts/rack_info,Hosts/host_name,Hosts/maintenance_state,Hosts/public_host_name,Hosts/cpu_count,Hosts/ph_cpu_count,alerts_summary,Hosts/host_status,Hosts/host_state,Hosts/last_heartbeat_time,Hosts/ip,host_components/HostRoles/state,host_components/HostRoles/maintenance_state,host_components/HostRoles/stale_configs,host_components/HostRoles/service_name,host_components/HostRoles/display_name,host_components/HostRoles/desired_admin_state,host_components/metrics/dfs/namenode/ClusterId,host_components/metrics/dfs/FSNamesystem/HAState,metrics/disk,metrics/load/load_one,Hosts/total_mem,Hosts/os_arch,Hosts/os_type,metrics/cpu/cpu_system,metrics/cpu/cpu_user,metrics/memory/mem_total,metrics/memory/mem_free,stack_versions/HostStackVersions,stack_versions/repository_versions/RepositoryVersions/repository_version,stack_versions/repository_versions/RepositoryVersions/id,stack_versions/repository_versions/RepositoryVersions/display_name&minimal_response=true,host_components/logging&page_size=25&from=0&_=1546003790663\r\n\r\n\r\ngives:\r\n\r\n{\"status\":400,\"message\":\"Invalid Request: Malformed Request Body.  An exception occurred parsing the request body: Unrecognized token 'from': was expecting \\n at [Source: java.io.StringReader@9ba0d3a; line: 1, column: 6]\"}\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "getAsPost requests don't work when ambari is used behind knox proxy"
   },
   {
      "_id": "13210428",
      "assignee": "ababiichuk",
      "components": [],
      "created": "2019-01-18 16:40:00",
      "description": "Cover the following files:\r\n- {{utils/errors/assertions.js}}\r\n- {{utils/errors/definitions.js}}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Cover errors utils with unit tests"
   },
   {
      "_id": "13210380",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-01-18 13:23:37",
      "description": "During 2k cluster deploying a lot of exceptions were found in the ambari-server log:\r\n{code}\r\n2019-01-15 16:25:33,567 ERROR [stomp-agent-bus-0] agent-update-bus:232 - Exception thrown by subscriber method onUpdateEvent(org.apache.ambari.server.events.STOMPEvent) on subscriber org.apache.ambari.server.events.listeners.requests.STOMPUpdateListener@5ee973ee when dispatching event: org.apache.ambari.server.events.TopologyAgentUpdateEvent@f4bf3c68\r\norg.springframework.messaging.MessageDeliveryException: Failed to handle GenericMessage [payload=byte[577], headers={simpMessageType=MESSAGE, contentType=application/json;charset=UTF-8, simpDestination=/events/topologies}] to org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask@13106eff in SimpleBrokerMessageHandler [DefaultSubscriptionRegistry[cache[5480 destination(s)], registry[2392 sessions]]]; nested exception is java.util.ConcurrentModificationException, failedMessage=GenericMessage [payload=byte[577], headers={simpMessageType=MESSAGE, contentType=application/json;charset=UTF-8, simpDestination=/events/topologies}]\r\n        at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:153)\r\n        at org.springframework.messaging.support.ExecutorSubscribableChannel.sendInternal(ExecutorSubscribableChannel.java:100)\r\n        at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:136)\r\n        at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:122)\r\n        at org.springframework.messaging.simp.SimpMessagingTemplate.sendInternal(SimpMessagingTemplate.java:187)\r\n        at org.springframework.messaging.simp.SimpMessagingTemplate.doSend(SimpMessagingTemplate.java:162)\r\n        at org.springframework.messaging.simp.SimpMessagingTemplate.doSend(SimpMessagingTemplate.java:48)\r\n        at org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)\r\n        at org.springframework.messaging.core.AbstractMessageSendingTemplate.convertAndSend(AbstractMessageSendingTemplate.java:151)\r\n        at org.springframework.messaging.core.AbstractMessageSendingTemplate.convertAndSend(AbstractMessageSendingTemplate.java:129)\r\n        at org.springframework.messaging.core.AbstractMessageSendingTemplate.convertAndSend(AbstractMessageSendingTemplate.java:122)\r\n        at org.apache.ambari.server.events.MessageEmitter.emitMessageToAll(MessageEmitter.java:159)\r\n        at org.apache.ambari.server.events.DefaultMessageEmitter.emitMessage(DefaultMessageEmitter.java:102)\r\n        at org.apache.ambari.server.events.listeners.requests.STOMPUpdateListener.onUpdateEvent(STOMPUpdateListener.java:53)\r\n        at sun.reflect.GeneratedMethodAccessor174.invoke(Unknown Source)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:87)\r\n        at com.google.common.eventbus.Subscriber$1.run(Subscriber.java:72)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n        at java.lang.Thread.run(Thread.java:745)\r\nCaused by: java.util.ConcurrentModificationException\r\n        at java.util.LinkedHashMap$LinkedHashIterator.nextNode(LinkedHashMap.java:719)\r\n        at java.util.LinkedHashMap$LinkedEntryIterator.next(LinkedHashMap.java:752)\r\n        at java.util.LinkedHashMap$LinkedEntryIterator.next(LinkedHashMap.java:750)\r\n        at java.util.Map.forEach(Map.java:620)\r\n        at org.springframework.messaging.simp.broker.SimpleBrokerMessageHandler.sendMessageToSubscribers(SimpleBrokerMessageHandler.java:388)\r\n        at org.springframework.messaging.simp.broker.SimpleBrokerMessageHandler.handleMessageInternal(SimpleBrokerMessageHandler.java:304)\r\n        at org.springframework.messaging.simp.broker.AbstractBrokerMessageHandler.handleMessage(AbstractBrokerMessageHandler.java:256)\r\n        at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:144)\r\n        ... 21 more\r\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Intermittent ConcurrentModificationException exception during STOMP message emitting"
   },
   {
      "_id": "13210150",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2019-01-17 13:05:28",
      "description": "Following files to cover app/views/common/modal_popups/*.\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Cover views of the modals with unit tests"
   },
   {
      "_id": "13209921",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2019-01-16 15:16:33",
      "description": "* Put HSI in maintenance mode.\r\n* Changed auth to local mapping in core-site.\r\n* A bunch of services got a restart indicator.\r\n* Triggering \"Restart All Required\" at the cluster level schedules HSI to be restarted.  HSI restart fails so the entire operation fails.  This is cumbersome because now the user has to trigger \"restart affected\" for individual services.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari is not respecting host component maintenance mode when performing \"Restart All Required\" at the cluster level"
   },
   {
      "_id": "13209455",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2019-01-14 16:21:00",
      "description": "'Components' sub-title is displayed twice",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Duplicate title on YARN summary page"
   },
   {
      "_id": "13209424",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2019-01-14 14:10:51",
      "description": "Ambari users which as dot in their username will not be able to see the dashboard metrics. \r\n\r\nIt looks that js scripts are truncating the username to use only first part before dot and fails with below error.\r\n{code:java}\r\n{\\\"file\\\":\\\"http://c116-node1.raghav.com:8080/javascripts/vendor.js\\\",\\\"line\\\":13510,\\\"col\\\":12,\\\"error\\\":\\\"Uncaught Error: Object in path user-pref-test1 could not be found or was destroyed.\\\",\\\"stackTrace\\\":\\\"Error: Object in path user-pref-test1 could not be found or was destroyed.\\\\n    at setPath (/vendor.js:13510:18)\\\\n    at Object.set (/vendor.js:13387:12)\\\\n    at Object.App.db.set (/app.js:200972:6)\\\\n    at Class.setDBProperty (/app.js:72577:12)\\\\n    at Class.saveWidgetsSettings (/app.js:238244:10)\\\\n    at Class.getUserPrefErrorCallback (/app.js:238258:10)\\\\n    at Class.newFunc [as getUserPrefErrorCallback] (/vendor.js:12954:16)\\\\n    at Class.opt.error (/app.js:193035:36)\\\\n    at fire (/vendor.js:1141:36)\\\\n    at Object.fireWith [as rejectWith] (/vendor.js:1252:15)\\\"},\\\"1541550308010\\\r\n{code}\r\n\r\nTried manually setting the persist data for the user which dint help. \r\n\r\nSteps to reproduce: (on Ambari 2.7.1)\r\n-->Create user test.user1 in ambari: \r\n-->Assign privileges to see the dashboard\r\n-->Login as test.user1, which should show loading of metric but never completes.\r\n\r\nAll other features work fine exception dashboard metrics\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Dasboard metrics will not load for ambari user which has dot in their username."
   },
   {
      "_id": "13208789",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2019-01-10 13:48:13",
      "description": "Following files to cover:\r\n* app/views/main/service/reassign/step1_view.js\r\n* app/views/main/service/reassign/step3_view.js\r\n* app/views/main/service/reassign/step5_view.js",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Cover views of reassign wizard with unit tests"
   },
   {
      "_id": "13208700",
      "assignee": "aonishuk",
      "components": [],
      "created": "2019-01-10 06:20:07",
      "description": "'gce fqdn' command was removed. While the script relied on it.\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "deploy-gce-perf-cluster.py fails after upgrade on gce controller"
   },
   {
      "_id": "13208603",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2019-01-09 18:35:06",
      "description": "During the ambari-managed upgrade from HDP 2.6 -> HDP 3.0, the flume service is removed (as it is no longer supported in the new stack). \r\n\r\nThe \"Flume Live\" widget is still displayed on the Ambari home page.  \r\n\r\nLet's remove this widget as well, when the flume service is removed. ",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Remove Flume Live widget from Ambari, alongside the Flume service during upgrade to HDP3. "
   },
   {
      "_id": "13208286",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2019-01-08 11:24:44",
      "description": "Following files to cover:\r\n* app/views/main/service/info/metrics/flume/flume_metric_graph.js\r\n* app/views/main/service/info/metrics/flume/flume_metric_graphs.js",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Cover flume metric graphs with unit tests"
   },
   {
      "_id": "13207537",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-01-03 19:49:40",
      "description": "Enable Kerberos fails when Ambari server is not on a registered host.  \r\n\r\nThe following error is seen in /var/log/ambari-server.log\r\n\r\n{noformat}\r\n2019-01-03 15:28:34,238  WARN [Server Action Executor Worker 39] ServerActionExecutor:471 - Task #39 failed to complete execution due to thrown exception: org.apache.ambari.server.HostNotFoundException:Host not found, hostname=c7401.ambari.apache.org\r\norg.apache.ambari.server.HostNotFoundException: Host not found, hostname=c7401.ambari.apache.org\r\n        at org.apache.ambari.server.state.cluster.ClustersImpl.getHost(ClustersImpl.java:456)\r\n        at org.apache.ambari.server.state.ConfigHelper.getEffectiveDesiredTags(ConfigHelper.java:190)\r\n        at org.apache.ambari.server.state.ConfigHelper.getEffectiveDesiredTags(ConfigHelper.java:174)\r\n        at org.apache.ambari.server.controller.AmbariManagementControllerImpl.findConfigurationTagsWithOverrides(AmbariManagementControllerImpl.java:2431)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at com.google.inject.internal.DelegatingInvocationHandler.invoke(DelegatingInvocationHandler.java:50)\r\n        at com.sun.proxy.$Proxy134.findConfigurationTagsWithOverrides(Unknown Source)\r\n        at org.apache.ambari.server.state.ConfigHelper.calculateExistingConfigurations(ConfigHelper.java:2158)\r\n        at org.apache.ambari.server.controller.KerberosHelperImpl.calculateConfigurations(KerberosHelperImpl.java:1722)\r\n        at org.apache.ambari.server.controller.KerberosHelperImpl.getActiveIdentities(KerberosHelperImpl.java:1797)\r\n        at org.apache.ambari.server.serveraction.kerberos.KerberosServerAction.calculateServiceIdentities(KerberosServerAction.java:512)\r\n        at org.apache.ambari.server.serveraction.kerberos.KerberosServerAction.processIdentities(KerberosServerAction.java:456)\r\n        at org.apache.ambari.server.serveraction.kerberos.CreatePrincipalsServerAction.execute(CreatePrincipalsServerAction.java:92)\r\n        at org.apache.ambari.server.serveraction.ServerActionExecutor$Worker.execute(ServerActionExecutor.java:550)\r\n        at org.apache.ambari.server.serveraction.ServerActionExecutor$Worker.run(ServerActionExecutor.java:466)\r\n        at java.lang.Thread.run(Thread.java:745)\r\n{noformat}\r\n\r\nThis is caused when Ambari tried to find the host-specific configuration values when processing the Kerberos identities and the host is not registered for the relevant cluster. This can happen when the Ambari server Kerberos identity is being processed when the Ambari server host is not registered with the cluster. \r\n\r\nTo solve this, host specific configuration values should not be obtained for the non-registered Ambari server host. \r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Enable Kerberos fails when Ambari server is not on a registered host"
   },
   {
      "_id": "13207480",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2019-01-03 14:34:43",
      "description": "(reverse order = host components first, then components, then service)\r\n\r\nSTR:\r\n\r\nInstall ZooKeeper + Kafka + Kerberos\r\nStop Kafka\r\ncurl -X DELETE http://c7401.ambari.apache.org:8080/api/v1/clusters/TEST/hosts/c7401.ambari.apache.org/host_components/KAFKA_BROKER\r\ncurl -X DELETE http://c7401.ambari.apache.org:8080/api/v1/clusters/TEST/services/KAFKA/components/KAFKA_BROKER\r\n=> identities are removed\r\ncurl -X DELETE http://c7401.ambari.apache.org:8080/api/v1/clusters/TEST/services/KAFKA\r\n=> identity removal fails with PersistenceException\r\n\r\n{code}\r\nInternal Exception: org.postgresql.util.PSQLException: ERROR: syntax error at or near \")\"\r\n  Position: 210\r\nError Code: 0\r\nCall: SELECT t0.config_id, t0.cluster_id, t0.selected, t0.selected_timestamp, t0.version_tag, t0.create_timestamp, t0.type_name, t0.unmapped, t0.version, t0.stack_id FROM clusterconfig t0 WHERE ((((t0.type_name IN ()) AND (t0.cluster_id = ?)) AND (t0.stack_id = ?)) AND (t0.selected_timestamp = (SELECT MAX(t1.selected_timestamp) FROM clusterconfig t1 WHERE (((t1.cluster_id = ?) AND (t1.stack_id = ?)) AND (t1.type_name = t0.type_name)))))\r\n        bind => [4 parameters bound]\r\nQuery: ReadAllQuery(name=\"ClusterConfigEntity.findLatestConfigsByStackWithTypes\" referenceClass=ClusterConfigEntity sql=\"SELECT t0.config_id, t0.cluster_id, t0.selected, t0.selected_timestamp, t0.version_tag, t0.create_timestamp, t0.type_name, t0.unmapped, t0.version, t0.stack_id FROM clusterconfig t0 WHERE ((((t0.type_name IN ?) AND (t0.cluster_id = ?)) AND (t0.stack_id = ?)) AND (t0.selected_timestamp = (SELECT MAX(t1.selected_timestamp) FROM clusterconfig t1 WHERE (((t1.cluster_id = ?) AND (t1.stack_id = ?)) AND (t1.type_name = t0.type_name)))))\")\r\nFetchGroup(){serviceConfigEntities, stack, selectedTimestamp, clusterId, type, version, unmapped, configId, configGroupConfigMappingEntities, tag, selected, timestamp, clusterEntity}\r\njavax.persistence.PersistenceException: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.6.2.v20151217-774c696): org.eclipse.persistence.exceptions.DatabaseException\r\nInternal Exception: org.postgresql.util.PSQLException: ERROR: syntax error at or near \")\"\r\n  Position: 210\r\nError Code: 0\r\nCall: SELECT t0.config_id, t0.cluster_id, t0.selected, t0.selected_timestamp, t0.version_tag, t0.create_timestamp, t0.type_name, t0.unmapped, t0.version, t0.stack_id FROM clusterconfig t0 WHERE ((((t0.type_name IN ()) AND (t0.cluster_id = ?)) AND (t0.stack_id = ?)) AND (t0.selected_timestamp = (SELECT MAX(t1.selected_timestamp) FROM clusterconfig t1 WHERE (((t1.cluster_id = ?) AND (t1.stack_id = ?)) AND (t1.type_name = t0.type_name)))))\r\n        bind => [4 parameters bound]\r\nQuery: ReadAllQuery(name=\"ClusterConfigEntity.findLatestConfigsByStackWithTypes\" referenceClass=ClusterConfigEntity sql=\"SELECT t0.config_id, t0.cluster_id, t0.selected, t0.selected_timestamp, t0.version_tag, t0.create_timestamp, t0.type_name, t0.unmapped, t0.version, t0.stack_id FROM clusterconfig t0 WHERE ((((t0.type_name IN ?) AND (t0.cluster_id = ?)) AND (t0.stack_id = ?)) AND (t0.selected_timestamp = (SELECT MAX(t1.selected_timestamp) FROM clusterconfig t1 WHERE (((t1.cluster_id = ?) AND (t1.stack_id = ?)) AND (t1.type_name = t0.type_name)))))\")\r\nFetchGroup(){serviceConfigEntities, stack, selectedTimestamp, clusterId, type, version, unmapped, configId, configGroupConfigMappingEntities, tag, selected, timestamp, clusterEntity}\r\n        at org.eclipse.persistence.internal.jpa.QueryImpl.getDetailedException(QueryImpl.java:382)\r\n        at org.eclipse.persistence.internal.jpa.QueryImpl.executeReadQuery(QueryImpl.java:260)\r\n        at org.eclipse.persistence.internal.jpa.QueryImpl.getResultList(QueryImpl.java:473)\r\n        at org.apache.ambari.server.orm.dao.DaoUtils.selectList(DaoUtils.java:53)\r\n        at org.apache.ambari.server.orm.dao.ClusterDAO.getLatestConfigurationsWithTypes(ClusterDAO.java:226)\r\n        at org.apache.ambari.server.orm.AmbariLocalSessionInterceptor.invoke(AmbariLocalSessionInterceptor.java:44)\r\n        at org.apache.ambari.server.state.cluster.ClusterImpl.getLatestConfigsWithTypes(ClusterImpl.java:1185)\r\n        at org.apache.ambari.server.controller.DeleteIdentityHandler$PrepareDeleteIdentityServerAction.extendWithDeletedConfigOfService(DeleteIdentityHandler.java:304)\r\n        at org.apache.ambari.server.controller.DeleteIdentityHandler$PrepareDeleteIdentityServerAction.calculateConfig(DeleteIdentityHandler.java:296)\r\n        at org.apache.ambari.server.controller.DeleteIdentityHandler$PrepareDeleteIdentityServerAction.execute(DeleteIdentityHandler.java:273)\r\n        at org.apache.ambari.server.serveraction.ServerActionExecutor$Worker.execute(ServerActionExecutor.java:550)\r\n        at org.apache.ambari.server.serveraction.ServerActionExecutor$Worker.run(ServerActionExecutor.java:466)\r\n        at java.lang.Thread.run(Thread.java:745)\r\n{code}\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Delete identities fails when removing service in reverse order"
   },
   {
      "_id": "13207459",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2019-01-03 11:35:11",
      "description": "Following files to cover:\r\n* app/controllers/main/admin/highAvailability/hawq/addStandby/step3_controller.js\r\n* app/controllers/main/admin/highAvailability/hawq/addStandby/wizard_controller.js",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Cover HA wizard controller with unit tests"
   },
   {
      "_id": "13207246",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2019-01-02 09:29:48",
      "description": "This needs to be done so that user can select YARN without MR2 using UI installer wizard\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Select Service page: Show Yarn and MR2 as separate services for selection instead of single selection (Yarn+MapReduce2)"
   },
   {
      "_id": "13205957",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-12-21 12:34:28",
      "description": "Update AngularJS version to 1.7.5 due to known cross site scripting vulnerabilities.\r\n\r\nSee https://snyk.io/vuln/npm:angular\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Update AngularJS version to 1.7.5 due to known vulnerabilities"
   },
   {
      "_id": "13205779",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-12-20 16:33:10",
      "description": "In some cases during a restart of Ambari Server, the server fails to load due to:\r\n{code:java}\r\nCaused by: java.lang.IllegalStateException: Recursive load of: org.apache.ambari.server.events.publishers.STOMPUpdatePublisher.<init>()\r\n\tat com.google.common.base.Preconditions.checkState(Preconditions.java:197)\r\n\tat com.google.common.cache.LocalCache$Segment.waitForLoadingValue(LocalCache.java:2299)\r\n\tat com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2191)\r\n\tat com.google.common.cache.LocalCache.get(LocalCache.java:3937)\r\n\tat com.google.common.cache.LocalCache.getOrLoad(LocalCache.java:3941)\r\n\tat com.google.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:4824)\r\n\tat com.google.common.cache.LocalCache$LocalLoadingCache.getUnchecked(LocalCache.java:4830)\r\n\tat com.google.inject.internal.FailableCache.get(FailableCache.java:48)\r\n\tat com.google.inject.internal.ConstructorInjectorStore.get(ConstructorInjectorStore.java:50)\r\n\tat com.google.inject.internal.ConstructorBindingImpl.initialize(ConstructorBindingImpl.java:138)\r\n\tat com.google.inject.internal.InjectorImpl.initializeJitBinding(InjectorImpl.java:550)\r\n\tat com.google.inject.internal.InjectorImpl.createJustInTimeBinding(InjectorImpl.java:887)\r\n\tat com.google.inject.internal.InjectorImpl.createJustInTimeBindingRecursive(InjectorImpl.java:808)\r\n\tat com.google.inject.internal.InjectorImpl.getJustInTimeBinding(InjectorImpl.java:285)\r\n\tat com.google.inject.internal.InjectorImpl.getBindingOrThrow(InjectorImpl.java:217)\r\n\tat com.google.inject.internal.SingleFieldInjector.<init>(SingleFieldInjector.java:42)\r\n\tat com.google.inject.internal.MembersInjectorStore.getInjectors(MembersInjectorStore.java:131)\r\n\tat com.google.inject.internal.MembersInjectorStore.createWithListeners(MembersInjectorStore.java:98)\r\n\tat com.google.inject.internal.MembersInjectorStore.access$000(MembersInjectorStore.java:37)\r\n\tat com.google.inject.internal.MembersInjectorStore$1.create(MembersInjectorStore.java:45)\r\n\tat com.google.inject.internal.MembersInjectorStore$1.create(MembersInjectorStore.java:42)\r\n\tat com.google.inject.internal.FailableCache$1.load(FailableCache.java:37)\r\n\tat com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3527)\r\n\tat com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2319)\r\n\tat com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2282)\r\n\tat com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2197)\r\n\t... 378 more{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Restarting Ambari Server Fails Due to Recursive Injection of STOMPUpdatePublisher"
   },
   {
      "_id": "13205774",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-12-20 16:16:42",
      "description": "Optionally execute the post user creation hook on existing users during LDAP sync. \r\n\r\nThe post user creation hook is executed on users when created or imported into Ambari.  This hook is executed given the following criteria is met:\r\n# The post user creation hook is enabled (ambari.properties - {{ambari.post.user.creation.hook.enabled = true}}, default: {{false}})\r\n# The post user creation hook is set and available (ambari.properties - {{ambari.post.user.creation.hook = <path to script>}}, default: {{/var/lib/ambari-server/resources/scripts/post-user-creation-hook.sh}})\r\n# HDFS is installed and running.\r\n\r\nIt is possible to have executed the LDAP sync process before all of the criteria has been met.  Therefore, it would be beneficial to trigger the post user creation hook to be executed on these users when the criteria has been met. \r\n\r\nTo do this, an optional property should be set on the LDAP sync request - {{post_process_existing_users}}.  The {{post_process_existing_users}} property is part of a \"spec\" object and should be set to either \"true\" or \"false\", if set at all.  If set to \"true\", the post user creation hook will be executed on all user's that come back from the LDAP query that also exist in the Ambari database as LDAP users. \r\n\r\nExample REST API calls:\r\n{noformat:title=Sync All Users and Groups}\r\nPOST /api/v1/ldap_sync_events\r\n[\r\n  {\r\n    \"Event\": {\r\n      \"specs\": [\r\n        {\r\n          \"principal_type\": \"users\",\r\n          \"sync_type\": \"all\",\r\n          \"post_process_existing_users\" : \"true\"\r\n        },\r\n        {\r\n          \"principal_type\": \"groups\",\r\n          \"sync_type\": \"all\",\r\n          \"post_process_existing_users\" : \"true\"\r\n        }\r\n      ]\r\n    }\r\n  }\r\n]\r\n{noformat}\r\n\r\n{noformat:title=Sync Specific Users}\r\nPOST /api/v1/ldap_sync_events\r\n[\r\n  {\r\n    \"Event\": {\r\n      \"specs\": [\r\n        {\r\n          \"principal_type\": \"users\",\r\n          \"sync_type\": \"specific\",\r\n          \"names\" : \"user1, user2, user3\",\r\n          \"post_process_existing_users\" : \"true\"\r\n        }\r\n      ]\r\n    }\r\n  }\r\n]\r\n{noformat}\r\n\r\n{noformat:title=Sync Specific Groups}\r\nPOST /api/v1/ldap_sync_events\r\n[\r\n  {\r\n    \"Event\": {\r\n      \"specs\": [\r\n        {\r\n          \"principal_type\": \"groups\",\r\n          \"sync_type\": \"specific\",\r\n          \"names\" : \"hadoop_users, hadoop_admins\",\r\n          \"post_process_existing_users\" : \"true\"\r\n        }\r\n      ]\r\n    }\r\n  }\r\n]\r\n{noformat}\r\n\r\nUsing the Ambari sync-ldap CLI, an optional argument named \"--post-process-existing-users\" may be added to enable this feature.\r\n\r\nExample CLI calls:\r\n{noformat:title=Sync All Users and Groups}\r\nambari-server sync-ldap --all --post-process-existing-users\r\n{noformat}\r\n\r\n{noformat:title=Sync Specific Users}\r\nambari-server sync-ldap --users users.txt --post-process-existing-users\r\n{noformat}\r\n\r\n{noformat:title=Sync Specific Groups}\r\nambari-server sync-ldap --groups groups.txt --post-process-existing-users\r\n{noformat}\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Optionally execute the post user creation hook on existing users during LDAP sync"
   },
   {
      "_id": "13205748",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-12-20 15:01:32",
      "description": "{{AddServiceInfo}} constructor could be improved by the Builder pattern.\r\n\r\nhttps://github.com/apache/ambari/blob/1431ab44887c2ff7f9e94f8fcb42e24e3ce33800/ambari-server/src/main/java/org/apache/ambari/server/topology/addservice/AddServiceInfo.java#L45-L83",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Refactor AddServiceInfo to use a builder"
   },
   {
      "_id": "13205714",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323902",
            "id": "12323902",
            "name": "ambari-admin",
            "description": "Ambari Admin"
         }
      ],
      "created": "2018-12-20 12:45:55",
      "description": "When auth session becomes invalid, nothing happens (instead of redirection to login page)",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari Admin doesn't redirect user to login page if auth session becomes invalidated"
   },
   {
      "_id": "13205373",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-12-19 13:36:37",
      "description": "{code:java}\r\nUncaught TypeError: Cannot convert undefined or null to object\r\n    at Function.keys (<anonymous>)\r\n    at Object.<anonymous> (app.js:17261)\r\n    at fire (vendor.js:1141)\r\n    at Object.fireWith [as resolveWith] (vendor.js:1252)\r\n    at Object.deferred.(:8080/anonymous function) [as resolve] (http://104.196.93.139:8080/javascripts/vendor.js:1341:40)\r\n    at Class.complete (app.js:17012)\r\n    at app.js:206411\r\n{code}\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "JS error after starting stack downgrade"
   },
   {
      "_id": "13205322",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-12-19 09:50:32",
      "description": "Verify that SQL schema creation scripts are valid using different DBs in Docker container.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/2",
         "id": "2",
         "description": "A new feature of the product, which has yet to be developed.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype",
         "name": "New Feature",
         "subtask": false,
         "avatarId": 21141
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Validate SQL schema creation scripts"
   },
   {
      "_id": "13205307",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-12-19 08:35:25",
      "description": "STR:\r\n- Install a simple cluster with ZK using a blueprint.\r\n- Go to the web client and add HDFS as a service.\r\n- You will not be able to progress past the master assignment page after clicking \"Next\"\r\n\r\n{code}\r\napp.js:28589 Uncaught TypeError: App.HostComponent.find(...).toMapByProperty is not a function\r\n    at Class.saveMasterComponentHosts (app.js:28589)\r\n    at Class.newFunc [as saveMasterComponentHosts] (vendor.js:12954)\r\n    at Class.next (app.js:94607)\r\n    at Class.newFunc [as next] (vendor.js:12954)\r\n    at Class.sendRecursively (vendor.js:27675)\r\n    at Class.send (vendor.js:27660)\r\n    at Class._goNextStepIfValid (app.js:42517)\r\n    at Class.newFunc [as _goNextStepIfValid] (vendor.js:12954)\r\n    at Class.showValidationIssuesAcceptBox (app.js:81684)\r\n    at app.js:81665\r\n{code}\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Unable to Add Services Due to toMapByProperty()"
   },
   {
      "_id": "13205121",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-12-18 12:27:13",
      "description": "Update momentum.js version to 2.22.2 due to known vulnerabilities.\r\n\r\nSee https://snyk.io/vuln/npm:Moment.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Update momentum.js version to 2.22.2 due to known vulnerabilities"
   },
   {
      "_id": "13204902",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-12-17 14:24:09",
      "description": "The component dependency now has the type field. If the value of that field is \"exclusive\" the dependent component should never be co-hosted.\r\n{code}\r\n{\r\n  \"href\" : \"http://c7301:8080/api/v1/stacks/HDP/versions/3.0/services/HDFS/components/DATANODE/dependencies/OZONE_DATANODE\",\r\n  \"Dependencies\" : {\r\n    \"component_name\" : \"OZONE_DATANODE\",\r\n    \"conditions\" : [ ],\r\n    \"dependent_component_name\" : \"DATANODE\",\r\n    \"dependent_service_name\" : \"HDFS\",\r\n    \"scope\" : \"host\",\r\n    \"service_name\" : \"OZONE\",\r\n    \"stack_name\" : \"HDP\",\r\n    \"stack_version\" : \"3.0\",\r\n    \"type\" : \"exclusive\"\r\n  }\r\n}{code}\r\nCurrently this dependency causes UI to force dependent component being add on the host\r\n !Screenshot from 2018-11-29 16-10-38.png|thumbnail! ",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "UI logic for component dependencies needs to be modified to use the type field"
   },
   {
      "_id": "13204252",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-12-13 14:36:18",
      "description": "Sensitive Ambari configuration values should be encrypted in the Ambari server DB, if enabled.\r\n\r\nAmbari configuration value types are defined in\u00a0{{org.apache.ambari.server.configuration.AmbariServerConfigurationKey}}. Sensitive properties have property type of\u00a0{{org.apache.ambari.server.configuration.ConfigurationPropertyType#PASSWORD}}.\r\n\r\nUsing this information,\u00a0_if this feature is enabled_, the Ambari server should encrypt sensitive values before storing them in the\u00a0{{ambari_configuration}}\u00a0table in the Ambari DB.\r\n\r\nThe Ambari server should encrypt sensitive configuration values if the following has been met:\r\n * A master key has been setup using the \"ambari-server setup-security\" CLI (using option #2 - Encrypt passwords stored in ambari.properties file)\r\n * The Ambari server configuration property named \"{{security.server.encrypt_sensitive_data}}\" is set to \"true\"\r\n\r\nIf encrypting sensitive data:\r\n * the value should be encrypted using a secure symmetric key encryption algorithm. For example AES -\u00a0[https://aesencryption.net/].\r\n * the encryption key should be the previously set master key, or some reproducible encoding of it.\r\n * the encrypted bytes should be converted to a hex string\r\n * the value should be stored in the relevant field such that the value is declared as encrypted.\r\n ** for example:\r\n{noformat}\r\n\"password\" : \"${enc=aes256_base64, value=5248...303d}\"{noformat}\r\n\r\n ** this is needed in the event\u00a0{{server.security.encrypt_sensitive_data}}\u00a0is changed to false, but there are still encrypted values in the database.\r\n\r\nEncrypted data needs to be decrypted before being used or returned via the REST API. The data may be re-encrypted depending on use.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Sensitive Ambari configuration values should be encrypted in the Ambari server DB, if enabled"
   },
   {
      "_id": "13204219",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-12-13 12:11:00",
      "description": "Following files to cover:\r\napp/views/main/host/details/host_component_view.js\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Cover host component view with unit tests"
   },
   {
      "_id": "13204100",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-12-12 21:11:36",
      "description": "STR:\r\n\r\n# Create cluster via blueprint\r\n# Turn on maintenance mode for some service\r\n# Add host to cluster (scale up)\r\n\r\nResult: components of the service in maintenance mode are not installed (install pending state) on the new host\r\n\r\nPossible workaround: manually install and start such components once the host request is complete",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Scale hosts does not install component if service is in maintenance mode"
   },
   {
      "_id": "13204025",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-12-12 15:25:59",
      "description": "If a repository version is explicitly specified in the cluster creation request (using {{repository_version_id}} or {{repository_version}}), then Ambari should reject the cluster creation request if the blueprint and the VDF stacks are different (eg. HDP 2.6 vs HDP 3.0).  If it allowed deployment, the cluster would run into various errors due to the mismatch (eg. UI glitches, attempting to install the wrong package, etc.)",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Handle blueprint/VDF stack version mismatch"
   },
   {
      "_id": "13203982",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-12-12 12:25:53",
      "description": "Any JSON errors encountered while parsing Add Service request should be reported as HTTP 400 Bad Request.  Currently such errors result in HTTP 500 Server Error.\r\n\r\n{noformat}\r\n<html>\r\n<head>\r\n<meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\"/>\r\n<title>Error 500 Server Error</title>\r\n</head>\r\n<body><h2>HTTP ERROR 500</h2>\r\n<p>Problem accessing /api/v1/clusters/TEST/services. Reason:\r\n<pre>    Server Error</pre></p><h3>Caused by:</h3><pre>java.io.UncheckedIOException: com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize instance of `java.util.HashSet` out of VALUE_STRING token\r\n at [Source: (String)&quot;{  &quot;operation_type&quot;: &quot;ADD_SERVICE&quot;,  &quot;components&quot;: &quot;asdf&quot;}&quot;; line: 1, column: 52] (through reference chain: org.apache.ambari.server.controller.AddServiceRequest[&quot;components&quot;])\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
         "name": "Minor",
         "id": "4"
      },
      "projectname": "AMBARI",
      "summary": "Parse error should be reported as Bad Request"
   },
   {
      "_id": "13203829",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-12-11 21:50:14",
      "description": "Provide ability to disable parts of the validation for the Add Service request, eg. configuration validation and topology validation.  Some parts still need to be validated (eg. it probably makes no sense to add unknown services).",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Allow skipping parts of Add Service request validation"
   },
   {
      "_id": "13203736",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-12-11 14:26:40",
      "description": "STR:\r\n\r\n# Install ZooKeeper\r\n# Try to add Metrics Collector and Metrics Monitor using Add Service request\r\n\r\n{noformat}\r\n{\r\n  \"operation_type\": \"ADD_SERVICE\",\r\n  \"components\": [\r\n    { \"name\": \"METRICS_COLLECTOR\", \"hosts\": [ { \"fqdn\": \"c7401.ambari.apache.org\" } ] },\r\n    { \"name\": \"METRICS_MONITOR\", \"hosts\": [ { \"fqdn\": \"c7401.ambari.apache.org\" } ] }\r\n  ]\r\n}\r\n{noformat}\r\n\r\nResult: Metrics Grafana is also installed.  It is being added by the layout recommendation, which should not be invoked if full layout is explicitly specified in the request (ie. no {{\"services\"}} part is present).",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Layout recommendation adds unwanted components"
   },
   {
      "_id": "13203693",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-12-11 12:06:59",
      "description": "Following files to cover:\r\n* app/controllers/main/service/add_controller.js\r\n* app/controllers/main/service/item.js",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Cover Service controllers with unit tests"
   },
   {
      "_id": "13203657",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-12-11 09:28:19",
      "description": "Change syntax of the Add Service request:\r\n\r\n# allow multiple hosts per component\r\n# simplify {{component_name}} to {{name}} to be more consistent with blueprints\r\n\r\n{noformat}\r\n   \"components\" : [\r\n      {\r\n\t  \"name\" : \"DATANODE\",\r\n          \u201chosts\u201d: [\r\n             { \"fqdn\" : \"c7401.ambari.apache.org\" },\r\n             { \"fqdn\" : \"c7402.ambari.apache.org\" },\r\n             ...\r\n          ]\r\n      },\r\n      {\r\n         \"name\" : \"NODEMANAGER\",\r\n         \u201chosts\u201d: [\r\n             { \"fqdn\" : \"c7401.ambari.apache.org\" },\r\n             { \"fqdn\" : \"c7402.ambari.apache.org\" },\r\n             ...\r\n          ]\r\n      }\r\n  ],\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Add better host-matching syntax to Add Service request"
   },
   {
      "_id": "13203295",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-12-09 18:25:22",
      "description": "Duplicate {{kerberos_descriptor}} name is reported as HTTP 500 Server Error.  It should result in HTTP 409 Conflict.\r\n\r\n{noformat}\r\n$ curl -X POST -d @metrics_descriptor.json \"http://${AMBARI_SERVER}:8080/api/v1/kerberos_descriptors/metrics_descriptor\"\r\nHTTP/1.1 201 Created\r\n$ curl -X POST -d @metrics_descriptor.json \"http://${AMBARI_SERVER}:8080/api/v1/kerberos_descriptors/metrics_descriptor\"\r\nHTTP/1.1 500 Server Error\r\n...\r\n  Detail: Key (kerberos_descriptor_name)=(metrics_descriptor) already exists.\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
         "name": "Minor",
         "id": "4"
      },
      "projectname": "AMBARI",
      "summary": "Duplicate kerberos_descriptor name reported as HTTP 500"
   },
   {
      "_id": "13203121",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-12-07 18:41:39",
      "description": "The question that pops up if {{purge}} is specified prevents installing mpacks without user input.  The default answer is \"no\", which gets automatically selected in {{silent}} mode, causing the installation to be cancelled.\r\n\r\n{noformat:title=ambari-server install-mpack --purge --silent --verbose --mpack=...}\r\n...\r\nCAUTION: You have specified the --purge option with --purge-list=['stack-definitions', 'mpacks']. This will replace all existing stack definitions, management packs currently installed.\r\nAre you absolutely sure you want to perform the purge [yes/no]? (no)\r\nERROR: Exiting with exit code 1.\r\nREASON: Management pack installation cancelled by user\r\n{noformat}\r\n\r\nThe default answer should be \"no\" for regular mode, but \"yes\" for silent mode, to make unattended install possible.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Allow unattended mpack install with purge"
   },
   {
      "_id": "13203054",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-12-07 14:22:19",
      "description": "We should provide a way to our end user to execute\u00a0{{ambari-server setup-ldap}}\u00a0in a non-interactive way (i.e. all answers are provided by command line options).\r\n\r\nThis is not the case when we would like to setup a secure LDAP (SSL is set to true) but we do not want to use a custom trust store. In this case the following question(s) are being asked:\r\n1. Do you want to provide custom TrustStore for Ambari?\r\n2. Optionally: if custom trust store was set previously the tool displays the earlier configuration and asks the following: Do you want to remove these properties?\r\n\r\nSample run:\r\n{code:java}\r\n[root@c7401 ~]# ambari-server setup-ldap --ambari-admin-username=admin --ambari-admin-password=admin --ldap-url=ad-nano.qe.hortonworks.com:636 --ldap-secondary-url=: --ldap-user-class=user --ldap-user-\r\nattr=sAMAccountName --ldap-group-class=group --ldap-group-attr=cn --ldap-member-attr=member --ldap-dn=distinguishedName --ldap-base-dn=CN=Users,DC=hwqe,DC=hortonworks,DC=com --ldap-bind-anonym=false --ldap-manager-dn=cn=manager,cn=Users,dc=hwqe,dc=hortonworks,dc=com --ldap-manager-password=TestUser123 --ldap-referral=follow --ldap-sync-username-collisions-behavior=skip --ldap-force-lowercase-usernames=false --ldap-pagination-enabled=false --ldap-ssl=true --ldap-sync-disable-endpoint-identification=true --ldap-force-setup --ldap-save-settings --ldap-enabled-ambari=true --ldap-manage-services=true --ldap-enabled-services=* --ldap-user-group-member-attr=myMemberOf\r\nUsing python  /usr/bin/python\r\n\r\nFetching LDAP configuration from DB.\r\nPrimary LDAP Host (ad-nano.qe.hortonworks.com): \r\nPrimary LDAP Port (636): \r\nSecondary LDAP Host <Optional>: \r\nSecondary LDAP Port <Optional>: \r\nUse SSL [true/false] (true): \r\nDisable endpoint identification during SSL handshake [true/false] (true): \r\nDo you want to provide custom TrustStore for Ambari [y/n] (y)?n\r\nThe TrustStore is already configured: \r\n  ssl.trustStore.type = jks\r\n  ssl.trustStore.path = /tmp/ambari-server-truststore\r\n  ssl.trustStore.password = keystore\r\nDo you want to remove these properties [y/n] (y)? y\r\nUser object class (user): \r\nUser ID attribute (sAMAccountName): \r\nUser group member attribute (myMemberOf): \r\nGroup object class (group): \r\nGroup name attribute (cn): \r\nGroup member attribute (member): \r\nDistinguished name attribute (distinguishedName): \r\nSearch Base (CN=Users,DC=hwqe,DC=hortonworks,DC=com): \r\nReferral method [follow/ignore] (follow): \r\nBind anonymously [true/false] (false): \r\nBind DN (cn=manager,cn=Users,dc=hwqe,dc=hortonworks,dc=com): \r\nEnter Bind DN Password: \r\nConfirm Bind DN Password: \r\nHandling behavior for username collisions [convert/skip] for LDAP sync (skip): \r\nForce lower-case user names [true/false] (false):\r\nResults from LDAP are paginated when requested [true/false] (false):\r\n====================\r\nReview Settings\r\n====================\r\nPrimary LDAP Host (ad-nano.qe.hortonworks.com):  ad-nano.qe.hortonworks.com\r\nPrimary LDAP Port (636):  636\r\nUse SSL [true/false] (true):  true\r\nUser object class (user):  user\r\nUser ID attribute (sAMAccountName):  sAMAccountName\r\nUser group member attribute (myMemberOf):  myMemberOf\r\nGroup object class (group):  group\r\nGroup name attribute (cn):  cn\r\nGroup member attribute (member):  member\r\nDistinguished name attribute (distinguishedName):  distinguishedName\r\nSearch Base (CN=Users,DC=hwqe,DC=hortonworks,DC=com):  CN=Users,DC=hwqe,DC=hortonworks,DC=com\r\nReferral method [follow/ignore] (follow):  follow\r\nBind anonymously [true/false] (false):  false\r\nHandling behavior for username collisions [convert/skip] for LDAP sync (skip):  skip\r\nForce lower-case user names [true/false] (false): false\r\nResults from LDAP are paginated when requested [true/false] (false): false\r\nambari.ldap.connectivity.bind_dn: cn=manager,cn=Users,dc=hwqe,dc=hortonworks,dc=com\r\nambari.ldap.connectivity.bind_password: *****\r\nambari.ldap.advanced.disable_endpoint_identification: true\r\nambari.ldap.manage_services: true\r\nambari.ldap.enabled_services: *\r\nSaving LDAP properties...\r\nSaving LDAP properties finished\r\nAmbari Server 'setup-ldap' completed successfully.{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "setup-ldap can not be executed non-interactively when using SSL without custom TrustStore"
   },
   {
      "_id": "13202950",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-12-07 02:34:56",
      "description": "Ambari should optionally generate auth-to-local rules for the Kerberos identities of all components of installed services.  \r\n\r\nCurrently Ambari will generate auth-to-local rules for the installed components of installed services.  This is generally the accepted behavior. However, there may be cases where identities from remote clusters (using the same Kerberos realm) need to be translated to local names.  \r\n\r\nA use case may be that some slave component for a service is installed on a remote cluster, but that component is not installed on the local cluster.  However a master component of that service is installed on the local cluster and the slave component from the remote cluster needs to communicate with it. \r\n\r\nThe solution is to add a new property to {{kerberos-env}}, maybe named something like {{include_all_components_in_auth_to_local_rules}}, where the default value is {{false}}.  If set to {{true}}, when building the auth-to-local rules, Ambari should add the rules for all components of installed services, not just the installed components (which is what it does today).  \r\n\r\nThe relevant code to change is in {{org.apache.ambari.server.controller.KerberosHelperImpl#setAuthToLocalRules}}. \r\n\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari should optionally generate auth-to-local rules for the Kerberos identities of all components of installed services"
   },
   {
      "_id": "13202801",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-12-06 13:24:25",
      "description": "Add Service does not work for add-delete-add scenario, because configuration tag is constant {{ADD_SERVICE}}.  It should include some changing part, eg. timestamp suffix.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Set unique configuration version tag"
   },
   {
      "_id": "13202791",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-12-06 12:35:10",
      "description": "The goal of this task is to process the Kerberos descriptor provided in the Add Service request, and merge it with the cluster's existing one.  Only settings for newly added services should be accepted.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Process Kerberos descriptor for Add Service request"
   },
   {
      "_id": "13202787",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-12-06 11:53:50",
      "description": "AMBARI-24988 added support for request-level {{provision_action}}\u00a0to the Add Service request.  The goal of this task is to add support at the host component-level, similar to blueprints.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Support component-level provision_action in Add Service request"
   },
   {
      "_id": "13202756",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-12-06 11:13:08",
      "description": "Component was failing to install due to:\n\n    \n    \n    Caught an exception while executing custom service command: <type 'exceptions.OSError'>: [Errno 2] No such file or directory: '/var/lib/ambari-agent/cred/conf/dp_profiler_agent/dpprofiler-config.jceks'; [Errno 2] No such file or directory: '/var/lib/ambari-agent/cred/conf/dp_profiler_agent/dpprofiler-config.jceks'\r\n    \r\n    Command failed after 1 tries\r\n    \n\nThe reason was an empty password provided in blueprint. However it took lots\nof time to debug this. Since ambari won't show any information regarding\nfailures during cred_store generation.\n\nThe goal is too fail earlier and show output of failed generation command.  \nSo with the patch it looks like this:\n\n    \n    \n    Caught an exception while executing custom service command: <class 'resource_management.core.exceptions.ExecutionFailed'>: Execution of '/usr/lib/jvm/java-openjdk/bin/java -cp '/var/lib/ambari-agent/cred/lib/*' org.apache.hadoop.security.alias.CredentialShell create dpprofiler.spnego.signature.secret -value '[PROTECTED]' -provider jceks://file/var/lib/ambari-agent/cred/conf/dp_profiler_agent/dpprofiler-config.jceks' returned 1. SLF4J: Failed to load class \"org.slf4j.impl.StaticLoggerBinder\".\r\n    SLF4J: Defaulting to no-operation (NOP) logger implementation\r\n    SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\r\n    Dec 06, 2018 11:05:45 AM org.apache.hadoop.util.NativeCodeLoader <clinit>\r\n    WARNING: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable\r\n    java.lang.IllegalArgumentException: Empty key\r\n    \tat javax.crypto.spec.SecretKeySpec.<init>(SecretKeySpec.java:96)\r\n    \tat org.apache.hadoop.security.alias.AbstractJavaKeyStoreProvider.innerSetCredential(AbstractJavaKeyStoreProvider.java:304)\r\n    \tat org.apache.hadoop.security.alias.AbstractJavaKeyStoreProvider.createCredentialEntry(AbstractJavaKeyStoreProvider.java:269)\r\n    \tat org.apache.hadoop.security.alias.CredentialShell$CreateCommand.execute(CredentialShell.java:365)\r\n    \tat org.apache.hadoop.security.alias.CredentialShell.run(CredentialShell.java:68)\r\n    \tat org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:70)\r\n    \tat org.apache.hadoop.security.alias.CredentialShell.main(CredentialShell.java:442); Execution of '/usr/lib/jvm/java-openjdk/bin/java -cp '/var/lib/ambari-agent/cred/lib/*' org.apache.hadoop.security.alias.CredentialShell create dpprofiler.spnego.signature.secret -value '[PROTECTED]' -provider jceks://file/var/lib/ambari-agent/cred/conf/dp_profiler_agent/dpprofiler-config.jceks' returned 1. SLF4J: Failed to load class \"org.slf4j.impl.StaticLoggerBinder\".\r\n    SLF4J: Defaulting to no-operation (NOP) logger implementation\r\n    SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\r\n    Dec 06, 2018 11:05:45 AM org.apache.hadoop.util.NativeCodeLoader <clinit>\r\n    WARNING: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable\r\n    java.lang.IllegalArgumentException: Empty key\r\n    \tat javax.crypto.spec.SecretKeySpec.<init>(SecretKeySpec.java:96)\r\n    \tat org.apache.hadoop.security.alias.AbstractJavaKeyStoreProvider.innerSetCredential(AbstractJavaKeyStoreProvider.java:304)\r\n    \tat org.apache.hadoop.security.alias.AbstractJavaKeyStoreProvider.createCredentialEntry(AbstractJavaKeyStoreProvider.java:269)\r\n    \tat org.apache.hadoop.security.alias.CredentialShell$CreateCommand.execute(CredentialShell.java:365)\r\n    \tat org.apache.hadoop.security.alias.CredentialShell.run(CredentialShell.java:68)\r\n    \tat org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:70)\r\n    \tat org.apache.hadoop.security.alias.CredentialShell.main(CredentialShell.java:442)\r\n    \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari hides information about cred_store generation failures. Resulting in confusing errors at later stages"
   },
   {
      "_id": "13202729",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-12-06 08:56:36",
      "description": "\n    Directory('hadoofs/fs1/ams-hbase-wal', owner='root', group='root', create_parents=True, recursive_ownership=True, cd_access='a')\r\n    \n\nHangs as seen on s3a clusters when one of paths was set to relative by an\naccident.\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Directory/File creation hangs if relative path is supplied with cd_access"
   },
   {
      "_id": "13202670",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-12-06 01:22:57",
      "description": "Starting JPA persistence service sometimes throws IllegalStateException.  \r\n\r\nFor example:\r\n{noformat}\r\nException in thread \"main\" java.lang.IllegalStateException: Persistence service was already initialized.\r\n\tat com.google.common.base.Preconditions.checkState(Preconditions.java:173)\r\n\tat com.google.inject.persist.jpa.JpaPersistService.start(JpaPersistService.java:104)\r\n\tat com.google.inject.persist.jpa.AmbariJpaPersistService.start(AmbariJpaPersistService.java:27)\r\n\tat \r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Starting JPA persistence service sometimes throws IllegalStateException"
   },
   {
      "_id": "13202506",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-12-05 11:29:54",
      "description": "If component XY is provisioned with {{START_ONLY}}, and component X is a prefix of XY, then the provision action is applied to both X and XY.\r\n\r\n{noformat:title=blueprint}\r\n{\r\n  \"host_groups\": [\r\n    {\r\n      \"components\": [\r\n        { \"name\": \"HIVE_SERVER\" },\r\n        { \"name\": \"HIVE_SERVER_INTERACTIVE\", \"provision_action\": \"START_ONLY\" },\r\n...\r\n{noformat}\r\n\r\n{noformat:title=ambari-server.log}\r\nAmbariManagementControllerImpl:3149 - Skipping create of INSTALL task for HIVE_SERVER on c7401.ambari.apache.org.\r\nAmbariManagementControllerImpl:3149 - Skipping create of INSTALL task for HIVE_SERVER_INTERACTIVE on c7401.ambari.apache.org.\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "START_ONLY provision action may be applied to the wrong component"
   },
   {
      "_id": "13202505",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-12-05 11:29:41",
      "description": "Ambari should not allow a user to set configurations in the {{kerberos-env}} and {{krb5-conf}} configuration types within the complex Add Service request.  Generally, setting these configurations on an existing Kerberized cluster could be problematic, since existing services already depend upon the existing configuration to interact with the KDC.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Disallow changing Kerberos-related configs in Add Service request"
   },
   {
      "_id": "13202494",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-12-05 11:17:24",
      "description": "Start/Stop operations should not be shown/should be disabled for HDFS/YARN clients.\r\nBut as of Ambari 2.7, they are visible in Service actions. \r\n\r\nAlso there are multiple other actions which are currently enabled and are not applicable for the clients(listed below). These should be masked in the UI and not be shown to the user. Please clarify , if there is any discrepancy in understanding.\r\n\r\n*HDFS Client :*\r\nManage Journal Nodes\r\nAdd new HDFS Namespace\r\nRebalance HDFS\r\nrestart all\r\n\r\n*YARN Client:*\r\nRefresh YARN Capacity Scheduler.\r\nEnable resourceManager HA\r\nrestart All",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Not supported actions(like Start/Stop) should not be shown for HDFS/YARN clients in WL cluster with externalized HDFS/YARN"
   },
   {
      "_id": "13202253",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-12-04 12:24:11",
      "description": "\n    \r\n    ERROR 2018-12-03 18:08:08,694 ActionQueue.py:198 - Exception while processing EXECUTION_COMMAND command\r\n    Traceback (most recent call last):\r\n      File \"/usr/lib/ambari-agent/lib/ambari_agent/ActionQueue.py\", line 191, in process_command\r\n        self.execute_command(command)\r\n      File \"/usr/lib/ambari-agent/lib/ambari_agent/ActionQueue.py\", line 379, in execute_command\r\n        self.commandStatuses.put_command_status(command, role_result)\r\n      File \"/usr/lib/ambari-agent/lib/ambari_agent/CommandStatusDict.py\", line 77, in put_command_status\r\n        is_sent, correlation_id = self.force_update_to_server({command['clusterId']: [report]})\r\n      File \"/usr/lib/ambari-agent/lib/ambari_agent/CommandStatusDict.py\", line 95, in force_update_to_server\r\n        correlation_id = self.initializer_module.connection.send(message={'clusters':reports_dict}, destination=Constants.COMMANDS_STATUS_REPORTS_ENDPOINT, log_message_function=CommandStatusDict.log_sending)\r\n      File \"/usr/lib/ambari-agent/lib/ambari_agent/security.py\", line 137, in send\r\n        body = json.dumps(message)\r\n      File \"/usr/lib/ambari-agent/lib/ambari_simplejson/__init__.py\", line 230, in dumps\r\n        return _default_encoder.encode(obj)\r\n      File \"/usr/lib/ambari-agent/lib/ambari_simplejson/encoder.py\", line 202, in encode\r\n        chunks = list(chunks)\r\n      File \"/usr/lib/ambari-agent/lib/ambari_simplejson/encoder.py\", line 426, in _iterencode\r\n        for chunk in iterencode_dict(o, current_indent_level):\r\n      File \"/usr/lib/ambari-agent/lib/ambari_simplejson/encoder.py\", line 400, in _iterencode_dict\r\n        for chunk in chunks:\r\n      File \"/usr/lib/ambari-agent/lib/ambari_simplejson/encoder.py\", line 400, in _iterencode_dict\r\n        for chunk in chunks:\r\n      File \"/usr/lib/ambari-agent/lib/ambari_simplejson/encoder.py\", line 323, in _iterencode_list\r\n        for chunk in chunks:\r\n      File \"/usr/lib/ambari-agent/lib/ambari_simplejson/encoder.py\", line 382, in _iterencode_dict\r\n        yield _encoder(value)\r\n      File \"/usr/lib/ambari-agent/lib/ambari_simplejson/encoder.py\", line 48, in py_encode_basestring_ascii\r\n        s = s.decode('utf-8')\r\n      File \"/usr/lib64/python2.7/encodings/utf_8.py\", line 16, in decode\r\n        return codecs.utf_8_decode(input, errors, True)\r\n    UnicodeDecodeError: 'utf8' codec can't decode byte 0xea in position 90211: invalid continuation byte\r\n    \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Commands timeout if stdout has non-unicode symbols."
   },
   {
      "_id": "13202245",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-12-04 11:44:29",
      "description": "Knox proxy sometimes modifies service config version request during transferring.\r\nI extended logging on the ambari server to track actual requests. \r\nDirect API request:\r\n{noformat}\r\nhttps://172.27.16.232:8443/api/v1/clusters/cl1/configurations/service_config_versions?\r\nservice_name=HBASE&service_config_version.in(12)%7C\r\nservice_name.in(ATLAS,YARN,RANGER,HIVE,HDFS,MAPREDUCE2,SPARK2,TEZ,DRUID,ZOOKEEPER,AMBARI_METRICS,KAFKA,RANGER_KMS)&is_current=true&_=1542046206583\r\n{noformat}\r\nVia Knox:\r\n{noformat}\r\nhttps://ctr-e138-1518143905142-579999-01-000002.hwx.site/api/v1/clusters/cl1/configurations/service_config_versions?\r\nservice_name=HBASE&is_current=true&service_config_version.in(12)%7C\r\nservice_name.in(ATLAS,YARN,RANGER,HIVE,HDFS,MAPREDUCE2,SPARK2,TEZ,DRUID,ZOOKEEPER,AMBARI_METRICS,KAFKA,RANGER_KMS)&_=1542046206583\r\n{noformat}\r\n\r\nIn both cases same request was used on client side:\r\n{noformat}\r\n/api/v1/clusters/cl1/configurations/service_config_versions?\r\nservice_name=HBASE&service_config_version.in(12)|\r\nservice_name.in(ATLAS,YARN,RANGER,HIVE,HDFS,MAPREDUCE2,SPARK2,TEZ,DRUID,ZOOKEEPER,AMBARI_METRICS,KAFKA,RANGER_KMS)&is_current=true&_=1542046206583\r\n{noformat}\r\n\r\nAs we can see Knox proxy reordered request parameters (is_current=true was moved) and completely changed request logic.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Knox: Reorder of query parameters breaks Ambari logic for retrieving configs"
   },
   {
      "_id": "13202203",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-12-04 08:56:37",
      "description": "Support {{provision_action}} in complex Add Service request, similarly to blueprints.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Support provision_action in complex Add Service request"
   },
   {
      "_id": "13201939",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-12-03 09:27:41",
      "description": "Use Ambari CLI to enable and disable trusted proxy support in Ambari.\r\n\r\nInformation needed to be collected:\r\n * Enable/Disable trusted proxy support\r\n ** {{ambari.tproxy.authentication.enabled}}\u00a0: \"true\"|\"false\"\r\n * Trusted proxy user (the authenticated user allowed to declare a proxied user) details - One or more may be specified\r\n ** hosts from which the proxy user can connect\r\n *** {{ambari.tproxy.proxyuser.PROXY_USER.hosts}}\u00a0: * or a comma-delimited list of hostname, ip address, CIDR Notation (intermixed is ok)\r\n ** users allowed to be specified as proxied users by the proxy user\r\n *** {{ambari.tproxy.proxyuser.PROXY_USER.users}}\u00a0: *, or a comma-delimited list of usernames\r\n ** group for which users to be proxied are members\r\n *** {{ambari.tproxy.proxyuser.PROXY_USER.groups}}\u00a0: *, or a comma-delimited list of group names\r\n\r\n{noformat}\r\n[root@c7402 ~]# ambari-server  setup-trusted-proxy\r\nUsing python  /usr/bin/python\r\nEnter Ambari Admin login: admin\r\nEnter Ambari Admin password:\r\n\r\nFetching Trusted Proxy configuration from DB.\r\nTrusted Proxy support is currently disabled\r\nDo you want to configure Trusted Proxy support [y/n] (y)?  y\r\nThe proxy user's (local) username? knox  \r\nAllowed hosts for knox (*)? knox.ambari.apache.org\r\nAllowed users for knox (*)? *\r\nAllowed groups for knox (*)? users\r\nAdd another proxy user [y/n]?  y\r\nThe proxy user's (local) username? admin  \r\nAllowed hosts for admin (*)? 192.168.74.0/24 \r\nAllowed users for admin (*)? tom, sam, admin\r\nAllowed groups for admin (*)? admin_users\r\nAdd another proxy user [y/n]?  n\r\nSave settings [y/n] (y)? y\r\nSaving Trusted Proxy configuration...\r\nSaving Trusted Proxy configuration finished\r\nAmbari Server ' setup-trusted-proxy' completed successfully.\r\n{noformat}\r\nThe REST API calls to get and set the trusted proxy configurations are\r\n{noformat:title=GET request}\r\nGET /api/v1/services/AMBARI/components/AMBARI_SERVER/configurations/tproxy-configuration\r\n{noformat}\r\n{noformat:title=GET example response}\r\n{\r\n  \"href\" : \"http://c7401.ambari.apache.org:8080/api/v1/services/AMBARI/components/AMBARI_SERVER/configurations/tproxy-configuration\",\r\n  \"Configuration\" : {\r\n    \"category\" : \"tproxy-configuration\",\r\n    \"component_name\" : \"AMBARI_SERVER\",\r\n    \"service_name\" : \"AMBARI\",\r\n    \"properties\" : {\r\n      \"ambari.tproxy.authentication.enabled\" : \"true\",\r\n      \"ambari.tproxy.proxyuser.admin.groups\" : \"admin_users\",\r\n      \"ambari.tproxy.proxyuser.admin.hosts\" : \"192.168.74.0/24\",\r\n      \"ambari.tproxy.proxyuser.admin.users\" : \"sam, tom, admin\",\r\n      \"ambari.tproxy.proxyuser.knox.groups\" : \"users\",\r\n      \"ambari.tproxy.proxyuser.knox.hosts\" : \"c7401.ambari.apache.org\",\r\n      \"ambari.tproxy.proxyuser.knox.users\" : \"*\"\r\n    },\r\n    \"property_types\" : {\r\n      \"ambari.tproxy.authentication.enabled\" : \"PLAINTEXT\",\r\n      \"ambari.tproxy.proxyuser.admin.groups\" : \"PLAINTEXT\",\r\n      \"ambari.tproxy.proxyuser.admin.hosts\" : \"PLAINTEXT\",\r\n      \"ambari.tproxy.proxyuser.admin.users\" : \"PLAINTEXT\",\r\n      \"ambari.tproxy.proxyuser.knox.groups\" : \"PLAINTEXT\",\r\n      \"ambari.tproxy.proxyuser.knox.hosts\" : \"PLAINTEXT\",\r\n      \"ambari.tproxy.proxyuser.knox.users\" : \"PLAINTEXT\"\r\n    }\r\n  }\r\n}\r\n{noformat}\r\n{noformat:title=POST request}\r\nPOST /api/v1/services/AMBARI/components/AMBARI_SERVER/configurations\r\n{\r\n  \"Configuration\": {    \r\n    \"category\" : \"tproxy-configuration\",\r\n    \"properties\": {\r\n      \"ambari.tproxy.authentication.enabled\" : \"true\",\r\n      \"ambari.tproxy.proxyuser.knox.hosts\": \"c7401.ambari.apache.org\",\r\n      \"ambari.tproxy.proxyuser.knox.users\": \"*\",\r\n      \"ambari.tproxy.proxyuser.knox.groups\": \"users\",\r\n      \"ambari.tproxy.proxyuser.admin.hosts\": \"192.168.74.0/24\",\r\n      \"ambari.tproxy.proxyuser.admin.users\": \"sam, tom, admin\",\r\n      \"ambari.tproxy.proxyuser.admin.groups\": \"admin_users\"\r\n    }\r\n  }\r\n}{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Use Ambari CLI to enable and disable trusted proxy support in Ambari"
   },
   {
      "_id": "13201894",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-12-02 21:29:38",
      "description": "Handle requests from a configured trusted proxy to identify a proxied user using Kerberos.\r\n\r\nUpon receiving a request where that caller is identified using Kerberos, check to see of the request was from a (trusted) proxy.  If so, validate the trusted proxy and set the authenticated user to the proxied user specified in the \"{{doAs}}\" query parameter. \r\n\r\nAfter receiving a request where the user is to be authenticated using Kerberos, perform the following steps:\r\n# Determine if a proxied user is specified using a \"{{doAs}}\" query parameter.  \r\n# Using the following Ambari configuration property, determine if a proxied user can be specified from the requesting host:\r\n** {{ambari.tproxy.proxyuser.$username.hosts}}, where $username is the username of the authenticated user (not the user specified in the doAs query parameter)\r\n# Obtain the proxied username from the {{doAs}} query parameter\r\n# Using the following Ambari configuration property, determine if the proxied user can be specified based on the user's username:\r\n** {{ambari.tproxy.proxyuser.$username.users}}, where $username is the username of the authenticated user \r\n# Using the following Ambari configuration property, determine if the proxied user can be specified based on the groups the proxied user belong to:\r\n** {{ambari.tproxy.proxyuser.$username.groups}}, where $username is the username of the authenticated user t",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available",
         "tproxy"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Handle requests from a configured trusted proxy to identify a proxied user using Kerberos"
   },
   {
      "_id": "13201811",
      "assignee": "adoroszlai",
      "components": [],
      "created": "2018-12-01 19:39:33",
      "description": "AMBARI-24632 addressed package existence check for system packages.  However, it may still not work correctly for packages with longer names, depending on the environment:\r\n\r\n{noformat}\r\noutput-2.txt:2018-12-01 19:33:54,576 - Installing package unzip ('/usr/bin/apt-get -o Dpkg::Options::=--force-confdef --allow-unauthenticated --assume-yes install unzip')\r\noutput-2.txt:2018-12-01 19:34:02,873 - Installing package hdp-select ('/usr/bin/apt-get -o Dpkg::Options::=--force-confdef --allow-unauthenticated --assume-yes install hdp-select')\r\noutput-2.txt:2018-12-01 19:34:05,443 - Installing package zookeeper-3-0-1-0-187 ('/usr/bin/apt-get -o Dpkg::Options::=--force-confdef --allow-unauthenticated --assume-yes install zookeeper-3-0-1-0-187')\r\noutput-2.txt:2018-12-01 19:34:08,832 - Installing package zookeeper-3-0-1-0-187-server ('/usr/bin/apt-get -o Dpkg::Options::=--force-confdef --allow-unauthenticated --assume-yes install zookeeper-3-0-1-0-187-server')\r\noutput-3.txt:2018-12-01 19:34:14,450 - Installing package zookeeper-3-0-1-0-187 ('/usr/bin/apt-get -o Dpkg::Options::=--force-confdef --allow-unauthenticated --assume-yes install zookeeper-3-0-1-0-187')\r\noutput-3.txt:2018-12-01 19:34:16,253 - Installing package zookeeper-3-0-1-0-187-server ('/usr/bin/apt-get -o Dpkg::Options::=--force-confdef --allow-unauthenticated --assume-yes install zookeeper-3-0-1-0-187-server')\r\n{noformat}\r\n\r\nThis was reproduced with non-root agent user.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
         "name": "Minor",
         "id": "4"
      },
      "projectname": "AMBARI",
      "summary": "APT/DPKG existence check broken for packages with long names"
   },
   {
      "_id": "13201805",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         }
      ],
      "created": "2018-12-01 16:53:00",
      "description": "During startup, JournalNode reads config files that belong to YARN, not HDFS (eg. {{yarn-site.xml}}), if they are present in the Hadoop config dir.\r\n\r\nAmbari's {{File()}} provider creates files at the final location, then sets metadata (ownership and permissions).  This makes the file visible to other processes with possibly the wrong metadata.\r\n\r\nIf agent-side parallel execution is enabled, JournalNode may be started concurrently with some YARN component.  JournalNode may encounter a config file that it cannot read, because the file's permissions and owner are still 640 and root, respectively, which causes it to shutdown:\r\n\r\n{noformat}\r\nERROR conf.Configuration (Configuration.java:loadResource(2999)) - error parsing conf yarn-site.xml\r\njava.io.FileNotFoundException: /etc/hadoop/conf/yarn-site.xml (Permission denied)\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "JournalNode may fail to start due to unreadable config file"
   },
   {
      "_id": "13201661",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-11-30 16:04:56",
      "description": "We need to update spring to 5.x version and use message order preserving option.\r\n[https://docs.spring.io/spring/docs/5.1.0.BUILD-SNAPSHOT/spring-framework-reference/web.html#websocket-stomp-ordered-messages]",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Improve message order preserving"
   },
   {
      "_id": "13201652",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-11-30 15:23:18",
      "description": "Dashboard doesn't load, spinner keeps spinning infinitely due to incorrect work of App.get('isHaEnabled') property in a cluster which has only HDFS_CLIENT from HDFS service.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Loading on Dashboard stuck"
   },
   {
      "_id": "13201378",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-11-29 16:08:02",
      "description": "Task Log in Background Operations popup is sometimes not refreshed after the operation completes. The log may be completely empty or may just show a previous 10-line snippet. The breadcrumb at the top is updated with the status, though. Navigating back and forth in the popup fixes it.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Sometimes Task Log is not refreshed in UI after operation completes"
   },
   {
      "_id": "13201324",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-11-29 11:51:37",
      "description": "Improve request validation for Add Service request (eg. reject request to add existing service).",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Improve Add Service request validation"
   },
   {
      "_id": "13201259",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-11-29 07:02:24",
      "description": "Document enabling LDAP configuration management in\u00a0{{.../ambari-server/docs/security/ldap}}\r\n\r\nThe document should be similar to\u00a0[https://github.com/apache/ambari/blob/trunk/ambari-server/docs/security/sso/index.md].",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/20",
         "id": "20",
         "description": "Documentation or Website",
         "iconUrl": "https://issues.apache.org/jira/images/icons/issuetypes/documentation.png",
         "name": "Documentation",
         "subtask": false
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Document enabling LDAP configuration management"
   },
   {
      "_id": "13201189",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-11-28 20:41:28",
      "description": "Start Namenode failing during Move master NN wizard.\r\n\r\nFrom NN logs:\r\n\r\n{code:java}\r\n2018-11-21 19:43:57,126 WARN Encountered exception loading fsimage java.io.IOException: NameNode is not formatted. at org.apache.hadoop.hdfs.server.namenode.FSImage.recoverTransitionRead(FSImage.java:237) at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.loadFSImage(FSNamesystem.java:1090) at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.loadFromDisk(FSNamesystem.java:714) at org.apache.hadoop.hdfs.server.namenode.NameNode.loadNamesystem(NameNode.java:632) at org.apache.hadoop.hdfs.server.namenode.NameNode.initialize(NameNode.java:694) at org.apache.hadoop.hdfs.server.namenode.NameNode.<init>(NameNode.java:937) at org.apache.hadoop.hdfs.server.namenode.NameNode.<init>(NameNode.java:910) at org.apache.hadoop.hdfs.server.namenode.NameNode.createNameNode(NameNode.java:1643) at org.apache.hadoop.hdfs.server.namenode.NameNode.main(NameNode.java:1710)\r\n2018-11-21 19:43:57,131 INFO Stopped o.e.j.w.WebAppContext@58359ebd{/,null,UNAVAILABLE}{/hdfs}\r\n2018-11-21 19:43:57,135 INFO Stopped ServerConnector@75e91545{HTTP/1.1,[http/1.1]}{ctr-e139-1542663976389-4877-02-000004.hwx.site:50070}\r\n2018-11-21 19:43:57,136 INFO Stopped o.e.j.s.ServletContextHandler@2f4205be{/static,file:///usr/hdp/3.1.0.0-13/hadoop-hdfs/webapps/static/,UNAVAILABLE}\r\n2018-11-21 19:43:57,136 INFO Stopped o.e.j.s.ServletContextHandler@319bc845{/logs,file:///grid/0/log/hdfs/cstm-hdfs/,UNAVAILABLE}\r\n2018-11-21 19:43:57,138 INFO Stopping NameNode metrics system...\r\n2018-11-21 19:43:57,139 INFO timeline thread interrupted.\r\n2018-11-21 19:43:57,140 INFO NameNode metrics system stopped.\r\n2018-11-21 19:43:57,141 INFO NameNode metrics system shutdown complete.\r\n2018-11-21 19:43:57,141 ERROR Failed to start namenode. java.io.IOException: NameNode is not formatted. at org.apache.hadoop.hdfs.server.namenode.FSImage.recoverTransitionRead(FSImage.java:237) at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.loadFSImage(FSNamesystem.java:1090) at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.loadFromDisk(FSNamesystem.java:714) at org.apache.hadoop.hdfs.server.namenode.NameNode.loadNamesystem(NameNode.java:632) at org.apache.hadoop.hdfs.server.namenode.NameNode.initialize(NameNode.java:694) at org.apache.hadoop.hdfs.server.namenode.NameNode.<init>(NameNode.java:937) at org.apache.hadoop.hdfs.server.namenode.NameNode.<init>(NameNode.java:910) at org.apache.hadoop.hdfs.server.namenode.NameNode.createNameNode(NameNode.java:1643) at org.apache.hadoop.hdfs.server.namenode.NameNode.main(NameNode.java:1710)\r\n2018-11-21 19:43:57,143 INFO No live collector to send metrics to. Metrics to be sent will be discarded. This message will be skipped for the next 20 times.\r\n2018-11-21 19:43:57,143 INFO Exiting with status 1: java.io.IOException: NameNode is not formatted.\r\n2018-11-21 19:43:57,145 INFO SHUTDOWN_MSG: /************************************************************ SHUTDOWN_MSG: Shutting down NameNode at ctr-e139-1542663976389-4877-02-000004.hwx.site/172.27.25.135 ************************************************************/\r\n{code}\r\n\r\nAmbari task logs\r\n\r\n{code:java}\r\n2018-11-22 03:31:30,588 - The NameNode is still in Safemode. Please be careful with commands that need Safemode OFF.\r\nTraceback (most recent call last):\r\n  File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/HDFS/package/scripts/namenode.py\", line 408, in <module>\r\n    NameNode().execute()\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 352, in execute\r\n    method(env)\r\n  File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/HDFS/package/scripts/namenode.py\", line 138, in start\r\n    upgrade_suspended=params.upgrade_suspended, env=env)\r\n  File \"/usr/lib/ambari-agent/lib/ambari_commons/os_family_impl.py\", line 89, in thunk\r\n    return fn(*args, **kwargs)\r\n  File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/HDFS/package/scripts/hdfs_namenode.py\", line 264, in namenode\r\n    create_hdfs_directories(name_service)\r\n  File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/HDFS/package/scripts/hdfs_namenode.py\", line 336, in create_hdfs_directories\r\n    nameservices=name_services\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/base.py\", line 166, in __init__\r\n    self.env.run()\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/environment.py\", line 160, in run\r\n    self.run_action(resource, action)\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/environment.py\", line 124, in run_action\r\n    provider_action()\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 677, in action_create_on_execute\r\n    self.action_delayed(\"create\")\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 674, in action_delayed\r\n    self.get_hdfs_resource_executor().action_delayed(action_name, self)\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 373, in action_delayed\r\n    self.action_delayed_for_nameservice(None, action_name, main_resource)\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 395, in action_delayed_for_nameservice\r\n    self._assert_valid()\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 334, in _assert_valid\r\n    self.target_status = self._get_file_status(target)\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 497, in _get_file_status\r\n    list_status = self.util.run_command(target, 'GETFILESTATUS', method='GET', ignore_status_codes=['404'], assertable_result=False)\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 214, in run_command\r\n    return self._run_command(*args, **kwargs)\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 282, in _run_command\r\n    _, out, err = get_user_call_output(cmd, user=self.run_user, logoutput=self.logoutput, quiet=False)\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/functions/get_user_call_output.py\", line 62, in get_user_call_output\r\n    raise ExecutionFailed(err_msg, code, files_output[0], files_output[1])\r\nresource_management.core.exceptions.ExecutionFailed: Execution of 'curl -sS -L -w '%{http_code}' -X GET -d '' -H 'Content-Length: 0' --negotiate -u : 'http://ctr-e139-1542663976389-4877-02-000004.hwx.site:50070/webhdfs/v1/tmp?op=GETFILESTATUS' 1>/tmp/tmpC3TR3n 2>/tmp/tmpTlrH_1' returned 7. curl: (7) Failed to connect to ctr-e139-1542663976389-4877-02-000004.hwx.site port 50070: Connection refused\r\n000\r\n{code}\r\n\r\nCustomized service users and ambari agent user is enabled in the test.\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Start Namenode failing during Move master NN wizard on non-HA cluster with custom hdfs service user"
   },
   {
      "_id": "13201082",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-11-28 12:30:42",
      "description": "# [^HDFS_client_installed.png] does not list number of HDFS clients installed\r\n# Other data in summary panel fetched from ambari metrics api should be made hidden (like Disk usage etc)\r\n# Same needs to be done for Yarn client service\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Summary panel should not have any information if only client component is installed in a cluster"
   },
   {
      "_id": "13200888",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-11-27 15:56:38",
      "description": "The Ambari kerberos wizard for Existing FreeIPA displays a warning about setting up a password policy without expiration for the kerberos principals.\r\n\r\nAs these (user and service) principals are not created with a password, the password expiration policy does not apply to them. I verified this by maintaining a cluster by maintaining a kerberized cluster for 120+ days, where the password for my ldapbind (and other accounts that do have passwords) expired in 90 days per default policy, without any impact to my kerberos principals or cluster operations.\r\n\r\nUnless we've seen contradictory information, let's please remove this warning from the wizard to avoid confusing users on what is needed here.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
         "name": "Minor",
         "id": "4"
      },
      "projectname": "AMBARI",
      "summary": "Remove warning about requirement for IPA password policy without expiration in Ambari kerberos wizard"
   },
   {
      "_id": "13200655",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-11-26 19:15:58",
      "description": "Create Tproxy configuration provider and supporting infrastructure.\r\n\r\nAlso create a common configuration provider infrastructure for Ambari Server Configuration data. \r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Create Tproxy configuration provider and supporting infrastructure"
   },
   {
      "_id": "13200605",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-11-26 15:40:17",
      "description": "App.Service.find('AMBARI_INFRA_SOLR').get('installedClients') = null,\r\nShould return number of installed clients.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Counter installedClients for AMBARI_INFRA_SOLR is null"
   },
   {
      "_id": "13200517",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-11-26 10:02:26",
      "description": "Use Ambari CLI to specify which services should be setup for LDAP integration.\r\n{noformat:title=Example}\r\n[root@c7402 ~]# ambari-server setup-ldap\r\nUsing python  /usr/bin/python\r\nCurrently 'no auth method' is configured, do you wish to use LDAP instead [y/n] (y)? y\r\nEnter Ambari Admin login: admin\r\nEnter Ambari Admin password:\r\n\r\nFetching LDAP configuration from DB. No configuration.\r\nPlease select the type of LDAP you want to use [AD/IPA/Generic](Generic):\r\nPrimary LDAP Host (ldap.ambari.apache.org): c7401.ambari.apache.org\r\nPrimary LDAP Port (389):\r\nSecondary LDAP Host <Optional>:\r\nSecondary LDAP Port <Optional>:\r\nUse SSL [true/false] (false):\r\nUser object class (posixUser):\r\nUser ID attribute (uid):\r\nUser group member attribute (memberOf): \r\nGroup object class (posixGroup):\r\nGroup name attribute (cn):\r\nGroup member attribute (memberUid):\r\nDistinguished name attribute (dn):\r\nSearch Base (dc=ambari,dc=apache,dc=org):\r\nReferral method [follow/ignore] (follow):\r\nBind anonymously [true/false] (false):\r\nBind DN (uid=ldapbind,cn=users,dc=ambari,dc=apache,dc=org): uid=admin,cn=users,dc=ambari,dc=apache,dc=org\r\nEnter Bind DN Password:\r\nConfirm Bind DN Password:\r\nHandling behavior for username collisions [convert/skip] for LDAP sync (skip):\r\nForce lower-case user names [true/false]:true\r\nResults from LDAP are paginated when requested [true/false]:true\r\nUse LDAP authentication for Ambari [y/n] (n)?\r\nManage LDAP configurations for eligible services [y/n] (n)? y\r\n Manage LDAP for all services [y/n] (n)?\r\n    Manage LDAP for HDFS [y/n] (y)? y\r\n    Manage LDAP for YARN [y/n] (y)? y\r\n    ...\r\nSave settings [y/n] (y)? y\r\nSaving LDAP properties...\r\nSaving LDAP properties finished\r\nAmbari Server 'setup-ldap' completed successfully.\r\n{noformat}\r\nNOTE: this will require obtaining an Ambari administrator username and password to GET, PUT, and POST to the Ambari REST API.\r\n\r\nNote: \"User group member attribute (memberOf)\" is to be added to populate the existing\u00a0{{ambari.ldap.attributes.user.group_member_attr}}\u00a0Ambari configuration property (See\u00a0{{org.apache.ambari.server.configuration.AmbariServerConfigurationKey#USER_GROUP_MEMBER_ATTRIBUTE}})",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Use Ambari CLI to specify which services should be setup for LDAP integration"
   },
   {
      "_id": "13200285",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-11-23 16:18:51",
      "description": "Success/failure of test cases in {{ExecutionCommandWrapperTest}} depends on the execution order.  The two interdependent tests are {{testExecutionCommandNoRepositoryFile}} and {{testGetExecutionCommand}}, executing the former first makes the latter fail.\r\n\r\n{noformat:title=order 1}\r\n  @Test\r\n  public void testExecutionCommandNoRepositoryFile_first() throws Exception {\r\n    testExecutionCommandNoRepositoryFile();\r\n    testGetExecutionCommand();\r\n  }\r\n{noformat}\r\n\r\n{noformat:title=result 1}\r\n[INFO] Running org.apache.ambari.server.actionmanager.ExecutionCommandWrapperTest\r\n[ERROR] Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 11.002 s <<< FAILURE! - in org.apache.ambari.server.actionmanager.ExecutionCommandWrapperTest\r\n[ERROR] testExecutionCommandNoRepositoryFile_first(org.apache.ambari.server.actionmanager.ExecutionCommandWrapperTest)  Time elapsed: 0.031 s  <<< FAILURE!\r\njava.lang.AssertionError\r\n\tat org.apache.ambari.server.actionmanager.ExecutionCommandWrapperTest.testGetExecutionCommand(ExecutionCommandWrapperTest.java:202)\r\n\tat org.apache.ambari.server.actionmanager.ExecutionCommandWrapperTest.testExecutionCommandNoRepositoryFile_first(ExecutionCommandWrapperTest.java:320)\r\n{noformat}\r\n\r\n{noformat:title=order 2}\r\n  @Test\r\n  public void testGetExecutionCommand_first() throws Exception {\r\n    testGetExecutionCommand();\r\n    testExecutionCommandNoRepositoryFile();\r\n  }\r\n{noformat}\r\n\r\n{noformat:title=result 2}\r\n[INFO] Running org.apache.ambari.server.actionmanager.ExecutionCommandWrapperTest\r\n[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 11.304 s - in org.apache.ambari.server.actionmanager.ExecutionCommandWrapperTest\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Test ordering issue in ExecutionCommandWrapperTest"
   },
   {
      "_id": "13200186",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-11-23 06:28:49",
      "description": "Support adding services using the complex Add Service request in clusters that have Kerberos enabled.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Support for complex Add Service request in secure cluster"
   },
   {
      "_id": "13200038",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-11-22 10:38:38",
      "description": "The previous clusters had webhdfs disabled as a workaround.\n\nWith webHDFS turned back on, dir creation continues to fail.\n\n    \n    \n    \r\n    Traceback (most recent call last):\r\n      File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/AMBARI_METRICS/package/scripts/metrics_collector.py\", line 90, in <module>\r\n        AmsCollector().execute()\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 345, in execute\r\n        method(env)\r\n      File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/AMBARI_METRICS/package/scripts/metrics_collector.py\", line 48, in start\r\n        self.configure(env, action = 'start') # for security\r\n      File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/AMBARI_METRICS/package/scripts/metrics_collector.py\", line 43, in configure\r\n        hbase('master', action)\r\n      File \"/usr/lib/ambari-agent/lib/ambari_commons/os_family_impl.py\", line 89, in thunk\r\n        return fn(*args, **kwargs)\r\n      File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/AMBARI_METRICS/package/scripts/hbase.py\", line 228, in hbase\r\n        dfs_type=params.dfs_type\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/base.py\", line 166, in __init__\r\n        self.env.run()\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/environment.py\", line 160, in run\r\n        self.run_action(resource, action)\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/environment.py\", line 124, in run_action\r\n        provider_action()\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 712, in action_create_on_execute\r\n        self.action_delayed(\"create\")\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 709, in action_delayed\r\n        self.get_hdfs_resource_executor().action_delayed(action_name, self)\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 385, in action_delayed\r\n        self.action_delayed_for_nameservice(None, action_name, main_resource)\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 407, in action_delayed_for_nameservice\r\n        self._assert_valid()\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 346, in _assert_valid\r\n        self.target_status = self._get_file_status(target)\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 509, in _get_file_status\r\n        list_status = self.util.run_command(target, 'GETFILESTATUS', method='GET', ignore_status_codes=['404'], assertable_result=False)\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 226, in run_command\r\n        return self._run_command(*args, **kwargs)\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 294, in _run_command\r\n        _, out, err = get_user_call_output(cmd, user=self.run_user, logoutput=self.logoutput, quiet=False)\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/libraries/functions/get_user_call_output.py\", line 62, in get_user_call_output\r\n        raise ExecutionFailed(err_msg, code, files_output[0], files_output[1])\r\n    resource_management.core.exceptions.ExecutionFailed: Execution of 'curl -sS -L -w '%{http_code}' -X GET -d '' -H 'Content-Length: 0' 'http://fakelocalhost:50070/webhdfs/v1s3a:/cloudhdp-dl-s3-2/c01/amshbase?op=GETFILESTATUS&user.name=hdfs' 1>/tmp/tmpsSkYRy 2>/tmp/tmpYQM8tv' returned 6. curl: (6) Could not resolve host: fakelocalhost; Unknown error\r\n    000\r\n    \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Dir creation fails if webhdfs is enabled"
   },
   {
      "_id": "13199817",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-11-21 12:07:55",
      "description": "Cluster creation via blueprint accepts configuration in the following format, where the {{\"properties\"}} level is omitted:\r\n\r\n{noformat}\r\n  \"configurations\": [\r\n    {\r\n      \"cluster-env\": {\r\n        \"custom-property\": \"whatever\"\r\n      }\r\n    },\r\n    {\r\n      \"zoo.cfg\": {\r\n        \"syncLimit\": \"7\"\r\n      }\r\n    },\r\n...\r\n{noformat}\r\n\r\n\"Add Service\" request should accept the same format, too, but currently it results in:\r\n\r\n{noformat}\r\n<h3>Caused by:</h3><pre>java.lang.IllegalArgumentException: Invalid fields in cluster-env configuration: [custom-property]\r\n\tat com.google.common.base.Preconditions.checkArgument(Preconditions.java:145)\r\n\tat org.apache.ambari.server.topology.ConfigurableHelper.lambda$parseConfigs$1(ConfigurableHelper.java:102)\r\n\tat java.util.ArrayList.forEach(ArrayList.java:1249)\r\n\tat org.apache.ambari.server.topology.ConfigurableHelper.parseConfigs(ConfigurableHelper.java:88)\r\n\tat org.apache.ambari.server.controller.AddServiceRequest.&lt;init&gt;(AddServiceRequest.java:88)\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n\tat com.fasterxml.jackson.databind.introspect.AnnotatedConstructor.call(AnnotatedConstructor.java:124)\r\n\tat com.fasterxml.jackson.databind.deser.std.StdValueInstantiator.createFromObjectWith(StdValueInstantiator.java:283)\r\n\tat com.fasterxml.jackson.databind.deser.ValueInstantiator.createFromObjectWith(ValueInstantiator.java:229)\r\n\tat com.fasterxml.jackson.databind.deser.impl.PropertyBasedCreator.build(PropertyBasedCreator.java:195)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeUsingPropertyBased(BeanDeserializer.java:488)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromObjectUsingNonDefault(BeanDeserializerBase.java:1280)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:326)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:159)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4001)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:2992)\r\n\tat org.apache.ambari.server.controller.AddServiceRequest.of(AddServiceRequest.java:115)\r\n\tat org.apache.ambari.server.controller.internal.ServiceResourceProvider.createAddServiceRequest(ServiceResourceProvider.java:1242)\r\n\tat org.apache.ambari.server.controller.internal.ServiceResourceProvider.processAddServiceRequest(ServiceResourceProvider.java:1232)\r\n\tat org.apache.ambari.server.controller.internal.ServiceResourceProvider.createResourcesAuthorized(ServiceResourceProvider.java:257)\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Accept legacy JSON configuration in Add Service request"
   },
   {
      "_id": "13199678",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-11-20 19:35:23",
      "description": "Here org/apache/ambari/server/controller/metrics/MetricsCollectorHAManager.java:80\r\nthe second return statement is inside a loop without any condition. That breaks an execution flow\r\n{code:java}\r\n    if (externalMetricCollectorsState.containsKey(clusterName)) {\r\n      for (String externalCollectorHost : externalMetricCollectorsState.get(clusterName).keySet()) {\r\n        if (externalMetricCollectorsState.get(clusterName).get(externalCollectorHost)) {\r\n          return externalCollectorHost;\r\n        }\r\n        return refreshAndReturnRandomExternalCollectorHost(clusterName);\r\n      }\r\n    }{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Bug at MetricsCollectorHAManager class"
   },
   {
      "_id": "13199620",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-11-20 15:05:19",
      "description": "Recommendation configs request was failed with following issue:\r\n{code:java}\r\nRequest body is not correct, error: org.apache.ambari.server.api.services.stackadvisor.recommendations.RecommendationResponse$ConfigGroup cannot be cast to java.lang.Comparable{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Recommendation configs request was failed with custom config group"
   },
   {
      "_id": "13199568",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-11-20 10:13:57",
      "description": "Add LDAP integration support information to service information via Ambari's REST API. This information should be usable by Ambari's search predicate feature.\r\n\r\nNew\u00a0_read-only_\u00a0properties for (stack) services should be:\r\n * *{{ldap_integration_supported}}*\u00a0- Indicates whether the service supports LDAP integration or not\r\n ** Information is expected to be determined by service's meta info (see AMBARI-24907)\r\n\r\nNew\u00a0_read-only_\u00a0properties for installed services should be:\r\n * *{{ldap_integration_supported}}*\u00a0- Indicates whether the service supports LDAP integration or not\r\n ** Information is expected to be determined by service's meta info (see\u00a0AMBARI-24907\u00a0)\r\n * *{{ldap_integration_enabled}}*\u00a0- Indicates whether the service is configured for LDAP integration or not\r\n ** Information is expected to be determined by a value indicated in the service's meta info (see AMBARI-24907)\r\n * *{{ldap_integration_desired}}*\u00a0- Indicates whether the service is chosen for LDAP integration or not (see AMBARI-24913)\r\n ** Information is expected to be in the Ambari configurations with the property name\u00a0{{ldap_enabled_services}}\r\n\r\nExamples:\r\n{noformat:title=Get stack service details}\r\nGET /api/v1/stacks/:STACK_NAME/versions/:VERSION/services/:SERVICE_NAME\",\r\n{\r\n  \"href\" : \":URL\",\r\n  \"StackServices\" : {\r\n     ...\r\n     \"ldap_integration_supported\": \"false\",\r\n     ...\r\n  },\r\n  ...\r\n{noformat}\r\n{noformat:title=Get installed service information}\r\nGET /api/v1/clusters/:CLUSTER_NAME/services/:SERVICE_NAME\r\n{\r\n  \"href\" : \":URL\",\r\n  \"ServiceInfo\" : {\r\n    \"cluster_name\" : \":CLUSTER_NAME\",\r\n    ...\r\n    \"ldap_integration_supported\": \"true\",\r\n    \"ldap_integration_enabled\": \"false\",\r\n    \"ldap_integration_desired\": \"false\",\r\n     ...\r\n    },\r\n    ...\r\n{noformat}\r\n{noformat:title=List installed services that support LDAP integration}\r\nGET /api/v1/clusters/:CLUSTER_NAME/services?ServiceInfo/ldap_integration_supported=true\r\n{\r\n  \"href\" : \":URL\",\r\n  \"items\" : [\r\n      ...\r\n   ]\r\n}\r\n{noformat}\r\n{noformat:title=List stack services that support LDAP integration}\r\nGET /api/v1/stacks/:STACK_NAME/versions/:VERSION/services?StackServices/ldap_integration_supported=true\r\n{\r\n  \"href\" : \":URL\",\r\n  \"items\" : [\r\n      ...\r\n   ]\r\n}{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Add LDAP integration support information to service information via Ambari's REST API"
   },
   {
      "_id": "13199537",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-11-20 07:46:05",
      "description": "Continuing AMBARI-24917, apply any configuration specified in the request to override the stack defaults.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Apply user-defined configuration for Add Service request"
   },
   {
      "_id": "13199424",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-11-19 20:11:36",
      "description": "Create tproxy-configuration category in Ambari Configurations data with the following properties:\r\n\r\n* {{ambari.tproxy.authentication.enabled}}\r\n** Determines whether to allow trusted proxy authentication when logging into Ambari\r\n** {{true}} | {{false}}\r\n* {{ambari.tproxy.proxyuser.$username.hosts}}\r\n** List of hosts from which trusted-proxy user \u2018$username\u2019 can connect from\r\n** {{\\*}} | {{c7401.ambari.apache.org}} | {{10.42.80.64,10.42.80.65}} | {{10.222.0.0/16,10.113.221.221}}\r\n* {{ambari.tproxy.proxyuser.$username.users}}\r\n** List of users which the trusted-proxy user \u2018$username\u2019 can proxy for\r\n** {{\\*}} | {{user1,user2}}\r\n* {{ambari.tproxy.proxyuser.$username.groups}}\r\n** List of user-groups which trusted-proxy user \u2018$username\u2019 can proxy for\r\n** {{\\*}} | {{group1,group2}}\r\n\r\nNote: {{$username}} is variable, declaring the values for a particular proxy user. For example \"knox\".",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available",
         "tproxy"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Create tproxy-configuration category in Ambari Configurations data\t"
   },
   {
      "_id": "13199320",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-11-19 12:22:32",
      "description": "Some test-related tasks ({{create-sample-upgrade-check-jar}}, {{generate-test-oozie2-checks-dir}}, {{generate-test-oozie2-server-actions-dir}}) can be skipped during build if tests are skipped.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
         "name": "Minor",
         "id": "4"
      },
      "projectname": "AMBARI",
      "summary": "No need to create test jar if tests are skipped"
   },
   {
      "_id": "13199299",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-11-19 11:19:49",
      "description": "If service does not have client service component created then \"Run Service Check\" option should be made hidden",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "If service does not have client service component created then \"Run Service Check\" option should be made hidden"
   },
   {
      "_id": "13199246",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-11-19 07:29:15",
      "description": "Continuing AMBARI-24901, create components and host components for the Add Service request.  Also create stack default configs, necessary for install and start tasks.\r\n\r\nUser-defined and advisor-recommended configs to be implemented separately.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Implement complex Add Service request using default configs"
   },
   {
      "_id": "13199242",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-11-19 06:59:11",
      "description": "If we setup Ambari Server with it's own embedded postgresql DB, we get all other configurations correctly e.g. setup command updates home.java,\u00a0server.os_type,\u00a0server.os_family etc in ambari.properties file that can be used during starting Ambari Server.\r\n\r\n\u00a0\r\n\r\nHowever, if we provide server setup command with arguments to use non-embedded standalone DB, server setup does not update ambari.properties and does not perform any further setup utility that can be leveraged during starting Ambari Server.\r\n\r\nExample:\r\n\r\n1) *ambari-server setup -j \\{JDK_PATH} -s*\r\n\r\nThis command updates ambari.properties for\u00a0home.java,\u00a0server.os_type,\u00a0server.os_family etc.\r\n\r\n\u00a0\r\n\r\n2)\u00a0*ambari-server setup --java-home=\\{JDK_PATH} --jdbc-db=postgres --jdbc-driver=\\{JDBC_DRIVER_PATH} --databasehost=\\{IP_ADDR} --databaseport=5432 --databasename=ambari --postgresschema=ambari --databaseusername=\\{DB_USER} --databasepassword=\\{DB_PASSWD} --database=postgres -s*\r\n\r\nThis command does not update ambari.properties and we need to update it manually to bring up Ambari Server. Hence, automation of server setup with server startup is blocked due to this bug.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
         "name": "Minor",
         "id": "4"
      },
      "projectname": "AMBARI",
      "summary": "Ambari Server setup for non embedded DB miss out on default configuration"
   },
   {
      "_id": "13198906",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323906",
            "id": "12323906",
            "name": "security",
            "description": "Ambari security features, including Kerberos"
         }
      ],
      "created": "2018-11-16 12:55:11",
      "description": "Update\u00a0{{ldap-configuration}}\u00a0category in Ambari Configurations data to contain properties to aid in automated LDAP configuration:\r\n * {{ambari.ldap.manage_services}}\r\n ** This property is used to indicate whether Ambari is to manage relevant services' LDAP configurations or not (\"true\" | \"false\")\r\n * {{ambari.ldap.enabled_services}}\r\n ** This property is used to declare what services are expected to be configured for LDAP and is expected to be a comma-delimited list of services or \"{{*}}\" to indicate all services.\r\n\r\nExamples:\r\n{code:java|title=All services}\r\n\"ambari.ldap.manage_services\":\"true\",\r\n\"ambari.ldap.enabled_services\":\"*\"\r\n{code}\r\n{code:java|title=Only Ranger}\r\n\"ambari.ldap.manage_services\":\"true\",\r\n\"ambari.ldap.enabled_services\":\"Ranger\"\r\n{code}\r\n{code:java|title=Ranger, and Atlas}\r\n\"ambari.ldap.manage_services\":\"true\",\r\n\"ambari.ldap.enabled_services\":\"Ranger, Atlas\"\r\n{code}\r\n{code:java|title=Do not manage services}\r\n\"ambari.ldap.manage_services\":\"false\",\r\n\"ambari.ldap.enabled_services\":\"\"\r\n{code}\r\nEach service in the set of services should have indicated it supports LDAP (see\u00a0BUG-114409) else it will silently be ignored.\r\n\r\nThis value should be set via Ambari's REST API or a Blueprint.\r\n\r\nUpon setting this value via the Ambari REST API, it is expected that internal logic will be triggered to ensure the relevant services in the list are configured for LDAP or not configured for LDAP as the case may be.\r\n\u00a0",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Update ldap-configuration category in Ambari Configurations data to contain properties to aid in automated LDAP configuration"
   },
   {
      "_id": "13198654",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12331412",
            "id": "12331412",
            "name": "ambari-sever"
         }
      ],
      "created": "2018-11-15 15:29:21",
      "description": "Update service metainfo to declare LDAP integration support. The following tag may be optionally set in a service's metainfo.xml file:\r\n{noformat}\r\n<ldap>\r\n <supported>true</supported>\r\n <ldapEnabledTest>\r\n    {\r\n      \"equals\": [\r\n        \"ranger-admin-site/ranger.authentication.method\",\r\n        \"LDAP\"\r\n      ]\r\n    }\r\n <ldapEnabledTest>\r\n</ldap>{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Update service metainfo to declare LDAP integration support"
   },
   {
      "_id": "13198604",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-11-15 11:59:33",
      "description": "When a service only contains client service component then check service's displayname. If service's displayname does not and with \"Client\" then suffix service's displayname  with \"Client\"\r\n\r\nCurrent behavior:   !Dsplayname HDFS.png! \r\nExpected behavior:   !Displayname HDFS Client.png! ",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Service display name on left navigation bar should be suffixed with \"Client\" if only client service component is present for a service"
   },
   {
      "_id": "13198530",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-11-15 06:33:02",
      "description": "Related to AMBARI-24881, change {{ServiceResourceProvider}} to handle the complex \"Add Service\" request.  So far only stub logic is needed, details of the service creation will be filled later.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Handle complex \"Add Service\" request in ServiceResourceProvider"
   },
   {
      "_id": "13198258",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-11-14 08:34:29",
      "description": "Sensitive service configuration values should be decrypted when processing the Ambari agent command script, if enabled.\r\n\r\nDuring the processing of resource_management.libraries.script.script.Script#execute, the command data file is to be read in and the encrypted values in the JSON document are to be decrypted before executing the command.\r\n\r\nEach encrypted value will be in the form of\r\n\r\n${enc=<algorithm_encoding>, value=<value>}\r\nFor example:\r\n\r\n${enc=aes265_hex, value=5248...303d}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Sensitive service configuration values should be decrypted when processing the Ambari agent command script, if enabled"
   },
   {
      "_id": "13198055",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-11-13 13:12:02",
      "description": "In the attached screenshot \"Restart Nodemanager\" should not be shown because NodeManager service component is not present in the cluster",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Restart option should not be shown if service components are not created in a cluster"
   },
   {
      "_id": "13197837",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-11-12 15:14:06",
      "description": "The kadmin service principal name should be configurable for MIT KDC interactions. The current process assumes the kadmin service principal is\u00a0{{kadmin/FQDN_KADMIN_HOST}}, but this could be different on some installations. For example,\u00a0{{kadmin/admin}}.\r\n\r\nA new kerberos-env property should be added to allow a user to change the kadmin principal name -\u00a0{{kerberos-env/kadmin_principal_name}}\r\n\r\nThe default value for the new property should be \"{{kadmin/$\\{admin_server_host|stripPort()}}}\".\u00a0 To be able to do this, we\u00a0have to create a new variable replacement\u00a0_function_. For example,\u00a0{{stripPort}}.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "The kadmin service principal name should be configurable for MIT KDC interactions"
   },
   {
      "_id": "13197800",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-11-12 13:09:23",
      "description": "HDFS client and YARN client service component is created but other HDFS/YARN components are not created via blueprint deploy\r\n\r\n*Expected behavior:*\r\nHeatmap tab, metrics tab and QuickLinks section should be hidden if a service does not have any non-client servicecomponent created in the cluster\r\n\r\n*Actual behavior:*\r\nHeatmap and metrics tab are shown with empty metrics and no graphs",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Heatmap tab, metrics tab and QuickLinks section in summary tab should be hidden if service has only client service component"
   },
   {
      "_id": "13197798",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-11-12 13:07:18",
      "description": "Need to be able to show configuration in less than 2 seconds. The\u00a0heaviest part of configurations loading is recommendations request. Now for 2k cluster\u00a0recommendations request is taking about 12 seconds:\r\n{code:java}\r\n/api/v1/stacks/HDP/versions/3.0/recommendations\r\n\r\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "BE: Performance Tune service Configs Pages"
   },
   {
      "_id": "13197144",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-11-08 14:45:16",
      "description": "Request configurations when needed during server-side actions rather than rely on configuration data from the execution command.\r\n\r\nDue to a recent change, which appeared to remove configuration data from the execution command JSON document, data needed for Kerberos-related service-side actions is missing. This data may be requested when needed from the cluster data at the time of execution rather than when setting up the stages.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Request configurations when needed during server-side actions rather than rely on configuration data from the execution command"
   },
   {
      "_id": "13197088",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-11-08 10:58:14",
      "description": "# Go to Admin / Service Auto Start page\r\n# Toggle Auto Start Settings\r\n# Click Save button\r\n\r\nJS error appears:\r\n{noformat}\r\nUncaught TypeError: Cannot read property 'get' of undefined\r\n    at app.js:15024\r\n    at Array.forEach (<anonymous>)\r\n    at Class.syncStatus (app.js:15022)\r\n    at Array.<anonymous> (app.js:15092)\r\n    at fire (vendor.js:1141)\r\n    at Object.fireWith [as resolveWith] (vendor.js:1252)\r\n    at Class.<anonymous> (vendor.js:1379)\r\n    at fire (vendor.js:1141)\r\n    at Object.fireWith [as resolveWith] (vendor.js:1252)\r\n    at done (vendor.js:8178)\r\n{noformat}\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "JS error when changing service auto-start toggle"
   },
   {
      "_id": "13196814",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-11-07 12:39:50",
      "description": "The stack/service advisor should be able to return LDAP-related recommendations upon request.\r\n\r\nA new \\{StackAdvisorRequestType}} is to be created - 'ldap-configurations' - along with the infrastructure to call request LDAP-specific configuration recommendations.\r\n\r\nIt is expected that stack owners will implement the optional\u00a0{{recommendConfigurationsForLDAP}}\u00a0function to provide the service-specific data.\r\n\r\nThis stack advisor request should be invoked upon changing the LDAP configuration values and Ambari should automatically apply the recommended changes - potentially causing service configurations to be updated and the need to restart affected services. For example, see\u00a0{{org.apache.ambari.server.controller.internal.AmbariServerSSOConfigurationHandler#updateComponentCategory}}.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "The stack/service advisor should be able to return LDAP-related recommendations upon request"
   },
   {
      "_id": "13196744",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-11-07 06:05:52",
      "description": "{noformat:title=mvn -am -pl ambari-server clean verify}\r\n...\r\n[INFO] Ambari Server 3.0.0.0-SNAPSHOT ..................... FAILURE [01:16 min]\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n...\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal org.codehaus.mojo:findbugs-maven-plugin:3.0.3:findbugs (findbugs) on project ambari-server: Unable to parse configuration of mojo org.codehaus.mojo:findbugs-maven-plugin:3.0.3:findbugs for parameter pluginArtifacts: Cannot assign configuration entry 'pluginArtifacts' with value '${plugin.artifacts}' of type java.util.Collections.UnmodifiableRandomAccessList to property of type java.util.ArrayList -> [Help 1]\r\n{noformat}\r\n\r\n{noformat:title=mvn -version}\r\nApache Maven 3.6.0 (97c98ec64a1fdfee7767ce5ffb20918da4f719f3; 2018-10-24T20:41:47+02:00)\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Build error at Findbugs with Maven 3.6"
   },
   {
      "_id": "13196630",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-11-06 16:46:40",
      "description": "# Navigate to host with one or more masters\r\n# Click Delete Host from the Host Actions menu\r\n\r\nObserved: All the masters are not mentioned in the popup. This is a frontend bug\r\n !Screen Shot 2018-11-05 at 2.47.04 PM.png! \r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Delete host confirm popup does not contain all master components"
   },
   {
      "_id": "13196434",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-11-06 08:52:53",
      "description": "Provide wrapper class for LDAP-related data for use in service advisors like the wrapper class for SSO-related data -\u00a0{{stacks.ambari_configuration.AmbariSSODetails}}.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Provide wrapper class for LDAP-related data for use in service advisors"
   },
   {
      "_id": "13195645",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-11-01 11:55:44",
      "description": "If a user with role \"Cluster User\" tries to \"Edit Shared\" widgets, the server will return an error:\r\n{noformat}\r\n{\r\n  \"status\" : 500,\r\n  \"message\" : \"org.apache.ambari.server.controller.spi.SystemException: An internal system exception occurred: Only cluster operator can create widgets with cluster scope\"\r\n}\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Cluster user can't modify shared widgets"
   },
   {
      "_id": "13195477",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-10-31 20:20:20",
      "description": "Cluster deployment fails if some property value is null:\r\n\r\n{noformat}\r\n2018-10-31 17:38:44,579  INFO [pool-3-thread-1] AsyncCallableService:100 - Task ConfigureClusterTask exception during execution\r\njava.lang.NullPointerException\r\n\tat java.util.regex.Matcher.getTextLength(Matcher.java:1283)\r\n\tat java.util.regex.Matcher.reset(Matcher.java:309)\r\n\tat java.util.regex.Matcher.<init>(Matcher.java:229)\r\n\tat java.util.regex.Pattern.matcher(Pattern.java:1093)\r\n\tat org.apache.ambari.server.controller.internal.BlueprintConfigurationProcessor$HostGroupUpdater.updateForClusterCreate(BlueprintConfigurationProcessor.java:1754)\r\n\tat org.apache.ambari.server.controller.internal.BlueprintConfigurationProcessor.updateValue(BlueprintConfigurationProcessor.java:739)\r\n\tat org.apache.ambari.server.controller.internal.BlueprintConfigurationProcessor.lambda$null$7(BlueprintConfigurationProcessor.java:705)\r\n\tat java.util.HashMap$EntrySet.forEach(HashMap.java:1044)\r\n\tat org.apache.ambari.server.controller.internal.BlueprintConfigurationProcessor.lambda$applyDefaultUpdater$8(BlueprintConfigurationProcessor.java:700)\r\n\tat java.util.HashMap$EntrySet.forEach(HashMap.java:1044)\r\n\tat org.apache.ambari.server.controller.internal.BlueprintConfigurationProcessor.applyDefaultUpdater(BlueprintConfigurationProcessor.java:697)\r\n\tat org.apache.ambari.server.controller.internal.BlueprintConfigurationProcessor.doGeneralPropertyUpdatesForClusterCreate(BlueprintConfigurationProcessor.java:664)\r\n\tat org.apache.ambari.server.controller.internal.BlueprintConfigurationProcessor.doUpdateForClusterCreate(BlueprintConfigurationProcessor.java:443)\r\n\tat org.apache.ambari.server.topology.ClusterConfigurationRequest.process(ClusterConfigurationRequest.java:152)\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "NPE in default host group replacement"
   },
   {
      "_id": "13195108",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-10-30 12:43:08",
      "description": "\n    [root@gc7001 ~]# ambari-agent  stop\r\n    Verifying Python version compatibility...\r\n    Using python  /usr/bin/python\r\n    Found ambari-agent PID: 7391\r\n    Stopping ambari-agent\r\n    ^C^C^X^Z\r\n    [2]+  Stopped                 ambari-agent stop\r\n    [root@gc7001 ~]# ^C\r\n    [root@gc7001 ~]# kill -9 7391\r\n    \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari-agent stop hangs if ambari-server is stopped."
   },
   {
      "_id": "13195094",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-10-30 11:16:08",
      "description": "Sometimes initial component states update does not fire host\u00a0status recheck and host still in heartbeat lost.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Sometimes host status still in heartbeat lost after agent become heartbeating"
   },
   {
      "_id": "13194957",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-10-29 20:12:49",
      "description": "Atlas Metadata Server's start script in Ambari includes a step to copy {{atlas.war}} from the default location to the {{expanded_webapp_dir}}.  This is performed using {{File(content=StaticFile)}}, which reads and writes the contents of the war file to/from memory.  It may take 1-3 seconds to perform, and is done even if the source and target files are the same, because there is no check on the paths.\r\n\r\nThis could be improved:\r\n\r\n# Use {{cp}} to copy\r\n# Skip the operation if source and target are the same",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Improve copy of atlas.war"
   },
   {
      "_id": "13194905",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-10-29 16:51:29",
      "description": "When testing {{Ambaripreupload.py}} locally, one needs to work around some hardcoded values (JDBC driver, DFS type). The goal of this change is to make the script more configurable.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Make Ambaripreupload.py more configurable"
   },
   {
      "_id": "13194812",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-10-29 11:48:23",
      "description": "Hosts List - The initial host page and filter operations should all take less than 2 seconds. Today on the 5k node cluster all operations are taking 4 seconds.\r\nRequest URL for filtering:\r\n{noformat}\r\n/api/v1/clusters/c1/hosts?fields=Hosts/rack_info,Hosts/host_name,Hosts/maintenance_state,Hosts/public_host_name,Hosts/cpu_count,Hosts/ph_cpu_count,alerts_summary,Hosts/host_status,Hosts/host_state,Hosts/last_heartbeat_time,Hosts/ip,host_components/HostRoles/state,host_components/HostRoles/maintenance_state,host_components/HostRoles/stale_configs,host_components/HostRoles/service_name,host_components/HostRoles/display_name,host_components/HostRoles/desired_admin_state,host_components/metrics/dfs/namenode/ClusterId,host_components/metrics/dfs/FSNamesystem/HAState,Hosts/total_mem,stack_versions/HostStackVersions,stack_versions/repository_versions/RepositoryVersions/repository_version,stack_versions/repository_versions/RepositoryVersions/id,stack_versions/repository_versions/RepositoryVersions/display_name&minimal_response=true,host_components/logging&page_size=10&from=0&sortBy=Hosts/host_name.asc\r\n{noformat}\r\nwith various parameters:\r\n{noformat}\r\n{\"RequestInfo\":{\"query\":\"page_size:100\r\nfrom:0\r\nHosts/host_status:HEALTHY\"}}{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "BE: Performance Tune Hosts Pages"
   },
   {
      "_id": "13194769",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-10-29 08:32:35",
      "description": "Please look at the related Jira for blueprint.\n\nFor shared services cluster, Hbase needs to use S3 Object store for rootdir.\nAmbari is trying to create hbase.rootdir using s3 url, hence failing with\nbelow error.\n\n    \n    \r\n    2018-10-24 03:12:45,424 - get_user_call_output returned (0, u'<html>\\n<head>\\n<meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\"/>\\n<title>Error 404 Not Found</title>\\n</head>\\n<body><h2>HTTP ERROR 404</h2>\\n<p>Problem accessing /webhdfs/v1s3a:/san-s3-ohio/hbase. Reason:\\n<pre>    Not Found</pre></p>\\n</body>\\n</html>\\n404', u'')\r\n    out: <html>\r\n    <head>\r\n    <meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\"/>\r\n    <title>Error 404 Not Found</title>\r\n    </head>\r\n    <body><h2>HTTP ERROR 404</h2>\r\n    <p>Problem accessing /webhdfs/v1s3a:/san-s3-ohio/hbase. Reason:\r\n    <pre>    Not Found</pre></p>\r\n    </body>\r\n    </html>\r\n    404\u200b\r\n    \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari is trying to create hbase.rootdir using s3 url"
   },
   {
      "_id": "13194526",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323905",
            "id": "12323905",
            "name": "ambari-metrics",
            "description": "Ambari Metrics System"
         }
      ],
      "created": "2018-10-26 22:06:21",
      "description": "Metrics Grafana HTTP requests are attempted at most 15 times in case of failure, with 20 seconds delay each time.  The goal of this change is to make both the number of attempts and length of the delay configurable.  Shorter retry delay could be useful to reduce overall startup time.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
         "name": "Minor",
         "id": "4"
      },
      "projectname": "AMBARI",
      "summary": "Make Grafana connection attempts and retry delay configurable"
   },
   {
      "_id": "13194475",
      "assignee": "adoroszlai",
      "components": [],
      "created": "2018-10-26 17:47:20",
      "description": "Fix the following javadoc errors in {{ambari-utility}}:\r\n\r\n{noformat}\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-javadoc-plugin:3.0.1:jar (attach-javadocs) on project ambari-utility: MavenReportException: Error while generating Javadoc:\r\n[ERROR] Exit code: 1 - ambari-utility/src/main/java/org/apache/ambari/annotations/SwaggerOverwriteNestedAPI.java:28: error: reference not found\r\n[ERROR]  * {@link org.apache.ambari.swagger.NestedApiRecord} when {@link org.apache.ambari.swagger.AmbariSwaggerReader}\r\n[ERROR]           ^\r\n[ERROR] ambari-utility/src/main/java/org/apache/ambari/annotations/SwaggerOverwriteNestedAPI.java:42: warning: no description for @return\r\n[ERROR]      * @return\r\n[ERROR]        ^\r\n[ERROR] ambari-utility/src/main/java/org/apache/ambari/annotations/SwaggerOverwriteNestedAPI.java:48: warning: no description for @return\r\n[ERROR]      * @return\r\n[ERROR]        ^\r\n[ERROR] ambari-utility/src/main/java/org/apache/ambari/annotations/SwaggerOverwriteNestedAPI.java:54: warning: no description for @return\r\n[ERROR]      * @return\r\n[ERROR]        ^\r\n[ERROR] ambari-utility/src/main/java/org/apache/ambari/annotations/SwaggerOverwriteNestedAPI.java:60: warning: no description for @return\r\n[ERROR]      * @return\r\n[ERROR]        ^\r\n[ERROR] ambari-utility/src/main/java/org/apache/ambari/annotations/SwaggerPreferredParent.java:37: warning: no description for @return\r\n[ERROR]      * @return\r\n[ERROR]        ^\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
         "name": "Minor",
         "id": "4"
      },
      "projectname": "AMBARI",
      "summary": "Fix javadoc errors in ambari-utility"
   },
   {
      "_id": "13194220",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-10-25 18:51:28",
      "description": "LDAP users fail to authenticate using LDAPS due to `No subject alternative DNS name` exception:\r\n\r\n{noformat}\r\n2018-10-26 14:49:45,716  WARN [ambari-client-thread-37] AmbariLdapAuthenticationProvider:126 - Failed to communicate with the LDAP server: simple bind failed: ad.example.com:636; nested exception is javax.naming.CommunicationException: simple bind failed: ad.example.com:636 [Root exception is javax.net.ssl.SSLHandshakeException: java.security.cert.CertificateException: No subject alternative DNS name matching ad.example.com found.]\r\n{noformat}\r\n\r\nThis is the other half of the issue from AMBARI-24533 (which was related to the LDAP sync process).  \r\n\r\nNote:  If LDAP sync is performed before a user attempts to log in, then the issue will not be seen since the system property, {{com.sun.jndi.ldap.object.disableEndpointIdentification}}, would have already been set to \"true\".   However, the logic path setting this value is not reached for an authentication attempt. \r\n\r\nNote: This occurs with OpenJDK 1.8.0.191 and maybe some earlier versions.\r\n{noformat}\r\nopenjdk version \"1.8.0_191\"\r\nOpenJDK Runtime Environment (build 1.8.0_191-b12)\r\nOpenJDK 64-Bit Server VM (build 25.191-b12, mixed mode)\r\n{noformat}\r\n\r\nThis does not occur with Oracle JDK 1.8.0.112\r\n{noformat}\r\njava version \"1.8.0_112\"\r\nJava(TM) SE Runtime Environment (build 1.8.0_112-b15)\r\nJava HotSpot(TM) 64-Bit Server VM (build 25.112-b15, mixed mode)\r\n{noformat}\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "LDAP users fail to authenticate using LDAPS due to 'No subject alternative DNS name' exception"
   },
   {
      "_id": "13194086",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-10-25 08:19:52",
      "description": "Add {{fs.gs.path.encoding}} to {{core-site}} with default value of {{uri-path}}.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Set path encoding for GCS"
   },
   {
      "_id": "13193860",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-10-24 12:42:21",
      "description": "{{BlueprintConfigurationProcessor}} trims properties during deployment using various implementations of {{TrimmingStrategy}}.  A new strategy object is created for each property.  This is unnecessary, since all current implementations are stateless.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
         "name": "Minor",
         "id": "4"
      },
      "projectname": "AMBARI",
      "summary": "TrimmingStrategy implementations should be singletons"
   },
   {
      "_id": "13193773",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-10-24 07:20:38",
      "description": "Similarly to AMBARI-23329, set {{fs.gs.application.name.suffix}}\u00a0for GCS.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Set cloud storage tracking property for GCS"
   },
   {
      "_id": "13193502",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-10-23 09:22:50",
      "description": "During the stack upgrade from HDP 2.6 -> HDP 3.x, the list of changes Ambari wants to make to each service is very difficult to interpret. Below is an example of the config changes Ambari recommends when attempting to upgrade fresh-install HDP2.6.2 cluster. \r\n\r\nHere's an example of how these configs look like when the user presses the \"Open\" button:\r\nopen_recommended_config_changes.png \r\nNote the highlighting is not intentional - it is automatically done by the browser (chrome) due to the special characters in the configs.\r\n\r\nA small step to improve the user experience would be to add a column that shows which service each config applies.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Add column to show which service recommended changes during upgrade refer to"
   },
   {
      "_id": "13192830",
      "assignee": "smolnar",
      "components": [],
      "created": "2018-10-19 12:30:23",
      "description": "Running the following command failed with the following error:\r\n\r\n\u00a0\r\n{noformat}\r\nmvn -Del.log=WARN -Dcheckstyle.skip -Dfindbugs.skip -Drat.skip -DskipTests -DfailIfNoTests=false -am -pl ambari-server clean install\r\n...\r\n[ERROR] Failed to execute goal com.github.kongchen:swagger-maven-plugin:3.1.4:generate (default) on project ambari-server: Conflicting setter definitions for property \"requestBody\": org.apache.ambari.server.orm.entities.RequestScheduleBatchRequestEntity#setRequestBody(1 params) vs org.apache.ambari.server.orm.entities.RequestScheduleBatchRequestEntity#setRequestBody(1 params) -> [Help 1]\r\n{noformat}\r\n\u00a0\r\n\r\nAccording to this thread t[his is a known issue|https://github.com/FasterXML/jackson-databind/issues/1251]\u00a0in swagger\r\n\r\nUpgrading the swagger plugin to 3.1.5 solves the issue.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Swagger spec for Ambari REST API generation is failing"
   },
   {
      "_id": "13192295",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-10-17 16:20:25",
      "description": "Stacktrace\r\n{code}\r\njava.lang.NullPointerException\r\n\tat org.apache.ambari.server.security.encryption.CredentialStoreTest.getExpiredCredentialTest(CredentialStoreTest.java:169)\r\n\tat org.apache.ambari.server.security.encryption.CredentialStoreTest.testInMemoryCredentialStoreService_CredentialExpired(CredentialStoreTest.java:90)\r\n{code}\r\nStandard Output\r\n{code}\r\n2018-10-12 14:06:26,230 INFO  [main] encryption.MasterKeyServiceImpl (MasterKeyServiceImpl.java:initializeFromFile(277)) - Loading from persistent master: #1.0# Fri, Oct 12 2018 14:06:26.207\r\n2018-10-12 14:06:28,371 INFO  [main] encryption.MasterKeyServiceImpl (MasterKeyServiceImpl.java:initializeFromFile(277)) - Loading from persistent master: #1.0# Fri, Oct 12 2018 14:06:28.370{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Intermittent CredentialStoreTest test failure"
   },
   {
      "_id": "13192257",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         }
      ],
      "created": "2018-10-17 14:17:01",
      "description": "{{ambari-server}} Python tests can be skipped by passing {{-DskipPythonTests}} to Maven.  The goal of this task is to allow the same for {{ambari-agent}}.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Allow skipping Python unit tests"
   },
   {
      "_id": "13191917",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-10-16 13:17:36",
      "description": "During NiFi start Ambari invokes ambari-common/src/main/python/resource_management/core/sudo.copy(src, dest) (line 306) in case of non-root configuration. Here the command we pass to the command wrapper within shell.py starts with 'sudo'. However the sudo flag is also set to True.\r\n\r\nAs a result we have a double 'sudo' invocation which may cause issues\u00a0in ambari with non-root configuration.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Eliminating duplicated sudo calls when copying files in Ambari with non-root configuration"
   },
   {
      "_id": "13191894",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-10-16 12:04:17",
      "description": "\n    ERROR 2018-10-11 13:45:57,401 HeartbeatThread.py:108 - Exception in HeartbeatThread. Re-running the registration\r\n    Traceback (most recent call last):\r\n      File \"/usr/lib/ambari-agent/lib/ambari_agent/HeartbeatThread.py\", line 95, in run\r\n        self.register()\r\n      File \"/usr/lib/ambari-agent/lib/ambari_agent/HeartbeatThread.py\", line 163, in register\r\n        self.force_component_status_update()\r\n      File \"/usr/lib/ambari-agent/lib/ambari_agent/HeartbeatThread.py\", line 173, in force_component_status_update\r\n        self.component_status_executor.force_send_component_statuses()\r\n      File \"/usr/lib/ambari-agent/lib/ambari_agent/ComponentStatusExecutor.py\", line 206, in force_send_component_statuses\r\n        service_name, component_name = service_and_component_name.split(\"/\")\r\n    ValueError: need more than 1 value to unpack\r\n    \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari-agent cannot register sometimes"
   },
   {
      "_id": "13191555",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-10-15 11:06:31",
      "description": "The following 3rd party dependencies have to be eliminated/upgraded to a secure version based on the latest BlackDuck scan:\r\n||Current version||Upgrade to||CVE issue(s)||\r\n|org.springframework:spring-web:jar:4.3.17.RELEASE|org.springframework:spring-web:jar:4.3.18.RELEASE\u00a0or the latest|CVE-2018-11039, CVE-2018-11040|\r\n|jquery-1.8.3.min.js|1.9.0rc1 or the latest|CVE-2011-4969, CVE-2015-9251, CVE-2012-6708|\r\n|org.eclipse.jetty:jetty-server:jar:9.4.11.v20180605|9.4.12.v20180830 or the latest|CVE-2017-9735, CVE-2018-12536|",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Fix CVE issues in ambari server"
   },
   {
      "_id": "13191524",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-10-15 08:56:09",
      "description": "If 2-way SSL is enabled, allow the agent's SSL certificate data to be accessible by heartbeat handers. The agent's SSL certificate contains the agent's public key, which may be used to encrypt data for that specific agent.\r\n\r\nFor example, the agent's SSL certificate data may be needed by org.apache.ambari.server.agent.rest.AgentResource#heartbeat and org.apache.ambari.server.agent.stomp.HeartbeatController#heartbeat, among other handlers used to communicate with the Ambari agent.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Allow the agent's SSL certificate data to be accessible by heartbeat handlers"
   },
   {
      "_id": "13191468",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-10-14 19:10:47",
      "description": "Cluster blueprint export is broken wrt. the {{settings}} section.\r\n\r\n# Only one component per service is included.\r\n# Default setting value assumed to be {{false}}, ignoring component-level stack definition\r\n\r\nSTR:\r\n\r\n# Disable \"Auto Start\" for Metrics Collector, for which it is enabled by default per stack definition\r\n# Enable \"Auto Start\" for both DataNode and NameNode\r\n# Export blueprint\r\n\r\nResult: \r\n\r\n{noformat:title=http://$AMBARI_SERVER:8080/api/v1/clusters/TEST?format=blueprint}\r\n  \"settings\" : [\r\n    {\r\n      \"recovery_settings\" : [\r\n        {\r\n          \"recovery_enabled\" : \"true\"\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      \"service_settings\" : [\r\n        {\r\n          \"recovery_enabled\" : \"true\",\r\n          \"name\" : \"HDFS\"\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      \"component_settings\" : [\r\n        {\r\n          \"recovery_enabled\" : \"true\",\r\n          \"name\" : \"NAMENODE\"\r\n        }\r\n      ]\r\n    }\r\n{noformat}\r\n\r\nProblem: creating a cluster using the exported blueprint results in different settings than the original cluster.  \"Auto Start\" would be disabled for DataNode and enabled for Metrics Collector per stack defaults.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Wrong settings in exported blueprint"
   },
   {
      "_id": "13191169",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-10-12 10:45:50",
      "description": "# Deployed HDP-3.0.3 HA cluster with Ambari-2.7.3 (Active RM and Timeline v2 Reader are on the same host)\r\n# Under Yarn --> Service Actions - choose to Move Timeline Service V2.0 Reader. Pick a new host and let the move operation complete\r\n\r\n{code}\r\n2018-10-11 13:04:33,887 ERROR reader.TimelineReaderServer (TimelineReaderServer.java:startTimelineReaderServer(236)) - Error starting TimelineReaderWebServer\r\norg.apache.hadoop.yarn.exceptions.YarnRuntimeException: Failed to login from keytab\r\n\tat org.apache.hadoop.yarn.server.timelineservice.reader.TimelineReaderServer.serviceInit(TimelineReaderServer.java:88)\r\n\tat org.apache.hadoop.service.AbstractService.init(AbstractService.java:164)\r\n\tat org.apache.hadoop.yarn.server.timelineservice.reader.TimelineReaderServer.startTimelineReaderServer(TimelineReaderServer.java:233)\r\n\tat org.apache.hadoop.yarn.server.timelineservice.reader.TimelineReaderServer.main(TimelineReaderServer.java:246)\r\nCaused by: org.apache.hadoop.security.KerberosAuthException: failure to login: for principal: yarn/ctr-e138-1518143905142-517945-01-000006.hwx.site@EXAMPLE.COM from keytab /etc/security/keytabs/yarn.service.keytab javax.security.auth.login.LoginException: Unable to obtain password from user\r\n\r\n\tat org.apache.hadoop.security.UserGroupInformation.doSubjectLogin(UserGroupInformation.java:1847)\r\n\tat org.apache.hadoop.security.UserGroupInformation.loginUserFromKeytabAndReturnUGI(UserGroupInformation.java:1215)\r\n\tat org.apache.hadoop.security.UserGroupInformation.loginUserFromKeytab(UserGroupInformation.java:1008)\r\n\tat org.apache.hadoop.security.SecurityUtil.login(SecurityUtil.java:313)\r\n\tat org.apache.hadoop.yarn.server.timelineservice.reader.TimelineReaderServer.serviceInit(TimelineReaderServer.java:85)\r\n\t... 3 more\r\nCaused by: javax.security.auth.login.LoginException: Unable to obtain password from user\r\n\r\n\tat com.sun.security.auth.module.Krb5LoginModule.promptForPass(Krb5LoginModule.java:897)\r\n\tat com.sun.security.auth.module.Krb5LoginModule.attemptAuthentication(Krb5LoginModule.java:760)\r\n\tat com.sun.security.auth.module.Krb5LoginModule.login(Krb5LoginModule.java:617)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat javax.security.auth.login.LoginContext.invoke(LoginContext.java:755)\r\n\tat javax.security.auth.login.LoginContext.access$000(LoginContext.java:195)\r\n\tat javax.security.auth.login.LoginContext$4.run(LoginContext.java:682)\r\n\tat javax.security.auth.login.LoginContext$4.run(LoginContext.java:680)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat javax.security.auth.login.LoginContext.invokePriv(LoginContext.java:680)\r\n\tat javax.security.auth.login.LoginContext.login(LoginContext.java:587)\r\n\tat org.apache.hadoop.security.UserGroupInformation$HadoopLoginContext.login(UserGroupInformation.java:1926)\r\n\tat org.apache.hadoop.security.UserGroupInformation.doSubjectLogin(UserGroupInformation.java:1837)\r\n\t... 7 more\r\n2018-10-11 13:04:33,890 INFO  util.ExitUtil (ExitUtil.java:terminate(210)) - Exiting with status -1: Error starting TimelineReaderWebServer\r\n2018-10-11 13:04:33,894 INFO  reader.TimelineReaderServer (LogAdapter.java:info(51)) - SHUTDOWN_MSG: \r\n/************************************************************\r\nSHUTDOWN_MSG: Shutting down TimelineReaderServer at ctr-e138-1518143905142-517945-01-000002.hwx.site/172.27.74.4\r\n************************************************************/\r\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Error while starting Timeline v2 Reader during Move operation"
   },
   {
      "_id": "13190975",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-10-11 16:18:27",
      "description": "After start/stop all request was completed server continues to send request updates. This causes UI shows invalid request/tasks progress statuses.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Ambari server continues to send request updates after all commands were completed."
   },
   {
      "_id": "13190622",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-10-10 12:30:29",
      "description": "   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\r\n    14129 1426.122    0.101 1426.122    0.101 {time.sleep}\r\n        1    0.337    0.337 1426.769 1426.769 main.py:358(run_threads)\r\n      331    0.219    0.001    0.219    0.001 {method 'acquire' of 'thread.lock' objects}\r\n       11    0.181    0.016    0.181    0.016 {built-in method poll}\r\n        1    0.108    0.108    0.108    0.108 {method 'do_handshake' of '_ssl._SSLSocket' objects}\r\n    14151    0.042    0.000    0.042    0.000 threading.py:571(isSet)\r\n      125    0.028    0.000    0.028    0.000 {method 'flush' of 'file' objects}\r\n     5078    0.027    0.000    0.052    0.000 decoder.py:65(py_scanstring)\r\n       15    0.020    0.001    0.020    0.001 {posix.read}\r\n     5093    0.020    0.000    0.024    0.000 {method 'sub' of '_sre.SRE_Pattern' objects}\r\n        1    0.019    0.019    0.019    0.019 {method 'connect' of '_socket.socket' objects}\r\n    15365    0.018    0.000    0.018    0.000 {method 'match' of '_sre.SRE_Pattern' objects}\r\n55424/13131    0.016    0.000    0.057    0.000 encoder.py:332(_iterencode_dict)\r\n    38241    0.014    0.000    0.014    0.000 {isinstance}\r\n       21    0.013    0.001    0.022    0.001 collections.py:282(namedtuple)\r\n    473/5    0.012    0.000    0.073    0.015 decoder.py:148(JSONObject)\r\n     5078    0.009    0.000    0.034    0.000 encoder.py:43(py_encode_basestring_ascii)\r\n        5    0.006    0.001    0.070    0.014 __init__.py:122(dump)\r\n    13251    0.005    0.000    0.005    0.000 {method 'write' of 'file' objects}\r\n        7    0.004    0.001    0.004    0.001 {ambari_commons.libs.x86_64._posixsubprocess.fork_exec}\r\n     5638    0.004    0.000    0.004    0.000 encoder.py:49(replace)\r\n   3167/5    0.003    0.000    0.073    0.015 scanner.py:27(_scan_once)\r\n13353/9909    0.003    0.000    0.030    0.000 encoder.py:279(_iterencode_list)\r\n       75    0.003    0.000    0.003    0.000 {method 'read' of '_ssl._SSLSocket' objects}\r\n   3177/8    0.003    0.000    0.008    0.001 Utils.py:124(make_immutable)\r\n    13131    0.003    0.000    0.060    0.000 encoder.py:409(_iterencode)\r\n    11128    0.003    0.000    0.003    0.000 {method 'groups' of '_sre.SRE_Match' objects}\r\n  2202/45    0.003    0.000    0.004    0.000 Utils.py:135(get_mutable_copy)\r\n   474/10    0.002    0.000    0.008    0.001 Utils.py:170(__init__)\r\n      238    0.002    0.000    0.002    0.000 {time.localtime}\r\n      119    0.002    0.000    0.004    0.000 __init__.py:242(__init__)\r\n     3759    0.002    0.000    0.002    0.000 {method 'isalnum' of 'str' objects}\r\n    14752    0.002    0.000    0.002    0.000 {method 'end' of '_sre.SRE_Match' objects}\r\n    16854    0.002    0.000    0.002    0.000 {method 'append' of 'list' objects}\r\n     5098    0.002    0.000    0.002    0.000 {method 'join' of 'unicode' objects}\r\n      238    0.002    0.000    0.007    0.000 __init__.py:451(format)\r\n       13    0.002    0.000    0.004    0.000 metric_alert.py:286(__init__)\r\n        7    0.001    0.000    0.026    0.004 subprocess32.py:1153(_execute_child)\r\n       41    0.001    0.000    0.001    0.000 {open}\r\n      616    0.001    0.000    0.001    0.000 {method 'format' of 'str' objects}\r\n      238    0.001    0.000    0.004    0.000 __init__.py:404(formatTime)\r\n       18    0.001    0.000    0.001    0.000 {posix.listdir}\r\n        5    0.001    0.000    0.072    0.014 ClusterCache.py:131(persist_cache)\r\n     4032    0.001    0.000    0.003    0.000 collections.py:323(<genexpr>)\r\n       18    0.001    0.000    0.001    0.000 {method 'sort' of 'list' objects}\r\n       90    0.001    0.000    0.001    0.000 {built-in method now}\r\n      238    0.001    0.000    0.001    0.000 {time.strftime}\r\n      119    0.001    0.000    0.001    0.000 __init__.py:1215(findCaller)\r\n     5706    0.001    0.000    0.001    0.000 {method 'group' of '_sre.SRE_Match' objects}\r\n      281    0.001    0.000    0.001    0.000 threading.py:146(acquire)\r\n      281    0.001    0.000    0.001    0.000 threading.py:186(release)\r\n      119    0.001    0.000    0.001    0.000 {method 'seek' of 'file' objects}\r\n        1    0.001    0.001    0.001    0.001 ClusterTopologyCache.py:58(on_cache_update)\r\n      119    0.001    0.000    0.005    0.000 handlers.py:144(shouldRollover)\r\n     50/5    0.001    0.000    0.035    0.007 decoder.py:223(JSONArray)\r\nMajor cpu cosumers:\r\n1) Regexp operation: \r\nAs we can see a lot of time is took for regexp operations. This happens because we use non-compiled regular expressions.\r\n2) Json operations:\r\nAnother major cpu consumer is json module, because _speedups.so is not compiled for python2.7 currently. We have this situation. This is tackled by other issue\r\n3) Main thread waking up/sleeping too often.\r\nThis seems to create quite a bit cpu usage.\r\nThe approach was implemented so agent can check for SIGTERM (ambari-agent stop). A proper solution should be a usage signal.pause() instead of sleep/wakeup.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari-agent takes up too many cpu on perf"
   },
   {
      "_id": "13189709",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-10-05 13:02:07",
      "description": "Sensitive service configuration values should be encrypted in the Ambari server DB, if enabled.\r\n\r\nSensitive service configuration values are defined by a service's configuration metadata. Properties are defined in XML files under the service's definition directory and contain attributes that Ambari may use to determine whether they should be encrypted or not.\r\n\r\nCurrently, Ambari uses the\u00a0{{property-type}}\u00a0attribute to determine the type of property. If the value of this attribute is \"PASSWORD\", than the value is considered sensitive and should be encrypted.\r\n{code:java|title=Example: This password field is to be encrypted, implicitly}\r\n  <property>\r\n    <name>ssl.server.truststore.password</name>\r\n    <value>bigdata</value>\r\n    <property-type>PASSWORD</property-type>\r\n    <description>Password to open the trust store file.</description>\r\n    <value-attributes>\r\n      <type>password</type>\r\n    </value-attributes>\r\n    <on-ambari-upgrade add=\"false\"/>\r\n  </property>\r\n{code}\r\nUsing this information,\u00a0_if this feature is enabled_, the Ambari server should encrypt sensitive values before storing them in the database. Values should be encrypted within the container they are stored. For example, Ambari stores configurations as JSON documents. Before writing these JSON documents to the database, the Ambari server should process each name/value pair and encrypt only those that are deemed sensitive.\r\n\r\nThe Ambari server should encrypt sensitive configuration values if the following has been met:\r\n * A master key has been setup using the \"ambari-server setup-security\" CLI (using option #2 - Encrypt passwords stored in ambari.properties file)\r\n * The Ambari server configuration property named \"{{server.security.encrypt_sensitive_data}}\" is set to \"true\"\r\n\r\nIf encrypting sensitive data:\r\n * the value should be encrypted using a secure symmetric key encryption algorithm. For example AES -\u00a0[https://aesencryption.net/].\r\n * the encryption key should be the previously set master key, or some reproducible encoding of it.\r\n * the encrypted bytes should be converted to a hex string\r\n * the value should be stored in the relevant JSON document suck that that the value is declared as encrypted.\r\n ** for example:\r\n{noformat}\r\n\"password\" : \"${enc=aes265_hex, value=5248...303d}\"{noformat}\r\n\r\n ** this is needed in the event\u00a0{{server.security.encrypt_sensitive_data}}\u00a0is changed to false, but there are still encrypted values in the database.\r\n\r\nEncrypted data needs to be decrypted before being used or returned via the REST API. The data may be re-encrypted depending on use. For example, when being sent to an Ambari agent.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Sensitive service configuration values should be encrypted in the Ambari server DB, if enabled"
   },
   {
      "_id": "13189173",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-10-03 14:02:22",
      "description": "Ambari Server stopped a few seconds after start with the following error:\r\n\r\n\u00a0\r\n{code:title=/var/log/ambari-server/ambari-server.out}\r\nException in thread \"main\" com.google.inject.CreationException: Unable to create injector, see the following errors:\r\n\r\n1) No scope is bound to org.apache.ambari.server.AmbariService.\r\nat org.apache.ambari.server.state.services.MetricsRetrievalService.class(MetricsRetrievalService.java:85)\r\nwhile locating org.apache.ambari.server.state.services.MetricsRetrievalService\r\nfor field at org.apache.ambari.server.controller.jmx.JMXPropertyProvider.metricsRetrievalService(JMXPropertyProvider.java:88)\r\nat org.apache.ambari.server.controller.metrics.MetricPropertyProviderFactory.createJMXPropertyProvider(MetricPropertyProviderFactory.java:1)\r\nat com.google.inject.assistedinject.FactoryProvider2.initialize(FactoryProvider2.java:666)\r\nat com.google.inject.assistedinject.FactoryModuleBuilder$1.configure(FactoryModuleBuilder.java:335) (via modules: org.apache.ambari.server.controller.ControllerModule -> com.google.inject.assistedinject.FactoryModuleBuilder$1)\r\n\r\n1 error\r\nat com.google.inject.internal.Errors.throwCreationExceptionIfErrorsExist(Errors.java:470)\r\nat com.google.inject.internal.InternalInjectorCreator.injectDynamically(InternalInjectorCreator.java:176)\r\nat com.google.inject.internal.InternalInjectorCreator.build(InternalInjectorCreator.java:110)\r\nat com.google.inject.Guice.createInjector(Guice.java:99)\r\nat com.google.inject.Guice.createInjector(Guice.java:73)\r\nat com.google.inject.Guice.createInjector(Guice.java:62)\r\nat org.apache.ambari.server.controller.AmbariServer.main(AmbariServer.java:1079)\r\n~\r\n~\r\n\"/var/log/ambari-server/ambari-server.out\" 41L, 6558C{code}\r\n\r\n{code}\r\ncat /etc/ambari-server/conf/ambari.properties | grep 'java\\.home'\r\njava.home=/usr/java/jdk-9.0.4/\r\nstack.java.home=/usr/java/jdk-9.0.4/\r\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari Server stops with Java 9 due to Guice error"
   },
   {
      "_id": "13188795",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-10-02 10:00:48",
      "description": "The ability to pre-install packages on hosts (before being added to the cluster) using the following API request is broken:\r\n\r\n{noformat}\r\n$ curl -X POST -d '\\{ \"HostStackVersions\": { \"repository_version\": <repository_version>, \"stack\": \"HDP\", \"version\": \"2.6\", \"cluster_name\": \"TEST\", \"force_non_member_install\": true, \"components\": [ { \"name\" : \"ZOOKEEPER_SERVER\" }, \\{ \"name\": \"ZOOKEEPER_CLIENT\" } ] } }' http://localhost:8080/api/v1/hosts/${hostname}/stack_versions\r\n{noformat}\r\n\r\n{noformat:title=ambari-agent.log}\r\nERROR 2018-06-19 08:54:08,222 CustomServiceOrchestrator.py:448 - Caught an exception while executing custom service command: <type 'exceptions.KeyError'>: 'Host_Level_Params for cluster_id=2 is missing. Check if server sent it.'; 'Host_Level_Params for cluster_id=2 is missing. Check if server sent it.'\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/ambari-agent/lib/ambari_agent/CustomServiceOrchestrator.py\", line 322, in runCommand\r\n    command = self.generate_command(command_header)\r\n  File \"/usr/lib/ambari-agent/lib/ambari_agent/CustomServiceOrchestrator.py\", line 487, in generate_command\r\n    command_dict = self.configuration_builder.get_configuration(cluster_id, service_name, component_name, required_config_timestamp)\r\n  File \"/usr/lib/ambari-agent/lib/ambari_agent/ConfigurationBuilder.py\", line 38, in get_configuration\r\n    host_level_params_cache = self.host_level_params_cache[cluster_id]\r\n  File \"/usr/lib/ambari-agent/lib/ambari_agent/ClusterCache.py\", line 155, in __getitem__\r\n    raise KeyError(\"{0} for cluster_id={1} is missing. Check if server sent it.\".format(self.get_cache_name().title(), key))\r\nKeyError: 'Host_Level_Params for cluster_id=2 is missing. Check if server sent it.'\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Failed to force_non_member_install a stack version on hosts"
   },
   {
      "_id": "13188490",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-10-01 11:32:00",
      "description": "This causes all the data to be re-send during registration. Which can be very\ndramatic for perf clusters.\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari-agent does for save data hashes correctly"
   },
   {
      "_id": "13188454",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-10-01 07:28:22",
      "description": "User aborted task reported as FAILED in Bgoperations.\r\n\r\n1. Install cluster with all services ( Including Druid)\r\n2. Click on Stop all services\r\n3. When BGoperations window is loaded, click on the abort button for the same task\r\n4. The operation should be aborted and marked as Aborted with \"Aborted by user\" message in the sub tasks logs\r\n5. But instead the operation is marked as failure.\r\n\r\nFailed task is Druid Coordinator Stop\r\n{code:java}\r\n\"href\": \"https://ctr-e138-1518143905142-466827-01-000002.hwx.site:8443/api/v1/clusters/cl1/requests/59/stages/0/tasks/756\",\r\n\"Tasks\": {\r\n\"attempt_cnt\": 1,\r\n\"cluster_name\": \"cl1\",\r\n\"command\": \"STOP\",\r\n\"command_detail\": \"DRUID_COORDINATOR STOP\",\r\n\"end_time\": 1536363316602,\r\n\"error_log\": \"/var/lib/ambari-agent/data/errors-756.txt\",\r\n\"exit_code\": 0,\r\n\"host_name\": \"ctr-e138-1518143905142-466827-01-000005.hwx.site\",\r\n\"id\": 756,\r\n\"ops_display_name\": null,\r\n\"output_log\": \"/var/lib/ambari-agent/data/output-756.txt\",\r\n\"request_id\": 59,\r\n\"role\": \"DRUID_COORDINATOR\",\r\n\"stage_id\": 0,\r\n\"start_time\": 1536363307548,\r\n\"status\": \"FAILED\",\r\n\"stderr\": \"\\nCommand aborted. Reason: 'Aborted by user'\",\r\n\"stdout\": \"\\nCommand aborted. Reason: 'Aborted by user'\\n\\nCommand failed after 1 tries\\n\",\r\n\"structured_out\": {}\r\n}{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "User aborted task reported as FAILED in Bgoperations"
   },
   {
      "_id": "13188144",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-09-28 12:34:35",
      "description": "Implement a new mode for Blueprint exports, a \"minimal\" mode in which only modified configuration is included in the exported Blueprint. The original \"full\" Blueprint export should still be possible, in order to maintain backwards compatibility.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Implement support for Minimal Blueprint Export"
   },
   {
      "_id": "13188138",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12321027",
            "id": "12321027",
            "name": "contrib",
            "description": "Contributions under \"contrib\""
         }
      ],
      "created": "2018-09-28 11:46:33",
      "description": "A Python that can convert old style isilon onefs clusters to the new mpack based cluster. The script should replace all of the HDFS_CLIENTs to ONEFS_CLIENT and the HDFS_SERVICE to ONEFS_SERVICE. Config types like core-site, hdfs-site, hadoop-env should be preserved.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Automation script for upgrade old style isilon cluster to the new mpack based structure"
   },
   {
      "_id": "13188020",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-09-27 20:18:22",
      "description": "{noformat:title=mvn -Del.log=WARN -am -pl ambari-server -DskipTests clean test}\r\n...\r\n[ERROR] Failed to execute goal on project ambari-server: Could not resolve dependencies for project org.apache.ambari:ambari-server:jar:2.0.0.0-SNAPSHOT: Could not find artifact org.apache.ambari:ambari-utility:jar:1.0.0.0-SNAPSHOT in oss.sonatype.org (https://oss.sonatype.org/content/groups/staging) -> [Help 1]\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Build fails due to missing ambari-utility"
   },
   {
      "_id": "13187564",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-09-26 10:13:31",
      "description": "Ambari-server setup-ldap throws an error when the OU has spaces\r\n\r\n{code}\r\nambari-server setup-ldap \\\r\n --ldap-url=ldap.example.com:636 \\\r\n --ldap-secondary-url=ldap.example.com:636 \\\r\n --ldap-ssl=true \\\r\n --ldap-user-class=person \\\r\n --ldap-user-attr=sAMAccountName \\\r\n --ldap-group-class=group \\\r\n --ldap-group-attr=cn \\\r\n --ldap-member-attr=member \\\r\n --ldap-dn=distinguishName \\\r\n --ldap-base-dn=\"OU=Group Users,DC=example,DC=com\" \\\r\n --ldap-referral=follow \\\r\n --ldap-bind-anonym=false \\\r\n --ldap-manager-dn=bind@example.com \\\r\n --ldap-manager-password=**** \\\r\n --ldap-sync-username-collisions-behavior=convert \\\r\n --ldap-save-settings\r\n{code}\r\n\r\nerror message:\r\n\r\n{code}\r\nUsing python  /usr/bin/python\r\nUsage: ambari-server.py action [options]\r\n\r\nOptions:\r\n  -h, --help            show this help message and exit\r\n...\r\n  --truststore-reconfigure\r\n                        Force to reconfigure TrustStore if exits\r\nNone\r\nUsage: ambari-server.py action [options]\r\n\r\nambari-server.py: error: Invalid number of arguments. Entered: 2, required: 1\r\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari-server setup-ldap throws an error when the OU has spaces"
   },
   {
      "_id": "13187182",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-09-25 04:47:07",
      "description": "The attached blueprint cannot be deployed, because {{hadoop-env.sh}} is not saved by Ambari, because it requires {{HDFS_CLIENT}} component on at least one host:\r\n\r\nhttps://github.com/apache/ambari/blob/8d145e0c04917866fd76690688826cf44065370e/ambari-server/src/main/resources/stack-hooks/before-ANY/scripts/hook.py#L32-L33\r\n\r\nDatanode start fails with:\r\n\r\n{noformat}\r\nExecutionFailed: Execution of 'ambari-sudo.sh su hdfs -l -s /bin/bash -c 'ulimit -c unlimited ;  /usr/hdp/3.0.0.0-1634/hadoop/bin/hdfs --config /usr/hdp/3.0.0.0-1634/hadoop/conf --daemon start datanode'' returned 1. ERROR: JAVA_HOME is not set and could not be found.\r\n{noformat}\r\n\r\nThis appears in output from {{after-INSTALL}} hook:\r\n\r\n{noformat}\r\nParameter hadoop_conf_dir is missing or directory does not exist. This is expected if this host does not have any Hadoop components.\r\n{noformat}\r\n\r\nAdditionally, host groups without {{HDFS_CLIENT}} cannot be scaled up.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Cannot deploy cluster without HDFS_CLIENT"
   },
   {
      "_id": "13186644",
      "assignee": "adoroszlai",
      "components": [],
      "created": "2018-09-21 15:53:05",
      "description": "Currently we use checkstyle 6.19 which is very old.\r\n\r\nWe should upgrade to 8.9 release.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Upgrade checkstyle version to 8.9"
   },
   {
      "_id": "13186607",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-09-21 12:22:21",
      "description": "STR:\r\n1) Deploy ambari 2.7.1 cluster\r\n2) Make registration of new version HDP \r\n\r\nActual result: The operation 'Install HDP-{$version} version' change name (from 'Install HDP-{$version} version' on 'Install Version') after ending of operation and page reloading. \r\nNote: take a look on screenshots\r\n\r\nExpected result: The operation for installing of new HDP version must have the constant name.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "The operation 'Install HDP-{$version} version' change name after ending and page reloading"
   },
   {
      "_id": "13186596",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-09-21 11:51:37",
      "description": "+*STR*+\r\n # install a cluster with HDFS and Tez (+other dependecies)\r\n # Kerberize the cluster\r\n # remove the HDFS client from the host where Tez client is installed\r\n # regenerate keytabs for HDFS\r\n\r\n+*Actual results*+\r\n\r\n\u00a0 the headless keytab for HDFS has not been regenerated\r\n\r\n+*Expected results*+\r\n\r\n\u00a0 the headless keytab is regenerated where it's necessary",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": " Regenerating keytabs for HDFS only does not re-create headless keytabs on all hosts where needed"
   },
   {
      "_id": "13186544",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-09-21 05:29:29",
      "description": "{{before-*}} hooks create a few directories.  If parallel agent execution is enabled tasks may need to be retried, because directory creation is not atomic (see AMBARI-24670).  This causes delays during cluster deployment.  While the underlying problem is being fixed, the goal of this task is to provide a workaround by creating the directory during sysprep phase.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Workaround for non-atomic directory creation"
   },
   {
      "_id": "13186542",
      "assignee": "aonishuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         }
      ],
      "created": "2018-09-21 05:21:16",
      "description": "If parallel execution is enabled on Ambari Agent, concurrent directory creation may fail with:\r\n\r\n{noformat:title=errors-62.txt}\r\nTraceback (most recent call last):\r\n  File \"/var/lib/ambari-agent/cache/stacks/HDP/2.0.6/hooks/before-ANY/scripts/hook.py\", line 35, in <module>\r\n    BeforeAnyHook().execute()\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 375, in execute\r\n    method(env)\r\n  File \"/var/lib/ambari-agent/cache/stacks/HDP/2.0.6/hooks/before-ANY/scripts/hook.py\", line 31, in hook\r\n    setup_hadoop_env()\r\n  File \"/var/lib/ambari-agent/cache/stacks/HDP/2.0.6/hooks/before-ANY/scripts/shared_initialization.py\", line 203, in setup_hadoop_env\r\n    mode=01777\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/base.py\", line 166, in __init__\r\n    self.env.run()\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/environment.py\", line 160, in run\r\n    self.run_action(resource, action)\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/environment.py\", line 124, in run_action\r\n    provider_action()\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py\", line 191, in action_create\r\n    sudo.makedir(path, self.resource.mode or 0755)\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/sudo.py\", line 121, in makedir\r\n    os.mkdir(path)\r\nOSError: [Errno 17] File exists: '/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'\r\n{noformat}\r\n\r\nor\r\n\r\n{noformat:title=errors-63.txt}\r\nTraceback (most recent call last):\r\n  File \"/var/lib/ambari-agent/cache/stacks/HDP/2.0.6/hooks/before-ANY/scripts/hook.py\", line 35, in <module>\r\n    BeforeAnyHook().execute()\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 375, in execute\r\n    method(env)\r\n  File \"/var/lib/ambari-agent/cache/stacks/HDP/2.0.6/hooks/before-ANY/scripts/hook.py\", line 31, in hook\r\n    setup_hadoop_env()\r\n  File \"/var/lib/ambari-agent/cache/stacks/HDP/2.0.6/hooks/before-ANY/scripts/shared_initialization.py\", line 203, in setup_hadoop_env\r\n    mode=01777\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/base.py\", line 166, in __init__\r\n    self.env.run()\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/environment.py\", line 160, in run\r\n    self.run_action(resource, action)\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/environment.py\", line 124, in run_action\r\n    provider_action()\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py\", line 179, in action_create\r\n    path = sudo.readlink(path)\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/sudo.py\", line 161, in readlink\r\n    return os.readlink(path)\r\nOSError: [Errno 22] Invalid argument: '/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'\r\n{noformat}\r\n\r\nThe failed tasks need to be retried to succeed, causing delays.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Directory creation should be atomic"
   },
   {
      "_id": "13186362",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-09-20 14:10:54",
      "description": "Now server sets components statuses to UNKNOWN and saves last actual state on\u00a0heartbeat lost. After agent re-registering server restores saved state, but in case \"in progress\" state request is already aborted and agent status updates can not be applied. Agent should always send component statuses after registering, not only on status changes. Also last actual state logic should be removed.\u00a0",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Component status can stuck in starting/stopping status on heartbeat lost"
   },
   {
      "_id": "13186332",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-09-20 12:48:01",
      "description": "Steps:\r\n# Deploy any cluster.\r\n# Do not refresh the page.\r\n# Go through add hosts wizard to deploy step.\r\n\r\nResult: JS errors in console after deploy button click. Also some persist requests with errors were sent to the server. \"App.get('clusterId')\" returns null. For perf cluster deploy the number of errors increases to several hundred.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "JS errors during adding hosts"
   },
   {
      "_id": "13186309",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-09-20 11:29:31",
      "description": "Colors in data visualization should be used in the following order of priority:\r\n# #41bfae\r\n# #79e3d1\r\n# #63c2e5\r\n# #c4aeff\r\n# #b991d9\r\n# #ffb9bf\r\n# #ffae65\r\n# #f6d151\r\n# #a7cf82\r\n# #abdfd5\r\n# #3aac9c\r\n# #6dccbc\r\n# #59aece\r\n# #b09ce5\r\n# #a682c3\r\n# #e5a6ac\r\n# #e59c5b\r\n# #ddbc49\r\n# #96ba75\r\n# #9ac8bf\r\n# #83d5ca\r\n# #a8ede1\r\n# #99d7ee\r\n# #d9caff\r\n# #d1b7e6\r\n# #ffd1d5\r\n# #ffca9b\r\n# #f9e18e\r\n# #c6e0ae\r\n# #c8eae4",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Implement data visualization color palette"
   },
   {
      "_id": "13185736",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-09-18 08:01:07",
      "description": "\n    INFO 2018-09-13 18:30:15,817 ClusterCache.py:125 - Rewriting cache ClusterTopologyCache for cluster 2\r\n    ERROR 2018-09-13 18:30:16,386 CustomServiceOrchestrator.py:456 - Caught an exception while executing custom service command: <type 'exceptions.TypeError'>: 'NoneType' object has no attribute '__getitem__'; 'NoneType' object has no attribute '__getitem__'\r\n    Traceback (most recent call last):\r\n      File \"/usr/lib/ambari-agent/lib/ambari_agent/CustomServiceOrchestrator.py\", line 324, in runCommand\r\n        command = self.generate_command(command_header)\r\n      File \"/usr/lib/ambari-agent/lib/ambari_agent/CustomServiceOrchestrator.py\", line 504, in generate_command\r\n        command_dict = self.configuration_builder.get_configuration(cluster_id, service_name, component_name, required_config_timestamp)\r\n      File \"/usr/lib/ambari-agent/lib/ambari_agent/ConfigurationBuilder.py\", line 46, in get_configuration\r\n        'agentLevelParams': {'hostname': self.topology_cache.get_current_host_info(cluster_id)['hostName']},\r\n    TypeError: 'NoneType' object has no attribute '__getitem__'\r\n    \n\nThis was found while perf testing.  \nHowever can occur under any circumstances if ambari-agent node if slow enough.\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Tasks fail on ambari-agent intermittently under cpu load due to race condition in ambari-agent"
   },
   {
      "_id": "13185599",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-09-17 18:13:55",
      "description": "Server should post cluster settings and stack settings to agent with STOMP updates.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Add cluster and stack settings properties to agent STOMP updates"
   },
   {
      "_id": "13185183",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-09-14 16:10:18",
      "description": "- The tooltip content is not formatted\r\n- Tooltip isn't displayed on some pages",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Issues with tooltip containing custom time range for charts"
   },
   {
      "_id": "13185115",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         }
      ],
      "created": "2018-09-14 11:23:34",
      "description": "Stack advisor error: \r\n\r\n{code}\r\nError details: None\r\n2018-09-11 06:40:09,738  INFO [ambari-client-thread-24150] StackAdvisorRunner:167 -     Advisor script stderr: Traceback (most recent call last):\r\n  File \"/var/lib/ambari-server/resources/scripts/stack_advisor.py\", line 184, in <module>\r\n    main(sys.argv)\r\n  File \"/var/lib/ambari-server/resources/scripts/stack_advisor.py\", line 138, in main\r\n    result = stackAdvisor.validateConfigurations(services, hosts)\r\n  File \"/var/lib/ambari-server/resources/scripts/../stacks/stack_advisor.py\", line 1079, in validateConfigurations\r\n validationItems = self.getConfigurationsValidationItems(services, hosts)\r\n  File \"/var/lib/ambari-server/resources/scripts/../stacks/stack_advisor.py\", line 1468, in getConfigurationsValidationItems\r\n    items.extend(self.getConfigurationsValidationItemsForService(configurations, recommendedDefaults, service, services, hosts))\r\n  File \"/var/lib/ambari-server/resources/scripts/../stacks/stack_advisor.py\", line 1521, in getConfigurationsValidationItemsForService\r\n    items.extend(serviceAdvisor.getServiceConfigurationsValidationItems(configurations, recommendedDefaults, services, hosts))\r\n  File \"/var/lib/ambari-server/resources/stacks/HDP/3.0/services/AMBARI_METRICS/service_advisor.py\", line 218, in getServiceConfigurationsValidationItems\r\n    return validator.validateListOfConfigUsingMethod(configurations, recommendedDefaults, services, hosts, validator.validators)\r\n  File \"/var/lib/ambari-server/resources/scripts/../stacks/stack_advisor.py\", line 1491, in validateListOfConfigUsingMethod\r\n    validationItems = method(siteProperties, siteRecommendations, configurations, services, hosts)\r\n  File \"/var/lib/ambari-server/resources/stacks/HDP/3.0/services/AMBARI_METRICS/service_advisor.py\", line 556, in validateAmsHbaseSiteConfigurationsFromHDP206\r\n    validationItems.extend([{\"config-name\": 'hbase.rootdir', \"item\": self.validatorEnoughDiskSpace(properties, 'hbase.rootdir', host[\"Hosts\"], recommendedDiskSpace)}])\r\n  File \"/var/lib/ambari-server/resources/scripts/../stacks/stack_advisor.py\", line 2998, in validatorEnoughDiskSpace\r\n    if mountPoints[mountPoint] < reqiuredDiskSpace:\r\nKeyError: None\r\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Stackadvisor error while trying to add atlas service. Error - \"if mountPoints[mountPoint] < reqiuredDiskSpace: KeyError: None\""
   },
   {
      "_id": "13185090",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-09-14 08:52:55",
      "description": "In the cluster , while trying to turn off maintenance mode on host , nothing happens and below error is seen in the console.\r\n\r\nInitial analysis indicate that this could be because some host components are out of sync. But this may or may not be RC. Kindly check.\r\n\r\n{code:java}\r\nUncaught TypeError: Cannot read property 'get' of undefined\r\n    at Class.onOffPassiveModeForHost (app.js:26825)\r\n    at Class.doAction (app.js:26800)\r\n    at handler (vendor.js:31554)\r\n    at HTMLAnchorElement.<anonymous> (vendor.js:23346)\r\n    at HTMLDivElement.dispatch (vendor.js:3178)\r\n    at HTMLDivElement.elemData.handle (vendor.js:2854)\r\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Not able to turn off maintenance mode for a host."
   },
   {
      "_id": "13185077",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-09-14 08:07:08",
      "description": "There was one process which started using memory rapidly at certain point and grew up to ~27GB of RSS used until eventually we restarted it. Which happened after a month of running of 10 ambari-agent nodes.\r\n\r\n    [root@andrew2-1n01 ~]# ps aux | grep ambari_agent\r\n    root     39955  0.0  0.0  47580  6024 ?        S    Aug17   0:00 /usr/bin/python /usr/lib/ambari-agent/lib/ambari_agent/AmbariAgent.py start\r\n    root     39959 20.4 10.2 31623096 27154348 ?   Sl   Aug17 7645:55 /usr/bin/python /usr/lib/ambari-agent/lib/ambari_agent/main.py start\r\n\r\nJust before the growth in memory usage is seen. This exception pops out:\r\n\r\nERROR 2018-09-11 10:56:59,716 websocket.py:552 - Websocket connection was closed with an exception\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/ambari-agent/lib/ambari_ws4py/websocket.py\", line 549, in run\r\n    if not self.once():\r\n  File \"/usr/lib/ambari-agent/lib/ambari_ws4py/websocket.py\", line 428, in once\r\n    if not self.process(self.buf[:requested]):\r\n  File \"/usr/lib/ambari-agent/lib/ambari_ws4py/websocket.py\", line 483, in process\r\n    self.reading_buffer_size = s.parser.send(bytes) or DEFAULT_READING_SIZE\r\nValueError: generator already executing\r\n\r\nThis exception is not seen on all other nodes or on this one at any other period (during 1 month). So I suggest it can be the root cause.\r\nBasically this error means that generator is being used by multiple threads. So I will upload the fix to thread-lock this place.\r\n\r\nThis is just a guess solution which might work and might not. No way to test really. But definitely we should try this.\r\n    \r\nThis is noticed in ambari-2.7.1.0-73 version as well.  \r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari-agent process memory leak"
   },
   {
      "_id": "13184596",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-09-12 13:08:53",
      "description": "Behavior in ambari-2.7.0\r\n1. login\r\n2. navigate host details page.\r\n3. click host action\r\n4. click \"Turn On Maintenance Mode\"\r\nafter the first confirm window. we can see the text which displays \"Host is in Maintenance mode\"\r\n \r\nBut in ambari-2.7.1\r\nThe UI Tab which display \"Turn On Maintenance Mode\" \r\nIt is not getting displayed.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "\"Host is in Maintenance mode\" text is not displayed in UI after maintenance mode is turned on"
   },
   {
      "_id": "13184542",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-09-12 08:22:44",
      "description": "Some filesystems does not support nameservices:\n\n    \n    \n    resource_management.core.exceptions.ExecutionFailed: Execution of 'hadoop --config /usr/hdp/3.0.1.0-179/hadoop/conf jar /var/lib/ambari-agent/lib/fast-hdfs-resource.jar /var/lib/ambari-agent/tmp/hdfs_resources_1536226305.38.json' returned 1. Exception occurred, Reason: abfs://mycluster has invalid authority.\r\n    abfs://mycluster has invalid authority.\r\n    \tat org.apache.hadoop.fs.azurebfs.AzureBlobFileSystemStore.initializeClient(AzureBlobFileSystemStore.java:732)\r\n    \tat org.apache.hadoop.fs.azurebfs.AzureBlobFileSystemStore.<init>(AzureBlobFileSystemStore.java:129)\r\n    \tat org.apache.hadoop.fs.azurebfs.AzureBlobFileSystem.initialize(AzureBlobFileSystem.java:97)\r\n    \tat org.apache.hadoop.fs.FileSystem.createFileSystem(FileSystem.java:3354)\r\n    \tat org.apache.hadoop.fs.FileSystem.access$200(FileSystem.java:124)\r\n    \tat org.apache.hadoop.fs.FileSystem$Cache.getInternal(FileSystem.java:3403)\r\n    \tat org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:3371)\r\n    \tat org.apache.hadoop.fs.FileSystem.get(FileSystem.java:477)\r\n    \tat org.apache.ambari.fast_hdfs_resource.Runner.main(Runner.java:83)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.apache.hadoop.util.RunJar.run(RunJar.java:318)\r\n    \tat org.apache.hadoop.util.RunJar.main(RunJar.java:232)\r\n    \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "hdfsResource fails to using nameservices for filesystems which does not support that"
   },
   {
      "_id": "13184530",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-09-12 05:45:37",
      "description": "LZO packages may be pre-installed in sysprepped environments, but Ambari still manages the repo and checks for existence of the packages, which takes time.  The goal of this change is to allow users who pre-install packages to skip package manager operations for LZO packages, too.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Allow skipping package operations for LZO on sysprepped hosts"
   },
   {
      "_id": "13184361",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-09-11 14:08:00",
      "description": "See screenshot\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Duplicate view of configurations in Add Service wizard"
   },
   {
      "_id": "13184340",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-09-11 12:55:00",
      "description": "It is not convenient to configure slaves and clients for deploy with numerous hosts because horizontal scroll bar is placed in the bottom of hosts list.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Horizontal scroll bar on assign slaves and clients page is not convenient for deploy with numerous hosts"
   },
   {
      "_id": "13184100",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-09-10 17:08:19",
      "description": "Disable Kerberos from Ambari UI didn't clean up keytab directories,\r\n\r\nstderr:\r\n\r\n{code:java}\r\n2018-09-08 05:27:19,276 - Failed to remove identity for amsmon/ctr-e138-1518143905142-467151-01-000002.hwx.site@EXAMPLE.COM from the Ambari database - Object: null is not a known Entity type.\r\n2018-09-08 05:27:19,298 - Failed to remove identity for amsmon/ctr-e138-1518143905142-467151-01-000006.hwx.site@EXAMPLE.COM from the Ambari database - Object: null is not a known Entity type.\r\n2018-09-08 05:27:19,325 - Failed to remove identity for amsmon/ctr-e138-1518143905142-467151-01-000005.hwx.site@EXAMPLE.COM from the Ambari database - Object: null is not a known Entity type.\r\n2018-09-08 05:27:19,348 - Failed to remove identity for amsmon/ctr-e138-1518143905142-467151-01-000003.hwx.site@EXAMPLE.COM from the Ambari database - Object: null is not a known Entity type.\r\n2018-09-08 05:27:19,465 - Failed to remove identity for dn/ctr-e138-1518143905142-467151-01-000003.hwx.site@EXAMPLE.COM from the Ambari database - Object: null is not a known Entity type.\r\n2018-09-08 05:27:19,491 - Failed to remove identity for dn/ctr-e138-1518143905142-467151-01-000002.hwx.site@EXAMPLE.COM from the Ambari database - Object: null is not a known Entity type.\r\n2018-09-08 05:27:19,515 - Failed to remove identity for dn/ctr-e138-1518143905142-467151-01-000005.hwx.site@EXAMPLE.COM from the Ambari database - Object: null is not a known Entity type.\r\n2018-09-08 05:27:19,539 - Failed to remove identity for dn/ctr-e138-1518143905142-467151-01-000004.hwx.site@EXAMPLE.COM from the Ambari database - Object: null is not a known Entity type.\r\n2018-09-08 05:27:19,671 - Failed to remove identity for hbase/ctr-e138-1518143905142-467151-01-000006.hwx.site@EXAMPLE.COM from the Ambari database - Object: null is not a known Entity type.\r\n2018-09-08 05:27:19,696 - Failed to remove identity for hbase/ctr-e138-1518143905142-467151-01-000003.hwx.site@EXAMPLE.COM from the Ambari database - Object: null is not a known Entity type.\r\n2018-09-08 05:27:19,723 - Failed to remove identity for hbase/ctr-e138-1518143905142-467151-01-000004.hwx.site@EXAMPLE.COM from the Ambari database - Object: null is not a known Entity type.\r\n2018-09-08 05:27:19,744 - Failed to remove identity for hbase/ctr-e138-1518143905142-467151-01-000002.hwx.site@EXAMPLE.COM from the Ambari database - Object: null is not a known Entity type.\r\n2018-09-08 05:27:19,959 - Failed to remove identity for nm/ctr-e138-1518143905142-467151-01-000005.hwx.site@EXAMPLE.COM from the Ambari database - Object: null is not a known Entity type.\r\n2018-09-08 05:27:19,987 - Failed to remove identity for nm/ctr-e138-1518143905142-467151-01-000006.hwx.site@EXAMPLE.COM from the Ambari database - Object: null is not a known Entity type.\r\n2018-09-08 05:27:20,049 - Failed to remove identity for nn/ctr-e138-1518143905142-467151-01-000003.hwx.site@EXAMPLE.COM from the Ambari database - Object: null is not a known Entity type.\r\n2018-09-08 05:27:20,376 - Failed to remove identity for HTTP/ctr-e138-1518143905142-467151-01-000002.hwx.site@EXAMPLE.COM from the Ambari database - Object: null is not a known Entity type.\r\n2018-09-08 05:27:20,399 - Failed to remove identity for HTTP/ctr-e138-1518143905142-467151-01-000004.hwx.site@EXAMPLE.COM from the Ambari database - Object: null is not a known Entity type.\r\n2018-09-08 05:27:20,420 - Failed to remove identity for HTTP/ctr-e138-1518143905142-467151-01-000003.hwx.site@EXAMPLE.COM from the Ambari database - Object: null is not a known Entity type.\r\n2018-09-08 05:27:20,441 - Failed to remove identity for HTTP/ctr-e138-1518143905142-467151-01-000005.hwx.site@EXAMPLE.COM from the Ambari database - Object: null is not a known Entity type.\r\n2018-09-08 05:27:20,590 - Failed to remove identity for yarn-ats-hbase/ctr-e138-1518143905142-467151-01-000003.hwx.site@EXAMPLE.COM from the Ambari database - Object: null is not a known Entity type.\r\n2018-09-08 05:27:20,617 - Failed to remove identity for yarn-ats-hbase/ctr-e138-1518143905142-467151-01-000002.hwx.site@EXAMPLE.COM from the Ambari database - Object: null is not a known Entity type.\r\n2018-09-08 05:27:20,647 - Failed to remove identity for yarn-ats-hbase/ctr-e138-1518143905142-467151-01-000004.hwx.site@EXAMPLE.COM from the Ambari database - Object: null is not a known Entity type.\r\n2018-09-08 05:27:20,677 - Failed to remove identity for yarn-ats-hbase/ctr-e138-1518143905142-467151-01-000005.hwx.site@EXAMPLE.COM from the Ambari database - Object: null is not a known Entity type.\r\n2018-09-08 05:27:20,768 - Failed to remove identity for zookeeper/ctr-e138-1518143905142-467151-01-000006.hwx.site@EXAMPLE.COM from the Ambari database - Object: null is not a known Entity type.\r\n2018-09-08 05:27:20,798 - Failed to remove identity for zookeeper/ctr-e138-1518143905142-467151-01-000004.hwx.site@EXAMPLE.COM from the Ambari database - Object: null is not a known Entity type\r\n{code}\r\n\r\n\r\n{code:java}\r\n[root@ctr-e138-1518143905142-467151-01-000002 ~]# ls -lrt /etc/security/keytabs/\r\ntotal 56\r\n-rw-r----- 1 ambari-qa  hadoop 318 Sep  7 23:00 kerberos.service_check.090718.keytab\r\n-r-------- 1 slava      slava  353 Sep  7 23:05 ambari.server.keytab\r\n-r--r----- 1 root       hadoop 538 Sep  7 23:05 spnego.service.keytab\r\n-r-------- 1 cstm-ams   hadoop 548 Sep  7 23:05 ams-monitor.keytab\r\n-r-------- 1 cstm-hdfs  hadoop 533 Sep  7 23:05 nfs.service.keytab\r\n-r--r----- 1 cstm-hbase hadoop 338 Sep  7 23:05 hbase.headless.keytab\r\n-r-------- 1 yarn-ats   hadoop 328 Sep  7 23:05 yarn-ats.hbase-client.headless.keytab\r\n-r-------- 1 cstm-hdfs  hadoop 528 Sep  7 23:05 dn.service.keytab\r\n-r-------- 1 yarn-ats   hadoop 588 Sep  7 23:05 yarn-ats.hbase-regionserver.service.keytab\r\n-r--r----- 1 ambari-qa  hadoop 333 Sep  7 23:05 smokeuser.headless.keytab\r\n-r-------- 1 cstm-hbase hadoop 543 Sep  7 23:05 hbase.service.keytab\r\n-r-------- 1 cstm-hdfs  hadoop 528 Sep  7 23:05 nn.service.keytab\r\n-r-------- 1 yarn-ats   hadoop 588 Sep  7 23:05 yarn-ats.hbase-master.service.keytab\r\n-r-------- 1 cstm-hdfs  hadoop 333 Sep  7 23:05 hdfs.headless.keytab\r\n{code}\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Disable Kerberos from Ambari UI didn't clean up keytab directories"
   },
   {
      "_id": "13184008",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-09-10 11:05:34",
      "description": "Steps to reproduce:-\r\n1. Login\r\n2.Open host page.\r\n3. select on host.\r\n4. click on \"Host-Action\" Tab and select \"Turn On Maintenance mode \"\r\n\r\nThe message is showing \r\n{code}\r\nAre you sure you want to Turn Off Maintenance Mode for ctr-e138-1518143905142-471677-01-000006.hwx.site?\r\n{code}\r\n\r\nI am trying to Turn On Maintenance Mode.\r\n\r\nafter that \r\n !Screen Shot 2018-09-10 at 2.31.42 PM.png|thumbnail! \r\n{code}\r\nMaintenance Mode has been turned off. It may take a few minutes for the alerts to be enabled.\r\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Host Level Maintenance mode is not working through Ambari UI"
   },
   {
      "_id": "13184001",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-09-10 10:28:23",
      "description": "When you disable an alert, the web client shows that the instance of the alert was removed immediately, however, the red badges indicating a critical alert do not disappear.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Disabling an Alert Does Not Clear It in the Web UI"
   },
   {
      "_id": "13183651",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-09-07 14:39:28",
      "description": "*STR*\r\n1. login using widgetuser(username),widgetpass(password) the role is cluster operator\r\n2. go to hdfs-> metrics tab\r\n3. EDIT shared the \"Under Replicated Blocks\" widgets.\u00a0\r\n4. the error can be reproduced\r\n\r\n*Actual Result:*\r\n\r\n!errorWhileEditingWidgetsAsClusterOperator.png!\r\n\r\n*Expected Result:*\r\n\r\nAccording to our Role Chart a user with Cluster Operator role should be able to create/edit widgets\r\n\r\n!RoleChart.png!\r\n\r\n\u00a0",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "ambari-server exception if any user with cluster operator role is trying to edit the widget."
   },
   {
      "_id": "13183275",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-09-06 01:23:16",
      "description": "Below error message pop-up when make and save any configuration changes to the service running on HDP301 cluster.\r\n\r\n\u00a0\r\n\r\nError\r\n\r\n500 status code\u00a0received on POST method for API: /api/v1/stacks/HDP/versions/3.0/validations\u00a0\r\n \r\n\r\n*Error message:* Stack Advisor reported an error. Exit Code: 2. Error: KeyError: 'onefs'\r\n\r\nStdOut file: /var/run/ambari-server/stack-recommendations/20/stackadvisor.out\r\n\r\nStdErr file: /var/run/ambari-server/stack-recommendations/20/stackadvisor.err\r\n\r\n\u00a0\r\n\r\n!image-2018-09-06-09-12-32-080.png!\r\n\r\n\u00a0",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Stack Advisor reported an error. Exit Code: 2. Error: KeyError: 'onefs' "
   },
   {
      "_id": "13183089",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-09-05 10:34:01",
      "description": "When ambari is running with a user that has UID/GID >2097151 download client configs fails with the following error:\r\n\r\n{code}\r\n{ \r\n\"status\" : 500, \r\n\"message\" : \"org.apache.ambari.server.controller.spi.SystemException: group id '19600006' is too big ( > 2097151 )\" \r\n} \r\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Download client config fails if user running Ambari server has UID>2097151\t"
   },
   {
      "_id": "13182692",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-09-03 21:49:19",
      "description": "Livy2 restart fails from Ambari due to Ambari could not fetch some Hadoop\r\nconfigs?\r\n\r\nStdErr:\r\n{code}    \r\n    Traceback (most recent call last):\r\n      File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/SPARK2/package/scripts/livy2_server.py\", line 148, in <module>\r\n        LivyServer().execute()\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 351, in execute\r\n        method(env)\r\n      File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/SPARK2/package/scripts/livy2_server.py\", line 62, in start\r\n        self.configure(env)\r\n      File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/SPARK2/package/scripts/livy2_server.py\", line 52, in configure\r\n        setup_livy(env, 'server', upgrade_type=upgrade_type, action = 'config')\r\n      File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/SPARK2/package/scripts/setup_livy2.py\", line 53, in setup_livy\r\n        params.HdfsResource(None, action=\"execute\")\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/base.py\", line 166, in __init__\r\n        self.env.run()\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/environment.py\", line 160, in run\r\n        self.run_action(resource, action)\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/environment.py\", line 124, in run_action\r\n        provider_action()\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 681, in action_execute\r\n        self.get_hdfs_resource_executor().action_execute(self)\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 164, in action_execute\r\n        logoutput=logoutput,\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/base.py\", line 166, in __init__\r\n        self.env.run()\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/environment.py\", line 160, in run\r\n        self.run_action(resource, action)\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/environment.py\", line 124, in run_action\r\n        provider_action()\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py\", line 263, in action_run\r\n        returns=self.resource.returns)\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/shell.py\", line 72, in inner\r\n        result = function(command, **kwargs)\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/shell.py\", line 102, in checked_call\r\n        tries=tries, try_sleep=try_sleep, timeout_kill_strategy=timeout_kill_strategy, returns=returns)\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/shell.py\", line 150, in _call_wrapper\r\n        result = _call(command, **kwargs_copy)\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/shell.py\", line 314, in _call\r\n        raise ExecutionFailed(err_msg, code, out, err)\r\n    resource_management.core.exceptions.ExecutionFailed: Execution of 'hadoop --config /usr/hdp/3.0.1.0-175/hadoop/conf jar /var/lib/ambari-agent/lib/fast-hdfs-resource.jar /var/lib/ambari-agent/tmp/hdfs_resources_1535895647.58.json' returned 1. Initializing filesystem uri: hdfs://mycluster\r\n    Creating: Resource [source=null, target=wasb://spark2l-at30wu-livy2-121012@humbtesting5wua2.blob.core.windows.net/user/livy/recovery-69e01f25-3b7b-4af4-a787-37664ab45f0c, type=directory, action=create, owner=livy, group=null, mode=700, recursiveChown=false, recursiveChmod=false, changePermissionforParents=false, manageIfExists=true] in hdfs://mycluster\r\n    Exception occurred, Reason: Wrong FS: wasb://spark2l-at30wu-livy2-121012@humbtesting5wua2.blob.core.windows.net/user/livy/recovery-69e01f25-3b7b-4af4-a787-37664ab45f0c, expected: hdfs://mycluster\r\n    java.lang.IllegalArgumentException: Wrong FS: wasb://spark2l-at30wu-livy2-121012@humbtesting5wua2.blob.core.windows.net/user/livy/recovery-69e01f25-3b7b-4af4-a787-37664ab45f0c, expected: hdfs://mycluster\r\n    \tat org.apache.hadoop.fs.FileSystem.checkPath(FileSystem.java:781)\r\n    \tat org.apache.hadoop.hdfs.DistributedFileSystem.getPathName(DistributedFileSystem.java:240)\r\n    \tat org.apache.hadoop.hdfs.DistributedFileSystem$29.doCall(DistributedFileSystem.java:1583)\r\n    \tat org.apache.hadoop.hdfs.DistributedFileSystem$29.doCall(DistributedFileSystem.java:1580)\r\n    \tat org.apache.hadoop.fs.FileSystemLinkResolver.resolve(FileSystemLinkResolver.java:81)\r\n    \tat org.apache.hadoop.hdfs.DistributedFileSystem.getFileStatus(DistributedFileSystem.java:1595)\r\n    \tat org.apache.hadoop.fs.FileSystem.isFile(FileSystem.java:1768)\r\n    \tat org.apache.ambari.fast_hdfs_resource.Resource.checkResourceParameters(Resource.java:193)\r\n    \tat org.apache.ambari.fast_hdfs_resource.Runner.main(Runner.java:112)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.apache.hadoop.util.RunJar.run(RunJar.java:318)\r\n    \tat org.apache.hadoop.util.RunJar.main(RunJar.java:232)\r\n    \r\n{code}\r\n\r\nPlease note that the system test sets the\r\n\r\nproperty | from | to  \r\n---|---|---  \r\n`livy.server.recovery.state-store` | `zookeeper` | `filesystem`  \r\n`livy.server.recovery.state-store.url` |\r\n`zk1-b24996.zu2zfpuge4su5ceknrmkpsq3ra.ix.internal.cloudapp.net:2181,zk2-b24996.zu2zfpuge4su5ceknrmkpsq3ra.ix.internal.cloudapp.net:2181,zk5-b24996.zu2zfpuge4su5ceknrmkpsq3ra.ix.internal.cloudapp.net:2181`\r\n| `wasb://spark2l-at30wu-\r\nlivy2-121012@humbtesting5wua2.blob.core.windows.net/user/livy/recovery-\r\n69e01f25-3b7b-4af4-a787-37664ab45f0c`  \r\n  \r\nand then the restart fails.\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "HDI Livy2 fails to restart"
   },
   {
      "_id": "13182670",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-09-03 16:19:01",
      "description": "The property 'yarn.nodemanager.linux-container-executor.cgroups.hierarchy' does not show up in the UI install wizard even when {{yarn_cgroups_enabled}} and {{gpu_module_enabled}} are enabled in YARN configs. But this property is available after deployment of the cluster.  \r\n\r\n !Screen Shot 2018-09-02 at 10.20.43 PM.png|thumbnail! \r\n !Screen Shot 2018-09-02 at 10.22.33 PM.png|thumbnail! \r\nWhen trying to set a value for the config 'yarn.nodemanager.linux-container-executor.cgroups.hierarchy', Stack advisor displays the following:\r\n{code}\r\nyarn.nodemanager.linux-container-executor.cgroups.hierarchy and yarn_hierarchy should always have same value\r\nyarn.nodemanager.linux-container-executor.cgroups.hierarchy and yarn_hierarchy should always have same value\r\nName of the Cgroups hierarchy under which all YARN jobs will be launched\r\n{code}\r\n !Screen Shot 2018-09-02 at 10.25.08 PM.png|thumbnail! \r\nFrom the stack advisor description, looks like 'yarn.nodemanager.linux-container-executor.cgroups.hierarchy' property needs to be same as yarn_hierarchy. As part of UI Deploy, the property {{yarn_hierarchy}} is set to {{hadoop-yarn-tmp-ctr-e138-1518143905142-461959-01-000002.hwx.site}}. But after deploy, the {{yarn.nodemanager.linux-container-executor.cgroups.hierarchy}} is set to {{/yarn}} and not the property set while UI Deploy. This is causing Deploy failures due to Nodemanagers not getting started. When this property is set correctly, Nodemanagers start successfully. ",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "'yarn.nodemanager.linux-container-executor.cgroups.hierarchy' is not equal to the value of yarn_hierarchy in UI Deploy"
   },
   {
      "_id": "13182337",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-08-31 10:59:36",
      "description": "Quicklinks in HDI environment are overflowing in UI. See attached.\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Quicklinks URL overflow outside the UI box"
   },
   {
      "_id": "13182161",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2018-08-30 15:43:00",
      "description": "AMS should handle a customized Zookeeper service principal name.\r\n\r\nCurrently this is not supported due to hardcoded and implicit values expecting the Zookeeper service principal name to be zookeeper/_HOST as opposed to something like zookeeper-mycluster/_HOST.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari Metrics should handle a customized Zookeeper service principal name"
   },
   {
      "_id": "13182116",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2018-08-30 12:53:08",
      "description": "Atlas should handle a customized Zookeeper service principal name.\r\n\r\nCurrently this is not supported due to hardcoded and implicit values expecting the Zookeeper service principal name to be zookeeper/_HOST as opposed to something like zookeeper-mycluster/_HOST.\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Atlas should handle a customized Zookeeper service principal name"
   },
   {
      "_id": "13182104",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-08-30 11:37:25",
      "description": "In order to enable Kerberos for Hive MetaStore we need a property in {{core-site}}, which is ignored by Ambari if HDFS is not present.  Hive Metastore start fails due to empty {{core-site}} with:\r\n\r\n{noformat}\r\nKeeperException$InvalidACLException: KeeperErrorCode = InvalidACL for /hive/cluster/delegationMETASTORE/keys\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Cannot deploy Hive Metastore with Kerberos without HDFS"
   },
   {
      "_id": "13181969",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         }
      ],
      "created": "2018-08-29 18:29:45",
      "description": "STR:-\r\n1. deploy the cluster with HDP-3.0.1.0-164 + ambari_version : 2.7.1.0-147\r\n2. added a patch targetVDF-29-08-2018-00-53-55.xml \r\n3. install version\r\n\r\n{code}\r\n2018-08-29 16:47:27,225 - Package Manager failed to install packages: Failed to execute command '/usr/bin/apt-get -o Dpkg::Options::=--force-confdef --allow-unauthenticated --assume-yes install -o Dir::Etc::SourceList=/dev/null -o Dir::Etc::SourceParts= hdp-select', exited with code '100', message: 'E: dpkg was interrupted, you must manually run 'dpkg --configure -a' to correct the problem. \r\n'\r\n2018-08-29 16:47:27,250 - Could not install packages. Error: global name 'VERIFY_DEPENDENCY_CMD' is not defined\r\nTraceback (most recent call last):\r\n  File \"/var/lib/ambari-agent/cache/custom_actions/scripts/install_packages.py\", line 136, in actionexecute\r\n    ret_code = self.install_packages(package_list)\r\n  File \"/var/lib/ambari-agent/cache/custom_actions/scripts/install_packages.py\", line 447, in install_packages\r\n    if not self.repo_mgr.verify_dependencies():\r\n  File \"/usr/lib/ambari-agent/lib/ambari_commons/repo_manager/apt_manager.py\", line 218, in verify_dependencies\r\n    err_msg = Logger.filter_text(\"Failed to verify package dependencies. Execution of '%s' returned %s. %s\" % (VERIFY_DEPENDENCY_CMD, code, out))\r\nNameError: global name 'VERIFY_DEPENDENCY_CMD' is not defined\r\nTraceback (most recent call last):\r\n  File \"/var/lib/ambari-agent/cache/custom_actions/scripts/install_packages.py\", line 136, in actionexecute\r\n    ret_code = self.install_packages(package_list)\r\n  File \"/var/lib/ambari-agent/cache/custom_actions/scripts/install_packages.py\", line 447, in install_packages\r\n    if not self.repo_mgr.verify_dependencies():\r\n  File \"/usr/lib/ambari-agent/lib/ambari_commons/repo_manager/apt_manager.py\", line 218, in verify_dependencies\r\n    err_msg = Logger.filter_text(\"Failed to verify package dependencies. Execution of '%s' returned %s. %s\" % (VERIFY_DEPENDENCY_CMD, code, out))\r\nNameError: global name 'VERIFY_DEPENDENCY_CMD' is not defined\r\n\r\nThe above exception was the cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/var/lib/ambari-agent/cache/custom_actions/scripts/install_packages.py\", line 486, in <module>\r\n    InstallPackages().execute()\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 351, in execute\r\n    method(env)\r\n  File \"/var/lib/ambari-agent/cache/custom_actions/scripts/install_packages.py\", line 149, in actionexecute\r\n    raise Fail(\"Failed to distribute repositories/install packages\")\r\nresource_management.core.exceptions.Fail: Failed to distribute repositories/install packages\r\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "global name 'VERIFY_DEPENDENCY_CMD' is not defined'"
   },
   {
      "_id": "13181955",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-08-29 17:27:30",
      "description": "Protect the ClientConfig resource so that only authorized users may have read-only access the data.\r\n\r\nUsers with the following permission should have read-only access:\r\n* {{CLUSTER.VIEW_CONFIGS}}\r\n* {{SERVICE.VIEW_CONFIGS}}\r\n* {{HOST.VIEW_CONFIGS}}\r\n\r\nThese permissions should be allow for the following roles:\r\n* {{AMBARI.ADMINISTRATOR}}\r\n* {{CLUSTER.ADMINISTRATOR}}\r\n* {{CLUSTER.OPERATOR}}\r\n* {{SERVICE.ADMINISTRATOR}}\r\n* {{SERVICE.OPERATOR}}\r\n* {{CLUSTER.USER}}\r\n\r\nUsers with no role related to the cluster may not view the data.\r\n\r\nExample REST API entry point:\r\n{noformat}\r\nGET /api/v1/clusters/cl1/services/HDFS/components/HDFS_CLIENT?format=client_config_tar\r\n{noformat}\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available",
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Protect the ClusterConfig resource so that only authorized users may have read-only access the data"
   },
   {
      "_id": "13181905",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-08-29 12:31:05",
      "description": "- Move 'Preparing the Upgrade' text from the corresponding modal to its header\r\n- Upgrade Options popup: add some vertical padding between peragraphs\r\n- Upgrade Options popup: center the contents of upgrade type blocks and add more padding to them\r\n- Make pre-upgrade checks popup wider\r\n- Pre-upgrade checks popup: display warnings as regular text instead of well blocks",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Update styles for pre-upgrade modals"
   },
   {
      "_id": "13181875",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-08-29 10:38:52",
      "description": "While debugging with we encountered an issue where call to `fuser 8670/tcp` it got blocked for minutes\n- in fact we did not ever see the agent start and had to comment the call. Two\nimprovements:\n\n  * Need timeout for such calls (lets also research and see why the call may get stuck). We checked that the port was free.\n  * Need more debug logging in the initial start up path to help debug what command is getting stuck - in main.py, and PingPortListener.py lets see if more debug logging can be added\n\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Better debugging for agent start failure due to stuck fuser call"
   },
   {
      "_id": "13181872",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-08-29 10:32:44",
      "description": "  * Download client config for HDFS from UI\n  * Compare the contents of core-site.xml between downloaded config and the one in /etc/hadoop/conf/core-site.xml\n\nFollowing properties have a difference:\n\n  * fs.azure.user.agent.prefix\n  * fs.s3a.user.agent.prefix\n\nBoth of them have value **User-Agent: APN/1.0 Hortonworks/1.0 HDP/None** in\ndownloaded file where as in host config file it is **User-Agent: APN/1.0\nHortonworks/1.0 HDP/3.0.0.0-1453**\n\nCould you please check\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Diff in Downloaded client config: Host file has Stack info where as downloaded file has 'None' in \"user.agent.prefix\" properties"
   },
   {
      "_id": "13181626",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-08-28 14:44:35",
      "description": "Facing issue installing Nifi Registry on HDP_HDF cluster. The create keytab step in Ambari is failing during installation. Below exception is seen in ambari logs.\r\n \r\n{code}\r\n2018-08-21 13:11:03,401 ERROR [Server Action Executor Worker 1305] CreatePrincipalsServerAction:309 - Failed to create principal,  - Failed to create new principal - no principal specified\r\norg.apache.ambari.server.serveraction.kerberos.KerberosOperationException: Failed to create new principal - no principal specified\r\n        at org.apache.ambari.server.serveraction.kerberos.MITKerberosOperationHandler.createPrincipal(MITKerberosOperationHandler.java:159)\r\n        at org.apache.ambari.server.serveraction.kerberos.CreatePrincipalsServerAction.createPrincipal(CreatePrincipalsServerAction.java:268)\r\n        at org.apache.ambari.server.serveraction.kerberos.CreatePrincipalsServerAction.processIdentity(CreatePrincipalsServerAction.java:157)\r\n        at org.apache.ambari.server.serveraction.kerberos.KerberosServerAction.processIdentities(KerberosServerAction.java:460)\r\n        at org.apache.ambari.server.serveraction.kerberos.CreatePrincipalsServerAction.execute(CreatePrincipalsServerAction.java:92)\r\n        at org.apache.ambari.server.serveraction.ServerActionExecutor$Worker.execute(ServerActionExecutor.java:550)\r\n        at org.apache.ambari.server.serveraction.ServerActionExecutor$Worker.run(ServerActionExecutor.java:466)\r\n        at java.lang.Thread.run(Thread.java:748)\r\n2018-08-21 13:11:03,401  INFO [Server Action Executor Worker 1305] KerberosServerAction:481 - Processing identities completed.\r\n2018-08-21 13:11:04,191 ERROR [ambari-action-scheduler] ActionScheduler:482 - Operation completely failed, aborting request id: 117\r\n {code}\r\n\r\nThe Ambari UI should not display any properties from Kerberos identity blocks that indicate they are referencing another Kerberos identity. There are 2 ways we know this:\r\n\r\n- The new/preferred way: the identity block has a non-empty/non-null \"reference\" attribute\r\n- The old (backwards compatible way): the identity block has a \"name\" attribute the starts with a '/'.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Nifi Registry install fails"
   },
   {
      "_id": "13181605",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-08-28 13:31:40",
      "description": "Starting Hive Metastore fails if HDFS is not present in the cluster with the error: {{JAVA_HOME is not set and could not be found.}}\r\n\r\n{noformat}\r\nTraceback (most recent call last):\r\n  File \"/var/lib/ambari-agent/cache/common-services/HIVE/0.12.0.2.0/package/scripts/hive_metastore.py\", line 211, in <module>\r\n    HiveMetastore().execute()\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 353, in execute\r\n    method(env)\r\n  File \"/var/lib/ambari-agent/cache/common-services/HIVE/0.12.0.2.0/package/scripts/hive_metastore.py\", line 61, in start\r\n    create_metastore_schema() # execute without config lock\r\n  File \"/var/lib/ambari-agent/cache/common-services/HIVE/0.12.0.2.0/package/scripts/hive.py\", line 374, in create_metastore_schema\r\n    user = params.hive_user\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/base.py\", line 166, in __init__\r\n    self.env.run()\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/environment.py\", line 160, in run\r\n    self.run_action(resource, action)\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/environment.py\", line 124, in run_action\r\n    provider_action()\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py\", line 263, in action_run\r\n    returns=self.resource.returns)\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/shell.py\", line 72, in inner\r\n    result = function(command, **kwargs)\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/shell.py\", line 102, in checked_call\r\n    tries=tries, try_sleep=try_sleep, timeout_kill_strategy=timeout_kill_strategy, returns=returns)\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/shell.py\", line 150, in _call_wrapper\r\n    result = _call(command, **kwargs_copy)\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/shell.py\", line 314, in _call\r\n    raise ExecutionFailed(err_msg, code, out, err)\r\nresource_management.core.exceptions.ExecutionFailed: Execution of 'export HIVE_CONF_DIR=/usr/hdp/current/hive-metastore/conf/conf.server ; /usr/hdp/current/hive-server2-hive2/bin/schematool -initSchema -dbType mysql -userName hive -passWord [PROTECTED] -verbose' returned 1. Error: JAVA_HOME is not set and could not be found.\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Cannot start Hive Metastore without HDFS"
   },
   {
      "_id": "13181577",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-08-28 10:46:13",
      "description": "STR:\r\n\r\n1) Install cluster with Ambari2.7.0.0 + HDP-3.0.0.0\r\n2) Upgrade Ambari to 2.7.1.0\r\n\r\nYarn Timeline Service V2 Reader goes down after some time.\r\n\r\nReason: the placeholders in yarn.timeline-service.reader.webapp.address and yarn.timeline-service.reader.webapp.https.address are no longer replaced by the stack code so these values become empty. In this case the timeline reader will use the default ports which may conflict with   other ports used by other components.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Yarn Timeline Service V2 Reader goes down after Ambari Upgrade from 2.7.0.0 to 2.7.1.0"
   },
   {
      "_id": "13181568",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-08-28 09:46:08",
      "description": "Move blueprint provisioning state property from cluster level to host component level.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Move blueprint provisioning state property to host component level"
   },
   {
      "_id": "13181544",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-08-28 08:32:17",
      "description": "Similar to AMBARI-24540, Hive Metastore DB schema may be manually pre-created to save time during initial service start. However, {{schematool}} could still take quite some time to confirm that the schema exists. The goal of this change is to allow users who pre-create Hive Metastore DB schema to make Ambari skip managing the DB (create or check existence).",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Allow skipping Hive Metastore schema creation for sysprepped cluster"
   },
   {
      "_id": "13181385",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-08-27 14:36:04",
      "description": "Protect the Request resource so that only authorized users may have read-only access the data.\r\n\r\nUsers with the following roles should have read-only access:\r\n* {{AMBARI.ADMINISTRATOR}}\r\n* {{CLUSTER.ADMINISTRATOR}}\r\n* {{CLUSTER.OPERATOR}}\r\n* {{SERVICE.ADMINISTRATOR}}\r\n* {{SERVICE.OPERATOR}}\r\n* {{CLUSTER.USER}}\r\n\r\nUsers with no role related to the cluster may not view the data.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available",
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Protect the Request resource so that only authorized users may have read-only access the data"
   },
   {
      "_id": "13181286",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-08-27 10:37:50",
      "description": "See screenshot",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Implement Notifications/Coasters from Fluid Design"
   },
   {
      "_id": "13181244",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-08-27 06:23:40",
      "description": "In Ambari 2.7 we moved LDAP configuration into the Ambari DB and introduced common naming pattern. However a typo has been made in\u00a0_'ambari.ldap.*advance*.collision_behavior_'. This should be renamed to\u00a0_'ambari.ldap.*advanced*.collision_behavior_'",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Rename LDAP configuration ambari.ldap.advance.collision_behavior"
   },
   {
      "_id": "13181152",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-08-25 20:09:31",
      "description": "Oozie DB schema may be manually pre-created to save time during initial service start.  However, {{ooziedb.sh}} could still take quite some time to confirm that the schema exists.  The goal of this change is to allow users who pre-create Oozie DB schema to make Ambari skip managing the DB (create or check existence).",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Allow skipping Oozie DB schema creation for sysprepped cluster"
   },
   {
      "_id": "13181092",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-08-25 00:27:07",
      "description": "webhdfs.dfs.enabled is included in the configurations for OneFS management pack. That is not needed because OneFS 8.1.2.0 (used with Ambari 2.7 and the mpack) does not require the disablement of webhdfs in Ambari to support Ambari Views.\r\n\r\nwebhdfs.dfs.enabled property should be removed entirely from configurations/hdfs-site.xml\u00a0",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "OneFS mpack should not include webhdfs enable setting"
   },
   {
      "_id": "13180962",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323906",
            "id": "12323906",
            "name": "security",
            "description": "Ambari security features, including Kerberos"
         }
      ],
      "created": "2018-08-24 12:03:46",
      "description": "When SPNEGO is enabled (`ambari-server setup-kerberos`), the SSO (`ambari-server setup-sso`) redirect no longer works.\r\n\r\nHow to reproduce:\r\n# Enable SSO `ambari-server setup-sso`\r\n# `ambari-server restart`\r\n# Visit Ambari and notice that you are redirected to the SSO system (i.e. Knox)\r\n# Enable SPNEGO `ambari-server setup-kerberos`\r\n# `ambari-server restart`\r\n# Visit Ambari and notice that you are *NOT redirected* to the SSO system (i.e. Knox)",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "pull-request-available",
         "security",
         "spnego",
         "sso"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari SPNEGO breaks SSO redirect"
   },
   {
      "_id": "13180886",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-08-24 07:10:15",
      "description": "STR:\r\n 1. Install Ambari\r\n 2. Get certificate for secure LDAP (LDAPS) connection to\u00a0your\u00a0AD server.\r\n 3. Generate ambari truststore with LDAPS certificate.\r\n 4. Setup Ambari to use LDAPS with providing truststore.\r\n{code:java}\r\n2018-08-20 18:38:04,763 DEBUG com.hw.commonuifrm.impl.commands.CommandExecutorImpl.executeCommand(): Sending command [(echo \"admin\" ; echo \"admin\") | ambari-server sync-ldap --users /tmp/users.txt --groups /tmp/groups.txt]\r\n\r\n\r\n2018-08-20 18:38:05,666 DEBUG com.hw.commonuifrm.impl.commands.ProcessDataImpl.buildOutputAndErrorStreamData(): /usr/lib64/python2.7/getpass.py:83: GetPassWarning: Can not control echo on the terminal.\r\n  passwd = fallback_getpass(prompt, stream)\r\nWarning: Password input may be echoed.\r\nEnter Ambari Admin password:\r\n\r\n\r\n2018-08-20 18:38:07,169 INFO com.hw.ambari.ui.util.cluster_managers.LDAPClusterManager.ambariServerSyncLDAPWithAD(): Result: Using python  /usr/bin/python\r\nSyncing with LDAP...\r\nEnter Ambari Admin login: \r\nFetching LDAP configuration from DB.\r\nSyncing specified users and groups...ERROR: Exiting with exit code 1. \r\nREASON: Caught exception running LDAP sync. ***.com:636; nested exception is javax.naming.CommunicationException: ***.com:636 [Root exception is javax.net.ssl.SSLHandshakeException: java.security.cert.CertificateException: No subject alternative DNS name matching ***.com found.]\r\n\r\n2018-08-20 18:38:07,170 INFO com.hw.ambari.ui.tests.console.ldap.TestLDAPSOnAD.test010_AmbariSynchronizeWithADThroughLDAPS(): AMBARI LDAPS synchronization result: Using python  /usr/bin/python\r\nSyncing with LDAP...\r\nEnter Ambari Admin login: \r\nFetching LDAP configuration from DB.\r\nSyncing specified users and groups...ERROR: Exiting with exit code 1. \r\nREASON: Caught exception running LDAP sync. ***.com:636; nested exception is javax.naming.CommunicationException: ***.com:636 [Root exception is javax.net.ssl.SSLHandshakeException: java.security.cert.CertificateException: No subject alternative DNS name matching ***.com found.]{code}\r\nThe issue is that the AD server's certificate contains a section:\r\n{noformat}\r\nX509v3 Subject Alternative Name: othername:<unsupported>, DNS:***-2.COM{noformat}\r\nAs you can see this is not the same that we use to connect to the AD server (***.com:636). Even if this is a certificate issue the connection could be open and we should be able to sync LDAP users/groups.\r\n\r\n*Important note*: it's reproducible only with OpenJDK (I used\u00a0openjdk-1.8.0.181-3.b13.el7_5.x86_64); working properly with Oracle's JDK.\r\n\r\n+*Recommended solution*+\r\n\r\nWe can\u00a0disable endpoint identification when the client is negotiating with the server during SSL handshake by setting\u00a0_com.sun.jndi.ldap.object.disableEndpointIdentification_ to _true_ (see\u00a0[https://github.com/ojdkbuild/lookaside_java-1.8.0-openjdk/blob/master/jdk/src/share/classes/com/sun/jndi/ldap/Connection.java#L386]). By default this\u00a0should not be the case but end users may set this up when configuring LDAP if they face this issue.\r\n\r\n\u00a0",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Ambari Server Ldap Sync Failed upon subject alternative DNS name check"
   },
   {
      "_id": "13180705",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323902",
            "id": "12323902",
            "name": "ambari-admin",
            "description": "Ambari Admin"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323906",
            "id": "12323906",
            "name": "security",
            "description": "Ambari security features, including Kerberos"
         }
      ],
      "created": "2018-08-23 12:41:46",
      "description": "\"Admin -> Kerberos -> Additonal Realms\"\r\n* Currently requires keytab re-generation which in turn requires restarting the cluster. *But it is completely unrelated to keytabs*.\r\n\r\nFix:\r\n* Move \"Additional Realms\" to the \"Kerberos\" service configs where it belongs, along with the \"auth_to_local\" setting which is what it is used for.\r\n* When it is changed:\r\n   ** No keytab re-generation is then required.\r\n   ** Instead of silently altering \"auth_to_local\" rules, they should come up as \"Recommendations\".",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "auth_to_local",
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos \"Additional Realms\" should not require keytab re-generation and cluster restart"
   },
   {
      "_id": "13180484",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-08-22 14:25:09",
      "description": "In a manually setup federated cluster (not through deployNG) --\r\n\r\nAccumulo was installed and when trying to start, below error thrown --\r\n\r\n{noformat}\r\n2018-08-16 07:33:31,748 [start.Main] ERROR: Thread 'org.apache.accumulo.master.state.SetGoalState' died.\r\njava.lang.IllegalArgumentException: Expected fully qualified URI for instance.volumes got ns2/apps/accumulo/data\r\n\tat org.apache.accumulo.core.volume.VolumeConfiguration.getVolumeUris(VolumeConfiguration.java:107)\r\n\tat org.apache.accumulo.server.fs.VolumeManagerImpl.get(VolumeManagerImpl.java:334)\r\n{noformat}\r\n\r\nCaused by incorrect config value:\r\n{{instance.volumes = hdfs://ns1,ns2/apps/accumulo/data}}\r\nwhere ns1 and ns2 are namespaces\r\n\r\nExpected is --\r\n{{instance.volumes = hdfs://ns1/apps/accumulo/data,hdfs://ns2/apps/accumulo/data}}\r\n\r\naccording to --\r\nhttps://accumulo.apache.org/docs/2.0/administration/multivolume\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Accumulo does not startup in Federated Cluster"
   },
   {
      "_id": "13180444",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-08-22 10:46:06",
      "description": "STR\r\n\r\n- perform UI deploy with selecting Ranger & Ranger KMS\r\n\r\nUsed password: {{78C%4KwS5J$&}}   or any other, created by password generator with defined complexity \r\n\r\n\r\nAdditionally, check on glitches picture 1 & 2. Additionally, I believe it is best to put special characters to grayed/dashed box to make user attention to them.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Unable to validate password complexity for properties rangertagsync_user_password, rangerusersync_user_password"
   },
   {
      "_id": "13180268",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-08-21 18:14:21",
      "description": "Cannot connect to MIT KDC admin server when port is specified in {{kerberos-env/admin_server_host}}.  The following error is seen when validating the KDC admin credentials:\r\n\r\n{noformat}\r\nkinit: Server not found in Kerberos database while getting initial credentials\r\n{noformat}\r\n\r\nThe reason for this is due to how the credentials are created for accessing the MIT KDC administration server. \r\n\r\n{noformat}\r\nkinit -c <path> -S kadmin/<kerberos-env/admin_server_host>  <principal>\r\n{noformat}\r\n\r\nIf a port was added to the {{kerberos-env/admin_server_host}} value then the server principal will be generated like {{kadmin/kdc.example.com:4749}} rather than {{kadmin/kdc.example.com}}. Therefore the server principal is not found.\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "pull-request-available",
         "regression"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Cannot connect to MIT KDC admin server when port is specified in kerberos-env/admin_server_host"
   },
   {
      "_id": "13180258",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-08-21 17:39:56",
      "description": "Server should post only cluster related request updates to \"/events/requests\"\u00a0STOMP topic.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "CLONE - Requests STOMP topic sent updates for host check request"
   },
   {
      "_id": "13180249",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-08-21 16:49:52",
      "description": "Fix set KDC admin credentials section in enable Kerberos doc\r\n\r\nThe current documentation at https://github.com/apache/ambari/blob/branch-2.7/ambari-server/docs/security/kerberos/enabling_kerberos.md#set-the-kdc-administrator-credentials indicates an incorrect URL for the API call. \r\n\r\nIt should read:\r\n\r\n{noformat}\r\nhttp://AMBARI_SERVER:8080/api/v1/clusters/CLUSTER_NAME/credentials/kdc.admin.credential\r\n{noformat}\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
         "name": "Minor",
         "id": "4"
      },
      "projectname": "AMBARI",
      "summary": "Fix set KDC admin credentials section in enable Kerberos doc"
   },
   {
      "_id": "13180217",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-08-21 14:00:11",
      "description": "Server should post only cluster related request updates to \"/events/requests\"\u00a0STOMP topic.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Requests STOMP topic sent updates for host check request"
   },
   {
      "_id": "13180160",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-08-21 08:54:57",
      "description": "Remove dependency on JQuery 1.8.0 for Ambari Server UI due to security concerns. See \r\n* CVE-2012-6708 - https://nvd.nist.gov/vuln/detail/CVE-2012-6708\r\n* CVE-2011-4969 - https://nvd.nist.gov/vuln/detail/CVE-2011-4969\r\n* CVE-2015-9251 - https://nvd.nist.gov/vuln/detail/CVE-2015-9251\r\n\r\nIt is recommended that JQuery is updated to 1.8.3+1\r\n\r\nPath to offending file:\r\n{noformat}\r\nambari\r\n|- ambari-server-2.7.1.0-119.x86_64.rpm\r\n|  |- usr\r\n|  |  |- lib\r\n|  |  |  |- ambari-server\r\n|  |  |  |  |- web\r\n|  |  |  |  |  |- api-docs\r\n|  |  |  |  |  |  |- lib\r\n|  |  |  |  |  |  |  |- jquery-1.8.0.min.js\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Remove dependency on JQuery 1.8.0 for Ambari Server UI"
   },
   {
      "_id": "13180142",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-08-21 07:38:53",
      "description": "NPE when migrating users table during upgrade to Ambari 2.7.0 with Oracle DB:\r\n{noformat}\r\n2018-08-20 11:36:46,395 ERROR [main] SchemaUpgradeHelper:207 - Upgrade failed. \r\njava.lang.NullPointerException\r\n\tat org.apache.ambari.server.upgrade.UpgradeCatalog270.convertUserCreationTimeToLong(UpgradeCatalog270.java:595)\r\n\tat org.apache.ambari.server.upgrade.UpgradeCatalog270.upgradeUserTables(UpgradeCatalog270.java:342)\r\n\tat org.apache.ambari.server.upgrade.UpgradeCatalog270.executeDDLUpdates(UpgradeCatalog270.java:318)\r\n\tat org.apache.ambari.server.upgrade.AbstractUpgradeCatalog.upgradeSchema(AbstractUpgradeCatalog.java:970)\r\n\tat org.apache.ambari.server.upgrade.SchemaUpgradeHelper.executeUpgrade(SchemaUpgradeHelper.java:205)\r\n\tat org.apache.ambari.server.upgrade.SchemaUpgradeHelper.main(SchemaUpgradeHelper.java:448)\r\n2018-08-20 11:36:46,395 ERROR [main] SchemaUpgradeHelper:473 - Exception occurred during upgrade, failed\r\norg.apache.ambari.server.AmbariException\r\n\tat org.apache.ambari.server.upgrade.SchemaUpgradeHelper.executeUpgrade(SchemaUpgradeHelper.java:208)\r\n\tat org.apache.ambari.server.upgrade.SchemaUpgradeHelper.main(SchemaUpgradeHelper.java:448)\r\nCaused by: java.lang.NullPointerException\r\n\tat org.apache.ambari.server.upgrade.UpgradeCatalog270.convertUserCreationTimeToLong(UpgradeCatalog270.java:595)\r\n\tat org.apache.ambari.server.upgrade.UpgradeCatalog270.upgradeUserTables(UpgradeCatalog270.java:342)\r\n\tat org.apache.ambari.server.upgrade.UpgradeCatalog270.executeDDLUpdates(UpgradeCatalog270.java:318)\r\n\tat org.apache.ambari.server.upgrade.AbstractUpgradeCatalog.upgradeSchema(AbstractUpgradeCatalog.java:970)\r\n\tat org.apache.ambari.server.upgrade.SchemaUpgradeHelper.executeUpgrade(SchemaUpgradeHelper.java:205)\r\n\t... 1 more\r\n{noformat}\r\n*Cause*\r\nThis is caused by one or more records with a\u00a0{{NULL}}\u00a0value in the\u00a0{{create_time}}\u00a0field.\r\n\r\nFor example:\r\n||user_id||user_name||user_type||create_time||\r\n|1|admin|LOCAL|NULL|\r\n\r\n*Workaround*\u00a0\r\nUpdate the relevant records to not have a\u00a0{{NULL}}\u00a0in the\u00a0{{create_time}}\u00a0column.\r\n\r\nFor example:\r\n{noformat}\r\nUPDATE users SET create_time=systimestamp WHERE create_time IS NULL;\r\n{noformat}\r\n*Solution*\r\nDuring upgrade, protect against a\u00a0{{null}}\u00a0value for\u00a0{{currentUserCreateTime.getValue()}}\u00a0at:\r\n{code:java|title=org/apache/ambari/server/upgrade/UpgradeCatalog270.java:595}\r\n          dbAccessor.updateTable(USERS_TABLE, temporaryColumnName, currentUserCreateTime.getValue().getTime(),\r\n              \"WHERE \" + USERS_USER_ID_COLUMN + \"=\" + currentUserCreateTime.getKey());\r\n{code}\r\nIf\u00a0{{currentUserCreateTime.getValue()}}\u00a0is null, the current timestamp should be used.\r\n\r\n*Note:*\u00a0This may be a reoccurring issue since there is no provision to ensure that\u00a0{{create_time}}\u00a0is not\u00a0{{NULL}}\u00a0when initializing the Ambari database:\r\n{code:java}\r\ninsert into users(user_id, principal_id, user_name, user_password)\r\nselect 1,1,'admin','538916f8943ec225d97a9a86a2c6ec0818c1cd400e09e03b660fdaaec4af29ddbb6f2b1033b81b00' from dual;{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "NPE when migrating users table during upgrade to Ambari 2.7.0 with Oracle DB"
   },
   {
      "_id": "13180069",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-08-20 21:19:23",
      "description": "Remove dependency on org.bouncycastle bcprov-jdk15on before version 1.6.0 for Ambari Server security concerns. See \r\n* CVE-2018-1000180 - https://nvd.nist.gov/vuln/detail/CVE-2018-1000180\r\n\r\nThis dependency is compiled into the apacheds-all.jar from \r\n\r\n{code}\r\n    <dependency>\r\n      <groupId>org.apache.directory.server</groupId>\r\n      <artifactId>apacheds-all</artifactId>\r\n      <version>2.0.0-M24</version>\r\n    </dependency>\r\n{code}\r\n\r\nThe relevant parts of this need to be broken out and the offending bouncy castle JAR needs to be excluded as needed. \r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Remove dependency on org.bouncycastle bcprov-jdk15on before version 1.6.0 for Ambari Server"
   },
   {
      "_id": "13179943",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-08-20 11:36:09",
      "description": "Below is the screenshot on versions screen of ambari where below error message is displayed.\r\n\r\n\"Host component out of sync HDP-2.2.9.0-3393\r\nOne of more host components did not report the version that Ambari expected. Please re-install the failed host component, or remove it.\"\r\n\r\nPlease note these hosts have gone through an CentOS6 to CentOS7 OS upgrade and then ambari-server is upgraded to 2.7..1#73.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "host component out of sync error message on version screen"
   },
   {
      "_id": "13179642",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-08-17 17:36:26",
      "description": "- Change text in 'Manage versions' modal\r\n- Fix alignment issues on Versions tab\r\n- Wrap services column on Versions tab into white block\r\n- Remove redundant horizontal space in services column\r\n- Make shadow of version column softer",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Stack and Versions page style fixes"
   },
   {
      "_id": "13179544",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-08-17 09:19:20",
      "description": "Ambari updates the repoinfo.xml files in each stack and changes the latest value to the json.url which is found in the repo file (for example /etc/yum.d/ambari.repo). In a non-HDP stack this causes the wrong url to be added to repoinfo.xml",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari updates lates_url info for HDF stacks with HDP link"
   },
   {
      "_id": "13179508",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-08-17 05:55:04",
      "description": "ambari-server setup with default postgres has been failing with\n\n    \n    \r\n    OSError: [Errno 2] No such file or directory: '/usr/bin/postgresql-setup'\r\n    \n\nLooks like postgres packages/dependencies are not installed along with\ninstalling ambari server install.  \nbelow is output from ambari-server install from ambari-2.7.1 cluster\n\n    \n    \r\n    2018-08-07 11:17:56,106|executor.py.167|INFO|14260|MainThread|172.27.25.203|executing the command='yum -y install ambari-server'\r\n    2018-08-07 11:17:56,432|executor.py.167|INFO|14260|Thread-191|stdout: Loaded plugins: ovl, priorities\r\n    2018-08-07 11:17:57,971|executor.py.167|INFO|14260|Thread-191|stdout: 12711 packages excluded due to repository priority protections\r\n    2018-08-07 11:17:58,754|executor.py.167|INFO|14260|Thread-191|stdout: Resolving Dependencies\r\n    2018-08-07 11:17:58,754|executor.py.167|INFO|14260|Thread-191|stdout: --> Running transaction check\r\n    2018-08-07 11:17:58,755|executor.py.167|INFO|14260|Thread-191|stdout: ---> Package ambari-server.x86_64 0:2.7.1.0-63 will be installed\r\n    2018-08-07 11:17:58,974|executor.py.167|INFO|14260|Thread-191|stdout: --> Finished Dependency Resolution\r\n    2018-08-07 11:17:59,146|executor.py.167|INFO|14260|Thread-191|stdout: \r\n    2018-08-07 11:17:59,146|executor.py.167|INFO|14260|Thread-191|stdout: Dependencies Resolved\r\n    2018-08-07 11:17:59,147|executor.py.167|INFO|14260|Thread-191|stdout: \r\n    2018-08-07 11:17:59,147|executor.py.167|INFO|14260|Thread-191|stdout: ================================================================================\r\n    2018-08-07 11:17:59,147|executor.py.167|INFO|14260|Thread-191|stdout:  Package            Arch        Version            Repository              Size\r\n    2018-08-07 11:17:59,147|executor.py.167|INFO|14260|Thread-191|stdout: ================================================================================\r\n    2018-08-07 11:17:59,147|executor.py.167|INFO|14260|Thread-191|stdout: Installing:\r\n    2018-08-07 11:17:59,148|executor.py.167|INFO|14260|Thread-191|stdout:  ambari-server      x86_64      2.7.1.0-63         ambari-2.7.1.0-63      366 M\r\n    2018-08-07 11:17:59,148|executor.py.167|INFO|14260|Thread-191|stdout: \r\n    2018-08-07 11:17:59,148|executor.py.167|INFO|14260|Thread-191|stdout: Transaction Summary\r\n    2018-08-07 11:17:59,148|executor.py.167|INFO|14260|Thread-191|stdout: ================================================================================\r\n    2018-08-07 11:17:59,148|executor.py.167|INFO|14260|Thread-191|stdout: Install  1 Package\r\n    2018-08-07 11:17:59,149|executor.py.167|INFO|14260|Thread-191|stdout: \r\n    2018-08-07 11:17:59,149|executor.py.167|INFO|14260|Thread-191|stdout: Total download size: 366 M\r\n    2018-08-07 11:17:59,149|executor.py.167|INFO|14260|Thread-191|stdout: Installed size: 434 M\r\n    2018-08-07 11:17:59,152|executor.py.167|INFO|14260|Thread-191|stdout: Downloading packages:\r\n    2018-08-07 11:18:03,735|executor.py.167|INFO|14260|Thread-191|stdout: Running transaction check\r\n    2018-08-07 11:18:03,736|executor.py.167|INFO|14260|Thread-191|stdout: Running transaction test\r\n    2018-08-07 11:18:04,048|executor.py.167|INFO|14260|Thread-191|stdout: Transaction test succeeded\r\n    2018-08-07 11:18:04,049|executor.py.167|INFO|14260|Thread-191|stdout: Running transaction\r\n    2018-08-07 11:18:21,843|executor.py.167|INFO|14260|Thread-191|stdout:   Installing : ambari-server-2.7.1.0-63.x86_64                              1/1\r\n    2018-08-07 11:18:22,568|executor.py.167|INFO|14260|Thread-191|stdout:  \r\n    2018-08-07 11:18:22,569|executor.py.167|INFO|14260|Thread-191|stdout:   Verifying  : ambari-server-2.7.1.0-63.x86_64                              1/1\r\n    2018-08-07 11:18:22,676|executor.py.167|INFO|14260|Thread-191|stdout:  \r\n    2018-08-07 11:18:22,676|executor.py.167|INFO|14260|Thread-191|stdout: \r\n    2018-08-07 11:18:22,676|executor.py.167|INFO|14260|Thread-191|stdout: Installed:\r\n    2018-08-07 11:18:22,676|executor.py.167|INFO|14260|Thread-191|stdout:   ambari-server.x86_64 0:2.7.1.0-63                                             \r\n    2018-08-07 11:18:22,677|executor.py.167|INFO|14260|Thread-191|stdout: \r\n    2018-08-07 11:18:22,677|executor.py.167|INFO|14260|Thread-191|stdout: Complete!\r\n    \n\nwhere as on an ambari-2.7.0 cluster we do have postgres server packages and\nlib and is being installed with ambari-server install\n\n    \n    \r\n    [root@c7401 ~]# yum install -y ambari-server\r\n    Loaded plugins: fastestmirror\r\n    ambari-2.7.0.0                                                                                                                                             | 2.9 kB  00:00:00     \r\n    ambari-2.7.0.0/primary_db                                                                                                                                  |  25 kB  00:00:00     \r\n    Loading mirror speeds from cached hostfile\r\n     * base: repos.lax.quadranet.com\r\n     * extras: linux.mirrors.es.net\r\n     * updates: mirror.keystealth.org\r\n    Resolving Dependencies\r\n    --> Running transaction check\r\n    ---> Package ambari-server.x86_64 0:2.7.0.0-897 will be installed\r\n    --> Processing Dependency: postgresql-server >= 8.1 for package: ambari-server-2.7.0.0-897.x86_64\r\n    --> Running transaction check\r\n    ---> Package postgresql-server.x86_64 0:9.2.23-3.el7_4 will be installed\r\n    --> Processing Dependency: postgresql-libs(x86-64) = 9.2.23-3.el7_4 for package: postgresql-server-9.2.23-3.el7_4.x86_64\r\n    --> Processing Dependency: postgresql(x86-64) = 9.2.23-3.el7_4 for package: postgresql-server-9.2.23-3.el7_4.x86_64\r\n    --> Processing Dependency: libpq.so.5()(64bit) for package: postgresql-server-9.2.23-3.el7_4.x86_64\r\n    --> Running transaction check\r\n    ---> Package postgresql.x86_64 0:9.2.23-3.el7_4 will be installed\r\n    ---> Package postgresql-libs.x86_64 0:9.2.23-3.el7_4 will be installed\r\n    --> Finished Dependency Resolution\r\n    \r\n    Dependencies Resolved\r\n    \r\n    ==================================================================================================================================================================================\r\n     Package                                        Arch                                Version                                     Repository                                   Size\r\n    ==================================================================================================================================================================================\r\n    Installing:\r\n     ambari-server                                  x86_64                              2.7.0.0-897                                 ambari-2.7.0.0                              367 M\r\n    Installing for dependencies:\r\n     postgresql                                     x86_64                              9.2.23-3.el7_4                              base                                        3.0 M\r\n     postgresql-libs                                x86_64                              9.2.23-3.el7_4                              base                                        234 k\r\n     postgresql-server                              x86_64                              9.2.23-3.el7_4                              base                                        3.8 M\r\n    \r\n    Transaction Summary\r\n    ==================================================================================================================================================================================\r\n    Install  1 Package (+3 Dependent packages)\r\n    \r\n    Total download size: 374 M\r\n    Installed size: 468 M\r\n    Downloading packages:\r\n    (1/4): postgresql-libs-9.2.23-3.el7_4.x86_64.rpm                                                                                                           | 234 kB  00:00:00     \r\n    (2/4): postgresql-server-9.2.23-3.el7_4.x86_64.rpm                                                                                                         | 3.8 MB  00:00:00     \r\n    (3/4): postgresql-9.2.23-3.el7_4.x86_64.rpm                                                                                                                | 3.0 MB  00:00:04     \r\n    warning: /var/cache/yum/x86_64/7/ambari-2.7.0.0/packages/ambari-server-2.7.0.0-897.x86_64.rpm: Header V4 RSA/SHA1 Signature, key ID 07513cad: NOKEY17 MB/s | 371 MB  00:00:00 ETA \r\n    Public key for ambari-server-2.7.0.0-897.x86_64.rpm is not installed\r\n    (4/4): ambari-server-2.7.0.0-897.x86_64.rpm                                                                                                                | 367 MB  00:00:23     \r\n    ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n    Total                                                                                                                                              16 MB/s | 374 MB  00:00:23     \r\n    Retrieving key from http://public-repo-1.hortonworks.com/ambari/centos7/2.x/updates/2.7.0.0/RPM-GPG-KEY/RPM-GPG-KEY-Jenkins\r\n    Importing GPG key 0x07513CAD:\r\n     Userid     : \"Jenkins (HDP Builds) <jenkin@hortonworks.com>\"\r\n     Fingerprint: df52 ed4f 7a3a 5882 c099 4c66 b973 3a7a 0751 3cad\r\n     From       : http://public-repo-1.hortonworks.com/ambari/centos7/2.x/updates/2.7.0.0/RPM-GPG-KEY/RPM-GPG-KEY-Jenkins\r\n    Running transaction check\r\n    Running transaction test\r\n    Transaction test succeeded\r\n    Running transaction\r\n      Installing : postgresql-libs-9.2.23-3.el7_4.x86_64                                                                                                                          1/4 \r\n      Installing : postgresql-9.2.23-3.el7_4.x86_64                                                                                                                               2/4 \r\n      Installing : postgresql-server-9.2.23-3.el7_4.x86_64                                                                                                                        3/4 \r\n      Installing : ambari-server-2.7.0.0-897.x86_64                                                                                                                               4/4 \r\n      Verifying  : postgresql-9.2.23-3.el7_4.x86_64                                                                                                                               1/4 \r\n      Verifying  : ambari-server-2.7.0.0-897.x86_64                                                                                                                               2/4 \r\n      Verifying  : postgresql-libs-9.2.23-3.el7_4.x86_64                                                                                                                          3/4 \r\n      Verifying  : postgresql-server-9.2.23-3.el7_4.x86_64                                                                                                                        4/4 \r\n    \r\n    Installed:\r\n      ambari-server.x86_64 0:2.7.0.0-897                                                                                                                                              \r\n    \r\n    Dependency Installed:\r\n      postgresql.x86_64 0:9.2.23-3.el7_4                     postgresql-libs.x86_64 0:9.2.23-3.el7_4                     postgresql-server.x86_64 0:9.2.23-3.el7_4                    \r\n    \r\n    Complete!\r\n    \n\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "ambari-server setup fails with postgresql >= 9.3 "
   },
   {
      "_id": "13179272",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-08-16 07:17:29",
      "description": "{{{{timeline_reader_address_http}}}} and {{{timeline_reader_address_https}}}} properties are not replaced in yarn-site by the FixTimelineReaderAddress upgrade task.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Yarn Timeline Service V2 Reader is found down after EU (Atlantic to AtlanticM05) With error - Address already in use"
   },
   {
      "_id": "13179113",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-08-15 15:49:27",
      "description": "Only push the HDP-GPL repo to hosts when user applied GPL license during ambari-server setup.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "HDP-GPL repo's shouldn't be pushed to hosts when GPL license was not applied"
   },
   {
      "_id": "13179065",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-08-15 12:45:31",
      "description": "Overlapping text in Centralized Configurations page: [^config-validation-overlap.png]",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Overlapping text in Recommendations in Configurations page while UI installer"
   },
   {
      "_id": "13178883",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-08-14 15:36:16",
      "description": "\n    2018-08-13T21:27:31.000Z        0.1 kB         status_structured-out-001de461-9c2f-417a-b323-6233ed86eb37.json\r\n    2018-08-13T21:27:31.000Z        0.1 kB         status_structured-out-00209852-ad33-4026-90a0-4da2aac71403.json\r\n    2018-08-13T21:27:31.000Z        0.1 kB         status_structured-out-00333009-87b2-4649-80d1-c97b639a31f0.json\r\n    2018-08-13T21:27:31.000Z        0.1 kB         status_structured-out-0042da27-dae6-4e9b-9ffb-336cd17787c5.json\r\n    2018-08-13T21:27:31.000Z        0.1 kB         status_structured-out-005b6b80-baf7-43a5-aa7f-2e4695b3f478.json\r\n    2018-08-13T21:27:31.000Z        0.1 kB         status_structured-out-0066dcd4-9406-49c7-a2b3-effd9a3a4f2b.json\r\n    2018-08-13T21:47:09.000Z        0.1 kB         status_structured-out-006a1999-d33d-4d48-a74f-8a7830b449ec.json\r\n    2018-08-13T21:27:31.000Z        0.1 kB         status_structured-out-0094b368-c5e1-496e-ba5b-b5080767dbc0.json\r\n    2018-08-13T21:47:09.000Z        0.1 kB         status_structured-out-00b2a497-0088-464c-a4e4-855534d082ed.json\r\n    2018-08-13T21:27:31.000Z        0.1 kB         status_structured-out-00bbd469-370f-4eca-aee9-109db61edd75.json\r\n    2018-08-13T21:27:31.000Z        0.1 kB         status_structured-out-00bbe2f2-aeb2-4eb7-9bfb-6ce5fe9950b0.json\r\n    2018-08-13T21:27:31.000Z        0.1 kB         status_structured-out-00c341b7-5c4c-4dc5-a5ba-a550b0cabf67.json\r\n    2018-08-13T21:27:31.000Z        0.1 kB         status_structured-out-00d80541-e6a5-4bc4-9020-c018a928c6b9.json\r\n    2018-08-13T21:27:31.000Z        0.1 kB         status_structured-out-00da8bca-ac68-4d47-b492-2a978f368a1c.json\r\n    2018-08-13T21:27:31.000Z        0.1 kB         status_structured-out-00ed37ff-a9b8-4fe6-a46d-7d792586ac62.json\r\n    2018-08-13T21:27:31.000Z        0.1 kB         status_structured-out-00f49f50-cd1e-498f-ac97-5cc9724adf56.json\r\n    2018-08-13T21:27:31.000Z        0.1 kB         status_structured-out-00f74fcb-8cc1-46f8-b74a-6ea3089e19d9.json\r\n    2018-08-13T21:47:09.000Z        0.1 kB         status_structured-out-010174eb-dee9-41a7-9afb-25c5b16e185e.json\r\n    2018-08-13T21:47:09.000Z        0.1 kB         status_structured-out-01024c7d-beb5-40b2-914c-aece83011cea.json\r\n    2018-08-13T21:27:31.000Z        0.1 kB         status_structured-out-0106b69f-9343-40d1-a225-65112470f884.json\r\n    2018-08-13T21:27:31.000Z        0.1 kB         status_structured-out-0109e024-4cbf-49a8-8496-9d05787ed58d.json\r\n    2018-08-13T21:27:31.000Z        0.1 kB         status_structured-out-011e9c15-5531-43c9-aabf-a9efa5123d2f.json\r\n    2018-08-13T21:47:09.000Z        0.1 kB         status_structured-out-012f2630-46ad-4608-b7ac-971d3ee35f59.json\r\n    2018-08-13T21:47:09.000Z        0.1 kB         status_structured-out-0130258e-5c15-4147-a348-c86fa0ae5a1c.json\r\n    2018-08-13T21:27:31.000Z        0.1 kB         status_structured-out-01357110-1577-4d4f-908d-7956232ecd73.json\r\n    2018-08-13T21:47:09.000Z        0.1 kB         status_structured-out-013a04e5-d2e8-4d9e-8cb6-3fe3ac6f75ca.json\r\n    2018-08-13T21:27:31.000Z        0.1 kB         status_structured-out-01456ca3-f135-4fd8-8b58-83ea513f7c06.json\r\n    2018-08-13T21:47:09.000Z        0.1 kB         status_structured-out-01473538-7a02-4df9-92c4-728d158d3e0f.json\r\n    2018-08-13T21:27:31.000Z        0.1 kB         status_structured-out-014bdd5a-899d-43f6-a375-d65e30e0a2c3.json\r\n    2018-08-13T21:27:31.000Z        0.1 kB         status_structured-out-014e0a58-fdc5-4d0a-8b0c-ac62129ba0ce.json\r\n    2018-08-13T21:27:31.000Z        0.1 kB         status_structured-out-015c87f3-cdaa-4cf5-91ee-bf9af09e4262.json\r\n    2018-08-13T21:27:31.000Z        0.1 kB         status_structured-out-015c972a-9210-4854-a49b-a1d591f799e6.json\r\n    2018-08-13T21:27:31.000Z        0.1 kB         status_structured-out-016d1956-8076-4722-829d-e10748420432.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-017e22f1-561a-41ca-a59e-1473f3ec3065.json\r\n    2018-08-13T21:27:31.000Z        0.1 kB         status_structured-out-017fe18b-5dc7-4c97-891a-737810ec5416.json\r\n    2018-08-13T21:47:09.000Z        0.1 kB         status_structured-out-01d63c54-9033-4932-974f-f6c756a2d1d4.json\r\n    2018-08-13T21:27:31.000Z        0.1 kB         status_structured-out-01ff5f2e-4572-4f52-b77c-12e3aea1c6fa.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-02216bb7-9bac-4c5b-a074-f3e2b33c7a86.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-02239432-9ba1-4899-923f-2f94c5facb89.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-0225d7ba-22c5-412e-bea1-931732bf98f2.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-023d005d-d253-4445-951b-22b903e9ff85.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-023e4124-bd5d-4e0d-8f1e-b146b5f9bb03.json\r\n    2018-08-13T21:47:09.000Z        0.1 kB         status_structured-out-024c5c89-56c0-4470-8d64-2ab9e48707fa.json\r\n    2018-08-13T21:47:09.000Z        0.1 kB         status_structured-out-025bb933-f6a5-4495-8df4-342e0c695845.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-026dcffa-015b-4ac0-be4e-70c2092a091a.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-0272568c-5492-46be-8c6d-26edebb06f92.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-0283f8dd-0d90-4978-9b44-c982a0ee78e9.json\r\n    2018-08-13T21:47:09.000Z        0.1 kB         status_structured-out-0291a3b2-9b11-4e60-9f36-d63e11d48803.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-02a4a54a-fc9c-4839-94b3-fd29cdbaeda6.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-02a781a3-4db4-468b-a180-964d4fcdf176.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-02bdfe4c-a2ce-4e38-990b-12c889a06a32.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-02c873ea-60ce-444a-8b67-05c648d4c8d5.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-02d706ec-4b9d-44ad-baf6-67ec62dbdcdd.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-02de1f1d-d3e8-4c74-b5dc-550540f4277e.json\r\n    2018-08-13T21:47:09.000Z        0.1 kB         status_structured-out-02e34a4b-8f2d-489b-acd3-3c77b07e4de9.json\r\n    2018-08-13T21:47:09.000Z        0.1 kB         status_structured-out-02e42e6d-8756-45f6-8097-16430aebb4e3.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-02e48587-00ff-48e4-81d4-a8535b3d6cd7.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-02eebc26-43ed-4b36-99df-091e66ed6317.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-0304d392-7471-422c-9229-2222ca7be62a.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-031091e8-b6cd-47d8-804c-29947ad34c87.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-03140883-e4d2-4cc3-9731-7406762199da.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-03203cad-edfc-4293-90db-8edd305f470b.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-032c1a82-386b-43de-9e17-d6228ce4ca40.json\r\n    2018-08-13T21:47:09.000Z        0.1 kB         status_structured-out-03351bb9-9cc3-4d80-9bbb-4edf49b93b9c.json\r\n    2018-08-13T21:47:09.000Z        0.1 kB         status_structured-out-0348d610-18bf-42cc-8f3b-e16671f0f7b8.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-034d698d-7946-4503-b64b-20c9592c363b.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-03640ef9-54f3-45c9-b9de-a0a211524093.json\r\n    2018-08-13T21:47:09.000Z        0.1 kB         status_structured-out-036ad39f-9ef1-4967-b023-316e3429af34.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-0377c628-708b-41f5-b3cf-1dda26686fda.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-037b5ae4-966c-4815-82fb-d10d7e7947c5.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-037ce4fe-4c96-4614-bca1-ddb4d702ce03.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-039472ba-ea55-4a68-922b-dd0d799c1c07.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-03990281-da3a-4d79-8998-5ae573d62fae.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-03f2239b-f8d9-4bb4-a043-a675b91dd2e2.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-03f70e9b-549f-4019-9bd6-19a511ce67e1.json\r\n    2018-08-13T21:47:09.000Z        0.1 kB         status_structured-out-0403a633-8967-4408-bd94-e8a5d1e1b4b2.json\r\n    2018-08-13T21:47:09.000Z        0.1 kB         status_structured-out-0416dae8-52da-48c6-9451-e3bd10f8a0c7.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-041eebf1-8908-4484-aa5b-67c22101942c.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-0452e168-012a-4b77-b73e-89f900fd9ce5.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-045c0c2a-4a93-4ccb-8b02-e31f32f297c4.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-046d50dd-f5de-4ef9-a0eb-36b6946a3ce9.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-0490547f-88dd-446c-aa64-1897521e2eba.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-049a2eca-90a1-4ca4-9216-6065f90bf855.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-049f27b7-f073-41a3-a415-1d8975b2d608.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-04a989b1-2d78-4f35-bef9-9be4ab6c13e0.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-04b2d2ee-f5d4-4c98-8011-db57ec5c28da.json\r\n    2018-08-13T21:47:09.000Z        0.1 kB         status_structured-out-04b3c7f8-5c80-418c-a4f6-c6148e0c8a92.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-04be6118-ae18-4d2d-80ca-5fc79dacf86d.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-04bedda7-53ab-40b4-8c7d-33242b660f06.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-04bfc4e2-aa8f-4a24-a79f-b483bb80d210.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-04c7e1dc-3846-453e-be10-75955445088c.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-04dd82ce-25da-4dea-8b20-cda14df347fd.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-04f65567-6f8c-4da8-8505-80664a4ee439.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-050f7e3c-6460-4045-9bdb-1eb3b602136d.json\r\n    2018-08-13T21:47:09.000Z        0.1 kB         status_structured-out-051e0ccb-d6b8-4158-a1a9-9d7d0d52224d.json\r\n    2018-08-13T21:47:09.000Z        0.1 kB         status_structured-out-052e32da-f71b-4f09-b62b-b3f30b25ec32.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-056e9da7-5a96-4646-bae6-2d080d0b2a82.json\r\n    2018-08-13T21:47:09.000Z        0.1 kB         status_structured-out-056f3673-aa47-4efc-b0ad-e0ab96812654.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-05708b0e-0df8-4b16-8bd9-874a72607186.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-0577ca36-f1f2-49ce-852a-43b56a6656ca.json\r\n    2018-08-13T21:47:09.000Z        0.1 kB         status_structured-out-059f1d92-1419-42c4-a7fd-d0f85a85f240.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-05af50fb-e48f-40a9-9877-962d1718bbff.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-05b2dcef-6aea-400d-992d-f0443d4c56d2.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-05b706f4-cd06-49b1-8d9c-c356f38c99d3.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-05f829b6-8340-4673-97a2-94eaf6290e23.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-05ff36a6-c39a-412e-b6c4-58f0f50cbab0.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-0609de51-1254-4385-98f8-0bc027510908.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-06123cae-b89d-496b-8a26-13c3e208b087.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-0625192e-495d-4a2f-8226-54befd87daea.json\r\n    2018-08-13T21:47:09.000Z        0.1 kB         status_structured-out-062ab0e0-9854-46ff-91a0-47e6d920e055.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-062bef42-9ef9-4808-896d-4b77a124458d.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-06510548-2629-480b-99e0-9769a4a3e254.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-066265b2-56e9-4629-8c13-309fd5b9bedb.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-066f2f1e-337e-4dca-a7aa-51b4efcb2b4d.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-067d3e69-333a-424f-a846-c6411d8e8e87.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-068226fb-f9d8-46bb-8bd7-3a13056bb983.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-0688025a-d92d-4a8d-b14d-f7486a3f0d59.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-068c77f3-ad4f-4986-836f-f4b9f44b53bf.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-068f3c75-a176-49c2-96ba-48a4a6cc76ed.json\r\n    2018-08-13T21:27:32.000Z        0.1 kB         status_structured-out-06adba4c-9a60-432a-80f4-780602f476a7.json\r\n    ...\r\n    \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "ambair-agent floods data directory with files created for status commands"
   },
   {
      "_id": "13178857",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-08-14 13:40:39",
      "description": "Ambari should disable components' autostart during blueprint deploy.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Disable autostart during blueprint deploy"
   },
   {
      "_id": "13178549",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-08-13 09:53:14",
      "description": "====================================\r\nAmbari 2.6.2\r\nHDP 2.6.5.0-292\r\nCluster Details : https://github.com/hortonworks/HCube#stanley-hotel-hdp-26\r\nPlease login with okta credential to these cluster machines\r\nhttps://hcube1-1n01.eng.hortonworks.com:8443/\r\n====================================\r\n\r\nThis is cluster is being upgraded to Ambari 2.7.1 and the schema upgrade step is hung.\r\n{code}\r\nroot@hcube1-1n01 ~]# ambari-server upgrade\r\nUsing python  /usr/bin/python\r\nUpgrading ambari-server\r\nINFO: Upgrade Ambari Server\r\nINFO: Updating Ambari Server properties in ambari.properties ...\r\nINFO: Updating Ambari Server properties in ambari-env.sh ...\r\nINFO: Original file ambari-env.sh kept\r\nWARNING: Original file krb5JAASLogin.conf kept\r\nINFO: File krb5JAASLogin.conf updated.\r\nINFO: Fixing database objects owner\r\nAmbari Server configured for Postgres. Confirm you have made a backup of the Ambari Server database [y/n] (n)? y\r\nINFO: Upgrading database schema\r\n\r\n\r\n\r\n{code}\r\n\r\n\r\nBelow exception is noticed in ambari-server.log\r\n\r\n{code}\r\n2018-08-10 06:57:50,795 ERROR [main] AbstractUpgradeCatalog:375 - Error in transaction\r\njava.lang.NullPointerException\r\n        at org.apache.ambari.server.controller.KerberosHelperImpl.addIdentities(KerberosHelperImpl.java:1617)\r\n        at org.apache.ambari.server.serveraction.kerberos.AbstractPrepareKerberosServerAction.processServiceComponents(AbstractPrepareKerberosServerAction.java:184)\r\n        at org.apache.ambari.server.serveraction.kerberos.AbstractPrepareKerberosServerAction.processServiceComponentHosts(AbstractPrepareKerberosServerAction.java:94)\r\n        at org.apache.ambari.server.upgrade.UpgradeCatalog270$3.run(UpgradeCatalog270.java:1637)\r\n        at org.apache.ambari.server.upgrade.AbstractUpgradeCatalog.executeInTransaction(AbstractUpgradeCatalog.java:367)\r\n        at org.apache.ambari.server.upgrade.UpgradeCatalog270.updateKerberosConfigurations(UpgradeCatalog270.java:1633)\r\n        at org.apache.ambari.server.upgrade.UpgradeCatalog270.executeDMLUpdates(UpgradeCatalog270.java:1060)\r\n        at org.apache.ambari.server.upgrade.AbstractUpgradeCatalog.upgradeData(AbstractUpgradeCatalog.java:985)\r\n        at org.apache.ambari.server.upgrade.SchemaUpgradeHelper.executeDMLUpdates(SchemaUpgradeHelper.java:237)\r\n        at org.apache.ambari.server.upgrade.SchemaUpgradeHelper.main(SchemaUpgradeHelper.java:457)\r\n2018-08-10 06:57:50,799 ERROR [main] SchemaUpgradeHelper:239 - Upgrade failed.\r\norg.apache.ambari.server.AmbariException: Failed to upgrade kerberos tables\r\n        at org.apache.ambari.server.upgrade.UpgradeCatalog270.updateKerberosConfigurations(UpgradeCatalog270.java:1644)\r\n        at org.apache.ambari.server.upgrade.UpgradeCatalog270.executeDMLUpdates(UpgradeCatalog270.java:1060)\r\n        at org.apache.ambari.server.upgrade.AbstractUpgradeCatalog.upgradeData(AbstractUpgradeCatalog.java:985)\r\n        at org.apache.ambari.server.upgrade.SchemaUpgradeHelper.executeDMLUpdates(SchemaUpgradeHelper.java:237)\r\n        at org.apache.ambari.server.upgrade.SchemaUpgradeHelper.main(SchemaUpgradeHelper.java:457)\r\nCaused by: java.lang.RuntimeException: java.lang.NullPointerException\r\n        at org.apache.ambari.server.upgrade.AbstractUpgradeCatalog.executeInTransaction(AbstractUpgradeCatalog.java:379)\r\n        at org.apache.ambari.server.upgrade.UpgradeCatalog270.updateKerberosConfigurations(UpgradeCatalog270.java:1633)\r\n        ... 4 more\r\nCaused by: java.lang.NullPointerException\r\n        at org.apache.ambari.server.controller.KerberosHelperImpl.addIdentities(KerberosHelperImpl.java:1617)\r\n        at org.apache.ambari.server.serveraction.kerberos.AbstractPrepareKerberosServerAction.processServiceComponents(AbstractPrepareKerberosServerAction.java:184)\r\n        at org.apache.ambari.server.serveraction.kerberos.AbstractPrepareKerberosServerAction.processServiceComponentHosts(AbstractPrepareKerberosServerAction.java:94)\r\n        at org.apache.ambari.server.upgrade.UpgradeCatalog270$3.run(UpgradeCatalog270.java:1637)\r\n        at org.apache.ambari.server.upgrade.AbstractUpgradeCatalog.executeInTransaction(AbstractUpgradeCatalog.java:367)\r\n        ... 5 more\r\n{code}\r\n\r\nAttached is the complete ambari-server logs\r\n\r\n\r\nBelow is the jstack dump of schemaupgradehelper\r\n\r\n{code}\r\n[root@hcube1-1n01 ambari-server]# /opt/java/jdk1.8.0_152/bin/jstack -l 8239\r\n2018-08-10 07:10:00\r\nFull thread dump Java HotSpot(TM) 64-Bit Server VM (25.152-b16 mixed mode):\r\n\r\n\"Attach Listener\" #40 daemon prio=9 os_prio=0 tid=0x00007f9a6c001000 nid=0x3afa waiting on condition [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n\"DestroyJavaVM\" #39 prio=5 os_prio=0 tid=0x00007f9b6c00d000 nid=0x2030 waiting on condition [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n\"FileWatchdog:ambari.properties\" #38 daemon prio=5 os_prio=0 tid=0x00007f9b6d684000 nid=0x2c19 waiting on condition [0x00007f9b2e9d4000]\r\n   java.lang.Thread.State: TIMED_WAITING (sleeping)\r\n\tat java.lang.Thread.sleep(Native Method)\r\n\tat org.apache.log4j.helpers.FileWatchdog.run(FileWatchdog.java:104)\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n\"pool-6-thread-1\" #37 prio=5 os_prio=0 tid=0x00007f9a10006800 nid=0x210f waiting on condition [0x00007f9b2eed9000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  <0x0000000080dc3270> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1081)\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)\r\n\tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n\"pool-5-thread-1\" #36 prio=5 os_prio=0 tid=0x00007f9b6d497800 nid=0x2108 waiting on condition [0x00007f9b2edd8000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  <0x0000000080dc2fe8> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1081)\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)\r\n\tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n\"pool-3-thread-1\" #35 prio=5 os_prio=0 tid=0x00007f9b6d0cb000 nid=0x2107 waiting on condition [0x00007f9b2f2dd000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  <0x0000000080dc2b38> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)\r\n\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\r\n\tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n\"server-action-executor-cache-timer\" #23 daemon prio=5 os_prio=0 tid=0x00007f9b6da29000 nid=0x20d8 in Object.wait() [0x00007f9b34120000]\r\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\r\n\tat java.lang.Object.wait(Native Method)\r\n\t- waiting on <0x0000000080f0b6e0> (a java.util.TaskQueue)\r\n\tat java.util.TimerThread.mainLoop(Timer.java:552)\r\n\t- locked <0x0000000080f0b6e0> (a java.util.TaskQueue)\r\n\tat java.util.TimerThread.run(Timer.java:505)\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n\"InMemoryCredentialStore active cleanup timer\" #22 daemon prio=5 os_prio=0 tid=0x00007f9b6d541800 nid=0x20cd waiting on condition [0x00007f9b35021000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  <0x0000000080f2c750> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1081)\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)\r\n\tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n\"Service Thread\" #20 daemon prio=9 os_prio=0 tid=0x00007f9b6c107800 nid=0x205c runnable [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n\"C1 CompilerThread14\" #19 daemon prio=9 os_prio=0 tid=0x00007f9b6c104800 nid=0x205b waiting on condition [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n\"C1 CompilerThread13\" #18 daemon prio=9 os_prio=0 tid=0x00007f9b6c102800 nid=0x205a waiting on condition [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n\"C1 CompilerThread12\" #17 daemon prio=9 os_prio=0 tid=0x00007f9b6c100000 nid=0x2059 waiting on condition [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n\"C1 CompilerThread11\" #16 daemon prio=9 os_prio=0 tid=0x00007f9b6c0fe000 nid=0x2058 waiting on condition [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n\"C1 CompilerThread10\" #15 daemon prio=9 os_prio=0 tid=0x00007f9b6c0fb800 nid=0x2057 waiting on condition [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n\"C2 CompilerThread9\" #14 daemon prio=9 os_prio=0 tid=0x00007f9b6c0f9800 nid=0x2056 waiting on condition [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n\"C2 CompilerThread8\" #13 daemon prio=9 os_prio=0 tid=0x00007f9b6c0f7800 nid=0x2054 waiting on condition [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n\"C2 CompilerThread7\" #12 daemon prio=9 os_prio=0 tid=0x00007f9b6c0f5000 nid=0x2053 waiting on condition [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n\"C2 CompilerThread6\" #11 daemon prio=9 os_prio=0 tid=0x00007f9b6c0f3000 nid=0x2052 waiting on condition [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n\"C2 CompilerThread5\" #10 daemon prio=9 os_prio=0 tid=0x00007f9b6c0f0800 nid=0x2051 waiting on condition [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n\"C2 CompilerThread4\" #9 daemon prio=9 os_prio=0 tid=0x00007f9b6c0ee800 nid=0x2050 runnable [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n\"C2 CompilerThread3\" #8 daemon prio=9 os_prio=0 tid=0x00007f9b6c0ec000 nid=0x204f waiting on condition [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n\"C2 CompilerThread2\" #7 daemon prio=9 os_prio=0 tid=0x00007f9b6c0ea000 nid=0x204e waiting on condition [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n\"C2 CompilerThread1\" #6 daemon prio=9 os_prio=0 tid=0x00007f9b6c0e8000 nid=0x204d waiting on condition [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n\"C2 CompilerThread0\" #5 daemon prio=9 os_prio=0 tid=0x00007f9b6c0e5000 nid=0x204c waiting on condition [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n\"Signal Dispatcher\" #4 daemon prio=9 os_prio=0 tid=0x00007f9b6c0e3800 nid=0x204b runnable [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n\"Finalizer\" #3 daemon prio=8 os_prio=0 tid=0x00007f9b6c0af800 nid=0x204a in Object.wait() [0x00007f9b3d0e2000]\r\n   java.lang.Thread.State: WAITING (on object monitor)\r\n\tat java.lang.Object.wait(Native Method)\r\n\t- waiting on <0x000000008020b148> (a java.lang.ref.ReferenceQueue$Lock)\r\n\tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:143)\r\n\t- locked <0x000000008020b148> (a java.lang.ref.ReferenceQueue$Lock)\r\n\tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:164)\r\n\tat java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:209)\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n\"Reference Handler\" #2 daemon prio=10 os_prio=0 tid=0x00007f9b6c0ab000 nid=0x2049 in Object.wait() [0x00007f9b3d1e3000]\r\n   java.lang.Thread.State: WAITING (on object monitor)\r\n\tat java.lang.Object.wait(Native Method)\r\n\t- waiting on <0x000000008020c698> (a java.lang.ref.Reference$Lock)\r\n\tat java.lang.Object.wait(Object.java:502)\r\n\tat java.lang.ref.Reference.tryHandlePending(Reference.java:191)\r\n\t- locked <0x000000008020c698> (a java.lang.ref.Reference$Lock)\r\n\tat java.lang.ref.Reference$ReferenceHandler.run(Reference.java:153)\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n\"VM Thread\" os_prio=0 tid=0x00007f9b6c0a3800 nid=0x2048 runnable \r\n\r\n\"GC task thread#0 (ParallelGC)\" os_prio=0 tid=0x00007f9b6c022800 nid=0x2031 runnable \r\n\r\n\"GC task thread#1 (ParallelGC)\" os_prio=0 tid=0x00007f9b6c024000 nid=0x2032 runnable \r\n\r\n\"GC task thread#2 (ParallelGC)\" os_prio=0 tid=0x00007f9b6c026000 nid=0x2033 runnable \r\n\r\n\"GC task thread#3 (ParallelGC)\" os_prio=0 tid=0x00007f9b6c028000 nid=0x2034 runnable \r\n\r\n\"GC task thread#4 (ParallelGC)\" os_prio=0 tid=0x00007f9b6c029800 nid=0x2035 runnable \r\n\r\n\"GC task thread#5 (ParallelGC)\" os_prio=0 tid=0x00007f9b6c02b800 nid=0x2036 runnable \r\n\r\n\"GC task thread#6 (ParallelGC)\" os_prio=0 tid=0x00007f9b6c02d000 nid=0x2037 runnable \r\n\r\n\"GC task thread#7 (ParallelGC)\" os_prio=0 tid=0x00007f9b6c02f000 nid=0x2038 runnable \r\n\r\n\"GC task thread#8 (ParallelGC)\" os_prio=0 tid=0x00007f9b6c031000 nid=0x2039 runnable \r\n\r\n\"GC task thread#9 (ParallelGC)\" os_prio=0 tid=0x00007f9b6c032800 nid=0x203a runnable \r\n\r\n\"GC task thread#10 (ParallelGC)\" os_prio=0 tid=0x00007f9b6c034800 nid=0x203b runnable \r\n\r\n\"GC task thread#11 (ParallelGC)\" os_prio=0 tid=0x00007f9b6c036800 nid=0x203c runnable \r\n\r\n\"GC task thread#12 (ParallelGC)\" os_prio=0 tid=0x00007f9b6c038000 nid=0x203d runnable \r\n\r\n\"GC task thread#13 (ParallelGC)\" os_prio=0 tid=0x00007f9b6c03a000 nid=0x203e runnable \r\n\r\n\"GC task thread#14 (ParallelGC)\" os_prio=0 tid=0x00007f9b6c03c000 nid=0x203f runnable \r\n\r\n\"GC task thread#15 (ParallelGC)\" os_prio=0 tid=0x00007f9b6c03d800 nid=0x2040 runnable \r\n\r\n\"GC task thread#16 (ParallelGC)\" os_prio=0 tid=0x00007f9b6c03f800 nid=0x2041 runnable \r\n\r\n\"GC task thread#17 (ParallelGC)\" os_prio=0 tid=0x00007f9b6c041800 nid=0x2042 runnable \r\n\r\n\"GC task thread#18 (ParallelGC)\" os_prio=0 tid=0x00007f9b6c043000 nid=0x2043 runnable \r\n\r\n\"GC task thread#19 (ParallelGC)\" os_prio=0 tid=0x00007f9b6c045000 nid=0x2044 runnable \r\n\r\n\"GC task thread#20 (ParallelGC)\" os_prio=0 tid=0x00007f9b6c046800 nid=0x2045 runnable \r\n\r\n\"GC task thread#21 (ParallelGC)\" os_prio=0 tid=0x00007f9b6c048800 nid=0x2046 runnable \r\n\r\n\"GC task thread#22 (ParallelGC)\" os_prio=0 tid=0x00007f9b6c04a800 nid=0x2047 runnable \r\n\r\n\"VM Periodic Task Thread\" os_prio=0 tid=0x00007f9b6c10c800 nid=0x205d waiting on condition \r\n\r\nJNI global references: 328\r\n{code}\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "ambari-server upgrade stuck with NPE"
   },
   {
      "_id": "13178263",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-08-10 12:21:47",
      "description": "{code}\r\n2018-07-12T07:56:27,148 ERROR [pool-6-thread-3]: metastore.HiveMetaStore (HiveMetaStore.java:get_current_notificationEventId(7617)) - Not authorized to make the get_current_notificationEventId call. You can try to disable metastore.metastore.event.db.notification.api.auth\r\norg.apache.hadoop.hive.metastore.api.MetaException: User hive is not allowed to perform this API call\r\n        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.authorizeProxyPrivilege(HiveMetaStore.java:7655) ~[hive-exec-3.1.0.3.0.0.0-1628.jar:3.1.0.3.0.0.0-1628]\r\n        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.get_current_notificationEventId(HiveMetaStore.java:7615) [hive-exec-3.1.0.3.0.0.0-1628.jar:3.1.0.3.0.0.0-1628]\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_112]\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_112]\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_112]\r\n        at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_112]\r\n        at org.apache.hadoop.hive.metastore.RetryingHMSHandler.invokeInternal(RetryingHMSHandler.java:147) [hive-exec-3.1.0.3.0.0.0-1628.jar:3.1.0.3.0.0.0-1628]\r\n        at org.apache.hadoop.hive.metastore.RetryingHMSHandler.invoke(RetryingHMSHandler.java:108) [hive-exec-3.1.0.3.0.0.0-1628.jar:3.1.0.3.0.0.0-1628]\r\n        at com.sun.proxy.$Proxy34.get_current_notificationEventId(Unknown Source) [?:?]\r\n        at org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore$Processor$get_current_notificationEventId.getResult(ThriftHiveMetastore.java:18364) [hive-exec-3.1.0.3.0.0.0-1628.jar:3.1.0.3.0.0.0-1628]\r\n        at org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore$Processor$get_current_notificationEventId.getResult(ThriftHiveMetastore.java:18349) [hive-exec-3.1.0.3.0.0.0-1628.jar:3.1.0.3.0.0.0-1628]\r\n        at org.apache.thrift.ProcessFunction.process(ProcessFunction.java:39) [hive-exec-3.1.0.3.0.0.0-1628.jar:3.1.0.3.0.0.0-1628]\r\n        at org.apache.hadoop.hive.metastore.TUGIBasedProcessor$1.run(TUGIBasedProcessor.java:111) [hive-exec-3.1.0.3.0.0.0-1628.jar:3.1.0.3.0.0.0-1628]\r\n        at org.apache.hadoop.hive.metastore.TUGIBasedProcessor$1.run(TUGIBasedProcessor.java:107) [hive-exec-3.1.0.3.0.0.0-1628.jar:3.1.0.3.0.0.0-1628]\r\n        at java.security.AccessController.doPrivileged(Native Method) [?:1.8.0_112]\r\n        at javax.security.auth.Subject.doAs(Subject.java:422) [?:1.8.0_112]\r\n        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1688) [hadoop-common-3.1.0.3.0.0.0-1628.jar:?]\r\n        at org.apache.hadoop.hive.metastore.TUGIBasedProcessor.process(TUGIBasedProcessor.java:119) [hive-exec-3.1.0.3.0.0.0-1628.jar:3.1.0.3.0.0.0-1628]\r\n        at org.apache.thrift.server.TThreadPoolServer$WorkerProcess.run(TThreadPoolServer.java:286) [hive-exec-3.1.0.3.0.0.0-1628.jar:3.1.0.3.0.0.0-1628]\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [?:1.8.0_112]\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [?:1.8.0_112]\r\n        at java.lang.Thread.run(Thread.java:745) [?:1.8.0_112]\r\n2018-07-12T07:56:27,153 ERROR [pool-6-thread-3]: metastore.RetryingHMSHandler (RetryingHMSHandler.java:invokeInternal(201)) - org.apache.thrift.TException: MetaException(message:User hive is not allowed to perform this API call)\r\n        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.get_current_notificationEventId(HiveMetaStore.java:7619)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.apache.hadoop.hive.metastore.RetryingHMSHandler.invokeInternal(RetryingHMSHandler.java:147)\r\n        at org.apache.hadoop.hive.metastore.RetryingHMSHandler.invoke(RetryingHMSHandler.java:108)\r\n        at com.sun.proxy.$Proxy34.get_current_notificationEventId(Unknown Source)\r\n        at org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore$Processor$get_current_notificationEventId.getResult(ThriftHiveMetastore.java:18364)\r\n        at org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore$Processor$get_current_notificationEventId.getResult(ThriftHiveMetastore.java:18349)\r\n        at org.apache.thrift.ProcessFunction.process(ProcessFunction.java:39)\r\n        at org.apache.hadoop.hive.metastore.TUGIBasedProcessor$1.run(TUGIBasedProcessor.java:111)\r\n        at org.apache.hadoop.hive.metastore.TUGIBasedProcessor$1.run(TUGIBasedProcessor.java:107)\r\n        at java.security.AccessController.doPrivileged(Native Method)\r\n        at javax.security.auth.Subject.doAs(Subject.java:422)\r\n        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1688)\r\n        at org.apache.hadoop.hive.metastore.TUGIBasedProcessor.process(TUGIBasedProcessor.java:119)\r\n        at org.apache.thrift.server.TThreadPoolServer$WorkerProcess.run(TThreadPoolServer.java:286)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n        at java.lang.Thread.run(Thread.java:745)\r\nCaused by: MetaException(message:User hive is not allowed to perform this API call)\r\n        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.authorizeProxyPrivilege(HiveMetaStore.java:7655)\r\n        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.get_current_notificationEventId(HiveMetaStore.java:7615)\r\n        ... 20 more\r\n{code}\r\n\r\nhadoop.proxyuser.hive.hosts and hadoop.proxyuser.hive.groups is not set when OneFS is used in place of HDFS",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Hiveserver2 can't connect to metastore when using OneFS"
   },
   {
      "_id": "13178213",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-08-10 08:17:46",
      "description": "On latest Amazon Linux 2 ambari-server cannot start with error message:\n\n    \n    \r\n    [root@ip-10-0-222-155 cloudbreak]# ambari-server start\r\n    Using python  /usr/bin/python\r\n    Starting ambari-server\r\n    Traceback (most recent call last):\r\n      File \"/usr/sbin/ambari-server.py\", line 37, in <module>\r\n        from ambari_server.dbConfiguration import DATABASE_NAMES, LINUX_DBMS_KEYS_LIST\r\n      File \"/usr/lib/ambari-server/lib/ambari_server/dbConfiguration.py\", line 30, in <module>\r\n        from ambari_server.serverConfiguration import decrypt_password_for_alias, get_ambari_properties, get_is_secure, \\\r\n      File \"/usr/lib/ambari-server/lib/ambari_server/serverConfiguration.py\", line 46, in <module>\r\n        OS_VERSION = OSCheck().get_os_major_version()\r\n      File \"/usr/lib/ambari-server/lib/ambari_commons/os_check.py\", line 322, in get_os_major_version\r\n        return OSCheck.get_os_version().split('.')[0]\r\n      File \"/usr/lib/ambari-server/lib/ambari_commons/os_check.py\", line 301, in get_os_version\r\n        return OSCheck.get_alias(OSCheck._get_os_type(), OSCheck._get_os_version())[1]\r\n      File \"/usr/lib/ambari-server/lib/ambari_commons/os_check.py\", line 313, in _get_os_version\r\n        raise Exception(\"Cannot detect os version. Exiting...\")\r\n    Exception: Cannot detect os version. Exiting...\r\n    \n\nAdditional infos from the machine:\n\n    \n    \r\n    [root@ip-10-0-222-155 cloudbreak]# cat /etc/system-release\r\n    Amazon Linux 2\r\n    [root@ip-10-0-222-155 cloudbreak]# cat /etc/*release\r\n    NAME=\"Amazon Linux\"\r\n    VERSION=\"2\"\r\n    ID=\"amzn\"\r\n    ID_LIKE=\"centos rhel fedora\"\r\n    VERSION_ID=\"2\"\r\n    PRETTY_NAME=\"Amazon Linux 2\"\r\n    ANSI_COLOR=\"0;33\"\r\n    CPE_NAME=\"cpe:2.3:o:amazon:amazon_linux:2\"\r\n    HOME_URL=\"https://amazonlinux.com/\"\r\n    Amazon Linux 2\r\n    [root@ip-10-0-222-155 cloudbreak]#\r\n    \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari server can not start on latest Amazon Linux 2"
   },
   {
      "_id": "13178076",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-08-09 17:40:42",
      "description": "If I configure ambari.ldap.advanced.group_mapping_rules, it does not add ambari admin roles to the configured role. I did some debug and the AmbariLdapConfiguration is uninitialized in Users.java class, so the adminGroupMappings value is the default \"Ambari Administrators\" not the one I configured before. \r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "ambari.ldap.advanced.group_mapping_rules does not work, LDAP sync does not add admin roles for configured group(s)"
   },
   {
      "_id": "13178050",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-08-09 16:31:17",
      "description": "No subject alternative DNS name exception encountered when Enabling Kerberos against an Active Directory even when SSL verification is off.\r\n\r\n{noformat}\r\n2018-08-09 14:48:28,275  WARN [ambari-client-thread-35] ADKerberosOperationHandler:471 - Failed to communicate with the Active Directory at ldaps://adserver.example.com:636: adserver.example.com:636\r\njavax.naming.CommunicationException: adserver.example.com:636 [Root exception is javax.net.ssl.SSLHandshakeException: java.security.cert.CertificateException: No subject alternative DNS name matching adserver.example.com found.]\r\n        at com.sun.jndi.ldap.Connection.<init>(Connection.java:238)\r\n        at com.sun.jndi.ldap.LdapClient.<init>(LdapClient.java:137)\r\n...\r\nCaused by: javax.net.ssl.SSLHandshakeException: java.security.cert.CertificateException: No subject alternative DNS name matching adserver.example.com found.\r\n        at sun.security.ssl.Alerts.getSSLException(Alerts.java:192)\r\n        at sun.security.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1964)\r\n...\r\nCaused by: java.security.cert.CertificateException: No subject alternative DNS name matching adserver.example.com found.\r\n        at sun.security.util.HostnameChecker.matchDNS(HostnameChecker.java:214)\r\n        at sun.security.util.HostnameChecker.match(HostnameChecker.java:96)\r\n        at sun.security.ssl.X509TrustManagerImpl.checkIdentity(X509TrustManagerImpl.java:459)\r\n        at sun.security.ssl.AbstractTrustManagerWrapper.checkAdditionalTrust(SSLContextImpl.java:1026)\r\n        at sun.security.ssl.AbstractTrustManagerWrapper.checkServerTrusted(SSLContextImpl.java:993)\r\n        at sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1596)\r\n{noformat}\r\n\r\nNote: This occurs when the hostname embedded in the SSL certificate does not match the hostname of the Active Directory host and Open JDK 1.8.181-b13 is used.  This is not seen when Oracle JDK is used. \r\n\r\n{noformat:title=Observed with this version of JDK}\r\nopenjdk version \"1.8.0_181\"\r\nOpenJDK Runtime Environment (build 1.8.0_181-b13)\r\nOpenJDK 64-Bit Server VM (build 25.181-b13, mixed mode)\r\n{noformat}\r\n\r\n\r\n{noformat:title=Not observed with this version of JDK}\r\njava version \"1.8.0_112\"\r\nJava(TM) SE Runtime Environment (build 1.8.0_112-b15)\r\nJava HotSpot(TM) 64-Bit Server VM (build 25.112-b15, mixed mode)\r\n{noformat}\r\n\r\n*Solution*\r\nThe {{org.apache.ambari.server.security.InternalSSLSocketFactory.LenientTrustManager}} class needs to extend {{javax.net.ssl.X509ExtendedTrustManager}} and do nothing in the additional overridden methods. \r\n\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "No subject alternative DNS name exception encountered when Enabling Kerberos against an Active Directory even when SSL verification is off"
   },
   {
      "_id": "13177899",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-08-09 08:31:48",
      "description": "HBase can store data on filesystems other than HDFS, but Ambari cannot deploy it without HDFS.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Cannot deploy HBase without HDFS"
   },
   {
      "_id": "13177749",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         }
      ],
      "created": "2018-08-08 17:51:17",
      "description": "Remove dependencies with CVE issues from Ambari Agent\r\n\r\n* org.apache.commons:commons-collections4:jar before version 4.0-alpha1-RC1\r\n** CVE-2015-6420 - https://nvd.nist.gov/vuln/detail/CVE-2015-6420\r\n\r\n{noformat}\r\n[INFO] org.apache.ambari.contrib.views:ambari-views-utils:jar:2.0.0.0-SNAPSHOT\r\n[INFO] \\- org.apache.commons:commons-collections4:jar:4.0:compile\r\n{noformat}\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "cleanup",
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Remove dependencies with CVE issues from Ambari Agent"
   },
   {
      "_id": "13177496",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-08-07 19:27:21",
      "description": "In Ambari 2.6, some status commands were able to supply the version of the\ncomponent they were running for. This was needed especially during upgrades to\ncorrect situations where components would fail to start but the processes were\nactually running and reporting.\n\n  * During heartbeat registration, Ambari asked the agent to get the version in the next status command:  \n<https://github.com/apache/ambari/blob/branch-2.6/ambari-\nserver/src/main/java/org/apache/ambari/server/agent/HeartBeatHandler.java#L416-L419>\n\n  * The status command would place the version information from the structured out into the \"extra\" mapping, which would then be handled here via an event:  \n<https://github.com/apache/ambari/blob/trunk/ambari-\nserver/src/main/java/org/apache/ambari/server/agent/HeartbeatProcessor.java#L599-L603>\n\nWe need to replace this functionality so that component versions are reported\non registration of agents.\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Component Versions Are Not Reported On Initial Status Commands Anymore"
   },
   {
      "_id": "13177485",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-08-07 18:38:23",
      "description": "Remove dependencies with CVE issues from Ambari Server\r\n\r\n* org.springframework:spring-beans:jar before 4.3.17.RELEASE \r\n** CVE-2018-1270 - https://nvd.nist.gov/vuln/detail/CVE-2018-1270\r\n** CVE-2018-1275 - https://nvd.nist.gov/vuln/detail/CVE-2018-1275\r\n** CVE-2018-1199 - https://nvd.nist.gov/vuln/detail/CVE-2018-1199\r\n** CVE-2018-1271 - https://nvd.nist.gov/vuln/detail/CVE-2018-1271\r\n** CVE-2018-1257 - https://nvd.nist.gov/vuln/detail/CVE-2018-1257\r\n{noformat}\r\n[INFO] org.apache.ambari:ambari-server:jar:2.7.0.0.0\r\n[INFO] \\- org.springframework.security:spring-security-core:jar:4.2.4.RELEASE:compile\r\n[INFO]    \\- org.springframework:spring-beans:jar:4.3.12.RELEASE:compile\r\n{noformat}\r\n\r\n* org.kohsuke:libpam4j:jar before version 1.9\r\n** CVE-2017-12197 - https://nvd.nist.gov/vuln/detail/CVE-2017-12197\r\n{noformat}\r\n[INFO] org.apache.ambari:ambari-server:jar:2.7.0.0.0\r\n[INFO] \\- org.kohsuke:libpam4j:jar:1.8:compile\r\n{noformat}\r\n\r\n* org.springframework:spring-context before version 4.3.17.RELEASE\r\n** CVE-2018-1257 - https://nvd.nist.gov/vuln/detail/CVE-2018-1257\r\n{noformat}\r\n[INFO] org.apache.ambari:ambari-server:jar:2.7.0.0.0\r\n[INFO] \\- org.springframework:spring-context:jar:4.3.16.RELEASE:compile\r\n{noformat}\r\n\r\n* org.springframework.security:spring-security-ldap:jar before version 4.1.5.RELEASE \r\n** CVE-2018-1199 - https://nvd.nist.gov/vuln/detail/CVE-2018-1199\r\n** CVE-2016-9879 - https://nvd.nist.gov/vuln/detail/CVE-2016-9879\r\n{noformat}\r\n[INFO] org.apache.ambari:ambari-server:jar:2.7.0.0.0\r\n[INFO] \\- org.springframework.security:spring-security-ldap:jar:4.1.1.RELEASE:compile\r\n{noformat}\r\n\r\n* com.jcraft:jsch:jar before version 1.54 \r\n** CVE-2016-5725 - https://nvd.nist.gov/vuln/detail/CVE-2016-5725\r\n{noformat}\r\n[INFO] org.apache.ambari:ambari-server:jar:2.7.0.0.0\r\n[INFO] \\- com.jcraft:jsch:jar:0.1.45:compile\r\n{noformat}\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "cleanup",
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Remove dependencies with CVE issues from Ambari Server"
   },
   {
      "_id": "13177146",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-08-06 15:53:03",
      "description": "Update org.eclipse.jetty version to 9.4.11.v20180605 to avoid CVE issues.\r\n\r\nSee https://dev.eclipse.org/mhonarc/lists/jetty-announce/msg00123.html for reported issues. ",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "cleanup",
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Update org.eclipse.jetty version to 9.4.11.v20180605 to avoid CVE issues"
   },
   {
      "_id": "13176727",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-08-03 14:47:18",
      "description": "Fix validate single sign-in support information to look for {{ssoEnabledTest}}.\r\n\r\nThe current test looks for the old {{enabledConfiguration}} value only. However {{ssoEnabledTest}} is the new way, leaving {{enabledConfiguration}} for backward compatibility. ",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Fix validate single sign-in support information to look for ssoEnabledTest"
   },
   {
      "_id": "13176252",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-08-01 22:03:23",
      "description": "STR: \r\nAdd a namespace from UI. In the last step restart required services, hiveserver2 restart fails. Although on retrying it comes back up\r\n\r\n{code}\r\nTraceback (most recent call last):\r\n File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 982, in restart\r\n self.status(env)\r\n File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/HIVE/package/scripts/hive_server.py\", line 79, in status\r\n check_process_status(status_params.hive_pid)\r\n File \"/usr/lib/ambari-agent/lib/resource_management/libraries/functions/check_process_status.py\", line 43, in check_process_status\r\n raise ComponentIsNotRunning()\r\nComponentIsNotRunning\r\n\r\nThe above exception was the cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/HIVE/package/scripts/hive_server.py\", line 137, in <module>\r\n HiveServer().execute()\r\n File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 353, in execute\r\n method(env)\r\n File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 993, in restart\r\n self.start(env, upgrade_type=upgrade_type)\r\n File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/HIVE/package/scripts/hive_server.py\", line 50, in start\r\n self.configure(env) # FOR SECURITY\r\n File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/HIVE/package/scripts/hive_server.py\", line 45, in configure\r\n hive(name='hiveserver2')\r\n File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/HIVE/package/scripts/hive.py\", line 119, in hive\r\n setup_hiveserver2()\r\n File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/HIVE/package/scripts/hive.py\", line 167, in setup_hiveserver2\r\n skip=params.sysprep_skip_copy_tarballs_hdfs)\r\n File \"/usr/lib/ambari-agent/lib/resource_management/libraries/functions/copy_tarball.py\", line 516, in copy_to_hdfs\r\n replace_existing_files=replace_existing_files,\r\n File \"/usr/lib/ambari-agent/lib/resource_management/core/base.py\", line 166, in __init__\r\n self.env.run()\r\n File \"/usr/lib/ambari-agent/lib/resource_management/core/environment.py\", line 160, in run\r\n self.run_action(resource, action)\r\n File \"/usr/lib/ambari-agent/lib/resource_management/core/environment.py\", line 124, in run_action\r\n provider_action()\r\n File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 654, in action_create_on_execute\r\n self.action_delayed(\"create\")\r\n File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 651, in action_delayed\r\n self.get_hdfs_resource_executor().action_delayed(action_name, self)\r\n File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 354, in action_delayed\r\n self.action_delayed_for_nameservice(nameservice, action_name, main_resource)\r\n File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 380, in action_delayed_for_nameservice\r\n self._create_resource()\r\n File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 396, in _create_resource\r\n self._create_file(self.main_resource.resource.target, source=self.main_resource.resource.source, mode=self.mode)\r\n File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 511, in _create_file\r\n self.util.run_command(target, 'CREATE', method='PUT', overwrite=True, assertable_result=False, file_to_put=source, **kwargs)\r\n File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 199, in run_command\r\n return self._run_command(*args, **kwargs)\r\n File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 272, in _run_command\r\n raise WebHDFSCallException(err_msg, result_dict)\r\nresource_management.libraries.providers.hdfs_resource.WebHDFSCallException: Execution of 'curl -sS -L -w '%\\{http_code}' -X PUT --data-binary @/usr/hdp/3.0.1.0-30/hive/hive.tar.gz -H 'Content-Type: application/octet-stream' --negotiate -u : -k 'https://<HOST-FQDN>:50470/webhdfs/v1/hdp/apps/3.0.1.0-30/hive/hive.tar.gz?op=CREATE&overwrite=True&permission=444'' returned status_code=404. \r\n{\r\n \"RemoteException\": {\r\n \"exception\": \"FileNotFoundException\", \r\n \"javaClassName\": \"java.io.FileNotFoundException\", \r\n \"message\": \"File does not exist: /hdp/apps/3.0.1.0-30/hive/hive.tar.gz (inode 16450) Holder DFSClient_NONMAPREDUCE_-1764810327_120 does not have any open files.\\n\\tat org.apache.hadoop.hdfs.server.namenode.FSNamesystem.checkLease(FSNamesystem.java:2800)\\n\\tat org.apache.hadoop.hdfs.server.namenode.FSDirWriteFileOp.analyzeFileState(FSDirWriteFileOp.java:597)\\n\\tat org.apache.hadoop.hdfs.server.namenode.FSDirWriteFileOp.validateAddBlock(FSDirWriteFileOp.java:172)\\n\\tat org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:2679)\\n\\tat org.apache.hadoop.hdfs.server.namenode.NameNodeRpcServer.addBlock(NameNodeRpcServer.java:875)\\n\\tat org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolServerSideTranslatorPB.addBlock(ClientNamenodeProtocolServerSideTranslatorPB.java:561)\\n\\tat org.apache.hadoop.hdfs.protocol.proto.ClientNamenodeProtocolProtos$ClientNamenodeProtocol$2.callBlockingMethod(ClientNamenodeProtocolProtos.java)\\n\\tat org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:523)\\n\\tat org.apache.hadoop.ipc.RPC$Server.call(RPC.java:991)\\n\\tat org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:872)\\n\\tat org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:818)\\n\\tat java.security.AccessController.doPrivileged(Native Method)\\n\\tat javax.security.auth.Subject.doAs(Subject.java:422)\\n\\tat org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1729)\\n\\tat org.apache.hadoop.ipc.Server$Handler.run(Server.java:2678)\\n\"\r\n }\r\n}\r\n{code}\r\n\r\n\u00a0",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Components start failing with 'Holder DFSClient_NONMAPREDUCE does not have any open files' while adding Namespace "
   },
   {
      "_id": "13175854",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-07-31 14:35:43",
      "description": "Filter services from Ambari CLI when setting up SSO if not eligible when Kerberos is not enabled.  \r\n\r\nIn Ambari 2.7, services that are eligible for Ambari to manage their SSO configurations specify this in their metainfo file using like:\r\n\r\n{code}\r\n      <sso>\r\n        <supported>true</supported>\r\n        <enabledConfiguration>application-properties/atlas.sso.knox.enabled</enabledConfiguration>\r\n      </sso>\r\n{code}\r\n\r\nSee AMBARI-23253\r\nSee [Ambari Single Sign-on Configuration|https://github.com/apache/ambari/blob/branch-2.7/ambari-server/docs/security/sso/index.md] documentation\r\n\r\nHowever some services require Kerberos to be enabled for SSO to work.  For example, HDFS, Yarn, and Oozie.  For this case, the metadata is enhanced allowing for the metadata to indicate whether Kerberos is required (AMBARI-24335) and whether Kerberos is enabled (AMBARI-24384) for that service.\r\n\r\nThis information can be found in the service resource data\r\n\r\n{code:title=GET /api/v1/clusters/CLUSTERNAME/services/OOZIE}\r\n{\r\n  \"href\" : \"http://ambari_host:8080/api/v1/clusters/CLUSTERNAME/services/OOZIE\",\r\n  \"ServiceInfo\" : {\r\n    ...\r\n    \"kerberos_enabled\" : true,\r\n    ...\r\n   \"sso_integration_desired\": false,\r\n   \"sso_integration_enabled\": false,\r\n   \"sso_integration_requires_kerberos\": true,\r\n   \"sso_integration_supported\": true,\r\n   ...\r\n   },\r\n   ...\r\n}\r\n{code}\r\n\r\nUsing this information, services may be included in or excluded from the list of services a user can choose for enabling SSO integration. \r\n\r\nFor example\r\n||sso_integration_supported||sso_integration_requires_kerberos||kerberos_enabled||Can Enable SSO||\r\n|true|true|true|yes\r\n|true|true|false|no\r\n|true|false|true|yes\r\n|true|false|false|yes\r\n|false|true|true|no\r\n|false|true|false|no\r\n|false|false|true|no\r\n|false|false|false|no\r\n\r\n  ",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Filter services eligible for Ambari Single Sign-on Configuration if Kerberos is required but not enabled"
   },
   {
      "_id": "13175846",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-07-31 14:08:21",
      "description": "Update Ambari Single Sign-on Configuration documentation to include Kerberos options.\r\n\r\nSee https://github.com/apache/ambari/blob/branch-2.7/ambari-server/docs/security/sso/index.md.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "documentation",
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Update Ambari Single Sign-on Configuration documentation to include Kerberos options"
   },
   {
      "_id": "13175691",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323905",
            "id": "12323905",
            "name": "ambari-metrics",
            "description": "Ambari Metrics System"
         }
      ],
      "created": "2018-07-30 22:22:09",
      "description": "Many branch-2.7 test runs from Github are failing with \r\n\r\n{noformat}\r\n2018-07-30 21:33:23,838 ERROR [main] timeline.TimelineMetricsFilter (TimelineMetricsFilter.java:readMetricWhitelistFromFile(132)) - Unable to parse metric file\r\njava.io.FileNotFoundException: /home/jenkins/jenkins-slave/workspace/Ambari-Github-PullRequest-Builder%402/ambari-metrics/ambari-metrics-timelineservice/target/test-classes/test_data/metric_blacklist.dat (No such file or directory)\r\n\tat java.io.FileInputStream.open0(Native Method)\r\n\tat java.io.FileInputStream.open(FileInputStream.java:195)\r\n\tat java.io.FileInputStream.<init>(FileInputStream.java:138)\r\n\tat java.io.FileInputStream.<init>(FileInputStream.java:93)\r\n\tat org.apache.ambari.metrics.core.timeline.TimelineMetricsFilter.readMetricWhitelistFromFile(TimelineMetricsFilter.java:117)\r\n\tat org.apache.ambari.metrics.core.timeline.TimelineMetricsFilter.initializeMetricFilter(TimelineMetricsFilter.java:85)\r\n\tat org.apache.ambari.metrics.core.timeline.TimelineMetricsFilterTest.testMetricBlacklisting(TimelineMetricsFilterTest.java:97)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)\r\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)\r\n\tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)\r\n\tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:300)\r\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:344)\r\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:269)\r\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:240)\r\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:184)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:286)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:240)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)\r\n2018-07-30 21:33:23,842 INFO  [main] timeline.TimelineMetricsFilter (TimelineMetricsFilter.java:initializeMetricFilter(86)) - Blacklisting 0 metrics\r\n{noformat}\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "unit-test"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Unit test error in ambari-metrics-timelineservice: metric_blacklist.dat (No such file or directory)"
   },
   {
      "_id": "13175604",
      "assignee": "rlevas",
      "components": [],
      "created": "2018-07-30 16:25:41",
      "description": "Add logic and declaration used to determine if Kerberos is enabled for a service.\r\n\r\nTo support a robust method to determine whether Kerberos is enabled or not, a new attribute should be added - {{kerberosEnabledTest}}.  \r\n\r\nThe {{kerberosEnabledTest}} attribute is to contain a JSON document that can be _compiled_ into a {{org.apache.commons.collections.Predicate}} (ideally using {{org.apache.ambari.server.collections.PredicateUtils#fromJSON}}).  For example\r\n\r\n{code}\r\n<sso>\r\n  <supported>true</supported>\r\n  <kerberosRequired>true</kerberosRequired>\r\n  ...\r\n</sso>\r\n<kerberosEnabledTest>\r\n    {\r\n      \"equals\": [\r\n        \"service-properties/kerberos.enabled\",\r\n        \"true\"\r\n      ]\r\n    }\r\n</kerberosEnabledTest>\r\n\r\n{code}\r\n\r\n{code}\r\n<sso>\r\n  <supported>true</supported>\r\n  <kerberosRequired>true</kerberosRequired>\r\n  ...\r\n</sso>\r\n<kerberosEnabledTest>\r\n    {\r\n      \"or\": [\r\n        {\r\n          \"equals\": [\r\n            \"oozie-site/oozie.authentication.type\",\r\n            \"kerberos\"\r\n          ]\r\n        },\r\n        {\r\n          \"equals\": [\r\n            \"oozie-site/oozie.authentication.type\",\r\n            \"org.apache.hadoop.security.authentication.server.JWTRedirectAuthenticationHandler\"\r\n          ]\r\n        }\r\n      ]\r\n    }\r\n  </kerberosEnabledTest>\r\n{code}\r\nThe result of the test, is to be available via the services REST API:\r\n\r\n{code:title=GET /api/v1/clusters/CLUSTERNAME/services/OOZIE}\r\n{\r\n  \"href\" : \"http://ambari_host:8080/api/v1/clusters/CLUSTERNAME/services/OOZIE\",\r\n  \"ServiceInfo\" : {\r\n    ...\r\n    \"kerberos_enabled\" : true,\r\n    ...\r\n   },\r\n   ...\r\n}\r\n{code}\r\n\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Logic and declaration used to determine if Kerberos is enabled for a service"
   },
   {
      "_id": "13175355",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-07-28 18:43:05",
      "description": "Adding services when Kerberos is enabled incorrectly changes unrelated service configurations.  For example, {{kerberos-env/service_check_principal_name}} is changed from \"{{$\\{cluster_name|toLower()\\}-$\\{short_date\\}}}\" to a concrete value like \"{{c1-072818}}\".\r\n\r\nThis is a regression created with the resolution of [AMBARI-23292|https://issues.apache.org/jira/browse/AMBARI-23292].\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "pull-request-available",
         "regresion"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Adding services when Kerberos is enabled incorrectly changes unrelated service configurations"
   },
   {
      "_id": "13175233",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         }
      ],
      "created": "2018-07-27 17:22:29",
      "description": "*STR*\r\n\r\ninstall ambari-2.7.0.1-11\r\n\r\ndeploy\u00a0a kerberized cluster (i.e. with ZK and Atlas)\r\n\r\nremove one of the services (I removed Atlas)\r\n\r\nadd that service again in via UI\r\n\r\n*Result*\r\n\r\nThe following error occurred at the\u00a0Check Keytabs Kerberos Client task:\r\n{code:java}\r\nstderr: \r\nTraceback (most recent call last):\r\n  File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/KERBEROS/package/scripts/kerberos_client.py\", line 91, in \r\n    KerberosClient().execute()\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 353, in execute\r\n    method(env)\r\n  File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/KERBEROS/package/scripts/kerberos_client.py\", line 87, in check_keytabs\r\n    find_missing_keytabs(params, output_hook)\r\n  File \"/usr/lib/ambari-agent/lib/ambari_commons/kerberos/kerberos_common.py\", line 166, in find_missing_keytabs\r\n    missing_keytabs = MissingKeytabs.from_kerberos_records(params.kerberos_command_params, params.hostname)\r\n  File \"/usr/lib/ambari-agent/lib/ambari_commons/kerberos/kerberos_common.py\", line 55, in from_kerberos_records\r\n    with_missing_keytab = (each for each in kerberos_record \\\r\nTypeError: 'NoneType' object is not iterable\r\n stdout:\r\n\r\n\r\nCommand failed after 1 tries{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Check Keytabs Kerberos Client step failing while re-dding a service via UI"
   },
   {
      "_id": "13175179",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-07-27 14:41:45",
      "description": "See screenshots",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "How alert count is presented for config errors/warnings/suggestions confusing and misleading"
   },
   {
      "_id": "13174918",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-07-26 16:39:48",
      "description": "Dependent configs table:\r\n- Checkboxes should be located on the left side\r\n- Properties names hyperlinks are broken; remove the links and add the tooltip with property description on hover instead\r\n- Make modal wider\r\n- Move modal closer to the top\r\n\r\nConfig validations results table:\r\n- Limit the width and wrap the contents of 'Current Value' column\r\n- Make modal wider",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Fixes for modal with config validations and dependent properties"
   },
   {
      "_id": "13174876",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-07-26 14:51:22",
      "description": "See screenshot\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Make upgrade progress counter more readable"
   },
   {
      "_id": "13174809",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-07-26 11:42:27",
      "description": "In ambari-2.7.1.0-11\r\n# Navigating to All configurations page in installer, \r\n# selecting multiple services\r\n# Navigate to Directories section\r\n# Navigate back to All configs page.\r\n\r\nMultiple services are marked as active in All Configuration page leading to confusion\r\n !Screen Shot 2018-07-25 at 11.19.37 PM.png|thumbnail! ",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Back and forth on All Configurations Page has multiple tabs marked as active"
   },
   {
      "_id": "13174280",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-07-25 06:32:49",
      "description": "Logic and declaration used to determine if SSO is enabled for a service needs to be able to handle more than a boolean property.\r\n\r\nThe current way Ambari determines whether SSO is enabled for a service or not is by getting the value of the property indicated in\u00a0{{sso/enabledConfiguration}}\u00a0property in the service's metadata:\r\n{code:java|title=Example}\r\n      <sso>\r\n        <supported>true</supported>\r\n        <enabledConfiguration>service-properties/sso.knox.enabled</enabledConfiguration>\r\n      </sso>\r\n{code}\r\nUsing the above example, the\u00a0{{service-properties/sso.knox.enabled}}\u00a0is checked to see if its value is \"true\" or \"false\".\r\n\r\nThis method works for a few services, but other services require more elaborate checks. For example Oozie relies on the value of\u00a0{{oozie-site/oozie.authentication.type}}. If the value is \"org.apache.hadoop.security.authentication.server.JWTRedirectAuthenticationHandler\", then SSO is enabled; otherwise it is not. This is different that just a Boolean value.\r\n\r\n*Solution*\r\n\r\nTo support a more robust method to determine whether SSO is enabled or not, a new attribute should be added -\u00a0{{ssoEnabledTest}}. The existing attribute,\u00a0{{enabledConfiguration}}, should be available for backward compatibility - but converted on the backend.\r\n\r\nThe\u00a0{{ssoEnabledTest}}\u00a0attribute is to contain a JSON document that can be\u00a0_compiled_\u00a0into a\u00a0{{org.apache.commons.collections.Predicate}}\u00a0(ideally using\u00a0{{org.apache.ambari.server.collections.PredicateUtils#fromJSON}}). For example\r\n{code:java}\r\n      <sso>\r\n        <supported>true</supported>\r\n        <ssoEnabledTest>\r\n          {\r\n            \"equals\": [\r\n              \"service-properties/sso.knox.enabled\",\r\n              \"true\"\r\n            ]\r\n          }\r\n      </sso>\r\n{code}\r\n{code:java}\r\n      <sso>\r\n        <supported>true</supported>\r\n        <ssoEnabledTest>\r\n          {\r\n            \"equals\": [\r\n              \"oozie-site/oozie.authentication.type\",\r\n              \"org.apache.hadoop.security.authentication.server.JWTRedirectAuthenticationHandler\"\r\n            ]\r\n          }\r\n        </ssoEnabledTest>\r\n      </sso>{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Logic and declaration used to determine if SSO is enabled for a service needs to be able to handle more than a boolean property"
   },
   {
      "_id": "13174129",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-07-24 15:32:25",
      "description": "1\\. Ambari-server reschedules task (timeout #1)  \n2\\. Task did yet got rescheduled (due to something else being in queue)  \n3\\. but, ambari-server cancels it (timeout #2)  \n4\\. The tasks keeps reprorting that's it's in progess forever, however being\ncanceled\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Rescheduled and canceled tasks stay in progress forever"
   },
   {
      "_id": "13174103",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-07-24 13:27:12",
      "description": "See screenshot\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Host Details page: alignment issues"
   },
   {
      "_id": "13173827",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-07-23 14:40:55",
      "description": "See screenshots\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Background Operations: minor UX changes"
   },
   {
      "_id": "13173777",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-07-23 11:23:46",
      "description": "Update service metainfo to declare Kerberos is required for SSO integration support.\r\n\r\nThe metainfo file allow for a service to indicate that is supports SSO integration.\r\n{code:java|title=Example}\r\n      <sso>\r\n        <supported>true</supported>\r\n        <enabledConfiguration>service-site/knox.sso.enabled</enabledConfiguration>\r\n      </sso>\r\n{code}\r\nHowever, some services required that Kerberos is enabled to support SSO. This needs to be indicated in the metainfo so that Ambari knows how to behave properly.\r\n{code:java|title=Example}\r\n      <sso>\r\n        <supported>true</supported>\r\n        <enabledConfiguration>service-site/knox.sso.enabled</enabledConfiguration>\r\n        <kerberosRequired>true</kerberosRequired>\r\n      </sso>\r\n{code}\r\nAlong with this change, the following API request needs to be updated to supply the relevant data:\r\n{noformat:title=Get stack service details}\r\nGET /api/v1/stacks/:STACK_NAME/versions/:VERSION/services/:SERVICE_NAME\",\r\n{\r\n  \"href\" : \":URL\",\r\n  \"StackServices\" : {\r\n     ...\r\n     \"sso_integration_supported\": \"true\",\r\n     \"sso_integration_requires_kerberos\": \"true\",\r\n     ...\r\n  },\r\n  ...\r\n{noformat}\r\n{noformat:title=Get installed service information}\r\nGET /api/v1/clusters/:CLUSTER_NAME/services/:SERVICE_NAME\r\n{\r\n  \"href\" : \":URL\",\r\n  \"ServiceInfo\" : {\r\n    \"cluster_name\" : \":CLUSTER_NAME\",\r\n    ...\r\n    \"sso_integration_supported\": \"true\",\r\n    \"sso_integration_requires_kerberos\": \"true\",\r\n    \"sso_integration_enabled\": \"false\",\r\n    \"sso_integration_desired\": \"false\",\r\n     ...\r\n    },\r\n    ...\r\n{noformat}\r\n{noformat:title=List installed services that support SSO integration only when Kerberos to be enabled}\r\nGET /api/v1/clusters/:CLUSTER_NAME/services?ServiceInfo/sso_integration_supported=true&ServiceInfo/sso_integration_requires_kerberos=true\r\n{\r\n  \"href\" : \":URL\",\r\n  \"items\" : [\r\n      ...\r\n   ]\r\n}\r\n{noformat}\r\n{noformat:title=List stack services that support SSO integration only when Kerberos is enabed}\r\nGET /api/v1/stacks/:STACK_NAME/versions/:VERSION/services?StackServices/sso_integration_supported=true&StackServices/sso_integration_requires_kerberos=true\r\n{\r\n  \"href\" : \":URL\",\r\n  \"items\" : [\r\n      ...\r\n   ]\r\n}{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Update service metainfo to declare Kerberos is required for SSO integration support"
   },
   {
      "_id": "13173774",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-07-23 11:14:24",
      "description": "*STR*\r\n # Let's say the\u00a0user has CAPACITY-SCHEDULER view instance with\u00a0{{/main/view/CAPACITY-SCHEDULER/auto_cs_instance}}\u00a0short URL set\r\n # Clone this instance or create another CAPACITY-SCHEDULER instance manually\r\n # Set the same short URL as for the first instance\r\n\r\n*Result*\r\n - If 'Name' property is the same, request for adding new URL fails\r\nrequest:\r\n{noformat}\r\nPOST api/v1/view/urls/auto_cs_instance\r\n\r\n{\r\n    \"ViewUrlInfo\": {\r\n        \"url_name\": \"auto_cs_instance\",\r\n        \"url_suffix\": \"auto_cs_instance\",\r\n        \"view_instance_version\": \"1.0.0\",\r\n        \"view_instance_name\": \"AUTO_CS_INSTANCE_Copy\",\r\n        \"view_instance_common_name\": \"CAPACITY-SCHEDULER\"\r\n    }\r\n}\r\n{noformat}\r\nresponse:\r\n{noformat}\r\n{\r\n  \"status\" : 500,\r\n  \"message\" : \"An internal system exception occurred: This view URL name exists, URL names should be unique\"\r\n}\r\n{noformat}\r\n\r\n - If\u00a0name is different, the REST call succeeds even if URL itself is duplicate:\r\n{noformat}\r\nPOST api/v1/view/urls/auto_cs_instance1\r\n\r\n{\r\n    \"ViewUrlInfo\": {\r\n        \"url_name\": \"auto_cs_instance1\",\r\n        \"url_suffix\": \"auto_cs_instance\",\r\n        \"view_instance_version\": \"1.0.0\",\r\n        \"view_instance_name\": \"AUTO_CS_INSTANCE_Copy\",\r\n        \"view_instance_common_name\": \"CAPACITY-SCHEDULER\"\r\n    }\r\n}\r\n{noformat}\r\nresponse is 201 in this case; URL is created\r\n\r\n - As result there are two view instances with the same URL, and the first one is no longer accessible by this URL\r\n\u00a0",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "User is able to set the same short URLs for different view instances"
   },
   {
      "_id": "13173437",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-07-20 12:02:03",
      "description": "\n    Traceback (most recent call last):\r\n      File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/ZOOKEEPER/package/scripts/zookeeper_client.py\", line 81, in <module>\r\n        ZookeeperClient().execute()\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 353, in execute\r\n        method(env)\r\n      File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/ZOOKEEPER/package/scripts/zookeeper_client.py\", line 61, in install\r\n        self.install_packages(env)\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 836, in install_packages\r\n        retry_count=agent_stack_retry_count)\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/base.py\", line 166, in __init__\r\n        self.env.run()\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/environment.py\", line 160, in run\r\n        self.run_action(resource, action)\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/environment.py\", line 124, in run_action\r\n        provider_action()\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/providers/packaging.py\", line 30, in action_install\r\n        self._pkg_manager.install_package(package_name, self.__create_context())\r\n      File \"/usr/lib/ambari-agent/lib/ambari_commons/repo_manager/yum_manager.py\", line 219, in install_package\r\n        shell.repository_manager_executor(cmd, self.properties, context)\r\n      File \"/usr/lib/ambari-agent/lib/ambari_commons/shell.py\", line 742, in repository_manager_executor\r\n        call_result = subprocess_executor(cmd, timeout=-1, env=env)\r\n      File \"/usr/lib/ambari-agent/lib/ambari_commons/shell.py\", line 446, in subprocess_executor\r\n        lines = [line for line in output]\r\n      File \"/usr/lib64/python2.7/contextlib.py\", line 24, in __exit__\r\n        self.gen.next()\r\n      File \"/usr/lib/ambari-agent/lib/ambari_commons/shell.py\", line 528, in process_executor\r\n        kill_timer.join()\r\n      File \"/usr/lib64/python2.7/threading.py\", line 940, in join\r\n        raise RuntimeError(\"cannot join thread before it is started\")\r\n    RuntimeError: cannot join thread before it is started\r\n    \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "install tasks sometimes fail"
   },
   {
      "_id": "13173412",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-07-20 09:30:49",
      "description": "The title should have a white background on Stack and Versions -> Stack page and Service Accounts page.\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Fix background colors on pages"
   },
   {
      "_id": "13173398",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-07-20 08:28:40",
      "description": "*STR*\r\n* Enable Kerberos and check the DB after the 'Test Kerberos' step, or\r\n* Regenerate keytabs on a secure cluster with the option 'Only regenerate keytabs for missing hosts and components' enabled (this is important, otherwise the issue is not reproducible)\r\n\r\n*Result:*\r\n\r\n{noformat}\r\nSELECT hrc.task_id, hrc.request_id, hrc.host_id, hrc.stage_id, st.request_context, hrc.status, hrc.role, hrc.role_command, hrc.custom_command_name FROM host_role_command hrc, stage st WHERE hrc.stage_id = st.stage_id AND hrc.request_id = st.request_id AND hrc.custom_command_name = 'SET_KEYTAB' ORDER BY request_id, host_id, stage_id;{noformat}\r\n\r\n||task_id||request_id||host_id||stage_id||request_context||status||role||role_command||custom_command_name||\r\n|63|17|1|1|Checking keytabs|COMPLETED|KERBEROS_CLIENT|CUSTOM_COMMAND|SET_KEYTAB|\r\n|68|17|1|4|Distribute Keytabs|COMPLETED|KERBEROS_CLIENT|CUSTOM_COMMAND|SET_KEYTAB|\r\n|64|17|2|1|Checking keytabs|COMPLETED|KERBEROS_CLIENT|CUSTOM_COMMAND|SET_KEYTAB|\r\n|69|17|2|4|Distribute Keytabs|COMPLETED|KERBEROS_CLIENT|CUSTOM_COMMAND|SET_KEYTAB|\r\n|65|17|3|1|Checking keytabs|COMPLETED|KERBEROS_CLIENT|CUSTOM_COMMAND|SET_KEYTAB|\r\n|70|17|3|4|Distribute Keytabs|COMPLETED|KERBEROS_CLIENT|CUSTOM_COMMAND|SET_KEYTAB|\r\n|83|19|1|1|Checking keytabs|COMPLETED|KERBEROS_CLIENT|CUSTOM_COMMAND|SET_KEYTAB|\r\n|88|19|1|4|Distribute Keytabs|COMPLETED|KERBEROS_CLIENT|CUSTOM_COMMAND|SET_KEYTAB|\r\n|84|19|2|1|Checking keytabs|COMPLETED|KERBEROS_CLIENT|CUSTOM_COMMAND|SET_KEYTAB|\r\n|89|19|2|4|Distribute Keytabs|COMPLETED|KERBEROS_CLIENT|CUSTOM_COMMAND|SET_KEYTAB|\r\n|85|19|3|1|Checking keytabs|COMPLETED|KERBEROS_CLIENT|CUSTOM_COMMAND|SET_KEYTAB|\r\n|90|19|3|4|Distribute Keytabs|COMPLETED|KERBEROS_CLIENT|CUSTOM_COMMAND|SET_KEYTAB|\r\n\r\n*Expected result:*\r\nonly one SET_KEYTAB command should be recorded",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "SET_KEYTABS is preformed twice per host during Kerberos operations"
   },
   {
      "_id": "13173394",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-07-20 08:22:07",
      "description": "*STR*\r\n # Install Ambari 2.7.0\r\n # Deploy a cluster with some services\r\n # Execute\u00a0to HDFS / Actions / Regenerate Keytabs\r\n # Restart all required components\r\n\r\n*Result*\r\n\r\nMultiple alerts have been shown saying they receive 403 when trying to connect to different web UIs\r\n\r\n*Expected result*\r\n\r\nNo alerts; everything should work as expected",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Multiple alerts after HDFS service only regenerate keytabs, as keytabs are out of sync"
   },
   {
      "_id": "13173220",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-07-19 15:28:19",
      "description": "STR:\r\n\r\n#  Go to Hive/Configs\r\n#  Enable Interactive Query, select the host, Save\r\n#  6 Warnings are coming up, though the REST API call returned only 2, the other 4 are produced by Ambari Web\r\n#  Click on cancel, discard the changes.\r\n#  Go to the Summary, tab, then back to the Configs tab, and do steps #1-#3 again\r\n#  This time only the two warnings are displayed, Ambari Web doesn't generates those extra 4 (desired outcome)\r\n#  Log out and log in again, and the same starts again, for the first modification you'll receive 4 extra warnings.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Inconsistent Ambari warnings"
   },
   {
      "_id": "13173204",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-07-19 14:15:49",
      "description": "- Please see screenshots attached\r\n- After a config group is created, message 'You are changing not default config group,' is towards the right side with no formatting\r\n- Switch to Misc tab, dfs.permissions.superusergroup has a longer textbox\r\n- Undo icon in Misc tab is below the textbox for some elements where as it is to the right for others \r\n- closing bracket for Services should be shrinked if there are less number of services\r\n\r\nScreenshot attached for all 4",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "UI Elements in Incorrect layout at Customize Services Page"
   },
   {
      "_id": "13173194",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-07-19 13:49:49",
      "description": "Here is the STR:\r\n- install isilon mpack\r\n- go through the cluster creation wizard and select onefs service\r\n- on the configuration page check that there are onefs related properties (for example smart connect zone name)\r\n- either hit f5 or go to the next page then go back\r\n- on the configuration page there will be no onefs related properties any more\r\n- if you continue the deployment this way it will fail at the end\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Service disappear from the UI when Going back to \"Customize Services\" page or doing page refresh"
   },
   {
      "_id": "13173189",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-07-19 13:33:27",
      "description": "See screenshot\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Host and Alerts page style fixes"
   },
   {
      "_id": "13173183",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-07-19 12:51:39",
      "description": "UI sends \"java_home_check\" host check with all populated hosts instead hosts with passed registration only. This can cause 500 server exception due HostNotFoundException.\r\n{code}\r\n2018-07-05 14:10:30,930 ERROR [ambari-client-thread-573] AbstractResourceProvider:295 - Caught AmbariException when creating a resource\r\norg.apache.ambari.server.HostNotFoundException: Host not found, hostname=test-0000\r\n        at org.apache.ambari.server.state.cluster.ClustersImpl.getHost(ClustersImpl.java:456)\r\n        at org.apache.ambari.server.state.ConfigHelper.getEffectiveDesiredTags(ConfigHelper.java:189)\r\n        at org.apache.ambari.server.state.ConfigHelper.getEffectiveDesiredTags(ConfigHelper.java:173)\r\n        at org.apache.ambari.server.controller.AmbariManagementControllerImpl.findConfigurationTagsWithOverrides(AmbariManagementControllerImpl.java:2353)\r\n{code}\r\n{code}\r\nPOST http://host:8080/api/v1/requests 500 (Internal Server Error)\r\nsend @ vendor.js:8630\r\njQuery.extend.ajax @ vendor.js:8082\r\nsend @ app.js:192735\r\ndoCheckJDK @ app.js:41241\r\n(anonymous function) @ app.js:41318\r\nfire @ vendor.js:1141\r\nself.fireWith @ vendor.js:1252\r\ndone @ vendor.js:8178\r\ncallback @ vendor.js:8702\r\n{code}\r\nBody of request:\r\n{code}\r\n{\"RequestInfo\":{\"context\":\"Check hosts\",\"action\":\"check_host\",\"parameters\":{\"threshold\":\"60\",\"java_home\":\"/tmp/jdk1.8.0_171/\",\"jdk_location\":\"http://host:8080/resources\",\"check_execute_list\":\"java_home_check\"}},\"Requests/resource_filters\":[{\"hosts\":\"test-0000,test-0001,test-0002,...\r\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "UI sends host check request for custom jdk with invalid hosts"
   },
   {
      "_id": "13173170",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-07-19 12:00:07",
      "description": "Filtering configs by changed properties should be available in versions comparison mode only, but as of now it's displayed always, not filtering out anything in regular mode.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "'Changed properties' filter for configs is displayed even in non-compare mode"
   },
   {
      "_id": "13172365",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-07-16 10:51:45",
      "description": "ambari-server with 16 core CPU, 32GB RAM, fake agents on 2 hosts (16GB RAM, 2 core CPU) - 50 agents on each host, Mysql db on last host\r\n # Deploy a PERF cluster with 100 fake agents\r\n # Initiate Stop All components\r\n # Initiate Start All components\r\n\r\nObservations:\r\n # As part of initial deploy and start services, the Start All Services call took about 6 minutes.\r\n # The first call to Stop All Services took about 23 minutes.\r\n # The subsequent call to Start All services timed out after 1 hour 1 minute.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Start All Services on 100-nodes cluster timed out after 1 hour"
   },
   {
      "_id": "13172063",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-07-13 15:19:20",
      "description": "Remove {{org.apache.directory.api:api-ldap-model}} from Ambari server's dependencies due to security concerns regarding the following CVE:\r\n\r\n* CVE-2018-1337: Plaintext Password Disclosure in Secured Channel\r\n\r\nSee https://cve.mitre.org/cgi-bin/cvename.cgi?name=2018-1337\r\n\r\nThough Ambari server includes {{api-ldap-model-1.0.0.jar}} in {{/usr/lib/ambari-server}}, the library is not used.  Therefore, the vulnerability is not exposed and the library may be excluded from Ambari's package. \r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "cleanup",
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Remove org.apache.directory.api:api-ldap-model from Ambari server's dependencies due to security concerns"
   },
   {
      "_id": "13171941",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-07-13 08:35:24",
      "description": "The following popup prevents enabling HSI:\r\n\r\nHDFS service should be added to the cluster to enable interactive query (requires yarn pre-emption)\r\n\r\nThe check is located in assign_master_controller.js/showPopup.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Enabling Hive Server Interactive doesn't work with ONEFS"
   },
   {
      "_id": "13171459",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323902",
            "id": "12323902",
            "name": "ambari-admin",
            "description": "Ambari Admin"
         }
      ],
      "created": "2018-07-11 16:29:52",
      "description": "As of now UTs are failing:\r\n{noformat}\r\n#Editablelist directive Editing Updates permissions after save FAILED\r\n\r\n#Editablelist directive Editing Show dialog window if user trying to leave page without save FAILED\r\n\r\n#Editablelist directive Editing Saves current user in editing window if user click \"save\" FAILED\r\n\r\nExecuted 61 of 61 (3 FAILED) (0.387 secs / 0.378 secs)\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Fix ambari-admin UI unit tests"
   },
   {
      "_id": "13171123",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-07-10 12:04:47",
      "description": "The before-ANY/shared_initialization.py only regenerates hadop_env if there is a namenode or dfs_type is set to HCFS\r\n\r\n{code}\r\n  def hook(self, env):\r\n    import params\r\n    env.set_params(params)\r\n\r\n    setup_users()\r\n    if params.has_namenode or params.dfs_type == 'HCFS':\r\n      setup_hadoop_env()\r\n    setup_java()\r\n{code}\r\n\r\nThis is no longer true because in the latest ambari-server we set dfs_type as follows:\r\n\r\n{code}\r\n    Map<String, ServiceInfo> serviceInfos = ambariMetaInfo.getServices(stackId.getStackName(), stackId.getStackVersion());\r\n    for (ServiceInfo serviceInfoInstance : serviceInfos.values()) {\r\n      if (serviceInfoInstance.getServiceType() != null) {\r\n        LOG.debug(\"Adding {} to command parameters for {}\", serviceInfoInstance.getServiceType(),\r\n            serviceInfoInstance.getName());\r\n\r\n        clusterLevelParams.put(DFS_TYPE, serviceInfoInstance.getServiceType());\r\n        break;\r\n      }\r\n    }\r\n{code}\r\n\r\nThis iterates over all of the stack service which will find HDFS first, so that the dfs_type will be HDFS instead of HCFS.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "hadoop-env is not regenerated when OneFS is used as a FileSystem"
   },
   {
      "_id": "13171090",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-07-10 08:29:40",
      "description": "Following error comes when running a OneFS service check.\r\n\r\n{code}\r\nresource_management.core.exceptions.Fail: Resource parameter 'dfs_type' is not set.\r\n\r\n\r\nstderr:\r\nTraceback (most recent call last):\r\n  File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/ONEFS/package/scripts/service_check.py\", line 59, in <module>\r\n    HdfsServiceCheck().execute()\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 353, in execute\r\n    method(env)\r\n  File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/ONEFS/package/scripts/service_check.py\", line 43, in service_check\r\n    mode=0777\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/base.py\", line 166, in __init__\r\n    self.env.run()\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/environment.py\", line 160, in run\r\n    self.run_action(resource, action)\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/environment.py\", line 119, in run_action\r\n    provider = provider_class(resource)\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 594, in __init__\r\n    self.assert_parameter_is_set('dfs_type')\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 673, in assert_parameter_is_set\r\n    raise Fail(\"Resource parameter '{0}' is not set.\".format(parameter_name))\r\nresource_management.core.exceptions.Fail: Resource parameter 'dfs_type' is not set.\r\nstdout:\r\n2018-07-09 17:29:05,706 - Using hadoop conf dir: /usr/hdp/3.0.0.0-1485/hadoop/conf\r\n2018-07-09 17:29:05,715 - Using hadoop conf dir: /usr/hdp/3.0.0.0-1485/hadoop/conf\r\n2018-07-09 17:29:05,717 - checked_call['hostid'] {}\r\n2018-07-09 17:29:05,721 - checked_call returned (0, 'f20a5572')\r\n2018-07-09 17:29:05,722 - HdfsResource['/tmp'] {'security_enabled': False, 'hadoop_bin_dir': '/usr/hdp/3.0.0.0-1485/hadoop/bin', 'keytab': [EMPTY], 'dfs_type': '', 'default_fs': 'hdfs://ah-onefs-hdp3.west.isilon.com:8020', 'hdfs_resource_ignore_file': '/var/lib/ambari-agent/data/.hdfs_resource_ignore', 'hdfs_site': ..., 'kinit_path_local': 'kinit', 'principal_name': None, 'user': 'hdfs', 'action': ['create_on_execute'], 'hadoop_conf_dir': '/usr/hdp/3.0.0.0-1485/hadoop/conf', 'type': 'directory', 'immutable_paths': [u'/apps/hive/warehouse', u'/mr-history/done', u'/app-logs', u'/tmp'], 'mode': 0777}\r\n\r\nCommand failed after 1 tries\r\n{code}\r\n\r\n\r\nIn params_linux.py, dfs_type should come from clusterLevelParams instead of commandParams.\r\n \r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "OneFS service check fails with 'dfs_type' is not set."
   },
   {
      "_id": "13170872",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-07-09 14:28:13",
      "description": "STR: (see attached video)\r\n\r\n1. try to do some property modifications, and save it\r\n2. when some warnings appear, click cancel\r\n3. filter for a variable that is not on the Advanced tab\r\n4. everything is disabled on all tabs, even after discarding the modifications",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "All input fields are disabled after validation - cancel - filter for something on advanced tab"
   },
   {
      "_id": "13170827",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-07-09 10:52:42",
      "description": "Even when Namenodes, Datanodes/ entire services are down, there are no alerts in the Ambari UI.\r\n\r\nMost of the summary information in HDFS, YARN show as n/a. There are no errors in the JS console too.\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Ambari Alerts are not triggered"
   },
   {
      "_id": "13170730",
      "assignee": "rlevas",
      "components": [],
      "created": "2018-07-08 16:04:18",
      "description": "Suppress log messages from the credential_store_helper since they are not necessary.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Suppress log messages from the credential_store_helper"
   },
   {
      "_id": "13170706",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-07-08 13:23:50",
      "description": "*STR*\r\n # Deploy HDP-2.6.5 cluster with Ambari-2.6.2 (Atlas is installed on the cluster)\r\n # Upgrade Ambari server to 2.7\r\n # Upgrade AMS, Smartsense\r\n # Register HDP-3.0 version and install the packages\r\n # Try to start Express Upgrade. One of the\u00a0pre-check\u00a0fails: \"The property atlas.migration.data.filename is not found in application-properties, need to add the property before upgrade.\"\r\n # Add the atlas property and save the config\r\n # Now Atlas and Hive are marked as stale config services and need restart\r\n # Restart Hive, it fails with\u00a0compatibility error\r\n # Try to start Upgrade - if fails with below error:\r\n\r\nReason: The following Service Components should be in a started state.\u2002\u2002Please invoke a service Stop and full Start and try again. HIVE: HIVE_SERVER (in INSTALLED on host dk-upgradetest-2.openstacklocal), HIVE: HIVE_METASTORE (in INSTALLED on host dk-upgradetest-2.openstacklocal)\r\nFailed on: HIVE\r\n\r\nAs a result, Upgrade cannot be started",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Restart services just before stack upgrade fails due to AMS package incompatibility errors, causing EU not to be started"
   },
   {
      "_id": "13170579",
      "assignee": "ababiichuk",
      "components": [],
      "created": "2018-07-06 20:46:34",
      "description": "If\u00a0HBase Decommission/Recommission operation\u00a0fails with non zero exit code, that component still\u00a0gets decommissioned/recommissioned. We need to handle this failure and not transition the state to Decommissioned/Recommissioned when the respective operation fails",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari shows success when HBase Decommission/Recommission operations fail"
   },
   {
      "_id": "13170571",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-07-06 20:30:15",
      "description": "Setup secure ldap went through fine but later on sync-ldap with users and groups has failed with below error\r\n{code:java}\r\n[root@ctr-e138-1518143905142-391100-01-000006 ~]# ambari-server sync-ldap --users /tmp/users.txt --groups /tmp/groups.txt\r\nUsing python  /usr/bin/python\r\nSyncing with LDAP...\r\nEnter Ambari Admin login: admin\r\nEnter Ambari Admin password: \r\n\r\nFetching LDAP configuration from DB.\r\nSyncing specified users and groups..ERROR: Exiting with exit code 1. \r\nREASON: Caught exception running LDAP sync. ad-nano.qe.hortonworks.com:636; nested exception is javax.naming.CommunicationException: ad-nano.qe.hortonworks.com:636 [Root exception is java.net.SocketException: java.security.NoSuchAlgorithmException: Error constructing implementation (algorithm: Default, provider: SunJSSE, class: sun.security.ssl.SSLContextImpl$DefaultSSLContext)]\r\n[root@ctr-e138-1518143905142-391100-01-000006 ~]# cat /tmp/users.txt {code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "ambari-server sync-ldap with users and groups fails with NoSuchAlgorithmException"
   },
   {
      "_id": "13170502",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-07-06 14:41:10",
      "description": "\n    ERROR 2018-06-27 11:29:49,955 CustomServiceOrchestrator.py:448 - Caught an exception while executing custom service command: <type 'exceptions.KeyError'>: u'/var/lib/ambari-agent/cache/stack-hooks'; u'/var/lib/ambari-agent/cache/stack-hooks'\r\n    Traceback (most recent call last):\r\n      File \"/usr/lib/ambari-agent/lib/ambari_agent/CustomServiceOrchestrator.py\", line 351, in runCommand\r\n        hook_dir = self.file_cache.get_hook_base_dir(command, server_url_prefix)\r\n      File \"/usr/lib/ambari-agent/lib/ambari_agent/FileCache.py\", line 100, in get_hook_base_dir\r\n        server_url_prefix)\r\n      File \"/usr/lib/ambari-agent/lib/ambari_agent/FileCache.py\", line 163, in provide_directory\r\n        wait_for_another_execution_event = self.currently_providing[full_path]\r\n    KeyError: u'/var/lib/ambari-agent/cache/stack-hooks'\r\n    \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Tasks fail from time to time due error in file download"
   },
   {
      "_id": "13170460",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-07-06 10:26:30",
      "description": "When trying to register a VDF for HDP-3.0.0 and click on \"Use Local Repository\" the \"Save\" button is inactive and you can't register the version.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Can't register HDP 3.0.0.0 version and \"Use Local Repository\""
   },
   {
      "_id": "13170294",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         }
      ],
      "created": "2018-07-05 15:15:32",
      "description": "Ambari UI stuck at Manual Steps Required: Create Checkpoint on NameNode page while Enabling HA after performing the manual steps.\r\n\r\n{code}\r\n[root@ctr-e138-1518143905142-378399-01-000004 ~]# sudo su cstm-hdfs -l -c 'hdfs dfsadmin -safemode enter'\r\n######## Hortonworks #############\r\nThis is MOTD message, added for testing in qe infra\r\nSafe mode is ON\r\n[root@ctr-e138-1518143905142-378399-01-000004 ~]# sudo su cstm-hdfs -l -c 'hdfs dfsadmin -saveNamespace'\r\n######## Hortonworks #############\r\nThis is MOTD message, added for testing in qe infra\r\nSave namespace successful\r\n{code}\r\n\r\n\r\nThe stat result of file /etc/security/keytabs/ambari.server.keytab, looks like the final change in the file occured at 2018-07-04 05:53:52.\r\n\r\n{code:java}\r\n[root@ctr-e138-1518143905142-395357-01-000002 ~]# stat /etc/security/keytabs/ambari.server.keytab\r\n  File: \u2018/etc/security/keytabs/ambari.server.keytab\u2019\r\n  Size: 333       \tBlocks: 8          IO Block: 4096   regular file\r\nDevice: fd12h/64786d\tInode: 16390172    Links: 1\r\nAccess: (0400/-r--------)  Uid: ( 1803/agentslava)   Gid: ( 1803/agentslava)\r\nAccess: 2018-07-04 03:01:39.282093801 +0000\r\nModify: 2018-07-04 03:01:39.282093801 +0000\r\nChange: 2018-07-04 05:53:52.333709142 +0000\r\n Birth: -\r\n{code}\r\n\r\nFrom the ambari server logs at the same time stamp:\r\n\r\n{code:java}\r\n2018-07-04 05:53:52,054  INFO [Server Action Executor Worker 586] KerberosServerAction:411 - Processing identities...\r\n2018-07-04 05:53:52,322  INFO [Server Action Executor Worker 586] FinalizeKerberosServerAction:111 - Updated the owner of the keytab file at /etc/security/keytabs/ambari.server.keytab to null\r\n2018-07-04 05:53:52,323  INFO [Server Action Executor Worker 586] FinalizeKerberosServerAction:125 - Updated the group of the keytab file at /etc/security/keytabs/ambari.server.keytab to null\r\n2018-07-04 05:53:52,337  INFO [Server Action Executor Worker 586] FinalizeKerberosServerAction:142 - Updated the access mode of the keytab file at /etc/security/keytabs/ambari.server.keytab to owner:'r' and group:'null'\r\n2018-07-04 05:53:52,352  INFO [Server Action Executor Worker 586] FinalizeKerberosServerAction:111 - Updated the owner of the keytab file at /etc/security/keytabs/ams-monitor.keytab to cstm-ams\r\n2018-07-04 05:53:52,371  INFO [Server Action Executor Worker 586] FinalizeKerberosServerAction:125 - Updated the group of the keytab file at /etc/security/keytabs/ams-monitor.keytab to hadoop\r\n2018-07-04 05:53:52,387  INFO [Server Action Executor Worker 586] FinalizeKerberosServerAction:142 - Updated the access mode of the keytab file at /etc/security/keytabs/ams-monitor.keytab to owner:'r' and group:''\r\n{code}\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Create Checkpoint page stuck while Enabling HA on Namenode"
   },
   {
      "_id": "13170247",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-07-05 11:35:08",
      "description": "\n    Traceback (most recent call last):\r\n      File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/KAFKA/package/scripts/kafka_broker.py\", line 145, in <module>\r\n        KafkaBroker().execute()\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 353, in execute\r\n        method(env)\r\n      File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/KAFKA/package/scripts/kafka_broker.py\", line 99, in stop\r\n        ensure_base_directories()\r\n      File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/KAFKA/package/scripts/kafka.py\", line 266, in ensure_base_directories\r\n        recursive_ownership = True,\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/base.py\", line 125, in __new__\r\n        cls(names_list.pop(0), env, provider, **kwargs)\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/base.py\", line 166, in __init__\r\n        self.env.run()\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/environment.py\", line 160, in run\r\n        self.run_action(resource, action)\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/environment.py\", line 124, in run_action\r\n        provider_action()\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py\", line 199, in action_create\r\n        recursion_follow_links=self.resource.recursion_follow_links, safemode_folders=self.resource.safemode_folders)\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py\", line 73, in _ensure_metadata\r\n        sudo.chown_recursive(path, _user_entity, _group_entity, recursion_follow_links)\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/sudo.py\", line 55, in chown_recursive\r\n        os.lchown(os.path.join(root, name), uid, gid)\r\n    OSError: [Errno 2] No such file or directory: '/grid/0/log/kafka/controller.log'\r\n    \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Kafka failed to stop"
   },
   {
      "_id": "13170160",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-07-05 04:24:15",
      "description": "{noformat}\r\n[INFO] --- findbugs-maven-plugin:3.0.3:check (default) @ ambari-server ---\r\n...\r\n[INFO] Total bugs: 1700\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
         "name": "Minor",
         "id": "4"
      },
      "projectname": "AMBARI",
      "summary": "Fix FindBugs warnings"
   },
   {
      "_id": "13170049",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-07-04 11:08:32",
      "description": "data-qa attribute present not for all properties\r\n\r\nExample with the attribute:\r\n{code}\r\n<input id=\"ember38283\" class=\"ember-view ember-text-field form-control col-md-9 long-input\" data-qa=\"manage.include.files\" type=\"text\" value=\"false\" data-original-title=\"\" title=\"\">\r\n{code}\r\n\r\nExample without attribute:\r\n{code}\r\n<input id=\"ember39059\" class=\"ember-view ember-text-field form-control\" placeholder=\"Type password\" type=\"password\" value=\"\">\r\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "data-qa attribute present not for all properties"
   },
   {
      "_id": "13170029",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-07-04 09:28:23",
      "description": "See screenshot\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Host details page: remove duplicate title"
   },
   {
      "_id": "13170025",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-07-04 09:22:00",
      "description": "Steps to reproduce:\r\n\r\n* Go to Admin View\r\n* Click Dashboard link\r\n\r\nActual result:\r\nAmbari web firstly show login page and then redirects to the Dashboard page.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Admin View: Dashboard link leads to login page"
   },
   {
      "_id": "13169577",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-07-02 17:47:20",
      "description": "Hi ,\r\n     I was trying to install/add service the Spectrum Scale service to Ambari UI on IBM Power machine , in order to achieve that I followed below steps :\r\n\r\n1. Stop all services \r\n2. Run Spectrum Scale installer from command line at Ambari host\r\n2.At Ambari UI:  Click on Services --> Add Service\r\n3. Selected the service \"Spectrum Scale\", then clicked on \"NEXT\" button\r\n4. At next page , there will be drop down box for selecting the host for \"GPFS Master\" role, \r\n\r\nThe issue comes at step 4 after selecting host for \"GPFS Master\" , \"NEXT\" button is not enabled and doesn't gets enabled even after variating the options too from drop down box.\r\n\r\nRelevant screen shots are attached along with this bug.\r\n\r\n\r\nDetails for version are as below :\r\n\r\nAmbari - 2.7.0.0-765",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Ambari UI \"NEXT\" button is disabled for add service step of Spectrum Scale"
   },
   {
      "_id": "13169572",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-07-02 17:19:26",
      "description": "I recently noticed on a cluster that there were alerts being received and discarded for JournalNode on a cluster which had no JournalNodes installed. I did a quick grep of my own logs, and found a massive amount of alerts that are running for components which are:\r\n\r\n* Not installed on those hosts\r\n* Not installed anywhere in the cluster\r\n\r\n{code}\r\n2018-06-26 19:03:31,054  WARN [alert-event-bus-2] AlertReceivedListener:576 - Unable to process alert namenode_rpc_latency for an invalid service HDFS and component NAMENODE on host c7402.ambari.apache.org\r\n2018-06-26 19:03:31,054  WARN [alert-event-bus-2] AlertReceivedListener:576 - Unable to process alert journalnode_process for an invalid service HDFS and component JOURNALNODE on host c7402.ambari.apache.org\r\n2018-06-26 19:03:31,997  WARN [alert-event-bus-1] AlertReceivedListener:576 - Unable to process alert journalnode_process for an invalid service HDFS and component JOURNALNODE on host c7401.ambari.apache.org\r\n2018-06-26 19:04:25,730  WARN [alert-event-bus-2] AlertReceivedListener:576 - Unable to process alert yarn_resourcemanager_webui for an invalid service YARN and component RESOURCEMANAGER on host c7403.ambari.apache.org\r\n2018-06-26 19:04:27,011  WARN [alert-event-bus-2] AlertReceivedListener:576 - Unable to process alert journalnode_process for an invalid service HDFS and component JOURNALNODE on host c7401.ambari.apache.org\r\n2018-06-26 19:04:30,731  WARN [alert-event-bus-1] AlertReceivedListener:576 - Unable to process alert nodemanager_health_summary for an invalid service YARN and component RESOURCEMANAGER on host c7403.ambari.apache.org\r\n2018-06-26 19:04:31,069  WARN [alert-event-bus-1] AlertReceivedListener:576 - Unable to process alert journalnode_process for an invalid service HDFS and component JOURNALNODE on host c7402.ambari.apache.org\r\n2018-06-26 19:05:30,765  WARN [alert-event-bus-1] AlertReceivedListener:576 - Unable to process alert yarn_resourcemanager_webui for an invalid service YARN and component RESOURCEMANAGER on host c7403.ambari.apache.org\r\n2018-06-26 19:05:30,767  WARN [alert-event-bus-1] AlertReceivedListener:576 - Unable to process alert nodemanager_health_summary for an invalid service YARN and component RESOURCEMANAGER on host c7403.ambari.apache.org\r\n2018-06-26 19:05:31,090  WARN [alert-event-bus-2] AlertReceivedListener:576 - Unable to process alert namenode_rpc_latency for an invalid service HDFS and component NAMENODE on host c7402.ambari.apache.org\r\n2018-06-26 19:05:31,091  WARN [alert-event-bus-2] AlertReceivedListener:576 - Unable to process alert journalnode_process for an invalid service HDFS and component JOURNALNODE on host c7402.ambari.apache.org\r\n2018-06-26 19:05:32,036  WARN [alert-event-bus-1] AlertReceivedListener:576 - Unable to process alert journalnode_process for an invalid service HDFS and component JOURNALNODE on host c7401.ambari.apache.org\r\n2018-06-26 19:06:25,775  WARN [alert-event-bus-2] AlertReceivedListener:576 - Unable to process alert yarn_resourcemanager_webui for an invalid service YARN and component RESOURCEMANAGER on host c7403.ambari.apache.org\r\n2018-06-26 19:06:27,047  WARN [alert-event-bus-2] AlertReceivedListener:576 - Unable to process alert journalnode_process for an invalid service HDFS and component JOURNALNODE on host c7401.ambari.apache.org\r\n2018-06-26 19:06:30,779  WARN [alert-event-bus-1] AlertReceivedListener:576 - Unable to process alert nodemanager_health_summary for an invalid service YARN and component RESOURCEMANAGER on host c7403.ambari.apache.org\r\n2018-06-26 19:06:31,104  WARN [alert-event-bus-2] AlertReceivedListener:576 - Unable to process alert journalnode_process for an invalid service HDFS and component JOURNALNODE on host c7402.ambari.apache.org\r\n2018-06-26 19:07:30,815  WARN [alert-event-bus-1] AlertReceivedListener:576 - Unable to process alert yarn_resourcemanager_webui for an invalid service YARN and component RESOURCEMANAGER on host c7403.ambari.apache.org\r\n2018-06-26 19:07:30,816  WARN [alert-event-bus-1] AlertReceivedListener:576 - Unable to process alert yarn_resourcemanager_rpc_latency for an invalid service YARN and component RESOURCEMANAGER on host c7403.ambari.apache.org\r\n2018-06-26 19:07:30,821  WARN [alert-event-bus-1] AlertReceivedListener:576 - Unable to process alert nodemanager_health_summary for an invalid service YARN and component RESOURCEMANAGER on host c7403.ambari.apache.org\r\n2018-06-26 19:07:30,821  WARN [alert-event-bus-1] AlertReceivedListener:576 - Unable to process alert yarn_resourcemanager_cpu for an invalid service YARN and component RESOURCEMANAGER on host c7403.ambari.apache.org\r\n2018-06-26 19:07:31,136  WARN [alert-event-bus-2] AlertReceivedListener:576 - Unable to process alert namenode_rpc_latency for an invalid service HDFS and component NAMENODE on host c7402.ambari.apache.org\r\n2018-06-26 19:07:31,136  WARN [alert-event-bus-2] AlertReceivedListener:576 - Unable to process alert journalnode_process for an invalid service HDFS and component JOURNALNODE on host c7402.ambari.apache.org\r\n2018-06-26 19:07:32,064  WARN [alert-event-bus-1] AlertReceivedListener:576 - Unable to process alert journalnode_process for an invalid service HDFS and component JOURNALNODE on host c7401.ambari.apache.org\r\n2018-06-26 19:08:25,835  WARN [alert-event-bus-2] AlertReceivedListener:576 - Unable to process alert yarn_resourcemanager_webui for an invalid service YARN and component RESOURCEMANAGER on host c7403.ambari.apache.org\r\n2018-06-26 19:08:27,092  WARN [alert-event-bus-2] AlertReceivedListener:576 - Unable to process alert journalnode_process for an invalid service HDFS and component JOURNALNODE on host c7401.ambari.apache.org\r\n2018-06-26 19:08:30,835  WARN [alert-event-bus-1] AlertReceivedListener:576 - Unable to process alert nodemanager_health_summary for an invalid service YARN and component RESOURCEMANAGER on host c7403.ambari.apache.org\r\n2018-06-26 19:08:31,150  WARN [alert-event-bus-1] AlertReceivedListener:576 - Unable to process alert journalnode_process for an invalid service HDFS and component JOURNALNODE on host c7402.ambari.apache.org\r\n2018-06-26 19:09:25,862  WARN [alert-event-bus-1] AlertReceivedListener:576 - Unable to process alert yarn_resourcemanager_webui for an invalid service YARN and component RESOURCEMANAGER on host c7403.ambari.apache.org\r\n2018-06-26 19:09:25,863  WARN [alert-event-bus-1] AlertReceivedListener:576 - Unable to process alert nodemanager_health_summary for an invalid service YARN and component RESOURCEMANAGER on host c7403.ambari.apache.org\r\n2018-06-26 19:09:31,174  WARN [alert-event-bus-1] AlertReceivedListener:576 - Unable to process alert namenode_rpc_latency for an invalid service HDFS and component NAMENODE on host c7402.ambari.apache.org\r\n2018-06-26 19:09:31,174  WARN [alert-event-bus-1] AlertReceivedListener:576 - Unable to process alert journalnode_process for an invalid service HDFS and component JOURNALNODE on host c7402.ambari.apache.org\r\n2018-06-26 19:09:32,097  WARN [alert-event-bus-2] AlertReceivedListener:576 - Unable to process alert journalnode_process for an invalid service HDFS and component JOURNALNODE on host c7401.ambari.apache.org\r\n2018-06-26 19:10:25,883  WARN [alert-event-bus-2] AlertReceivedListener:576 - Unable to process alert yarn_resourcemanager_webui for an invalid service YARN and component RESOURCEMANAGER on host c7403.ambari.apache.org\r\n2018-06-26 19:10:25,883  WARN [alert-event-bus-2] AlertReceivedListener:576 - Unable to process alert nodemanager_health_summary for an invalid service YARN and component RESOURCEMANAGER on host c7403.ambari.apache.org\r\n2018-06-26 19:10:27,115  WARN [alert-event-bus-2] AlertReceivedListener:576 - Unable to process alert journalnode_process for an invalid service HDFS and component JOURNALNODE on host c7401.ambari.apache.org\r\n2018-06-26 19:10:31,199  WARN [alert-event-bus-1] AlertReceivedListener:576 - Unable to process alert journalnode_process for an invalid service HDFS and component JOURNALNODE on host c7402.ambari.apache.org\r\n2018-06-26 19:11:25,897  WARN [alert-event-bus-1] AlertReceivedListener:576 - Unable to process alert yarn_resourcemanager_webui for an invalid service YARN and component RESOURCEMANAGER on host c7403.ambari.apache.org\r\n2018-06-26 19:11:25,897  WARN [alert-event-bus-1] AlertReceivedListener:576 - Unable to process alert nodemanager_health_summary for an invalid service YARN and component RESOURCEMANAGER on host c7403.ambari.apache.org\r\n2018-06-26 19:11:27,136  WARN [alert-event-bus-1] AlertReceivedListener:576 - Unable to process alert journalnode_process for an invalid service HDFS and component JOURNALNODE on host c7401.ambari.apache.org\r\n2018-06-26 19:11:31,229  WARN [alert-event-bus-1] AlertReceivedListener:576 - Unable to process alert namenode_rpc_latency for an invalid service HDFS and component NAMENODE on host c7402.ambari.apache.org\r\n2018-06-26 19:11:31,229  WARN [alert-event-bus-1] AlertReceivedListener:576 - Unable to process alert journalnode_process for an invalid service HDFS and component JOURNALNODE on host c7402.ambari.apache.org\r\n2018-06-26 19:16:27,291  WARN [alert-event-bus-1] AlertReceivedListener:576 - Unable to process alert journalnode_process for an invalid service HDFS and component JOURNALNODE on host c7401.ambari.apache.org\r\n2018-06-26 19:16:30,970  WARN [alert-event-bus-2] AlertReceivedListener:576 - Unable to process alert yarn_resourcemanager_webui for an invalid service YARN and component RESOURCEMANAGER on host c7403.ambari.apache.org\r\n2018-06-26 19:16:30,971  WARN [alert-event-bus-2] AlertReceivedListener:576 - Unable to process alert yarn_resourcemanager_rpc_latency for an invalid service YARN and component RESOURCEMANAGER on host c7403.ambari.apache.org\r\n2018-06-26 19:16:30,974  WARN [alert-event-bus-2] AlertReceivedListener:576 - Unable to process alert nodemanager_health_summary for an invalid service YARN and component RESOURCEMANAGER on host c7403.ambari.apache.org\r\n2018-06-26 19:16:30,992  WARN [alert-event-bus-2] AlertReceivedListener:576 - Unable to process alert yarn_resourcemanager_cpu for an invalid service YARN and component RESOURCEMANAGER on host c7403.ambari.apache.org\r\n2018-06-26 19:16:31,310  WARN [alert-event-bus-1] AlertReceivedListener:576 - Unable to process alert namenode_rpc_latency for an invalid service HDFS and component NAMENODE on host c7402.ambari.apache.org\r\n2018-06-26 19:16:31,310  WARN [alert-event-bus-1] AlertReceivedListener:576 - Unable to process alert journalnode_process for an invalid service HDFS and component JOURNALNODE on host c7402.ambari.apache.org\r\n2018-06-26 19:17:25,985  WARN [alert-event-bus-2] AlertReceivedListener:576 - Unable to process alert yarn_resourcemanager_webui for an invalid service YARN and component RESOURCEMANAGER on host c7403.ambari.apache.org\r\n2018-06-26 19:17:30,987  WARN [alert-event-bus-1] AlertReceivedListener:576 - Unable to process alert yarn_resourcemanager_rpc_latency for an invalid service YARN and component RESOURCEMANAGER on host c7403.ambari.apache.org\r\n2018-06-26 19:17:30,990  WARN [alert-event-bus-1] AlertReceivedListener:576 - Unable to process alert nodemanager_health_summary for an invalid service YARN and component RESOURCEMANAGER on host c7403.ambari.apache.org\r\n2018-06-26 19:17:30,990  WARN [alert-event-bus-1] AlertReceivedListener:576 - Unable to process alert yarn_resourcemanager_cpu for an invalid service YARN and component RESOURCEMANAGER on host c7403.ambari.apache.org\r\n2018-06-26 19:17:31,324  WARN [alert-event-bus-2] AlertReceivedListener:576 - Unable to process alert namenode_rpc_latency for an invalid service HDFS and component NAMENODE on host c7402.ambari.apache.org\r\n2018-06-26 19:17:31,324  WARN [alert-event-bus-2] AlertReceivedListener:576 - Unable to process alert journalnode_process for an invalid service HDFS and component JOURNALNODE on host c7402.ambari.apache.org\r\n2018-06-26 19:17:32,274  WARN [alert-event-bus-1] AlertReceivedListener:576 - Unable to process alert journalnode_process for an invalid service HDFS and component JOURNALNODE on host c7401.ambari.apache.org\r\n2018-06-26 19:18:26,002  WARN [alert-event-bus-2] AlertReceivedListener:576 - Unable to process alert yarn_resourcemanager_webui for an invalid service YARN and component RESOURCEMANAGER on host c7403.ambari.apache.org\r\n2018-06-26 19:18:26,004  WARN [alert-event-bus-2] AlertReceivedListener:576 - Unable to process alert nodemanager_health_summary for an invalid service YARN and component RESOURCEMANAGER on host c7403.ambari.apache.org\r\n2018-06-26 19:18:27,294  WARN [alert-event-bus-2] AlertReceivedListener:576 - Unable to process alert journalnode_process for an invalid service HDFS and component JOURNALNODE on host c7401.ambari.apache.org\r\n2018-06-26 19:18:31,332  WARN [alert-event-bus-1] AlertReceivedListener:576 - Unable to process alert journalnode_process for an invalid service HDFS and component JOURNALNODE on host c7402.ambari.apache.org\r\n2018-06-26 19:19:26,020  WARN [alert-event-bus-2] AlertReceivedListener:576 - Unable to process alert yarn_resourcemanager_webui for an invalid service YARN and component RESOURCEMANAGER on host c7403.ambari.apache.org\r\n2018-06-26 19:19:26,021  WARN [alert-event-bus-2] AlertReceivedListener:576 - Unable to process alert nodemanager_health_summary for an invalid service YARN and component RESOURCEMANAGER on host c7403.ambari.apache.org\r\n2018-06-26 19:19:27,327  WARN [alert-event-bus-2] AlertReceivedListener:576 - Unable to process alert journalnode_process for an invalid service HDFS and component JOURNALNODE on host c7401.ambari.apache.org\r\n2018-06-26 19:19:31,354  WARN [alert-event-bus-1] AlertReceivedListener:576 - Unable to process alert namenode_rpc_latency for an invalid service HDFS and component NAMENODE on host c7402.ambari.apache.org\r\n2018-06-26 19:19:31,354  WARN [alert-event-bus-1] AlertReceivedListener:576 - Unable to process alert journalnode_process for an invalid service HDFS and component JOURNALNODE on host c7402.ambari.apache.org\r\n2018-06-26 19:20:26,051  WARN [alert-event-bus-2] AlertReceivedListener:576 - Unable to process alert yarn_resourcemanager_webui for an invalid service YARN and component RESOURCEMANAGER on host c7403.ambari.apache.org\r\n2018-06-26 19:20:26,052  WARN [alert-event-bus-2] AlertReceivedListener:576 - Unable to process alert nodemanager_health_summary for an invalid service YARN and component RESOURCEMANAGER on host c7403.ambari.apache.org\r\n2018-06-26 19:20:27,354  WARN [alert-event-bus-2] AlertReceivedListener:576 - Unable to process alert journalnode_process for an invalid service HDFS and component JOURNALNODE on host c7401.ambari.apache.org\r\n2018-06-26 19:20:31,370  WARN [alert-event-bus-1] AlertReceivedListener:576 - Unable to process alert journalnode_process for an invalid service HDFS and component JOURNALNODE on host c7402.ambari.apache.org\r\n{code}\r\n\r\nSTR:\r\n* Install a simple cluster with ZK, HDFS, and YARN from HDP 2.6\r\n* Monitor the logs and observe entries for components which are not installed",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Alerts Are Running For Components Which Are Not Installed"
   },
   {
      "_id": "13169301",
      "assignee": "rlevas",
      "components": [],
      "created": "2018-06-30 01:01:23",
      "description": "Certain configuration changes should be avoided when regenerating keytab files during different scenarios.  \r\n\r\nFor example, existing non-Kerberos configurations should not be changed during the regenerate keytabs operation performed during an upgrade. However it is necessary for Kerberos identity-related configurations (such as keytab file paths and principal names) to be added and updated; as well as allow for new Kerberos-related configurations to be added. \r\n\r\nTo allow for this, a new _update configuration policy_ value has been added to the set of directives (*_config_update_policy_*) allowed when issuing a call to regenerate keytab files. This directive replaces the less flexible *_ignore_config_updates_* directive which only allows a user to enable or disable the ability for the operation to change configurations. The values allowed for *_config_update_policy_* are as follows:\r\n* {{none}} - No configurations will be updated\r\n* {{identities_only}} - New and updated configurations related to Kerberos identity information - principal, keytab file, and auth-to-local rule properties\r\n* {{new_and_identities}} - Only new configurations declared by the Kerberos descriptor and stack advisor as well as the identity-related changes\r\n* {{all}} - All configuration changes\r\n\r\nDuring an upgrade, the _update configuration policy_ is set to {{new_and_identities}}.\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Prevent Configuration Changes During Keytab Regeneration in an Upgrade"
   },
   {
      "_id": "13169247",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         }
      ],
      "created": "2018-06-29 20:31:23",
      "description": "Agent-side _command JSON_ files ({{command-*.json}}, {{status_command.json}}) should optionally be deleted when no longer needed by the command.  One reason for this is to reduce the risk of leaking sensitive data stored at plaintext in the _command JSON_ files. \r\n\r\nCurrently the _command JSON_ files are stored on disk in /var/lib/ambari-agent/data.  These files may be cleared out over time, but there is a need to have them removed as soon as they are no longer needed.\r\n\r\nTo do this, a retention policy may be defined so that the Ambari agent behaves accordingly:\r\n\r\n* {{keep}}\r\n** No automatic removal is performed\r\n**  This is the default behavior  \r\n* {{remove}}\r\n** The _command JSON_ file are removed as soon as the command completes\r\n* {{remove_on_success}} \r\n** The _command JSON_ files are removed as soon as the command *successfully* completes\r\n** The _command JSON_ files are not removed on failure conditions\r\n\r\nThis value is to be set in the {{ambari-agent.ini}} file, typically found at {{/etc/ambari-agent/conf/ambari-agent.ini}} using the *{{command_file_retention_policy}}* property.  After setting this property, the agent needs to be restarted. ",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Agent-side command-*.json files should optionally be deleted when no longer needed by the command"
   },
   {
      "_id": "13169223",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-06-29 18:12:46",
      "description": "The behavior of the ambari ldap integration seems inconsistent across 2.6.2 -> 2.7.0 upgrade.\r\n\r\nIn Ambari 2.6.2, the Group Object Class property is exemplified as taking what is commonly known as the group object class attribute.\r\n\r\nGroup object class* (posixGroup):\r\nIn Ambari 2.7.0, the Group Object Class property is exemplified as taking what is commonly known as the group search base.\r\n\r\nGroup object class* (ou=groups,dc=ambari,dc=apache,dc=org):\r\n\r\nThe first one is the correct.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari ldap integration has inconsistent behavior in Group Object Class definition after upgrade"
   },
   {
      "_id": "13169205",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-06-29 16:53:52",
      "description": "STR\r\n # Login as admin to Ambari\r\n # Install a cluster with HDFS, ZK and AMS\r\n # Go to Services / HDFS / Metrics and edit one of the widgets (for instance\u00a0change\u00a0the name of the widget)\r\n # Create a new user with 'Cluster Operator' role\r\n # Logout and login with the newly created user\r\n # Try to edit the previously edit widget\r\n\r\nThe action will fail due to an authorization issue (403 is thrown).",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Error in persisting web client state at ambari-server in editing a widget of HDFS "
   },
   {
      "_id": "13169196",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-06-29 16:07:59",
      "description": "STR:-  \n1\\. test enable autostart for all component  \n2\\. test restart all the host at once.  \n3\\. test expect within 45 min. each and every component should be up.  \n4\\. test failed with the following exception\n\n    \n    \r\n     ||Host:- nat-yc-r7-irrs-ambari-autostart-1-re-re-3.openstacklocal|| \r\n    \r\n    \r\n     |ComponentName : RANGER_TAGSYNC Expected Status: Started on host: nat-yc-r7-irrs-ambari-autostart-1-re-re-3.openstacklocal Found: INSTALLED| \r\n     |ComponentName : DRUID_ROUTER Expected Status: Started on host: nat-yc-r7-irrs-ambari-autostart-1-re-re-3.openstacklocal Found: INSTALLED|\r\n     ComponentName : HIVE_SERVER Expected Status: Started on host: nat-yc-r7-irrs-ambari-autostart-1-re-re-3.openstacklocal Found: INSTALLED| \r\n     |ComponentName : SPARK2_THRIFTSERVER Expected Status: Started on host: nat-yc-r7-irrs-ambari-autostart-1-re-re-3.openstacklocal Found: INSTALLED| \r\n     |ComponentName : HISTORYSERVER Expected Status: Started on host: nat-yc-r7-irrs-ambari-autostart-1-re-re-3.openstacklocal Found: INSTALLED| \r\n     |ComponentName : DRUID_BROKER Expected Status: Started on host: nat-yc-r7-irrs-ambari-autostart-1-re-re-3.openstacklocal Found: INSTALLED|\r\n      |ComponentName : HBASE_MASTER Expected Status: Started on host: nat-yc-r7-irrs-ambari-autostart-1-re-re-3.openstacklocal Found: INSTALLED| \r\n      |ComponentName : HIVE_METASTORE Expected Status: Started on host: nat-yc-r7-irrs-ambari-autostart-1-re-re-3.openstacklocal Found: INSTALLED| \r\n      |ComponentName : ZEPPELIN_MASTER Expected Status: Started on host: nat-yc-r7-irrs-ambari-autostart-1-re-re-3.openstacklocal Found: INSTALLED| \r\n      |ComponentName : ACTIVITY_ANALYZER Expected Status: Started on host: nat-yc-r7-irrs-ambari-autostart-1-re-re-3.openstacklocal Found: INSTALLED| \r\n      |ComponentName : DRUID_OVERLORD Expected Status: Started on host: nat-yc-r7-irrs-ambari-autostart-1-re-re-3.openstacklocal Found: INSTALLED| \r\n      |ComponentName : TIMELINE_READER Expected Status: Started on host: nat-yc-r7-irrs-ambari-autostart-1-re-re-3.openstacklocal Found: INSTALLED\r\n      |ComponentName : RANGER_ADMIN Expected Status: Started on host: nat-yc-r7-irrs-ambari-autostart-1-re-re-3.openstacklocal Found: INSTALLED| \r\n      |ComponentName : OOZIE_SERVER Expected Status: Started on host: nat-yc-r7-irrs-ambari-autostart-1-re-re-3.openstacklocal Found: INSTALLED|\r\n      ComponentName : METRICS_COLLECTOR Expected Status: Started on host: nat-yc-r7-irrs-ambari-autostart-1-re-re-3.openstacklocal Found: INSTALLED| \r\n      |ComponentName : METRICS_GRAFANA Expected Status: Started on host: nat-yc-r7-irrs-ambari-autostart-1-re-re-3.openstacklocal Found: INSTALLED|\r\n    \n\nThat means these components are not up untill the waiting time completes.\n\nI checked the agent logs:-  \nattching the ambari-agent logs generated from  \ncat /var/log/ambari-agent/ambari-agent.log |grep -i RecoveryManager.py  \n[agent-\nautostart.log![](/images/icons/link_attachment_7.gif)](/secure/attachment/159734\n/159734_agent-autostart.log \"agent-autostart.log attached to BUG-106407\")  \nthe relevent part if\n\n    \n    \r\n    cat /var/log/ambari-agent/ambari-agent.log |grep -i RecoveryManager.py\r\n    \r\n    INFO 2018-06-28 11:14:31,282 RecoveryManager.py:454 - RecoverConfig = {u'components': ()}\r\n    INFO 2018-06-28 11:14:34,208 RecoveryManager.py:454 - RecoverConfig = {u'components': ({u'component_name': u'METRICS_COLLECTOR',\r\n    INFO 2018-06-28 11:14:34,208 RecoveryManager.py:178 - New status, desired status is set to INIT for METRICS_COLLECTOR\r\n    INFO 2018-06-28 11:14:50,695 RecoveryManager.py:157 - New status, current status is set to INSTALLED for HBASE_REGIONSERVER\r\n    INFO 2018-06-28 11:14:51,404 RecoveryManager.py:157 - New status, current status is set to INSTALLED for SUPERVISOR\r\n    INFO 2018-06-28 11:14:51,954 RecoveryManager.py:157 - New status, current status is set to INSTALLED for TEZ_CLIENT\r\n    INFO 2018-06-28 11:14:52,672 RecoveryManager.py:157 - New status, current status is set to INSTALLED for HIVE_CLIENT\r\n    INFO 2018-06-28 11:14:53,467 RecoveryManager.py:157 - New status, current status is set to INSTALLED for PIG\r\n    INFO 2018-06-28 11:14:54,241 RecoveryManager.py:157 - New status, current status is set to INSTALLED for KERBEROS_CLIENT\r\n    INFO 2018-06-28 11:14:54,683 RecoveryManager.py:157 - New status, current status is set to INSTALLED for HST_AGENT\r\n    INFO 2018-06-28 11:14:55,367 RecoveryManager.py:157 - New status, current status is set to INSTALLED for METRICS_MONITOR\r\n    INFO 2018-06-28 11:14:55,920 RecoveryManager.py:157 - New status, current status is set to INSTALLED for ZOOKEEPER_CLIENT\r\n    INFO 2018-06-28 11:14:56,458 RecoveryManager.py:157 - New status, current status is set to INSTALLED for LOGSEARCH_LOGFEEDER\r\n    INFO 2018-06-28 11:14:57,017 RecoveryManager.py:157 - New status, current status is set to INSTALLED for INFRA_SOLR_CLIENT\r\n    INFO 2018-06-28 11:14:57,823 RecoveryManager.py:157 - New status, current status is set to INSTALLED for DATANODE\r\n    INFO 2018-06-28 11:14:58,443 RecoveryManager.py:157 - New status, current status is set to INSTALLED for HST_SERVER\r\n    INFO 2018-06-28 11:14:59,205 RecoveryManager.py:157 - New status, current status is set to INSTALLED for TIMELINE_READER\r\n    INFO 2018-06-28 11:15:00,015 RecoveryManager.py:157 - New status, current status is set to INSTALLED for DRUID_ROUTER\r\n    INFO 2018-06-28 11:15:00,617 RecoveryManager.py:157 - New status, current status is set to INSTALLED for NAMENODE\r\n    INFO 2018-06-28 11:15:01,151 RecoveryManager.py:157 - New status, current status is set to INSTALLED for YARN_REGISTRY_DNS\r\n    INFO 2018-06-28 11:15:01,745 RecoveryManager.py:157 - New status, current status is set to INSTALLED for DRPC_SERVER\r\n    INFO 2018-06-28 11:15:02,250 RecoveryManager.py:157 - New status, current status is set to INSTALLED for STORM_UI_SERVER\r\n    INFO 2018-06-28 11:15:02,812 RecoveryManager.py:157 - New status, current status is set to INSTALLED for HBASE_MASTER\r\n    INFO 2018-06-28 11:15:03,353 RecoveryManager.py:157 - New status, current status is set to INSTALLED for RANGER_USERSYNC\r\n    INFO 2018-06-28 11:15:03,825 RecoveryManager.py:157 - New status, current status is set to INSTALLED for NIMBUS\r\n    INFO 2018-06-28 11:15:04,413 RecoveryManager.py:157 - New status, current status is set to INSTALLED for SUPERSET\r\n    INFO 2018-06-28 11:15:04,996 RecoveryManager.py:157 - New status, current status is set to INSTALLED for APP_TIMELINE_SERVER\r\n    INFO 2018-06-28 11:15:05,552 RecoveryManager.py:157 - New status, current status is set to INSTALLED for ACTIVITY_EXPLORER\r\n    INFO 2018-06-28 11:15:06,202 RecoveryManager.py:157 - New status, current status is set to INSTALLED for LOGSEARCH_SERVER\r\n    INFO 2018-06-28 11:15:07,436 RecoveryManager.py:157 - New status, current status is set to INSTALLED for SPARK2_JOBHISTORYSERVER\r\n    INFO 2018-06-28 11:15:07,962 RecoveryManager.py:157 - New status, current status is set to INSTALLED for INFRA_SOLR\r\n    INFO 2018-06-28 11:15:08,494 RecoveryManager.py:157 - New status, current status is set to INSTALLED for HIVE_METASTORE\r\n    INFO 2018-06-28 11:15:09,508 RecoveryManager.py:157 - New status, current status is set to INSTALLED for RESOURCEMANAGER\r\n    INFO 2018-06-28 11:15:10,197 RecoveryManager.py:157 - New status, current status is set to INSTALLED for OOZIE_SERVER\r\n    INFO 2018-06-28 11:15:10,840 RecoveryManager.py:157 - New status, current status is set to INSTALLED for RANGER_ADMIN\r\n    INFO 2018-06-28 11:15:11,517 RecoveryManager.py:157 - New status, current status is set to INSTALLED for SPARK2_THRIFTSERVER\r\n    INFO 2018-06-28 11:15:12,028 RecoveryManager.py:157 - New status, current status is set to INSTALLED for DRUID_OVERLORD\r\n    INFO 2018-06-28 11:15:12,998 RecoveryManager.py:157 - New status, current status is set to INSTALLED for DRUID_BROKER\r\n    INFO 2018-06-28 11:15:13,650 RecoveryManager.py:157 - New status, current status is set to INSTALLED for HIVE_SERVER\r\n    INFO 2018-06-28 11:15:14,321 RecoveryManager.py:157 - New status, current status is set to INSTALLED for RANGER_TAGSYNC\r\n    INFO 2018-06-28 11:15:14,852 RecoveryManager.py:157 - New status, current status is set to INSTALLED for ACTIVITY_ANALYZER\r\n    INFO 2018-06-28 11:15:14,956 RecoveryManager.py:163 - current status is set to INSTALLED for METRICS_COLLECTOR\r\n    INFO 2018-06-28 11:15:15,655 RecoveryManager.py:157 - New status, current status is set to INSTALLED for ZEPPELIN_MASTER\r\n    INFO 2018-06-28 11:15:16,199 RecoveryManager.py:157 - New status, current status is set to INSTALLED for METRICS_GRAFANA\r\n    INFO 2018-06-28 11:15:16,859 RecoveryManager.py:157 - New status, current status is set to INSTALLED for HISTORYSERVER\r\n    INFO 2018-06-28 11:17:36,038 RecoveryManager.py:454 - RecoverConfig = {u'components': ({u'component_name': u'METRICS_COLLECTOR',\r\n    INFO 2018-06-28 11:17:36,042 RecoveryManager.py:183 - desired status is set to STARTED for METRICS_COLLECTOR\r\n    INFO 2018-06-28 11:27:33,451 RecoveryManager.py:183 - desired status is set to INSTALLED for METRICS_COLLECTOR\r\n    INFO 2018-06-28 11:27:33,451 RecoveryManager.py:620 - Received EXECUTION_COMMAND (STOP/INSTALL), desired state of METRICS_COLLECTOR to INSTALLED\r\n    INFO 2018-06-28 11:29:10,328 RecoveryManager.py:588 - After EXECUTION_COMMAND (STOP/INSTALL), with taskId=63, current state of METRICS_COLLECTOR to INSTALLED\r\n    INFO 2018-06-28 11:45:03,661 RecoveryManager.py:163 - current status is set to STARTED for INFRA_SOLR\r\n    INFO 2018-06-28 11:45:12,168 RecoveryManager.py:163 - current status is set to STARTED for METRICS_MONITOR\r\n    INFO 2018-06-28 11:45:20,469 RecoveryManager.py:163 - current status is set to STARTED for HST_SERVER\r\n    INFO 2018-06-28 11:45:26,682 RecoveryManager.py:163 - current status is set to STARTED for RANGER_TAGSYNC\r\n    INFO 2018-06-28 11:45:46,474 RecoveryManager.py:163 - current status is set to STARTED for YARN_REGISTRY_DNS\r\n    INFO 2018-06-28 11:45:54,622 RecoveryManager.py:163 - current status is set to STARTED for HST_AGENT\r\n    INFO 2018-06-28 11:46:27,459 RecoveryManager.py:163 - current status is set to STARTED for LOGSEARCH_SERVER\r\n    INFO 2018-06-28 11:48:53,946 RecoveryManager.py:163 - current status is set to STARTED for RANGER_ADMIN\r\n    INFO 2018-06-28 14:34:17,142 RecoveryManager.py:583 - After EXECUTION_COMMAND (START), with taskId=1530194603, current state of ACTIVITY_EXPLORER to STARTED\r\n    INFO 2018-06-28 14:34:18,039 RecoveryManager.py:454 - RecoverConfig = {u'components': ({u'component_name': u'SUPERSET',\r\n    INFO 2018-06-28 14:34:18,105 RecoveryManager.py:454 - RecoverConfig = {u'components': ({u'component_name': u'SUPERSET',\r\n    INFO 2018-06-28 14:34:18,170 RecoveryManager.py:454 - RecoverConfig = {u'components': ({u'component_name': u'SUPERSET',\r\n    INFO 2018-06-28 14:34:18,259 RecoveryManager.py:454 - RecoverConfig = {u'components': ({u'component_name': u'SUPERSET',\r\n    INFO 2018-06-28 14:34:18,303 RecoveryManager.py:454 - RecoverConfig = {u'components': ({u'component_name': u'SUPERSET',\r\n    INFO 2018-06-28 14:34:18,409 RecoveryManager.py:454 - RecoverConfig = {u'components': ({u'component_name': u'SUPERSET',\r\n    INFO 2018-06-28 14:34:18,478 RecoveryManager.py:454 - RecoverConfig = {u'components': ({u'component_name': u'SUPERSET',\r\n    INFO 2018-06-28 14:34:18,570 RecoveryManager.py:454 - RecoverConfig = {u'components': ({u'component_name': u'SUPERSET',\r\n    INFO 2018-06-28 14:34:18,616 RecoveryManager.py:454 - RecoverConfig = {u'components': ({u'component_name': u'SUPERSET',\r\n    INFO 2018-06-28 14:34:18,644 RecoveryManager.py:454 - RecoverConfig = {u'components': ({u'component_name': u'SUPERSET',\r\n    INFO 2018-06-28 14:34:18,674 RecoveryManager.py:454 - RecoverConfig = {u'components': ({u'component_name': u'SUPERSET',\r\n    INFO 2018-06-28 14:34:18,730 RecoveryManager.py:454 - RecoverConfig = {u'components': ({u'component_name': u'SUPERSET',\r\n    INFO 2018-06-28 14:34:18,764 RecoveryManager.py:454 - RecoverConfig = {u'components': ({u'component_name': u'SUPERSET',\r\n    INFO 2018-06-28 14:34:18,780 RecoveryManager.py:454 - RecoverConfig = {u'components': ({u'component_name': u'SUPERSET',\r\n    INFO 2018-06-28 14:34:18,831 RecoveryManager.py:454 - RecoverConfig = {u'components': ({u'component_name': u'SUPERSET',\r\n    INFO 2018-06-28 14:34:18,875 RecoveryManager.py:454 - RecoverConfig = {u'components': ({u'component_name': u'SUPERSET',\r\n    INFO 2018-06-28 14:34:18,888 RecoveryManager.py:454 - RecoverConfig = {u'components': ({u'component_name': u'SUPERSET',\r\n    INFO 2018-06-28 14:34:18,960 RecoveryManager.py:454 - RecoverConfig = {u'components': ({u'component_name': u'SUPERSET',\r\n    INFO 2018-06-28 14:34:18,982 RecoveryManager.py:454 - RecoverConfig = {u'components': ({u'component_name': u'SUPERSET',\r\n    INFO 2018-06-28 14:34:19,015 RecoveryManager.py:454 - RecoverConfig = {u'components': ({u'component_name': u'SUPERSET',\r\n    INFO 2018-06-28 14:34:19,051 RecoveryManager.py:454 - RecoverConfig = {u'components': ({u'component_name': u'SUPERSET',\r\n    INFO 2018-06-28 14:34:19,090 RecoveryManager.py:454 - RecoverConfig = {u'components': ({u'component_name': u'SUPERSET',\r\n    INFO 2018-06-28 14:34:19,108 RecoveryManager.py:454 - RecoverConfig = {u'components': ({u'component_name': u'SUPERSET',\r\n    INFO 2018-06-28 14:34:19,125 RecoveryManager.py:454 - RecoverConfig = {u'components': ({u'component_name': u'SUPERSET',\r\n    INFO 2018-06-28 14:34:19,220 RecoveryManager.py:454 - RecoverConfig = {u'components': ({u'component_name': u'SUPERSET',\r\n    INFO 2018-06-28 14:34:19,290 RecoveryManager.py:454 - RecoverConfig = {u'components': ()}\r\n    INFO 2018-06-28 14:35:36,027 RecoveryManager.py:163 - current status is set to INSTALLED for SUPERVISOR\r\n    INFO 2018-06-28 14:36:05,838 RecoveryManager.py:163 - current status is set to STARTED for SUPERSET\r\n    INFO 2018-06-28 14:36:45,585 RecoveryManager.py:163 - current status is set to STARTED for YARN_REGISTRY_DNS\r\n    INFO 2018-06-28 14:37:18,681 RecoveryManager.py:163 - current status is set to STARTED for INFRA_SOLR\r\n    INFO 2018-06-28 14:37:55,603 RecoveryManager.py:163 - current status is set to STARTED for METRICS_MONITOR\r\n    INFO 2018-06-28 14:38:14,872 RecoveryManager.py:163 - current status is set to STARTED for RANGER_TAGSYNC\r\n    INFO 2018-06-28 14:38:29,806 RecoveryManager.py:163 - current status is set to STARTED for DATANODE\r\n    INFO 2018-06-28 14:38:43,789 RecoveryManager.py:163 - current status is set to STARTED for RANGER_USERSYNC\r\n    INFO 2018-06-28 14:38:54,727 RecoveryManager.py:163 - current status is set to INSTALLED for METRICS_MONITOR\r\n    INFO 2018-06-28 14:39:40,572 RecoveryManager.py:163 - current status is set to STARTED for STORM_UI_SERVER\r\n    INFO 2018-06-28 14:39:42,898 RecoveryManager.py:163 - current status is set to STARTED for METRICS_MONITOR\r\n    INFO 2018-06-28 14:40:49,742 RecoveryManager.py:163 - current status is set to STARTED for RANGER_ADMIN\r\n    INFO 2018-06-28 14:41:13,508 RecoveryManager.py:163 - current status is set to STARTED for HBASE_REGIONSERVER\r\n    INFO 2018-06-28 14:44:02,873 RecoveryManager.py:163 - current status is set to STARTED for NIMBUS\r\n    INFO 2018-06-28 14:45:17,040 RecoveryManager.py:163 - current status is set to STARTED for METRICS_COLLECTOR\r\n    INFO 2018-06-28 14:45:20,928 RecoveryManager.py:163 - current status is set to STARTED for LOGSEARCH_LOGFEEDER\r\n    INFO 2018-06-28 14:46:24,130 RecoveryManager.py:163 - current status is set to INSTALLED for INFRA_SOLR\r\n    INFO 2018-06-28 14:46:24,598 RecoveryManager.py:163 - current status is set to STARTED for ACTIVITY_ANALYZER\r\n    INFO 2018-06-28 14:47:14,171 RecoveryManager.py:163 - current status is set to STARTED for INFRA_SOLR\r\n    INFO 2018-06-28 14:49:22,384 RecoveryManager.py:163 - current status is set to STARTED for NAMENODE\r\n    INFO 2018-06-28 14:49:31,552 RecoveryManager.py:163 - current status is set to STARTED for DRPC_SERVER\r\n    INFO 2018-06-28 15:10:55,994 RecoveryManager.py:163 - current status is set to STARTED for LOGSEARCH_SERVER\r\n    INFO 2018-06-28 15:11:01,316 RecoveryManager.py:163 - current status is set to STARTED for SPARK2_JOBHISTORYSERVER\r\n    INFO 2018-06-28 15:11:11,251 RecoveryManager.py:163 - current status is set to STARTED for METRICS_GRAFANA\r\n    INFO 2018-06-28 15:11:37,007 RecoveryManager.py:163 - current status is set to STARTED for HST_SERVER\r\n    INFO 2018-06-28 15:11:57,521 RecoveryManager.py:163 - current status is set to STARTED for HST_AGENT\r\n    INFO 2018-06-28 15:12:03,321 RecoveryManager.py:163 - current status is set to STARTED for OOZIE_SERVER\r\n    INFO 2018-06-28 15:13:24,798 RecoveryManager.py:163 - current status is set to INSTALLED for RANGER_ADMIN\r\n    INFO 2018-06-28 15:14:13,744 RecoveryManager.py:163 - current status is set to STARTED for RANGER_ADMIN\r\n    INFO 2018-06-28 15:15:03,889 RecoveryManager.py:163 - current status is set to INSTALLED for RANGER_ADMIN\r\n    INFO 2018-06-28 15:15:50,119 RecoveryManager.py:163 - current status is set to INSTALLED for OOZIE_SERVER\r\n    INFO 2018-06-28 15:15:50,451 RecoveryManager.py:163 - current status is set to INSTALLED for NAMENODE\r\n    INFO 2018-06-28 15:15:51,459 RecoveryManager.py:163 - current status is set to STARTED for RANGER_ADMIN\r\n    INFO 2018-06-28 15:15:57,678 RecoveryManager.py:163 - current status is set to STARTED for NAMENODE\r\n    INFO 2018-06-28 15:16:22,782 RecoveryManager.py:163 - current status is set to STARTED for HBASE_MASTER\r\n    INFO 2018-06-28 15:16:40,512 RecoveryManager.py:163 - current status is set to STARTED for APP_TIMELINE_SERVER\r\n    INFO 2018-06-28 15:16:43,582 RecoveryManager.py:163 - current status is set to STARTED for OOZIE_SERVER\r\n    INFO 2018-06-28 15:17:45,952 RecoveryManager.py:163 - current status is set to STARTED for HISTORYSERVER\r\n    INFO 2018-06-28 15:37:57,495 RecoveryManager.py:163 - current status is set to INSTALLED for HST_AGENT\r\n    INFO 2018-06-28 15:38:47,195 RecoveryManager.py:163 - current status is set to STARTED for HST_AGENT\r\n    \n\nI checked is this because of memory issue. but\n\n    \n    \r\n    [root@nat-yc-r7-irrs-ambari-autostart-1-re-re-3 data]# df -h\r\n    Filesystem             Size  Used Avail Use% Mounted on\r\n    /dev/mapper/rhel-root   17G   11G  6.0G  65% /\r\n    devtmpfs               7.8G     0  7.8G   0% /dev\r\n    tmpfs                  7.8G     0  7.8G   0% /dev/shm\r\n    tmpfs                  7.8G  361M  7.5G   5% /run\r\n    tmpfs                  7.8G     0  7.8G   0% /sys/fs/cgroup\r\n    /dev/vda1             1014M  172M  843M  17% /boot\r\n    /dev/vdb               246G   19G  216G   8% /grid/0\r\n    tmpfs                  1.6G     0  1.6G   0% /run/user/1037\r\n    tmpfs                  1.6G     0  1.6G   0% /run/user/0\r\n    \n\nI checked some of auto_errors\n\n    \n    \r\n    cat auto_errors-1530190498.txt\r\n    \r\n    Traceback (most recent call last):\r\n      File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/YARN/package/scripts/historyserver.py\", line 132, in <module>\r\n        HistoryServer().execute()\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 353, in execute\r\n        method(env)\r\n      File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/YARN/package/scripts/historyserver.py\", line 100, in start\r\n        skip=params.sysprep_skip_copy_tarballs_hdfs) or resource_created\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/libraries/functions/copy_tarball.py\", line 497, in copy_to_hdfs\r\n        source_file = prepare_function()\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/libraries/functions/copy_tarball.py\", line 97, in _prepare_tez_tarball\r\n        hadoop_lib_native_lzo_dir = os.path.join(stack_root, service_version, \"hadoop\", \"lib\", \"native\")\r\n      File \"/usr/lib64/python2.7/posixpath.py\", line 75, in join\r\n        if b.startswith('/'):\r\n    AttributeError: 'NoneType' object has no attribute 'startswith'\r\n    \n\nattching the ambari-agent logs generated from  \ncat /var/log/ambari-agent/ambari-agent.log |grep -i RecoveryManager.py  \n[agent-\nautostart.log![](/images/icons/link_attachment_7.gif)](/secure/attachment/159734\n/159734_agent-autostart.log \"agent-autostart.log attached to BUG-106407\")\n\nRepro cluster:- <http://linux-jenkins.qe.hortonworks.com:8080/job/Nightly-\nStart-EC2-Run-HDP/985907/>  \nlifetime extended to 72 hours <http://linux-\njenkins.qe.hortonworks.com:8080/job/update-openstack-lifetime/12085/>\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Component with recovery Enabled are not coming up when autostart is enabled "
   },
   {
      "_id": "13169165",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-06-29 13:49:03",
      "description": "Steps to reproduce:\r\n\r\n# integrate ambari 2.6.0 with ldap\r\n# upgrade to ambari 2.7.0\r\n# integrate ambari 2.7.0 with same ldap\r\n\r\nResult:\r\n\r\n{code}\r\nERROR: Unexpected HTTPError: HTTP Error 500: Internal Server Error\r\nFor more info run ambari-server with -v or --verbose option\r\n{code}\r\n\r\nCause:\r\n\r\n{code}\r\n2018-06-29T09:43:32.624Z, User(admin), RemoteIp(127.0.0.1), RequestType(PUT), url(http://127.0.0.1:8080/api/v1/services/AMBARI/components/AMBARI_SERVER/configurations/ldap-configuration), ResultStatus(500 Internal Server Error), Reason(org.apache.ambari.server.controller.spi.SystemException: \r\nInvalid Ambari server configuration key: ldap-configuration:ssl.trustStore.path)\r\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari setup-ldap fails with \"internal server error\" after upgrade"
   },
   {
      "_id": "13169155",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-06-29 13:10:02",
      "description": "Following are the steps performed\r\n- On an already deployed cluster (without Ranger) setup ldap\r\n- navigate to Add Service wizard to add ranger\r\n- Use Authentication method as LDAP\r\n- At customize services property populate all required fields\r\n- Set one of the password to not meet the requirement (say set it as rangeradmin)\r\n- Click Next. There will be a warning popup which says properties did not meet the requirements and user has to change it before proceeding\r\n- Close the popup and find the property which has to be changed (It would be better if user is navigated to the property upon clicking on the warning popup itself)\r\n- Fix this property, notice that there are no other properties which needs attention\r\n- Still Next button is not enabled",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Add Service Wizard: Next Button is not enabled while adding Ranger after fixing an erroneous property"
   },
   {
      "_id": "13169091",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-06-29 07:31:51",
      "description": "Blueprint deployment with custom service name fails, because some parts of Ambari mix and match service name (eg. zk1) and service type (eg. ZOOKEEPER).",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Blueprint deployment with custom service name"
   },
   {
      "_id": "13168836",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-06-28 11:03:12",
      "description": "Python unit tests fail on Python 2.7.6, because [SSLContext|https://docs.python.org/2/library/ssl.html#ssl-contexts] was only added in 2.7.9.\r\n\r\n{noformat:title=https://builds.apache.org/job/Ambari-trunk-Commit/9543/consoleText}\r\nERROR: test_ldap_sync_ssl (TestAmbariServer.TestAmbariServer)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-common/src/test/python/mock/mock.py\", line 1199, in patched\r\n    return func(*args, **keywargs)\r\n  File \"/home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-server/src/test/python/TestAmbariServer.py\", line 7804, in test_ldap_sync_ssl\r\n    sync_ldap(options)\r\n  File \"/home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-server/src/main/python/ambari_server/setupSecurity.py\", line 405, in sync_ldap\r\n    raise FatalException(1, err)\r\nFatalException: \"Fatal exception: Sync event creation failed. Error details: 'module' object has no attribute 'SSLContext', exit code 1\"\r\n\r\nERROR: test_get_ssl_context (TestServerUtils.TestServerUtils)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-common/src/test/python/mock/mock.py\", line 1199, in patched\r\n    return func(*args, **keywargs)\r\n  File \"/home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-server/src/test/python/TestServerUtils.py\", line 124, in test_get_ssl_context\r\n    context = get_ssl_context(properties)\r\n  File \"/home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-server/src/main/python/ambari_server/serverUtils.py\", line 274, in get_ssl_context\r\n    context = ssl.SSLContext(protocol)\r\nAttributeError: 'module' object has no attribute 'SSLContext'\r\n{noformat}\r\n\r\nCC [~rlevas]",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Python unit test failure on 2.7.6"
   },
   {
      "_id": "13168610",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-06-27 12:13:17",
      "description": "WIth the new Alerts shown in the Ambari dashboard, unable to filter the various alerts seen. When filter is selected, the dropdown immediately disappears and doesn't allow the user to select the alert level to filter.\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Unable to filter on the alerts in dashboard page"
   },
   {
      "_id": "13168421",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-06-26 17:56:02",
      "description": "Here is a related issue which only occurs for fresh HDP-3.0 installs where the cluster is setup manually and is a bit strange.\r\n\r\nThere are two scenarios:\r\n 1. When a cluster is kerberos enabled with Ranger installed, Now using Add service wizard Add Storm service and on the customize configuration page, we see that Ranger Storm plugin is enabled and\u00a0[service-advisor|https://github.com/hortonworks/hdp_ambari_definitions/blob/AMBARI-2.7.0.0/src/main/resources/stacks/HDP/3.0/services/STORM/service_advisor.py#L216-L222]\u00a0provides appropriate recommendations by showing:\r\n{noformat}\r\n* ranger-storm-plugin-enabled with recommended value Yes.\r\n* nimbus.authorizer with recommended value org.apache.ranger.authorization.storm.authorizer.RangerStormAuthorizer.\r\n{noformat}\r\n2. When a cluster is kerberos enabled with Ranger and Storm installed and we then enable Ranger Storm plugin the service-advisor recommendations differ this time by showing:\r\n{noformat}\r\n* ranger-storm-plugin-enabled with recommended value Yes.\r\n* nimbus.authorizer with recommended value Property removed.\r\n{noformat}\r\nLooks like in the first case the\u00a0{{security_enabled}}\u00a0is\u00a0{{True}}\u00a0whereas in the second case the flag is\u00a0{{False}}\u00a0while the cluster is actually kerberized.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Ranger Storm plugin toggle behavior changes under different scenarios"
   },
   {
      "_id": "13168344",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-06-26 13:07:22",
      "description": "When connected via Knox proxy ambari server web socket URL should be changed from <ambari-server protocol>://<ambari-server host>:<ambari-server port>/api/stomp/v1/websocket to <knox protocol>://<knox host>:<knox port>/gateway/default/ambari/websocket",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "WebSockets traffic does not work between Ambari Web UI and Ambari Server when it is accessed via Knox Proxy (UI side changes)"
   },
   {
      "_id": "13168277",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-06-26 07:30:04",
      "description": "We need to remove the reference to JDK 1.7, as it's not supported with HDP 3.0. We still see the following in ambari-server\nsetup:\n    \n    \r\n    [2] Oracle JDK 1.7 + Java Cryptography Extension (JCE) Policy Files 7\r\n    \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Remove reference to JDK 1.7 in ambari-server setup"
   },
   {
      "_id": "13168058",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-06-25 14:03:24",
      "description": "Although 'Database' tab doesn't allow to go to the next step if the required properties are empty it is not allowing even if there are no required properties left on the screen.\r\n\r\nSTR\r\n1. Go to Customize Services --> Databases --> Ranger.\r\n2. Enter the Ranger DB host.\r\n3. Set/Toggle 'Setup Database and Database Use' to No.\r\n\r\nAlthough no required properties are present but the 'Next' button is disabled.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Database tab disabled if Setup Database and Database User"
   },
   {
      "_id": "13168012",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-06-25 11:06:04",
      "description": "While installing 22 node cluster via ambari, it gets stuck at checking hosts for potential warnings after successful registration.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Ambari gets stuck at host checks (after successful registration) when installing more number of nodes via UI"
   },
   {
      "_id": "13168010",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-06-25 10:48:18",
      "description": "while deleting Atlas service, faced this issue:\r\n\r\n{code}\r\nstderr: \r\nCaught an exception while executing custom service command: : Command requires configs with timestamp=1529647351404 but configs on agent have timestamp=1529647350969; Command requires configs with timestamp=1529647351404 but configs on agent have timestamp=1529647350969\r\n stdout:\r\nCaught an exception while executing custom service command: : Command requires configs with timestamp=1529647351404 but configs on agent have timestamp=1529647350969; Command requires configs with timestamp=1529647351404 but configs on agent have timestamp=1529647350969\r\n\r\nCommand failed after 1 tries\r\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Deleting a service fails to remove keytabs"
   },
   {
      "_id": "13167998",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-06-25 09:40:36",
      "description": "{noformat}\r\n22 May 2018 15:33:05,830 ERROR [agent-report-processor-0] AgentReportsProcessor:90 - Error processing agent reports\r\norg.apache.ambari.server.StackAccessException: Stack data, stackName=HDPCORE, stackVersion=1.0.0-b368, stackServiceName=HBASE\r\n        at org.apache.ambari.server.api.services.AmbariMetaInfo.getService(AmbariMetaInfo.java:604)\r\n        at org.apache.ambari.server.api.services.AmbariMetaInfo.getComponent(AmbariMetaInfo.java:357)\r\n        at org.apache.ambari.server.state.host.HostImpl.calculateHostStatus(HostImpl.java:1247)\r\n        at org.apache.ambari.server.agent.HeartbeatProcessor.processHostStatus(HeartbeatProcessor.java:300)\r\n        at org.apache.ambari.server.agent.HeartBeatHandler.handleCommandReportStatus(HeartBeatHandler.java:275)\r\n        at org.apache.ambari.server.agent.AgentReportsProcessor$AgentReportProcessingTask.run(AgentReportsProcessor.java:83)\r\n{noformat}\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Error processing agent reports due to wrong stack usage"
   },
   {
      "_id": "13167806",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-06-23 09:17:58",
      "description": "Some execution commands were failed during blueprint deploy:\n\n    \n    \n    \r\n    ERROR 2018-06-19 22:29:28,058 ActionQueue.py:221 - Exception while processing EXECUTION_COMMAND command\r\n     Traceback (most recent call last):\r\n       File \"/usr/lib/ambari-agent/lib/ambari_agent/ActionQueue.py\", line 214, in process_command\r\n         self.execute_command(command)\r\n       File \"/usr/lib/ambari-agent/lib/ambari_agent/ActionQueue.py\", line 352, in execute_command\r\n         commandresult['stdout'] += '\\n\\nCommand completed successfully!\\n' if status == self.COMPLETED_STATUS else '\\n\\nCommand failed after ' + str(numAttempts) + ' tries\\n'\r\n     UnboundLocalError: local variable 'commandresult' referenced before assignment\r\n     INFO 2018-06-19 22:29:28,100 ActionQueue.py:238 - Executing command with id = 4-0, taskId = 5 for role = MAPREDUCE2_CLIENT of cluster_id 2.\r\n    \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Agent failed to process execution command"
   },
   {
      "_id": "13167664",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-06-22 13:54:13",
      "description": "Before running below command, 'Test Connection' button was showing the excepted output to run below command:\r\n{noformat}\r\nambari-server setup --jdbc-db=mysql --jdbc-driver=/root/mysql-connector-java.jar\r\n{noformat}\r\n\r\nAfter running the command, 'Test Connection'  keeps on spinning the loader and browser console shows below error\r\n{noformat}\r\nUncaught TypeError: Cannot read property 'filter' of undefined\r\n    at Class.getConnectionProperty (app.js:216783)\r\n    at Class.<anonymous> (app.js:216763)\r\n    at ComputedPropertyPrototype.get (vendor.js:14954)\r\n    at get (vendor.js:13360)\r\n    at Class.get (vendor.js:19791)\r\n    at Class.getTaskInfoSuccess (app.js:216816)\r\n    at Class.opt.success (app.js:192713)\r\n    at fire (vendor.js:1141)\r\n    at Object.fireWith [as resolveWith] (vendor.js:1252)\r\n    at done (vendor.js:8178)\r\n{noformat}\r\n\r\nThis issue is not seen on 'All Configurations' tab under services smart config tab.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Test Connection button not working in Database Tab"
   },
   {
      "_id": "13167637",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-06-22 11:58:09",
      "description": "We should add a prereq check that for EU, the SOURCE version has an entry for each OS type in the cluster, and the TARGET version also has an entry (this better be true, or distribution would fail).",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Express Upgrade Blocked on Missing OS in repo_version"
   },
   {
      "_id": "13167576",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-06-22 07:19:21",
      "description": "\n**STR**\n\n  1. Deployed cluster with Ambari version: 2.6.1.5-3 and HDP version: 2.6.1.0-129\n  2. Upgrade Ambari to Target Version: 2.7.0.0-709\n  3. Upgrade AMS and Smartsense (keeping them stopped)\n  4. Perform EU to HDP-3.0 and let it complete\n  5. Restart HDFS\n  6. Observe state of Metrics Collectors (AMS is configured in distributed mode)\n\n**Result**  \nBoth metrics collectors are down (auto start is enabled for Metrics Collector)\n\nFrom logs:\n\n    \n    \n    \r\n    2018-06-13 16:45:05,620 ERROR org.apache.ambari.metrics.core.timeline.discovery.TimelineMetricMetadataManager: TimelineMetricMetadataKey is null for : [-8, 31, -72, 32, 88, -8, -51, -88, -104, 12, -123, 99, 55, -90, 45, -12, 115, 0, -6, 13]\r\n    2018-06-13 16:45:05,622 WARN org.apache.hadoop.yarn.webapp.GenericExceptionHandler: INTERNAL_SERVER_ERROR\r\n    java.lang.NullPointerException\r\n            at org.apache.ambari.metrics.core.timeline.aggregators.TimelineMetricReadHelper.getTimelineMetricCommonsFromResultSet(TimelineMetricReadHelper.java:116)\r\n            at org.apache.ambari.metrics.core.timeline.PhoenixHBaseAccessor.getLastTimelineMetricFromResultSet(PhoenixHBaseAccessor.java:446)\r\n            at org.apache.ambari.metrics.core.timeline.PhoenixHBaseAccessor.getLatestMetricRecords(PhoenixHBaseAccessor.java:1134)\r\n            at org.apache.ambari.metrics.core.timeline.PhoenixHBaseAccessor.getMetricRecords(PhoenixHBaseAccessor.java:953)\r\n            at org.apache.ambari.metrics.core.timeline.HBaseTimelineMetricsService.getTimelineMetrics(HBaseTimelineMetricsService.java:288)\r\n            at org.apache.ambari.metrics.webapp.TimelineWebServices.getTimelineMetrics(TimelineWebServices.java:261)\r\n            at sun.reflect.GeneratedMethodAccessor39.invoke(Unknown Source)\r\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n            at java.lang.reflect.Method.invoke(Method.java:498)\r\n    \r\n    2018-06-13 16:45:07,887 INFO org.apache.zookeeper.ZooKeeper: Initiating client connection, connectString=ctr-e138-1518143905142-361872-01-000005.hwx.site:2181,ctr-e138-1518143905142-361872-01-000006.hwx.site:2181,ctr-e138-1518143905142-361872-01-000003.hwx.site:2181 sessionTimeout=120000 watcher=org.apache.hadoop.hbase.zookeeper.ReadOnlyZKClient$$Lambda$13/572967831@60474c94\r\n    2018-06-13 16:45:07,889 INFO org.apache.zookeeper.client.ZooKeeperSaslClient: Client will use GSSAPI as SASL mechanism.\r\n    2018-06-13 16:45:07,891 INFO org.apache.zookeeper.ClientCnxn: Opening socket connection to server ctr-e138-1518143905142-361872-01-000006.hwx.site/172.27.73.151:2181. Will attempt to SASL-authenticate using Login Context section 'Client'\r\n    2018-06-13 16:45:07,891 INFO org.apache.zookeeper.ClientCnxn: Socket connection established to ctr-e138-1518143905142-361872-01-000006.hwx.site/172.27.73.151:2181, initiating session\r\n    2018-06-13 16:45:07,894 INFO org.apache.zookeeper.ClientCnxn: Session establishment complete on server ctr-e138-1518143905142-361872-01-000006.hwx.site/172.27.73.151:2181, sessionid = 0x363f94c8d6d0059, negotiated timeout = 90000\r\n    2018-06-13 16:45:11,938 INFO org.apache.hadoop.hbase.client.RpcRetryingCallerImpl: Call exception, tries=6, retries=6, started=4153 ms ago, cancelled=false, msg=Call to ctr-e138-1518143905142-361872-01-000007.hwx.site/172.27.74.131:61320 failed on connection exception: org.apache.hbase.thirdparty.io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: ctr-e138-1518143905142-361872-01-000007.hwx.site/172.27.74.131:61320, details=row 'SYSTEM.CATALOG' on table 'hbase:meta' at region=hbase:meta,,1.1588230740, hostname=ctr-e138-1518143905142-361872-01-000007.hwx.site,61320,1528896330963, seqNum=-1\r\n    2018-06-13 16:45:15,954 INFO org.apache.hadoop.hbase.client.RpcRetryingCallerImpl: Call exception, tries=7, retries=7, started=8169 ms ago, cancelled=false, msg=Call to ctr-e138-1518143905142-361872-01-000007.hwx.site/172.27.74.131:61320 failed on local exception: org.apache.hadoop.hbase.ipc.FailedServerException: This server is in the failed servers list: ctr-e138-1518143905142-361872-01-000007.hwx.site/172.27.74.131:61320, details=row 'SYSTEM.CATALOG' on table 'hbase:meta' at region=hbase:meta,,1.1588230740, hostname=ctr-e138-1518143905142-361872-01-000007.hwx.site,61320,1528896330963, seqNum=-1\r\n    \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Metric Collector goes down after HDFS restart post EU"
   },
   {
      "_id": "13167435",
      "assignee": "ababiichuk",
      "components": [],
      "created": "2018-06-21 16:03:54",
      "description": "Yarn has 2 version of timeline service .\r\n1) TIMELINE SERVICE V1.5\r\n2) TIMELINE SERVICE V2.0 READER\r\nWhen both of these services are installed on one host, go to Component page . Component Page only shows first few chars \"Timeline Service... \".\r\nAmbari UI shows \"Timeline Service..\" for both Timeline service 1.5 and 2.0 . Thus, user can not identify which is Timeline service 1.5 or 2.0\r\nambari should show the full component name when user brings mouse pointer on the component name.\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Cannot distinguish components on Host Details page due to shortened display name (Ambari should show full component name on mouse over)"
   },
   {
      "_id": "13167364",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-06-21 10:33:15",
      "description": "The topology validation that takes place during blueprint creation request can be disabled by passing {{validate_topology=false}} as query param.  Validation also has a side-effect of adding any auto-deployable components/dependencies to the topology.\r\n\r\nFor mpack-based deployment most of the validation is moved to the cluster creation request, since mpacks may not be available prior to that.  We need to provide a way to disable validation in this request, too.  Using the same {{validate_topology=false}} flag may be the best for this purpose.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Provide a way to disable topology validation in cluster creation request"
   },
   {
      "_id": "13167191",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-06-20 15:27:56",
      "description": "- Navigate to Customize ServicePage of UI install wizard by selecting all services from ChooseServicesPage. \r\n- Populate credentials tab\r\n- Switch to Databases tab, Noticed that Ranger and Ranger KMS have multiple properties to be filled in\r\n- Now go back to Choose Services page and deselect Ranger and Ranger KMS\r\n- Proceed through wizard to reach Customize ServicesPage\r\n- Ranger and KMS sub tabs are still present with errors at Databases tab. \r\n(None of the ranger/KMS credential properties are present in Credential tabs)\r\n\r\n- Now even if we go back and choose Ranger and KMS - update all necessary properties for Ranger - Test Connection is hung with error",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Ranger and KMS tab still present in Customize ServicesPage even after going back and deselecting them from Choose ServicesPage"
   },
   {
      "_id": "13167147",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-06-20 12:06:15",
      "description": "There are some issues in Step 7 of the Installer Wizard\r\n1. Even if there are some *required* changes in the 'Database' tab it allows to go to the next step. Next should only be enabled if the required property has been provided with an input\r\n2. If there are some CRITICAL errors, the top notification bell should be 'Red' (similar to what we see if there is an empty required property) \r\n3. If I click on any of the above critical error properties it takes me to a wrong page. ",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Customize Service step issues"
   },
   {
      "_id": "13167069",
      "assignee": "aonishuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-06-20 05:51:06",
      "description": "Service auto-start for HDFS fails with the following error when using LZO libraries:\r\n{noformat:title=auto_errors-...txt}\r\n...\r\n  File \"/var/lib/ambari-agent/cache/common-services/HDFS/2.1.0.2.0/package/scripts/hdfs.py\", line 137, in hdfs\r\n    install_lzo_if_needed()\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/functions/lzo_utils.py\", line 87, in install_lzo_if_needed\r\n    Script.repository_util.create_repo_files()\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/functions/repository_util.py\", line 53, in create_repo_files\r\n    if self.command_repository.version_id is None:\r\nAttributeError: RepositoryUtil instance has no attribute 'command_repository'\r\n{noformat}\r\n{{repositoryFile}} entry is missing from auto-start commands.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Agent fails to auto-start HDFS when using LZO"
   },
   {
      "_id": "13166972",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-06-19 16:20:18",
      "description": "STOMP event update object can be corrupted before emitting to subscribers by other update handling.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Make STOMP updates immutable"
   },
   {
      "_id": "13166835",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-06-19 03:00:24",
      "description": "Rolling restarts not working when Kerberos Auto sign in is enabled for Ambari.  This is due to a missing user ID value in the {{requestschedule}} table, resulting in the Rolling Restart operation aborting with no deals in the ambari-server.log file.\r\n\r\n||schedule_id||cluster_id||authenticated_user_id||create_user||update_user||last_execution_status||\r\n|2|2|-1|rlevas|rlevas|IN_PROGRESS|\r\n\r\nThis occurs because the {{org.springframework.security.core.Authentication}} class stored in Ambari's SecurityContext for the authenticated user does not contain the authenticated user's ID data. Adjustments need to be made to the infrastructure to capture this data upon login and then retrieve it later, when needed. \r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Rolling restarts not working when Kerberos Auto sign in is enabled for Ambari"
   },
   {
      "_id": "13166709",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-06-18 13:51:17",
      "description": "The ability to pre-install packages on hosts using the following API request is broken since 2.6.0:\r\n\r\n{noformat}\r\n$ curl -X POST -d '{ \"HostStackVersions\": { \"repository_version\": \"2.6.1.0-129\", \"stack\": \"HDP\", \"version\": \"2.6\", \"cluster_name\": \"TEST\", \"force_non_member_install\": true, \"components\": [ { \"name\" : \"ZOOKEEPER_SERVER\" }, { \"name\": \"ZOOKEEPER_CLIENT\" } ] } }' http://localhost:8080/api/v1/hosts/${hostname}/stack_versions\r\n{noformat}\r\n\r\nThe request is accepted, but:\r\n\r\n* on 2.6.0: package installation (1st task) fails due to missing {{stack_name}} and {{stack_version}}\r\n* on 2.6.1: \"set all\" (2nd task) fails for the same reason",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Failed to force_non_member_install a stack version on hosts"
   },
   {
      "_id": "13166705",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-06-18 13:39:22",
      "description": "STR:\r\n1) Deploy cluster\r\n2) try to add a new host (only with client) to the cluster\r\n3) On step 4 try to get back on step 3 (using button back)\r\n\r\nActual result: Customer cannot back from step 4 to step 3 during adding a new host to cluster.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Customer cannot back from step 4 to step 3 during adding a new host to cluster"
   },
   {
      "_id": "13166702",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-06-18 13:19:21",
      "description": "- At Assign Slaves and Client page chose to have clients on all nodes\r\n- At Customize Services Page create a config group by navigating to ManageConfigGroups\r\n- create a new group\r\n- While adding hosts use filter COMPONENTS to find hosts with particular component\r\n- It doesn't list any host for HDFS client. It should actually list host based on what user selected in Assign slaves page",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Components Filter in \"Manage ConfigGroup at Customize Services page\" doesn't list hosts correctly"
   },
   {
      "_id": "13166677",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-06-18 10:20:11",
      "description": "Tried installing hive on a cluster where hive client install failed with following error\r\n\r\n{noformat}\r\nresource_management.core.exceptions.ExecutionFailed: Execution of 'cp --remove-destination /var/lib/ambari-agent/tmp/mysql-connector-java.jar /usr/hdp/current/hive-client/lib/mysql-connector-java.jar' returned 1. cp: cannot create regular file '/usr/hdp/current/hive-client/lib/mysql-connector-java.jar': No such file or directory\r\n{noformat}\r\n\r\nPost that it is unable to customize any configs since all links except Assign Masters was inactive",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Failure of component install leave ambari ui with inactive Customize Services"
   },
   {
      "_id": "13166540",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-06-16 14:10:39",
      "description": "Add notification to the Alert Groups not working.\r\n\r\nSTR:\r\n1. Navigate to alerts page\r\n2. Open Manage Alert Groups\r\n3. Select an Alert Group\r\n4. Add Notification by clicking Add and selecting a 'pre created' Alert Notification\r\n5. Click Save and close the popup, the alert group should be saved with selected notification type, but only an empty String is being saved.\r\n\r\nE.g API being invoked:\r\n\r\n{code:java}\r\nPUT https://<host>:<port>/api/v1/clusters/<cluster>/alert_groups/4\r\n\r\n{\"AlertGroup\":{\"name\":\"AMBARI_INFRA_SOLR\",\"definitions\":[14],\"targets\":[4]}}: \r\n{code}\r\n\r\nNotes:\r\n1. Observed that the auto fill for the notification is case sensitive, which is not ideal.\r\n2. Also observed trying to add another notification after performing the steps in STR, a 500 server error is thrown.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Add notification to the Alert Groups not working"
   },
   {
      "_id": "13166527",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-06-16 10:17:40",
      "description": "Running  ambari-server setup-ldap with use SSL option gives the following error:\r\n\r\n{code}\r\nTraceback (most recent call last):\r\n  File \"/usr/sbin/ambari-server.py\", line 1056, in <module>\r\n    mainBody()\r\n  File \"/usr/sbin/ambari-server.py\", line 1026, in mainBody\r\n    main(options, args, parser)\r\n  File \"/usr/sbin/ambari-server.py\", line 976, in main\r\n    action_obj.execute()\r\n  File \"/usr/sbin/ambari-server.py\", line 79, in execute\r\n    self.fn(*self.args, **self.kwargs)\r\n  File \"/usr/lib/ambari-server/lib/ambari_server/setupSecurity.py\", line 799, in setup_ldap\r\n    if get_YN_input(\"Do you want to remove these properties [y/n] (y)? \", True, options.trust_store_reconfigure):\r\nAttributeError: Values instance has no attribute 'trust_store_reconfigure'\r\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari setup-ldap does not prompt for ldaps cert path, even when use-ssl is set to true"
   },
   {
      "_id": "13166435",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-06-15 17:47:03",
      "description": "There are several failed install components and they report the incorrect duration.\r\n\r\nExample: Install Nodemanager failed and was executed only for a few seconds, whereas in the Duration column, it shows 16 hours.\r\n !Screen Shot 2018-06-15 at 12.12.38 PM.png! \r\n\r\nPrimarily because the output from the server has the end time as -1:\r\n{noformat}\r\n{\r\n  \"itemTotal\" : \"10\",\r\n  \"items\" : [\r\n    {\r\n      \"Requests\" : {\r\n        \"cluster_name\" : \"cl1\",\r\n        \"end_time\" : -1,\r\n        \"id\" : 31,\r\n        \"progress_percent\" : 100.0,\r\n        \"request_context\" : \"Install NFSGateway\",\r\n        \"request_status\" : \"FAILED\",\r\n        \"start_time\" : 1528983750924,\r\n        \"user_name\" : \"admin\"\r\n      }\r\n    },\r\n    {\r\n      \"Requests\" : {\r\n        \"cluster_name\" : \"cl1\",\r\n        \"end_time\" : -1,\r\n        \"id\" : 32,\r\n        \"progress_percent\" : 100.0,\r\n        \"request_context\" : \"Install NodeManager\",\r\n        \"request_status\" : \"FAILED\",\r\n        \"start_time\" : 1528983763421,\r\n        \"user_name\" : \"admin\"\r\n      }\r\n    },\r\n    {\r\n      \"Requests\" : {\r\n        \"cluster_name\" : \"cl1\",\r\n        \"end_time\" : -1,\r\n        \"id\" : 33,\r\n        \"progress_percent\" : 100.0,\r\n        \"request_context\" : \"Install YARN Client\",\r\n        \"request_status\" : \"FAILED\",\r\n        \"start_time\" : 1528983776062,\r\n        \"user_name\" : \"admin\"\r\n      }\r\n    },\r\n    {\r\n      \"Requests\" : {\r\n        \"cluster_name\" : \"cl1\",\r\n        \"end_time\" : 1528985439608,\r\n        \"id\" : 34,\r\n        \"progress_percent\" : 100.0,\r\n        \"request_context\" : \"Reinstall Failed Components\",\r\n        \"request_status\" : \"COMPLETED\",\r\n        \"start_time\" : 1528985380177,\r\n        \"user_name\" : \"admin\"\r\n      }\r\n    },\r\n    {\r\n      \"Requests\" : {\r\n        \"cluster_name\" : \"cl1\",\r\n        \"end_time\" : 1528985625102,\r\n        \"id\" : 35,\r\n        \"progress_percent\" : 100.0,\r\n        \"request_context\" : \"Reinstall Failed Components\",\r\n        \"request_status\" : \"COMPLETED\",\r\n        \"start_time\" : 1528985594981,\r\n        \"user_name\" : \"admin\"\r\n      }\r\n    },\r\n    {\r\n      \"Requests\" : {\r\n        \"cluster_name\" : \"cl1\",\r\n        \"end_time\" : 1528986079631,\r\n        \"id\" : 36,\r\n        \"progress_percent\" : 100.0,\r\n        \"request_context\" : \"put services into STARTED\",\r\n        \"request_status\" : \"COMPLETED\",\r\n        \"start_time\" : 1528986013070,\r\n        \"user_name\" : \"admin\"\r\n      }\r\n    },\r\n    {\r\n      \"Requests\" : {\r\n        \"cluster_name\" : \"cl1\",\r\n        \"end_time\" : 1529043756536,\r\n        \"id\" : 37,\r\n        \"progress_percent\" : 100.0,\r\n        \"request_context\" : \"Start Knox Gateway\",\r\n        \"request_status\" : \"FAILED\",\r\n        \"start_time\" : 1529043756451,\r\n        \"user_name\" : \"admin\"\r\n      }\r\n    },\r\n    {\r\n      \"Requests\" : {\r\n        \"cluster_name\" : \"cl1\",\r\n        \"end_time\" : -1,\r\n        \"id\" : 38,\r\n        \"progress_percent\" : 100.0,\r\n        \"request_context\" : \"Install MapReduce2 Client\",\r\n        \"request_status\" : \"FAILED\",\r\n        \"start_time\" : 1529044241508,\r\n        \"user_name\" : \"admin\"\r\n      }\r\n    },\r\n    {\r\n      \"Requests\" : {\r\n        \"cluster_name\" : \"cl1\",\r\n        \"end_time\" : -1,\r\n        \"id\" : 39,\r\n        \"progress_percent\" : 100.0,\r\n        \"request_context\" : \"Install Hive Client\",\r\n        \"request_status\" : \"FAILED\",\r\n        \"start_time\" : 1529044679827,\r\n        \"user_name\" : \"admin\"\r\n      }\r\n    },\r\n    {\r\n      \"Requests\" : {\r\n        \"cluster_name\" : \"cl1\",\r\n        \"end_time\" : -1,\r\n        \"id\" : 40,\r\n        \"progress_percent\" : 100.0,\r\n        \"request_context\" : \"Install Metrics Collector\",\r\n        \"request_status\" : \"FAILED\",\r\n        \"start_time\" : 1529045027390,\r\n        \"user_name\" : \"admin\"\r\n      }\r\n    }\r\n  ]\r\n}\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Duration for a failed BG Operation is incorrect"
   },
   {
      "_id": "13166430",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-06-15 17:04:09",
      "description": "Steps to reproduce:\r\n\r\n1. Make sure you have stable cluster\r\n\r\n2. add a new host - and make sure it fails with the installation at the end step.\r\n\r\n3. Now go to \"stack and versions\" screen - you will see the cluster in kind of messed up state.\r\n\r\nUsually customers may not see the 3rd step right after adding the host and if they observe after few days then it gives very wrong impression that cluster is it messed up state though it is not.\r\n\r\nOutput for host_version\r\n\r\n\r\n{noformat}\r\nselect * from host_version where host_id in ( 301, 551) and repo_version_id = 102\r\n\r\n'901','102','301','CURRENT'\r\n'1052','102','551','OUT_OF_SYNC'\r\n\r\n2nd row is problematic one.\r\n\r\n{noformat}\r\n\r\nWorkaround:\r\n\r\nRemove the host and add it again and make sure installation is not failing\r\nor\r\nchange the status of host_version to 'CURRENT'",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "cluster version is in invalid state"
   },
   {
      "_id": "13166380",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-06-15 14:33:40",
      "description": "During an upgrade, the upgrade wizard is very inefficient at the data that it pulls back. On larger upgrades, expanding groups in progress is practically unusable and can actually cause the browser to crash.\r\n\r\nI recently observed this on a small upgrade but quickly opening and closing the active group (see screenshot). The expansion of groups/tasks just sat there spinning.\r\n\r\nI think that the upgrade wizard needs to pull back a lot less data and possibly cache the majority of what it has in order to make it usable during a larger upgrade.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Web Client Pulls Back Too Much Information in Upgrade Wizard"
   },
   {
      "_id": "13166361",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-06-15 13:47:14",
      "description": "While installing a new cluster, if the Ranger-specific passwords do not meet the (non-obvious) requirements, failures will occur during the install Ranger task. Once this happens, there is no way for the user to go back and fix the issue. So the issue needs to be caught sooner.\r\n\r\nSTR\r\n# Create new Ambari 2.7.0 cluster\r\n# Include Ranger\r\n# Set simple passwords when prompted - for example: hadoop\r\n# Proceed to install\r\n# See failure",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Ranger server password checks are not performed during Cluster Install Wizard"
   },
   {
      "_id": "13166353",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-06-15 13:39:36",
      "description": "*STR*\r\n # Deployed cluster with Ambari version: 2.6.2\r\n # Upgrade Ambari to Target Version: 2.7.0\r\n # Restart all services with stale configs\r\n\r\n*Result*\r\nSome of the requests failed with below error\r\n{code:java}\r\nstderr: \r\nCaught an exception while executing custom service command: : 'Metadata for cluster_id=2 is missing. Check if server sent it.'; 'Metadata for cluster_id=2 is missing. Check if server sent it.'\r\n stdout:\r\nCaught an exception while executing custom service command: : 'Metadata for cluster_id=2 is missing. Check if server sent it.'; 'Metadata for cluster_id=2 is missing. Check if server sent it.'\r\n\r\nCommand failed after 1 tries{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Requests failed after Ambari upgrade with exception while executing custom service command"
   },
   {
      "_id": "13166328",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-06-15 11:19:07",
      "description": "Steps to reproduce:\r\n- Install Cluster with Ambari-2.7.0.0\r\n- Add Ranger service +  Ranger KMS service\r\n- Go to Action option of Ranger KMS service > Click on Add Ranger KMS server > Confirmation Pop up shows up, after clicking Confirm ADD option Install request is not triggered.\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Add Ranger Kms Server doesn't not trigger Install request while enabling HA"
   },
   {
      "_id": "13166086",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-06-14 12:19:36",
      "description": "Update the Save namespace commands based on available nameservices.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Update the Manage JN wizard step for multiple nameservice scenario"
   },
   {
      "_id": "13166050",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-06-14 09:33:24",
      "description": "If failing operation which is in retry cycle is canceled during blueprint\ninstall. The agent will still continue to execute the canceled task. Resulting\nin ActionQueue being stuck and no other task being able to start execution\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Canceling task during blueprint install results in agent not responding to any other tasks"
   },
   {
      "_id": "13165871",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-06-13 15:23:39",
      "description": "facing issue while trying to delete Druid Router, where the delete button is disabled. \r\n\r\nThe Test performs the following:\r\n* Select component from list (after clicking on add button)\r\n* Start component\r\n* Restart all component with stale config\r\n* Run Service check against service\r\n* Stop component\r\n* Delete component\r\n* Restart all component with stale config\r\n* Run Service check\r\n* Repeat the above steps for all possible components.\r\n\r\nNoticed that the delete button was not enabled for Druid Router only. When I accessed the cluster later, the delete button was enabled. This looks like an intermittent issue. Only once I could reproduce this on my local after doing various actions related to add/delete component.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Delete Button not enabled on Druid Router component"
   },
   {
      "_id": "13165859",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-06-13 14:41:15",
      "description": "Currently client components need to be specified in the blueprint once per mpack, and {{mpack_instance}} needs to be explicitly declared, which is a bit cumbersome.\r\n\r\n{{DependencyAndCardinalityValidator}} should be mpack-aware, and add client components from each mpack as required.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Blueprint should add service dependencies from specific mpack"
   },
   {
      "_id": "13165817",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-06-13 11:41:53",
      "description": "STR:\r\n1. On 26+ nodes cluster go to Hosts -> All Hosts\r\n2. Add any component to all hosts:\r\n3. Obverse this error from UI:\r\n{noformat}\r\napp.js:23508 Uncaught TypeError: Cannot read property 'get' of undefined\r\n    at app.js:23508\r\n    at Array.forEach (<anonymous>)\r\n    at Class._getComponentsFromServerForHostComponentsAddCallback (app.js:23507)\r\n    at Object.callback (app.js:23498)\r\n    at Object.getComponentsFromServerSuccessCallback (app.js:181958)\r\n    at Class.opt.success (app.js:181325)\r\n    at fire (vendor.js:1141)\r\n    at Object.fireWith [as resolveWith] (vendor.js:1252)\r\n    at done (vendor.js:8178)\r\n    at XMLHttpRequest.callback (vendor.js:8702)\r\n{noformat}\r\n\r\nAs per discussion with UI guys. This is because model is only available for first 25 hosts, and so for others it's not possible to check if heartbeat is not lost.\r\n\r\nPossibly the solution could be as simple as UI asking heartbeat state in scope of the request along with other info.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Cannot add component to 25+ hosts"
   },
   {
      "_id": "13165762",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         }
      ],
      "created": "2018-06-13 07:59:01",
      "description": "str:\r\n\r\n\r\n1) execute commands on hosts:\r\n\r\ndd if=/dev/zero of=/grid/0/fs bs=1 count=0 seek=10G\r\nmkfs.ext3 -F /grid/0/fs\r\nmkdir /grid/1/\r\nmount -o loop,rw /grid/0/fs /grid/1/\r\nchown cstm-hdfs:hadoop /grid/1/\r\n2) set DN dir property (dfs.datanode.data.dir) to \"/grid/0/hadoop/hdfs/data,/newdndir,/grid/1/hadoop/hdfs\" and restart needed services \r\n3) check that alert is not present \"DataNode Unmounted Data Dir\" (after 2 min)\r\n4) Stop DN(s)\r\n5) umount /grid/1/\r\n6) Start DN(s)\r\n7) check that alert is present",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "The alert \"DataNode Unmounted Data Dir\" did not appear"
   },
   {
      "_id": "13165684",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-06-12 22:07:01",
      "description": "When SSL is enabled and the python version is 2.7.14, accessing the Ambari server via the {{ambari-server}} CLI fails with\u00a0CERTIFICATE_VERIFY_FAILED.\r\n\r\n\u00a0\r\n{noformat:title=Example}\r\n-bash-4.2# ambari-server setup-sso -v\r\nUsing python /usr/bin/python\r\nSetting up SSO authentication properties...\r\nINFO: Loading properties from /etc/ambari-server/conf/ambari.properties\r\nINFO: Setup SSO.\r\nINFO: about to run command: ps -p 33705\r\nINFO:\r\nprocess_pid=107113\r\nINFO: Loading properties from /etc/ambari-server/conf/ambari.properties\r\nEnter Ambari Admin login: admin\r\nEnter Ambari Admin password:\r\nINFO: Fetching SSO configuration from DB\r\nINFO: Fetching information from Ambari's REST API\r\nTraceback (most recent call last):\r\n File \"/usr/sbin/ambari-server.py\", line 1056, in <module>\r\n mainBody()\r\n File \"/usr/sbin/ambari-server.py\", line 1026, in mainBody\r\n main(options, args, parser)\r\n File \"/usr/sbin/ambari-server.py\", line 976, in main\r\n action_obj.execute()\r\n File \"/usr/sbin/ambari-server.py\", line 90, in execute\r\n self.need_restart = self.fn(*self.args, **self.kwargs)\r\n File \"/usr/lib/ambari-server/lib/ambari_server/setupSso.py\", line 266, in setup_sso\r\n properties = get_sso_properties(ambari_properties, admin_login, admin_password)\r\n File \"/usr/lib/ambari-server/lib/ambari_server/setupSso.py\", line 221, in get_sso_properties\r\n response_code, json_data = get_json_via_rest_api(properties, admin_login, admin_password, SSO_CONFIG_API_ENTRYPOINT)\r\n File \"/usr/lib/ambari-server/lib/ambari_server/serverUtils.py\", line 206, in get_json_via_rest_api\r\n with closing(urllib2.urlopen(request)) as response:\r\n File \"/usr/lib64/python2.7/urllib2.py\", line 154, in urlopen\r\n return opener.open(url, data, timeout)\r\n File \"/usr/lib64/python2.7/urllib2.py\", line 429, in open\r\n response = self._open(req, data)\r\n File \"/usr/lib64/python2.7/urllib2.py\", line 447, in _open\r\n '_open', req)\r\n File \"/usr/lib64/python2.7/urllib2.py\", line 407, in _call_chain\r\n result = func(*args)\r\n File \"/usr/lib64/python2.7/urllib2.py\", line 1243, in https_open\r\n context=self._context)\r\n File \"/usr/lib64/python2.7/urllib2.py\", line 1200, in do_open\r\n raise URLError(err)\r\nurllib2.URLError: <urlopen error [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:661)>\r\n{noformat}\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "setup-sso in Ambari fails when SSL is enabled"
   },
   {
      "_id": "13165592",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-06-12 15:05:12",
      "description": "*STR*\r\n# Enable NameNode federation\r\n# Go to dashboard\r\n# Try to reorder some widgets (common or namespace-specific ones)\r\n\r\n*Expected result*\r\nNew widgets order is persisted\r\n\r\n*Actual result*\r\n- JS error is thrown: {{app.js:237946 Uncaught TypeError: Cannot read property 'getAttribute' of undefined}}\r\n- New order isn't persisted",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Reordering of dashboard widgets doesn't work after enabling NN federation"
   },
   {
      "_id": "13165544",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-06-12 12:10:53",
      "description": "After submitting login credentials, UI is stuck on loading data.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Ambari UI isn't loading in IE"
   },
   {
      "_id": "13165369",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-06-11 16:46:20",
      "description": "Server should guarantee execution command retry task will not stuck.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Guarantee execution command retrying task completion"
   },
   {
      "_id": "13165324",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-06-11 13:18:58",
      "description": "Server should not populate\u00a0STOMP update with null hash/timestamp.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Guarantee STOMP update contains not null hash/timestamp if exists"
   },
   {
      "_id": "13165320",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-06-11 12:52:43",
      "description": "STR:\r\n1. Navigate to Alerts> Manage Alert groups >  Create alert group e.g Test_group\r\n2. Add alerts to the alert groups and click Save button\r\n3. Navigate to Alerts> Manage Alert groups > Select Test_group and the alerts selected should be listed in the alert group, but only empty entry is available.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Adding alerts to alert groups not working"
   },
   {
      "_id": "13165306",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-06-11 11:45:30",
      "description": "STR:  \n1) Install ambari cluster with custom user configuration via BP  \nCluster: <http://172.27.14.154:8080>\n\nActual result: NN cannot start due do not have permission for creation of the\nfolder \"/var/run/hadoop/cstm-hdfs\"  \nLooks like some script changed permission for\n\n    \n    \n    \r\n    [root@ctr-e138-1518143905142-357962-01-000006 ~]# ls -la /var/run/ | grep \"hadoop\"\r\n    drwxr-xr-x  2 cstm-ams       hadoop   4096 Jun 11 01:56 ambari-metrics-monitor\r\n    drwxr-xr-x  6 root           root     4096 Jun 11 01:56 hadoop\r\n    \n\nNN Logs:\n\n    \n    \n    \r\n    stderr: \r\n    Traceback (most recent call last):\r\n      File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/HDFS/package/scripts/namenode.py\", line 414, in \r\n        NameNode().execute()\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 353, in execute\r\n        method(env)\r\n      File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/HDFS/package/scripts/namenode.py\", line 138, in start\r\n        upgrade_suspended=params.upgrade_suspended, env=env)\r\n      File \"/usr/lib/ambari-agent/lib/ambari_commons/os_family_impl.py\", line 89, in thunk\r\n        return fn(*args, **kwargs)\r\n      File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/HDFS/package/scripts/hdfs_namenode.py\", line 115, in namenode\r\n        format_namenode()\r\n      File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/HDFS/package/scripts/hdfs_namenode.py\", line 369, in format_namenode\r\n        logoutput=True\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/base.py\", line 166, in __init__\r\n        self.env.run()\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/environment.py\", line 160, in run\r\n        self.run_action(resource, action)\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/environment.py\", line 124, in run_action\r\n        provider_action()\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py\", line 263, in action_run\r\n        returns=self.resource.returns)\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/shell.py\", line 72, in inner\r\n        result = function(command, **kwargs)\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/shell.py\", line 102, in checked_call\r\n        tries=tries, try_sleep=try_sleep, timeout_kill_strategy=timeout_kill_strategy, returns=returns)\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/shell.py\", line 150, in _call_wrapper\r\n        result = _call(command, **kwargs_copy)\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/shell.py\", line 314, in _call\r\n        raise ExecutionFailed(err_msg, code, out, err)\r\n    resource_management.core.exceptions.ExecutionFailed: Execution of 'hdfs --config /usr/hdp/3.0.0.0-1469/hadoop/conf namenode -format -nonInteractive' returned 1. ######## Hortonworks #############\r\n    This is MOTD message, added for testing in qe infra\r\n    WARNING: /var/run/hadoop/cstm-hdfs does not exist. Creating.\r\n    mkdir: cannot create directory \u2018/var/run/hadoop/cstm-hdfs\u2019: Permission denied\r\n    ERROR: Unable to create /var/run/hadoop/cstm-hdfs. Aborting.\r\n     stdout:\r\n    2018-06-11 10:00:42,196 - Stack Feature Version Info: Cluster Stack=3.0, Command Stack=None, Command Version=3.0.0.0-1469 -> 3.0.0.0-1469\r\n    2018-06-11 10:00:42,308 - Using hadoop conf dir: /usr/hdp/3.0.0.0-1469/hadoop/conf\r\n    2018-06-11 10:00:43,323 - Stack Feature Version Info: Cluster Stack=3.0, Command Stack=None, Command Version=3.0.0.0-1469 -> 3.0.0.0-1469\r\n    2018-06-11 10:00:43,353 - Using hadoop conf dir: /usr/hdp/3.0.0.0-1469/hadoop/conf\r\n    2018-06-11 10:00:43,358 - Group['cstm-users'] {}\r\n    2018-06-11 10:00:43,364 - Group['cstm-ranger'] {}\r\n    2018-06-11 10:00:43,364 - Group['cstm-zeppelin'] {}\r\n    2018-06-11 10:00:43,365 - Group['hdfs'] {}\r\n    2018-06-11 10:00:43,365 - Group['cstm-livy'] {}\r\n    2018-06-11 10:00:43,365 - Group['hadoop'] {}\r\n    2018-06-11 10:00:43,366 - Group['cstm-knox'] {}\r\n    2018-06-11 10:00:43,366 - Group['cstm-spark'] {}\r\n    2018-06-11 10:00:43,368 - User['yarn-ats'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-06-11 10:00:43,371 - User['cstm-ranger'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['cstm-ranger', 'hadoop'], 'uid': None}\r\n    2018-06-11 10:00:43,373 - User['cstm-hive'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-06-11 10:00:43,376 - User['cstm-sqoop'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-06-11 10:00:43,378 - User['cstm-ams'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-06-11 10:00:43,381 - User['cstm-yarn'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-06-11 10:00:43,384 - User['cstm-tez'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['cstm-users', 'hadoop'], 'uid': None}\r\n    2018-06-11 10:00:43,386 - User['cstm-atlas'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-06-11 10:00:43,389 - User['cstm-storm'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-06-11 10:00:43,391 - User['cstm-knox'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop', 'cstm-knox'], 'uid': None}\r\n    2018-06-11 10:00:43,394 - User['cstm-kafka'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-06-11 10:00:43,397 - User['cstm-logsearch'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-06-11 10:00:43,399 - User['cstm-infra-solr'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-06-11 10:00:43,402 - User['cstm-hbase'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-06-11 10:00:43,404 - User['cstm-hdfs'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hdfs', 'hadoop'], 'uid': None}\r\n    2018-06-11 10:00:43,407 - User['cstm-mr'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-06-11 10:00:43,409 - User['ambari-qa'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['cstm-users', 'hadoop'], 'uid': None}\r\n    2018-06-11 10:00:43,412 - User['cstm-zeppelin'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['cstm-zeppelin', 'hadoop'], 'uid': None}\r\n    2018-06-11 10:00:43,414 - User['cstm-zookeeper'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-06-11 10:00:43,417 - User['cstm-livy'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['cstm-livy', 'hadoop'], 'uid': None}\r\n    2018-06-11 10:00:43,419 - User['cstm-oozie'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['cstm-users', 'hadoop'], 'uid': None}\r\n    2018-06-11 10:00:43,422 - User['cstm-spark'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop', 'cstm-spark'], 'uid': None}\r\n    2018-06-11 10:00:43,424 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0555}\r\n    2018-06-11 10:00:43,549 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] {'not_if': '(test $(id -u ambari-qa) -gt 1000) || (false)'}\r\n    2018-06-11 10:00:43,558 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] due to not_if\r\n    2018-06-11 10:00:43,558 - Directory['/tmp/hbase-hbase'] {'owner': 'cstm-hbase', 'create_parents': True, 'mode': 0775, 'cd_access': 'a'}\r\n    2018-06-11 10:00:43,696 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0555}\r\n    2018-06-11 10:00:43,819 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0555}\r\n    2018-06-11 10:00:43,942 - call['/var/lib/ambari-agent/tmp/changeUid.sh cstm-hbase'] {}\r\n    2018-06-11 10:00:43,953 - call returned (0, '1817')\r\n    2018-06-11 10:00:43,954 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh cstm-hbase /home/cstm-hbase,/tmp/cstm-hbase,/usr/bin/cstm-hbase,/var/log/cstm-hbase,/tmp/hbase-hbase 1817'] {'not_if': '(test $(id -u cstm-hbase) -gt 1000) || (false)'}\r\n    2018-06-11 10:00:43,961 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh cstm-hbase /home/cstm-hbase,/tmp/cstm-hbase,/usr/bin/cstm-hbase,/var/log/cstm-hbase,/tmp/hbase-hbase 1817'] due to not_if\r\n    2018-06-11 10:00:43,962 - Group['hdfs'] {}\r\n    2018-06-11 10:00:43,963 - User['cstm-hdfs'] {'fetch_nonlocal_groups': True, 'groups': ['hdfs', 'hadoop', u'hdfs']}\r\n    2018-06-11 10:00:43,964 - FS Type: HDFS\r\n    2018-06-11 10:00:43,964 - Directory['/etc/hadoop'] {'mode': 0755}\r\n    2018-06-11 10:00:44,026 - File['/usr/hdp/3.0.0.0-1469/hadoop/conf/hadoop-env.sh'] {'content': InlineTemplate(...), 'owner': 'root', 'group': 'hadoop'}\r\n    2018-06-11 10:00:44,116 - Directory['/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'] {'owner': 'cstm-hdfs', 'group': 'hadoop', 'mode': 01777}\r\n    2018-06-11 10:00:44,225 - Execute[('setenforce', '0')] {'not_if': '(! which getenforce ) || (which getenforce && getenforce | grep -q Disabled)', 'sudo': True, 'only_if': 'test -f /selinux/enforce'}\r\n    2018-06-11 10:00:44,235 - Skipping Execute[('setenforce', '0')] due to not_if\r\n    2018-06-11 10:00:44,236 - Directory['/grid/0/log/hdfs'] {'owner': 'root', 'create_parents': True, 'group': 'hadoop', 'mode': 0775, 'cd_access': 'a'}\r\n    2018-06-11 10:00:44,436 - Directory['/var/run/hadoop'] {'owner': 'root', 'create_parents': True, 'group': 'root', 'cd_access': 'a'}\r\n    2018-06-11 10:00:44,595 - Directory['/tmp/hadoop-cstm-hdfs'] {'owner': 'cstm-hdfs', 'create_parents': True, 'cd_access': 'a'}\r\n    2018-06-11 10:00:44,719 - File['/usr/hdp/3.0.0.0-1469/hadoop/conf/commons-logging.properties'] {'content': Template('commons-logging.properties.j2'), 'owner': 'root'}\r\n    2018-06-11 10:00:44,807 - File['/usr/hdp/3.0.0.0-1469/hadoop/conf/health_check'] {'content': Template('health_check.j2'), 'owner': 'root'}\r\n    2018-06-11 10:00:44,897 - File['/usr/hdp/3.0.0.0-1469/hadoop/conf/log4j.properties'] {'content': InlineTemplate(...), 'owner': 'cstm-hdfs', 'group': 'hadoop', 'mode': 0644}\r\n    2018-06-11 10:00:45,020 - File['/usr/hdp/3.0.0.0-1469/hadoop/conf/hadoop-metrics2.properties'] {'content': InlineTemplate(...), 'owner': 'cstm-hdfs', 'group': 'hadoop'}\r\n    2018-06-11 10:00:45,112 - File['/usr/hdp/3.0.0.0-1469/hadoop/conf/task-log4j.properties'] {'content': StaticFile('task-log4j.properties'), 'mode': 0755}\r\n    2018-06-11 10:00:45,233 - File['/usr/hdp/3.0.0.0-1469/hadoop/conf/configuration.xsl'] {'owner': 'cstm-hdfs', 'group': 'hadoop'}\r\n    2018-06-11 10:00:45,306 - File['/etc/hadoop/conf/topology_mappings.data'] {'owner': 'cstm-hdfs', 'content': Template('topology_mappings.data.j2'), 'only_if': 'test -d /etc/hadoop/conf', 'group': 'hadoop', 'mode': 0644}\r\n    2018-06-11 10:00:45,409 - File['/etc/hadoop/conf/topology_script.py'] {'content': StaticFile('topology_script.py'), 'only_if': 'test -d /etc/hadoop/conf', 'mode': 0755}\r\n    2018-06-11 10:00:45,545 - Skipping unlimited key JCE policy check and setup since the Java VM is not managed by Ambari\r\n    2018-06-11 10:00:46,488 - Using hadoop conf dir: /usr/hdp/3.0.0.0-1469/hadoop/conf\r\n    2018-06-11 10:00:46,490 - Stack Feature Version Info: Cluster Stack=3.0, Command Stack=None, Command Version=3.0.0.0-1469 -> 3.0.0.0-1469\r\n    2018-06-11 10:00:46,614 - Using hadoop conf dir: /usr/hdp/3.0.0.0-1469/hadoop/conf\r\n    2018-06-11 10:00:46,658 - Directory['/etc/security/limits.d'] {'owner': 'root', 'create_parents': True, 'group': 'root'}\r\n    2018-06-11 10:00:46,721 - File['/etc/security/limits.d/hdfs.conf'] {'content': Template('hdfs.conf.j2'), 'owner': 'root', 'group': 'root', 'mode': 0644}\r\n    2018-06-11 10:00:46,836 - File['/usr/hdp/3.0.0.0-1469/hadoop/conf/hdfs_dn_jaas.conf'] {'content': Template('hdfs_dn_jaas.conf.j2'), 'owner': 'cstm-hdfs', 'group': 'hadoop'}\r\n    2018-06-11 10:00:46,925 - File['/usr/hdp/3.0.0.0-1469/hadoop/conf/hdfs_nn_jaas.conf'] {'content': Template('hdfs_nn_jaas.conf.j2'), 'owner': 'cstm-hdfs', 'group': 'hadoop'}\r\n    2018-06-11 10:00:47,011 - XmlConfig['hadoop-policy.xml'] {'owner': 'cstm-hdfs', 'group': 'hadoop', 'conf_dir': '/usr/hdp/3.0.0.0-1469/hadoop/conf', 'configuration_attributes': {}, 'configurations': ...}\r\n    2018-06-11 10:00:47,026 - Generating config: /usr/hdp/3.0.0.0-1469/hadoop/conf/hadoop-policy.xml\r\n    2018-06-11 10:00:47,026 - File['/usr/hdp/3.0.0.0-1469/hadoop/conf/hadoop-policy.xml'] {'owner': 'cstm-hdfs', 'content': InlineTemplate(...), 'group': 'hadoop', 'mode': None, 'encoding': 'UTF-8'}\r\n    2018-06-11 10:00:47,118 - XmlConfig['ssl-client.xml'] {'owner': 'cstm-hdfs', 'group': 'hadoop', 'conf_dir': '/usr/hdp/3.0.0.0-1469/hadoop/conf', 'configuration_attributes': {}, 'configurations': ...}\r\n    2018-06-11 10:00:47,132 - Generating config: /usr/hdp/3.0.0.0-1469/hadoop/conf/ssl-client.xml\r\n    2018-06-11 10:00:47,133 - File['/usr/hdp/3.0.0.0-1469/hadoop/conf/ssl-client.xml'] {'owner': 'cstm-hdfs', 'content': InlineTemplate(...), 'group': 'hadoop', 'mode': None, 'encoding': 'UTF-8'}\r\n    2018-06-11 10:00:47,234 - Directory['/usr/hdp/3.0.0.0-1469/hadoop/conf/secure'] {'owner': 'root', 'create_parents': True, 'group': 'hadoop', 'cd_access': 'a'}\r\n    2018-06-11 10:00:47,489 - XmlConfig['ssl-client.xml'] {'owner': 'cstm-hdfs', 'group': 'hadoop', 'conf_dir': '/usr/hdp/3.0.0.0-1469/hadoop/conf/secure', 'configuration_attributes': {}, 'configurations': ...}\r\n    2018-06-11 10:00:47,503 - Generating config: /usr/hdp/3.0.0.0-1469/hadoop/conf/secure/ssl-client.xml\r\n    2018-06-11 10:00:47,504 - File['/usr/hdp/3.0.0.0-1469/hadoop/conf/secure/ssl-client.xml'] {'owner': 'cstm-hdfs', 'content': InlineTemplate(...), 'group': 'hadoop', 'mode': None, 'encoding': 'UTF-8'}\r\n    2018-06-11 10:00:47,602 - XmlConfig['ssl-server.xml'] {'owner': 'cstm-hdfs', 'group': 'hadoop', 'conf_dir': '/usr/hdp/3.0.0.0-1469/hadoop/conf', 'configuration_attributes': {}, 'configurations': ...}\r\n    2018-06-11 10:00:47,615 - Generating config: /usr/hdp/3.0.0.0-1469/hadoop/conf/ssl-server.xml\r\n    2018-06-11 10:00:47,615 - File['/usr/hdp/3.0.0.0-1469/hadoop/conf/ssl-server.xml'] {'owner': 'cstm-hdfs', 'content': InlineTemplate(...), 'group': 'hadoop', 'mode': None, 'encoding': 'UTF-8'}\r\n    2018-06-11 10:00:47,712 - XmlConfig['hdfs-site.xml'] {'owner': 'cstm-hdfs', 'group': 'hadoop', 'conf_dir': '/usr/hdp/3.0.0.0-1469/hadoop/conf', 'configuration_attributes': {u'final': {u'dfs.datanode.failed.volumes.tolerated': u'true', u'dfs.datanode.data.dir': u'true', u'dfs.namenode.http-address': u'true', u'dfs.namenode.name.dir': u'true', u'dfs.webhdfs.enabled': u'true'}}, 'configurations': ...}\r\n    2018-06-11 10:00:47,725 - Generating config: /usr/hdp/3.0.0.0-1469/hadoop/conf/hdfs-site.xml\r\n    2018-06-11 10:00:47,725 - File['/usr/hdp/3.0.0.0-1469/hadoop/conf/hdfs-site.xml'] {'owner': 'cstm-hdfs', 'content': InlineTemplate(...), 'group': 'hadoop', 'mode': None, 'encoding': 'UTF-8'}\r\n    2018-06-11 10:00:47,889 - XmlConfig['core-site.xml'] {'group': 'hadoop', 'conf_dir': '/usr/hdp/3.0.0.0-1469/hadoop/conf', 'xml_include_file': None, 'mode': 0644, 'configuration_attributes': {u'final': {u'fs.defaultFS': u'true'}}, 'owner': 'cstm-hdfs', 'configurations': ...}\r\n    2018-06-11 10:00:47,906 - Generating config: /usr/hdp/3.0.0.0-1469/hadoop/conf/core-site.xml\r\n    2018-06-11 10:00:47,906 - File['/usr/hdp/3.0.0.0-1469/hadoop/conf/core-site.xml'] {'owner': 'cstm-hdfs', 'content': InlineTemplate(...), 'group': 'hadoop', 'mode': 0644, 'encoding': 'UTF-8'}\r\n    2018-06-11 10:00:48,038 - Writing File['/usr/hdp/3.0.0.0-1469/hadoop/conf/core-site.xml'] because contents don't match\r\n    2018-06-11 10:00:48,093 - File['/usr/hdp/3.0.0.0-1469/hadoop/conf/slaves'] {'content': Template('slaves.j2'), 'owner': 'root'}\r\n    2018-06-11 10:00:48,181 - Repository['HDP-3.0-repo-1'] {'append_to_file': False, 'base_url': 'http://s3.amazonaws.com/dev.hortonworks.com/HDP/centos7/3.x/BUILDS/3.0.0.0-1469', 'action': ['create'], 'components': [u'HDP', 'main'], 'repo_template': '[{{repo_id}}]\\nname={{repo_id}}\\n{% if mirror_list %}mirrorlist={{mirror_list}}{% else %}baseurl={{base_url}}{% endif %}\\n\\npath=/\\nenabled=1\\ngpgcheck=0', 'repo_file_name': 'ambari-hdp-1', 'mirror_list': None}\r\n    2018-06-11 10:00:48,214 - File['/etc/yum.repos.d/ambari-hdp-1.repo'] {'content': '[HDP-3.0-repo-1]\\nname=HDP-3.0-repo-1\\nbaseurl=http://s3.amazonaws.com/dev.hortonworks.com/HDP/centos7/3.x/BUILDS/3.0.0.0-1469\\n\\npath=/\\nenabled=1\\ngpgcheck=0'}\r\n    2018-06-11 10:00:48,287 - Writing File['/etc/yum.repos.d/ambari-hdp-1.repo'] because contents don't match\r\n    2018-06-11 10:00:48,304 - Repository['HDP-3.0-GPL-repo-1'] {'append_to_file': True, 'base_url': 'http://s3.amazonaws.com/dev.hortonworks.com/HDP-GPL/centos7/3.x/BUILDS/3.0.0.0-1469', 'action': ['create'], 'components': [u'HDP-GPL', 'main'], 'repo_template': '[{{repo_id}}]\\nname={{repo_id}}\\n{% if mirror_list %}mirrorlist={{mirror_list}}{% else %}baseurl={{base_url}}{% endif %}\\n\\npath=/\\nenabled=1\\ngpgcheck=0', 'repo_file_name': 'ambari-hdp-1', 'mirror_list': None}\r\n    2018-06-11 10:00:48,329 - File['/etc/yum.repos.d/ambari-hdp-1.repo'] {'content': '[HDP-3.0-repo-1]\\nname=HDP-3.0-repo-1\\nbaseurl=http://s3.amazonaws.com/dev.hortonworks.com/HDP/centos7/3.x/BUILDS/3.0.0.0-1469\\n\\npath=/\\nenabled=1\\ngpgcheck=0\\n[HDP-3.0-GPL-repo-1]\\nname=HDP-3.0-GPL-repo-1\\nbaseurl=http://s3.amazonaws.com/dev.hortonworks.com/HDP-GPL/centos7/3.x/BUILDS/3.0.0.0-1469\\n\\npath=/\\nenabled=1\\ngpgcheck=0'}\r\n    2018-06-11 10:00:48,397 - Writing File['/etc/yum.repos.d/ambari-hdp-1.repo'] because contents don't match\r\n    2018-06-11 10:00:48,417 - Repository['HDP-UTILS-1.1.0.22-repo-1'] {'append_to_file': True, 'base_url': 'http://s3.amazonaws.com/dev.hortonworks.com/HDP-UTILS-1.1.0.22/repos/centos7', 'action': ['create'], 'components': [u'HDP-UTILS', 'main'], 'repo_template': '[{{repo_id}}]\\nname={{repo_id}}\\n{% if mirror_list %}mirrorlist={{mirror_list}}{% else %}baseurl={{base_url}}{% endif %}\\n\\npath=/\\nenabled=1\\ngpgcheck=0', 'repo_file_name': 'ambari-hdp-1', 'mirror_list': None}\r\n    2018-06-11 10:00:48,446 - File['/etc/yum.repos.d/ambari-hdp-1.repo'] {'content': '[HDP-3.0-repo-1]\\nname=HDP-3.0-repo-1\\nbaseurl=http://s3.amazonaws.com/dev.hortonworks.com/HDP/centos7/3.x/BUILDS/3.0.0.0-1469\\n\\npath=/\\nenabled=1\\ngpgcheck=0\\n[HDP-3.0-GPL-repo-1]\\nname=HDP-3.0-GPL-repo-1\\nbaseurl=http://s3.amazonaws.com/dev.hortonworks.com/HDP-GPL/centos7/3.x/BUILDS/3.0.0.0-1469\\n\\npath=/\\nenabled=1\\ngpgcheck=0\\n[HDP-UTILS-1.1.0.22-repo-1]\\nname=HDP-UTILS-1.1.0.22-repo-1\\nbaseurl=http://s3.amazonaws.com/dev.hortonworks.com/HDP-UTILS-1.1.0.22/repos/centos7\\n\\npath=/\\nenabled=1\\ngpgcheck=0'}\r\n    2018-06-11 10:00:48,518 - Writing File['/etc/yum.repos.d/ambari-hdp-1.repo'] because contents don't match\r\n    2018-06-11 10:00:48,540 - Stack Feature Version Info: Cluster Stack=3.0, Command Stack=None, Command Version=3.0.0.0-1469 -> 3.0.0.0-1469\r\n    2018-06-11 10:00:48,551 - Package['lzo'] {'retry_on_repo_unavailability': False, 'retry_count': 5}\r\n    2018-06-11 10:00:49,196 - Skipping installation of existing package lzo\r\n    2018-06-11 10:00:49,196 - Package['hadooplzo_3_0_0_0_1469'] {'retry_on_repo_unavailability': False, 'retry_count': 5}\r\n    2018-06-11 10:00:49,402 - Skipping installation of existing package hadooplzo_3_0_0_0_1469\r\n    2018-06-11 10:00:49,402 - Package['hadooplzo_3_0_0_0_1469-native'] {'retry_on_repo_unavailability': False, 'retry_count': 5}\r\n    2018-06-11 10:00:49,857 - Skipping installation of existing package hadooplzo_3_0_0_0_1469-native\r\n    2018-06-11 10:00:49,861 - Directory['/grid/0/hadoop/hdfs/namenode'] {'owner': 'cstm-hdfs', 'group': 'hadoop', 'create_parents': True, 'mode': 0755, 'cd_access': 'a'}\r\n    2018-06-11 10:00:50,128 - Directory['/usr/lib/ambari-logsearch-logfeeder/conf'] {'create_parents': True, 'mode': 0755, 'cd_access': 'a'}\r\n    2018-06-11 10:00:50,315 - Generate Log Feeder config file: /usr/lib/ambari-logsearch-logfeeder/conf/input.config-hdfs.json\r\n    2018-06-11 10:00:50,315 - File['/usr/lib/ambari-logsearch-logfeeder/conf/input.config-hdfs.json'] {'content': Template('input.config-hdfs.json.j2'), 'mode': 0644}\r\n    2018-06-11 10:00:50,410 - Skipping setting up secure ZNode ACL for HFDS as it's supported only for NameNode HA mode.\r\n    2018-06-11 10:00:50,415 - Called service start with upgrade_type: None\r\n    2018-06-11 10:00:50,415 - HDFS: Setup ranger: command retry not enabled thus skipping if ranger admin is down !\r\n    2018-06-11 10:00:50,417 - call['ambari-python-wrap /usr/bin/hdp-select status hadoop-client'] {'timeout': 20}\r\n    2018-06-11 10:00:50,450 - call returned (0, 'hadoop-client - 3.0.0.0-1469')\r\n    2018-06-11 10:00:50,451 - RangeradminV2: Skip ranger admin if it's down !\r\n    2018-06-11 10:00:50,493 - checked_call['/usr/bin/kinit -c /var/lib/ambari-agent/tmp/curl_krb_cache/ranger_admin_calls_cstm-hdfs_cc_dadca887d91334850d23f3a2088dac346b6b85f0706813c3f2212147 -kt /etc/security/keytabs/nn.service.keytab nn/ctr-e138-1518143905142-357962-01-000006.hwx.site@EXAMPLE.COM > /dev/null'] {'user': 'cstm-hdfs'}\r\n    2018-06-11 10:00:50,611 - checked_call returned (0, '######## Hortonworks #############\\nThis is MOTD message, added for testing in qe infra')\r\n    2018-06-11 10:00:50,612 - call['ambari-sudo.sh su cstm-hdfs -l -s /bin/bash -c 'curl --location-trusted -k --negotiate -u : -b /var/lib/ambari-agent/tmp/cookies/b6b261de-4ab4-4c87-a271-bbaa9fc306f4 -c /var/lib/ambari-agent/tmp/cookies/b6b261de-4ab4-4c87-a271-bbaa9fc306f4 -w '\"'\"'%{http_code}'\"'\"' http://ctr-e138-1518143905142-357962-01-000006.hwx.site:6080/login.jsp --connect-timeout 10 --max-time 12 -o /dev/null 1>/tmp/tmpzBm4Ow 2>/tmp/tmprJvRDV''] {'quiet': False, 'env': {'KRB5CCNAME': '/var/lib/ambari-agent/tmp/curl_krb_cache/ranger_admin_calls_cstm-hdfs_cc_dadca887d91334850d23f3a2088dac346b6b85f0706813c3f2212147'}}\r\n    2018-06-11 10:00:50,729 - call returned (0, '######## Hortonworks #############\\nThis is MOTD message, added for testing in qe infra')\r\n    2018-06-11 10:00:50,729 - get_user_call_output returned (0, u'200', u'  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\\n                                 Dload  Upload   Total   Spent    Left  Speed\\n\\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\\r100  3630  100  3630    0     0  1954k      0 --:--:-- --:--:-- --:--:-- 3544k')\r\n    2018-06-11 10:00:50,731 - call['/usr/bin/klist -s /var/lib/ambari-agent/tmp/curl_krb_cache/ranger_admin_calls_cstm-hdfs_cc_dadca887d91334850d23f3a2088dac346b6b85f0706813c3f2212147'] {'user': 'cstm-hdfs'}\r\n    2018-06-11 10:00:50,843 - call returned (0, '######## Hortonworks #############\\nThis is MOTD message, added for testing in qe infra')\r\n    2018-06-11 10:00:50,844 - call['ambari-sudo.sh su cstm-hdfs -l -s /bin/bash -c 'curl --location-trusted -k --negotiate -u : -b /var/lib/ambari-agent/tmp/cookies/49ac670c-d187-4b4c-8c13-32bc9f8ac060 -c /var/lib/ambari-agent/tmp/cookies/49ac670c-d187-4b4c-8c13-32bc9f8ac060 '\"'\"'http://ctr-e138-1518143905142-357962-01-000006.hwx.site:6080/service/public/v2/api/service?serviceName=cl1_hadoop&serviceType=hdfs&isEnabled=true'\"'\"' --connect-timeout 10 --max-time 12 -X GET 1>/tmp/tmpskeV7D 2>/tmp/tmpIUYUU7''] {'quiet': False, 'env': {'KRB5CCNAME': '/var/lib/ambari-agent/tmp/curl_krb_cache/ranger_admin_calls_cstm-hdfs_cc_dadca887d91334850d23f3a2088dac346b6b85f0706813c3f2212147'}}\r\n    2018-06-11 10:00:50,984 - call returned (0, '######## Hortonworks #############\\nThis is MOTD message, added for testing in qe infra')\r\n    2018-06-11 10:00:50,985 - get_user_call_output returned (0, u'[{\"id\":2,\"guid\":\"92620a51-bd3f-44f1-aed6-29a7c80809ec\",\"isEnabled\":true,\"createdBy\":\"cstm-hdfs\",\"updatedBy\":\"cstm-hdfs\",\"createTime\":1528682426000,\"updateTime\":1528682426000,\"version\":1,\"type\":\"hdfs\",\"name\":\"cl1_hadoop\",\"description\":\"hdfs repo\",\"configs\":{\"commonNameForCertificate\":\"-\",\"dfs.secondary.namenode.kerberos.principal\":\"nn/ctr-e138-1518143905142-357962-01-000006.hwx.site@EXAMPLE.COM\",\"hadoop.security.authentication\":\"kerberos\",\"hadoop.security.auth_to_local\":\"RULE:[1:$1@$0](ambari-qa@EXAMPLE.COM)s/.*/ambari-qa/\\\\nRULE:[1:$1@$0](cstm-hbase@EXAMPLE.COM)s/.*/cstm-hbase/\\\\nRULE:[1:$1@$0](cstm-hdfs@EXAMPLE.COM)s/.*/cstm-hdfs/\\\\nRULE:[1:$1@$0](cstm-spark@EXAMPLE.COM)s/.*/cstm-spark/\\\\nRULE:[1:$1@$0](cstm-zeppelin@EXAMPLE.COM)s/.*/cstm-zeppelin/\\\\nRULE:[1:$1@$0](yarn-ats@EXAMPLE.COM)s/.*/yarn-ats/\\\\nRULE:[1:$1@$0](.*@EXAMPLE.COM)s/@.*//\\\\nRULE:[2:$1@$0](activity_analyzer@EXAMPLE.COM)s/.*/activity_analyzer/\\\\nRULE:[2:$1@$0](activity_explorer@EXAMPLE.COM)s/.*/activity_explorer/\\\\nRULE:[2:$1@$0](amshbase@EXAMPLE.COM)s/.*/cstm-ams/\\\\nRULE:[2:$1@$0](amsmon@EXAMPLE.COM)s/.*/cstm-ams/\\\\nRULE:[2:$1@$0](amszk@EXAMPLE.COM)s/.*/cstm-ams/\\\\nRULE:[2:$1@$0](atlas@EXAMPLE.COM)s/.*/cstm-atlas/\\\\nRULE:[2:$1@$0](ats-hbase@EXAMPLE.COM)s/.*/yarn-ats/\\\\nRULE:[2:$1@$0](cstm-knox@EXAMPLE.COM)s/.*/cstm-knox/\\\\nRULE:[2:$1@$0](cstm-livy@EXAMPLE.COM)s/.*/cstm-livy/\\\\nRULE:[2:$1@$0](dn@EXAMPLE.COM)s/.*/cstm-hdfs/\\\\nRULE:[2:$1@$0](hbase@EXAMPLE.COM)s/.*/cstm-hbase/\\\\nRULE:[2:$1@$0](hive@EXAMPLE.COM)s/.*/cstm-hive/\\\\nRULE:[2:$1@$0](jhs@EXAMPLE.COM)s/.*/cstm-mr/\\\\nRULE:[2:$1@$0](nfs@EXAMPLE.COM)s/.*/cstm-hdfs/\\\\nRULE:[2:$1@$0](nm@EXAMPLE.COM)s/.*/cstm-yarn/\\\\nRULE:[2:$1@$0](nn@EXAMPLE.COM)s/.*/cstm-hdfs/\\\\nRULE:[2:$1@$0](oozie@EXAMPLE.COM)s/.*/cstm-oozie/\\\\nRULE:[2:$1@$0](rangeradmin@EXAMPLE.COM)s/.*/cstm-ranger/\\\\nRULE:[2:$1@$0](rangertagsync@EXAMPLE.COM)s/.*/rangertagsync/\\\\nRULE:[2:$1@$0](rangerusersync@EXAMPLE.COM)s/.*/rangerusersync/\\\\nRULE:[2:$1@$0](rm@EXAMPLE.COM)s/.*/cstm-yarn/\\\\nRULE:[2:$1@$0](yarn@EXAMPLE.COM)s/.*/cstm-yarn/\\\\nDEFAULT\",\"dfs.datanode.kerberos.principal\":\"dn/ctr-e138-1518143905142-357962-01-000006.hwx.site@EXAMPLE.COM\",\"tag.download.auth.users\":\"cstm-hdfs\",\"password\":\"*****\",\"policy.download.auth.users\":\"cstm-hdfs\",\"hadoop.rpc.protection\":\"authentication\",\"dfs.namenode.kerberos.principal\":\"nn/ctr-e138-1518143905142-357962-01-000006.hwx.site@EXAMPLE.COM\",\"fs.default.name\":\"hdfs://ctr-e138-1518143905142-357962-01-000006.hwx.site:8020\",\"hadoop.security.authorization\":\"true\",\"username\":\"hadoop\"},\"policyVersion\":3,\"policyUpdateTime\":1528682427000,\"tagVersion\":1,\"tagUpdateTime\":1528682426000}]', u'  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\\n                                 Dload  Upload   Total   Spent    Left  Speed\\n\\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\\n\\r  0     0    0  2603    0     0  92268      0 --:--:-- --:--:-- --:--:-- 92268')\r\n    2018-06-11 10:00:50,986 - Hdfs Repository cl1_hadoop exist\r\n    2018-06-11 10:00:50,989 - File['/usr/hdp/3.0.0.0-1469/hadoop/conf/ranger-security.xml'] {'content': InlineTemplate(...), 'owner': 'cstm-hdfs', 'group': 'hadoop', 'mode': 0644}\r\n    2018-06-11 10:00:51,064 - Writing File['/usr/hdp/3.0.0.0-1469/hadoop/conf/ranger-security.xml'] because contents don't match\r\n    2018-06-11 10:00:51,124 - Directory['/etc/ranger/cl1_hadoop'] {'owner': 'cstm-hdfs', 'create_parents': True, 'group': 'hadoop', 'mode': 0775, 'cd_access': 'a'}\r\n    2018-06-11 10:00:51,306 - Directory['/etc/ranger/cl1_hadoop/policycache'] {'owner': 'cstm-hdfs', 'group': 'hadoop', 'create_parents': True, 'mode': 0775, 'cd_access': 'a'}\r\n    2018-06-11 10:00:51,515 - File['/etc/ranger/cl1_hadoop/policycache/hdfs_cl1_hadoop.json'] {'owner': 'cstm-hdfs', 'group': 'hadoop', 'mode': 0644}\r\n    2018-06-11 10:00:51,605 - XmlConfig['ranger-hdfs-audit.xml'] {'group': 'hadoop', 'conf_dir': '/usr/hdp/3.0.0.0-1469/hadoop/conf', 'mode': 0744, 'configuration_attributes': {}, 'owner': 'cstm-hdfs', 'configurations': ...}\r\n    2018-06-11 10:00:51,617 - Generating config: /usr/hdp/3.0.0.0-1469/hadoop/conf/ranger-hdfs-audit.xml\r\n    2018-06-11 10:00:51,618 - File['/usr/hdp/3.0.0.0-1469/hadoop/conf/ranger-hdfs-audit.xml'] {'owner': 'cstm-hdfs', 'content': InlineTemplate(...), 'group': 'hadoop', 'mode': 0744, 'encoding': 'UTF-8'}\r\n    2018-06-11 10:00:51,750 - XmlConfig['ranger-hdfs-security.xml'] {'group': 'hadoop', 'conf_dir': '/usr/hdp/3.0.0.0-1469/hadoop/conf', 'mode': 0744, 'configuration_attributes': {}, 'owner': 'cstm-hdfs', 'configurations': ...}\r\n    2018-06-11 10:00:51,767 - Generating config: /usr/hdp/3.0.0.0-1469/hadoop/conf/ranger-hdfs-security.xml\r\n    2018-06-11 10:00:51,768 - File['/usr/hdp/3.0.0.0-1469/hadoop/conf/ranger-hdfs-security.xml'] {'owner': 'cstm-hdfs', 'content': InlineTemplate(...), 'group': 'hadoop', 'mode': 0744, 'encoding': 'UTF-8'}\r\n    2018-06-11 10:00:51,892 - XmlConfig['ranger-policymgr-ssl.xml'] {'group': 'hadoop', 'conf_dir': '/usr/hdp/3.0.0.0-1469/hadoop/conf', 'mode': 0744, 'configuration_attributes': {}, 'owner': 'cstm-hdfs', 'configurations': ...}\r\n    2018-06-11 10:00:51,905 - Generating config: /usr/hdp/3.0.0.0-1469/hadoop/conf/ranger-policymgr-ssl.xml\r\n    2018-06-11 10:00:51,905 - File['/usr/hdp/3.0.0.0-1469/hadoop/conf/ranger-policymgr-ssl.xml'] {'owner': 'cstm-hdfs', 'content': InlineTemplate(...), 'group': 'hadoop', 'mode': 0744, 'encoding': 'UTF-8'}\r\n    2018-06-11 10:00:52,023 - Execute[(u'/usr/hdp/3.0.0.0-1469/ranger-hdfs-plugin/ranger_credential_helper.py', '-l', u'/usr/hdp/3.0.0.0-1469/ranger-hdfs-plugin/install/lib/*', '-f', '/etc/ranger/cl1_hadoop/cred.jceks', '-k', 'sslKeyStore', '-v', [PROTECTED], '-c', '1')] {'logoutput': True, 'environment': {'JAVA_HOME': u'/usr/lib/jvm/java-openjdk'}, 'sudo': True}\r\n    Using Java:/usr/lib/jvm/java-openjdk/bin/java\r\n    Alias sslKeyStore created successfully!\r\n    2018-06-11 10:00:53,259 - Execute[(u'/usr/hdp/3.0.0.0-1469/ranger-hdfs-plugin/ranger_credential_helper.py', '-l', u'/usr/hdp/3.0.0.0-1469/ranger-hdfs-plugin/install/lib/*', '-f', '/etc/ranger/cl1_hadoop/cred.jceks', '-k', 'sslTrustStore', '-v', [PROTECTED], '-c', '1')] {'logoutput': True, 'environment': {'JAVA_HOME': u'/usr/lib/jvm/java-openjdk'}, 'sudo': True}\r\n    Using Java:/usr/lib/jvm/java-openjdk/bin/java\r\n    Alias sslTrustStore created successfully!\r\n    2018-06-11 10:00:54,461 - File['/etc/ranger/cl1_hadoop/cred.jceks'] {'owner': 'cstm-hdfs', 'group': 'hadoop', 'mode': 0640}\r\n    2018-06-11 10:00:54,556 - File['/etc/ranger/cl1_hadoop/.cred.jceks.crc'] {'owner': 'cstm-hdfs', 'only_if': 'test -e /etc/ranger/cl1_hadoop/.cred.jceks.crc', 'group': 'hadoop', 'mode': 0640}\r\n    2018-06-11 10:00:54,652 - File['/etc/hadoop/conf/dfs.exclude'] {'owner': 'cstm-hdfs', 'content': Template('exclude_hosts_list.j2'), 'group': 'hadoop'}\r\n    2018-06-11 10:00:54,749 - call[('ls', u'/grid/0/hadoop/hdfs/namenode')] {}\r\n    2018-06-11 10:00:54,756 - call returned (0, '')\r\n    2018-06-11 10:00:54,757 - Execute['ls /grid/0/hadoop/hdfs/namenode | wc -l  | grep -q ^0$'] {}\r\n    2018-06-11 10:00:54,765 - Execute['hdfs --config /usr/hdp/3.0.0.0-1469/hadoop/conf namenode -format -nonInteractive'] {'logoutput': True, 'path': ['/usr/hdp/3.0.0.0-1469/hadoop/bin'], 'user': 'cstm-hdfs'}\r\n    ######## Hortonworks #############\r\n    This is MOTD message, added for testing in qe infra\r\n    WARNING: /var/run/hadoop/cstm-hdfs does not exist. Creating.\r\n    mkdir: cannot create directory \u2018/var/run/hadoop/cstm-hdfs\u2019: Permission denied\r\n    ERROR: Unable to create /var/run/hadoop/cstm-hdfs. Aborting.\r\n    \r\n    Command failed after 1 tries\r\n    \n\nArtifacts:\n\n    \n    \n    \r\n    http://testqelog.s3.amazonaws.com/qelogs/nat/107592/ambari-blueprints/split-6/nat-yc-r7-gfgs-ambari-blueprints-6/log_tree/index.html\r\n    \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": " NN cannot start due do not have permission for creation of the folde"
   },
   {
      "_id": "13165295",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-06-11 10:54:43",
      "description": "Please see screenshot attached\r\n- We have final property set in Settings tab as well as Advanced tab.\r\n- The one in Settings tab doesn't have blue icon where as it should be\r\n- While setting a property to final we should be seeing blue icon which is not happening in Settings tab. ",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Final flag (blue icon) is not set for Final properties in Settings tab"
   },
   {
      "_id": "13164958",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-06-08 15:55:20",
      "description": "Server should try to re-send execution command message when agent does\u00a0not confirmed\u00a0successful receiving.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Command retry on server when agent-server connection drops"
   },
   {
      "_id": "13164883",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-06-08 09:15:52",
      "description": "Steps to reproduce:-  \n1\\. Enable Autostart for all components.  \n2.restart one host which contain TIMELINE_READER component.  \n3\\. wait for 5-10 minute for autostart to take an effect\n\nverify from the logs  \ntail -f /var/log/ambari-agent/ambari-agent.log |grep -i RecoveryManager.py\n\n    \n    \n    \r\n    INFO 2018-06-07 08:32:32,487 RecoveryManager.py:213 - TIMELINE_READER needs recovery, desired = STARTED, and current = INSTALLED.\r\n    INFO 2018-06-07 08:32:34,488 RecoveryManager.py:213 - TIMELINE_READER needs recovery, desired = STARTED, and current = INSTALLED.\r\n    INFO 2018-06-07 08:32:36,489 RecoveryManager.py:213 - TIMELINE_READER needs recovery, desired = STARTED, and current = INSTALLED.\r\n    INFO 2018-06-07 08:32:38,490 RecoveryManager.py:213 - TIMELINE_READER needs recovery, desired = STARTED, and current = INSTALLED.\r\n    INFO 2018-06-07 08:32:40,491 RecoveryManager.py:213 - TIMELINE_READER needs recovery, desired = STARTED, and current = INSTALLED.\r\n    INFO 2018-06-07 08:32:42,496 RecoveryManager.py:213 - TIMELINE_READER needs recovery, desired = STARTED, and current = INSTALLED.\r\n    INFO 2018-06-07 08:32:44,501 RecoveryManager.py:213 - TIMELINE_READER needs recovery, desired = STARTED, and current = INSTALLED.\r\n    INFO 2018-06-07 08:32:46,505 RecoveryManager.py:213 - TIMELINE_READER needs recovery, desired = STARTED, and current = INSTALLED.\r\n    INFO 2018-06-07 08:32:48,518 RecoveryManager.py:213 - TIMELINE_READER needs recovery, desired = STARTED, and current = INSTALLED.\r\n    INFO 2018-06-07 08:32:50,519 RecoveryManager.py:213 - TIMELINE_READER needs recovery, desired = STARTED, and current = INSTALLED.\r\n    INFO 2018-06-07 08:32:52,521 RecoveryManager.py:213 - TIMELINE_READER needs recovery, desired = STARTED, and current = INSTALLED.\r\n    INFO 2018-06-07 08:32:54,533 RecoveryManager.py:213 - TIMELINE_READER needs recovery, desired = STARTED, and current = INSTALLED.\r\n    INFO 2018-06-07 08:32:56,534 RecoveryManager.py:213 - TIMELINE_READER needs recovery, desired = STARTED, and current = INSTALLED.\r\n    INFO 2018-06-07 08:32:58,535 RecoveryManager.py:213 - TIMELINE_READER needs recovery, desired = STARTED, and current = INSTALLED.\r\n    INFO 2018-06-07 08:33:00,537 RecoveryManager.py:213 - TIMELINE_READER needs recovery, desired = STARTED, and current = INSTALLED.\r\n    INFO 2018-06-07 08:33:02,538 RecoveryManager.py:213 - TIMELINE_READER needs recovery, desired = STARTED, and current = INSTALLED.\r\n    \n\nrepro cluster:-<http://172.22.107.230:8080/>  \nrepro job:- <http://linux-jenkins.qe.hortonworks.com:8080/job/Nightly-Start-\nEC2-Run-HDP/965535/>\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Autostart is not working for TIMELINE_READER. "
   },
   {
      "_id": "13164752",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-06-07 18:07:10",
      "description": "Test Kerberos Client fail after reenter of right realm value during kerberos enabling\r\n\r\nSTR:\r\n1)Start of kerberos enabling\r\n2)Select existing MIT\r\n3)Go to Configure Kerberos page\r\n4)Set wrong \"Realm name\" value. As an example: \"example.com\" (expected EXAMPLE.COM)\r\n5)Go to Install and Test Kerberos Client step\r\n6)Wait of Test Kerberos Client fail\r\n7)Back to Configure Kerberos step\r\n8)Enter right \"Realm name\" value\u00a0\r\n9)Go to Install and Test Kerberos Client step\r\n\r\nExpected:\r\nTest Kerberos Client pass successfully\r\n\r\nActual:\r\nTest Kerberos Client fail\r\n\r\nThe supposed main reason is using old realm value for principals creation:\r\n{code:java}\r\n2018-05-30 11:13:38,895 - Failed to create principal, cl1-053018@example.com - Failed to create service principal for cl1-053018@example.com\r\nSTDOUT: Authenticating as principal admin/admin@EXAMPLE.COM with existing credentials.\r\n\r\nSTDERR: WARNING: no policy specified for cl1-053018@example.com; defaulting to no policy\r\nadd_principal: No such entry in the database while creating \"cl1-053018@example.com\".\r\n\r\n\u0007\u0007\u0007Administration credentials NOT DESTROYED.\r\n{code}\r\nThis is happening only using MySQL.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Test Kerberos Client fail after reenter of right realm value"
   },
   {
      "_id": "13164723",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-06-07 15:50:52",
      "description": "Add Kerberos-related configuration recommendations to the stack advisor.\r\n* Add a new action, {{recommend-configurations-for-kerberos}}, to query services for only Kerberos-related configuration changes\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available",
         "stackadvisor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Add Kerberos-related configuration recommendations to the stack advisor"
   },
   {
      "_id": "13164668",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-06-07 11:40:19",
      "description": "Save button is disabled after adding the custom property\r\n\r\nSTR:\r\n# Navigate to Ranger page\r\n# Go to advanced tab of config page\r\n# Add custom property\r\n\r\nExpected:\r\nSave button is enabled\r\n\r\nActual:\r\nSave button is disabled",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Save button is disabled after adding the custom property"
   },
   {
      "_id": "13164448",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-06-06 12:48:24",
      "description": "Make\u00a0websocket outbound message buffer size configurable to prevent limit exceeding for large messages (agent configurations stomp updates).",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Increase outbound message buffer size"
   },
   {
      "_id": "13164434",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         }
      ],
      "created": "2018-06-06 11:38:48",
      "description": "When delete.topic.enable is set to false, ambari service check is not able to delete the topic and fails.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Kafka Service Check failed on https enabled/WE cluster after Ambari Upgrade. Error : Failed to check that topic exists"
   },
   {
      "_id": "13164246",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-06-05 18:21:16",
      "description": "*STR*\r\n# Deployed a cluster with HDP-3.0 and Ambari-2.7 (or upgrade from HDP-2.6 to HDP-3.0)\r\n# Go to HDFS Summary page\r\n# Observe the count of blocks under 'Corrupt Replica'\r\n\r\n*Result*\r\nAll blocks show as corrupt",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "HDFS Metrics shows all blocks as 'Corrupt Replicas'"
   },
   {
      "_id": "13164230",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-06-05 17:29:31",
      "description": "Alerts label isn't clickable at the service page after turning on mm for service\r\n\r\nSTR:\r\n# Go to the service page\r\n# Enable mm for service\r\n# Try to click alerts(bell) icon for the current service\r\n\r\nExpected:\r\nWill open alerts window\r\n\r\nActual\r\nNothing happens",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Alerts label isn't clickable at the service page after turning on mm for service"
   },
   {
      "_id": "13163873",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-06-04 14:48:48",
      "description": "At present service summary page displays \"Components Status Summary\" and \"Service Metrics\". We should also display Mpack Info in the Summary Page as follows\r\n\r\n{code}\r\nSummary:\r\n    Mpack:   HDPCORE (1.0.0-b123)\r\n    Components:    \r\n                              Started           Started\r\n                              NAMENODE          SNAMENODE\r\n    Service Metrics:\r\n{code}\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Display Mpack Info on Service Summary Page"
   },
   {
      "_id": "13163814",
      "assignee": "aonishuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-06-04 12:11:57",
      "description": "Autostart is not working for the following components:-\r\n\r\nTIMELINE_READER\r\n HIVE_SERVER\r\n SPARK2_THRIFTSERVER\r\n HISTORYSERVER\r\n HBASE_MASTER\r\n ZEPPELIN_MASTER\r\n OOZIE_SERVER\r\n APP_TIMELINE_SERVER\r\n SPARK2_JOBHISTORYSERVER\r\n\r\n\u00a0{code}\r\n\r\n[root@re-nat-yc-r7-nubs-ambari-autostart-1-1 ~]# tail -f /var/log/ambari-agent/ambari-agent.log |grep -i RecoveryManager.py\r\n INFO 2018-06-04 11:31:51,233 RecoveryManager.py:213 - TIMELINE_READER needs recovery, desired = STARTED, and current = INSTALLED.\r\n INFO 2018-06-04 11:31:51,236 RecoveryManager.py:213 - SPARK2_THRIFTSERVER needs recovery, desired = STARTED, and current = INSTALLED.\r\n INFO 2018-06-04 11:31:51,238 RecoveryManager.py:213 - ZEPPELIN_MASTER needs recovery, desired = STARTED, and current = INSTALLED.\r\n INFO 2018-06-04 11:31:51,250 RecoveryManager.py:213 - HISTORYSERVER needs recovery, desired = STARTED, and current = INSTALLED.\r\n INFO 2018-06-04 11:31:51,251 RecoveryManager.py:213 - HIVE_SERVER needs recovery, desired = STARTED, and current = INSTALLED.\r\n INFO 2018-06-04 11:31:51,254 RecoveryManager.py:213 - HBASE_MASTER needs recovery, desired = STARTED, and current = INSTALLED.\r\n INFO 2018-06-04 11:31:51,255 RecoveryManager.py:213 - APP_TIMELINE_SERVER needs recovery, desired = STARTED, and current = INSTALLED.\r\n INFO 2018-06-04 11:31:51,257 RecoveryManager.py:213 - HIVE_METASTORE needs recovery, desired = STARTED, and current = INSTALLED.\r\n INFO 2018-06-04 11:31:51,258 RecoveryManager.py:213 - SPARK2_JOBHISTORYSERVER needs recovery, desired = STARTED, and current = INSTALLED.\r\n INFO 2018-06-04 11:31:51,261 RecoveryManager.py:213 - OOZIE_SERVER needs recovery, desired = STARTED, and current = INSTALLED.\r\n\r\n\u00a0{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "AutoStart Is not working for some of the components in the cluster"
   },
   {
      "_id": "13163811",
      "assignee": "amagyar",
      "components": [],
      "created": "2018-06-04 11:57:04",
      "description": "1) Deployed cluster with Ambari version: 2.6.2.0-155 and HDP version: 2.6.5.0-292 in an unsecure cluster.\r\n2) Upgrade Ambari to 2.7.0.0-630\r\n\r\n{code}\r\nTraceback (most recent call last):\r\n  File \"/var/lib/ambari-agent/cache/stack-hooks/before-ANY/scripts/hook.py\", line 35, in <module>\r\n    BeforeAnyHook().execute()\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 353, in execute\r\n    method(env)\r\n  File \"/var/lib/ambari-agent/cache/stack-hooks/before-ANY/scripts/hook.py\", line 29, in hook\r\n    setup_users()\r\n  File \"/var/lib/ambari-agent/cache/stack-hooks/before-ANY/scripts/shared_initialization.py\", line 50, in setup_users\r\n    groups = params.user_to_groups_dict[user],\r\nKeyError: u'livy'\r\nError: Error: Unable to run the custom hook script ['/usr/bin/python', '/var/lib/ambari-agent/cache/stack-hooks/before-ANY/scripts/hook.py', 'ANY', '/var/lib/ambari-agent/data/command-232.json', '/var/lib/ambari-agent/cache/stack-hooks/before-ANY', '/var/lib/ambari-agent/data/structured-out-232.json', 'INFO', '/var/lib/ambari-agent/tmp', 'PROTOCOL_TLSv1_2', '']\r\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Atlas fails to start in an unsecure cluster after Ambari Upgrade . Error - Unable to run the custom hook script"
   },
   {
      "_id": "13163806",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-06-04 11:36:50",
      "description": "There are NameNode widgets on host summary page which are specific for the namespace containing this host. Since HDFS DIsk Usage metrics is an aggregate from all the namespaces, the corresponding widget on host page is confusing and should be removed from there.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Remove HDFS Disk Usage widget from host summary page"
   },
   {
      "_id": "13163803",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-06-04 11:20:42",
      "description": "On Clicking Upgrade on upgrade history tab under Stacks and Versions , details (logs etc) are not loading for upgrade tasks. JS error is seen in the console. Attaching screenshot .",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Upgrade Task details is not loading in Upgrade History Details Window."
   },
   {
      "_id": "13163243",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-31 18:42:40",
      "description": "We need to make a few changes to the HDFS Summary screen when NN Federation is enabled.  We're seeing the HDFS fs usage data duplicated in each namespace, when it should be separated out in a new section.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Duplicate data is showing up when enabling NN Federation"
   },
   {
      "_id": "13163125",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-05-31 12:02:54",
      "description": "Server metadata cache should always have\u00a0actual hash.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Server metadata cache does not have valid hash after updates with no any registered agent"
   },
   {
      "_id": "13163100",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-05-31 08:50:43",
      "description": "Ambari server install is failing at db create phase\r\n{noformat}\r\n2018-05-28 09:49:40,565|executor.py.165|DEBUG|13917|MainThread|172.27.17.22|executing the command='mysql --user=ambaricustomuser --password=bigdatacustom < /tmp/createDB.sql'\r\n2018-05-28 09:49:40,822|executor.py.165|DEBUG|13917|Thread-165|stdout: mysql: [Warning] Using a password on the command line interface can be insecure.\r\n2018-05-28 09:49:40,822|executor.py.165|DEBUG|13917|Thread-165|stdout: ERROR 1067 (42000) at line 330 in file: '/tmp/Ambari-DDL-MySQL-CREATE.sql': Invalid default value for 'update_time'\r\n2018-05-28 09:49:40,822|executor.py.128|ERROR|13917|MainThread|command='mysql --user=ambaricustomuser --password=bigdatacustom < /tmp/createDB.sql' execution failed with exitcode=1\r\n2018-05-28 09:49:40,823|executor.py.116|INFO|13917|MainThread|command='mysql --user=ambaricustomuser --password=bigdatacustom < /tmp/createDB.sql' execution re-try #1\r\n2018-05-28 09:49:41,250|executor.py.165|DEBUG|13917|Thread-166|stdout: mysql: [Warning] Using a password on the command line interface can be insecure.\r\n2018-05-28 09:49:41,250|executor.py.165|DEBUG|13917|Thread-166|stdout: ERROR 1067 (42000) at line 330 in file: '/tmp/Ambari-DDL-MySQL-CREATE.sql': Invalid default value for 'update_time'\r\n2018-05-28 09:49:41,251|executor.py.128|ERROR|13917|MainThread|command='mysql --user=ambaricustomuser --password=bigdatacustom < /tmp/createDB.sql' execution failed with exitcode=1\r\n2018-05-28 09:49:41,252|executor.py.116|INFO|13917|MainThread|command='mysql --user=ambaricustomuser --password=bigdatacustom < /tmp/createDB.sql' execution re-try #2\r\n2018-05-28 09:49:41,561|executor.py.165|DEBUG|13917|Thread-167|stdout: mysql: [Warning] Using a password on the command line interface can be insecure.\r\n2018-05-28 09:49:41,561|executor.py.165|DEBUG|13917|Thread-167|stdout: ERROR 1067 (42000) at line 330 in file: '/tmp/Ambari-DDL-MySQL-CREATE.sql': Invalid default value for 'update_time'\r\n2018-05-28 09:49:41,561|executor.py.128|ERROR|13917|MainThread|command='mysql --user=ambaricustomuser --password=bigdatacustom < /tmp/createDB.sql' execution failed with exitcode=1\r\n{noformat}\r\nAmbari server version - 2.7.0.0-568\r\nMysql version - 5.7.21\r\n\r\nThe root cause is (per documentation):\r\n{noformat}\r\nNOW() (or its synonyms) can be used as the default value for TIMESTAMP columns as well as,\r\nsince MariaDB 10.0.1, DATETIME columns. Before MariaDB 10.0.1, it was only possible for a single TIMESTAMP \r\ncolumn per table to contain the CURRENT_TIMESTAMP as its default.\r\n{noformat}\r\nIn\u00a0_user_authentication_\u00a0there is another TIMESTAMP column with default value of CURRENT_TIMESTAMP called '_create_time_' and this causes the issue in older versions (< v10).\r\n\r\nFor the sake of consistency the following columns' type should be changed to BIGINT (defaulting to 0):\r\n * users.create_time\r\n * user_authentication.create_time\r\n * user_authentication.update_time\r\n\r\n\u00a0",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Ambari server installation failing on debian cluster with mysql db"
   },
   {
      "_id": "13163098",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2018-05-31 08:45:40",
      "description": "running hive stack advisor when tez + druid is installed gives\r\n\r\n{code}\r\nTraceback (most recent call last):\r\n  File \"/var/lib/ambari-server/resources/scripts/stack_advisor.py\", line 178, in <module>\r\n    main(sys.argv)\r\n  File \"/var/lib/ambari-server/resources/scripts/stack_advisor.py\", line 132, in main\r\n    result = stackAdvisor.validateConfigurations(services, hosts)\r\n  File \"/var/lib/ambari-server/resources/scripts/../stacks/stack_advisor.py\", line 1059, in validateConfigurations\r\n    validationItems = self.getConfigurationsValidationItems(services, hosts)\r\n  File \"/var/lib/ambari-server/resources/scripts/../stacks/stack_advisor.py\", line 1446, in getConfigurationsValidationItems\r\n    recommendations = self.recommendConfigurations(services, hosts)\r\n  File \"/var/lib/ambari-server/resources/scripts/../stacks/stack_advisor.py\", line 1608, in recommendConfigurations\r\n    servicesList)\r\n  File \"/var/lib/ambari-server/resources/scripts/../stacks/stack_advisor.py\", line 1549, in recommendConfigGroupsConfigurations\r\n    serviceAdvisor.getServiceConfigurationRecommendations(configurations, cgClusterSummary, cgServices, cgHosts)\r\n  File \"/var/lib/ambari-server/resources/stacks/HDP/3.0/services/HIVE/service_advisor.py\", line 127, in getServiceConfigurationRecommendations\r\n    recommender.recommendHiveConfigurationsFromHDP30(configurations, clusterData, services, hosts)\r\n  File \"/var/lib/ambari-server/resources/stacks/HDP/3.0/services/HIVE/service_advisor.py\", line 196, in recommendHiveConfigurationsFromHDP30\r\n    druid_coordinator_host_port = str(host['Hosts']['host_name']) + \":\" + str(\r\nUnboundLocalError: local variable 'host' referenced before assignment\r\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "stack advisor error : UnboundLocalError: local variable 'host' referenced before assignment"
   },
   {
      "_id": "13163074",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-05-31 07:01:56",
      "description": "We should add logic to the pre req to see if the regen keytab task is present in the upgrade pack",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "\"Ambari persisted credential store\" pre check appearing in Patch Upgrade."
   },
   {
      "_id": "13163009",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-05-30 21:35:14",
      "description": "credential_store_helper.get_password_from_credential_store does not return the correct password string.\u00a0\r\n\r\n\u00a0",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "credential_store_helper.get_password_from_credential_store does not return the correct password string"
   },
   {
      "_id": "13162971",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-05-30 18:49:17",
      "description": "Some host components are missing from the list response, but can be queried individually:\r\n\r\n{noformat}\r\n$ curl \"http://c7401:8080/api/v1/clusters/TEST/hosts/c7401/host_components\" | jq -r '.items[].href'\r\nhttp://c7401:8080/api/v1/clusters/TEST/hosts/c7401/host_components/1\r\nhttp://c7401:8080/api/v1/clusters/TEST/hosts/c7401/host_components/2\r\nhttp://c7401:8080/api/v1/clusters/TEST/hosts/c7401/host_components/3\r\nhttp://c7401:8080/api/v1/clusters/TEST/hosts/c7401/host_components/4\r\n$ curl --head \"http://c7401:8080/api/v1/clusters/TEST/hosts/c7401/host_components/5\"\r\nHTTP/1.1 200 OK\r\n$ curl --head \"http://c7401:8080/api/v1/clusters/TEST/hosts/c7401/host_components/6\"\r\nHTTP/1.1 200 OK\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Host components API call doesn't return all host components"
   },
   {
      "_id": "13162898",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         }
      ],
      "created": "2018-05-30 13:32:41",
      "description": "Agent should properly limit report size instead of limiting line count.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Agent can send too large websocket message with command output."
   },
   {
      "_id": "13162861",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-30 10:17:33",
      "description": "There are two issues over here.\r\n*1st issue:*\r\nThis seems to be a functional bug. As it seems from the attached screenshot that even after API call was completed content was not rendered.\r\n\r\n*2nd issue:*\r\nThere seems to be a performance issue. UI asks for all tasks fields instead of only ones that are needed making api call really expensive. Expected behavior is that only status should be asked for and when user clicks on a task then  log for that task should be requested. ",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Express Upgrade: Clicking on upgrade item shows no tasks on large clusters"
   },
   {
      "_id": "13162208",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-05-26 06:01:20",
      "description": "STR:\r\n\r\n# Enable parallel execution in Ambari Agent\r\n# Deploy cluster via blueprint, placing Spark2 Thrift Server on the same node as Hive Server Interactive\r\n\r\nResult: Spark2 Thrift Server runs into the following error during startup:\r\n\r\n{noformat}\r\nZooKeeperHiveClientException: Unable to read HiveServer2 configs from ZooKeeper\r\n...\r\nKeeperErrorCode = NoNode for /hiveserver2-hive2\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Spark2 Thrift Server fails to start if LLAP and parallel execution are enabled"
   },
   {
      "_id": "13162111",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-05-25 15:36:47",
      "description": "*STR*\r\n# Deployed cluster with Ambari version: 2.6.0.0-267 and HDP version: 2.6.0.3-8 (UI based install and cluster was kerberized)\r\n# Upgrade Ambari to Target Version: 2.7.0.0-588\r\n# Start EU to HDP-3.0.0.0-1390\r\n\r\n*Result*\r\nObserved following error at Timeline Reader v2 start:\r\n{code}\r\n2018-05-25 11:47:44,940 INFO  timeline.RollingLevelDBTimelineStore (RollingLevelDBTimelineStore.java:run(404)) - Deletion thread received interrupt, exiting\r\n2018-05-25 11:47:44,941 ERROR applicationhistoryservice.ApplicationHistoryServer (ApplicationHistoryServer.java:launchAppHistoryServer(180)) - Error starting ApplicationHistoryServer\r\norg.apache.hadoop.yarn.exceptions.YarnRuntimeException: AHSWebApp failed to start.\r\n        at org.apache.hadoop.yarn.server.applicationhistoryservice.ApplicationHistoryServer.startWebApp(ApplicationHistoryServer.java:322)\r\n        at org.apache.hadoop.yarn.server.applicationhistoryservice.ApplicationHistoryServer.serviceStart(ApplicationHistoryServer.java:121)\r\n        at org.apache.hadoop.service.AbstractService.start(AbstractService.java:194)\r\n        at org.apache.hadoop.yarn.server.applicationhistoryservice.ApplicationHistoryServer.launchAppHistoryServer(ApplicationHistoryServer.java:178)\r\n        at org.apache.hadoop.yarn.server.applicationhistoryservice.ApplicationHistoryServer.main(ApplicationHistoryServer.java:187)\r\nCaused by: java.io.IOException: Problem starting http server\r\n        at org.apache.hadoop.http.HttpServer2.start(HttpServer2.java:1165)\r\n        at org.apache.hadoop.yarn.server.applicationhistoryservice.ApplicationHistoryServer.startWebApp(ApplicationHistoryServer.java:313)\r\n        ... 4 more\r\nCaused by: java.lang.IllegalArgumentException: Could not parse [${clusterHostInfo/rm_host}]\r\n        at org.apache.commons.net.util.SubnetUtils.calculate(SubnetUtils.java:275)\r\n        at org.apache.commons.net.util.SubnetUtils.<init>(SubnetUtils.java:51)\r\n        at org.apache.hadoop.util.MachineList.<init>(MachineList.java:108)\r\n        at org.apache.hadoop.util.MachineList.<init>(MachineList.java:82)\r\n        at org.apache.hadoop.util.MachineList.<init>(MachineList.java:74)\r\n        at org.apache.hadoop.security.authorize.DefaultImpersonationProvider.init(DefaultImpersonationProvider.java:98)\r\n        at org.apache.hadoop.security.authorize.ProxyUsers.refreshSuperUserGroupsConfiguration(ProxyUsers.java:75)\r\n        at org.apache.hadoop.security.token.delegation.web.DelegationTokenAuthenticationFilter.init(DelegationTokenAuthenticationFilter.java:202)\r\n        at org.apache.hadoop.yarn.server.timeline.security.TimelineAuthenticationFilter.init(TimelineAuthenticationFilter.java:47)\r\n        at org.eclipse.jetty.servlet.FilterHolder.initialize(FilterHolder.java:139)\r\n        at org.eclipse.jetty.servlet.ServletHandler.initialize(ServletHandler.java:873)\r\n{code}\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "pull-request-available",
         "upgrade"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "YARN start failed during EU with IllegalArgumentException"
   },
   {
      "_id": "13162061",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-25 12:12:42",
      "description": "As part of AMBARI-23911, selection information was added back to Ambari. But when a filter is applied, the selected hosts section is removed and refreshed. In previous versions, the selection information persisted even when a filter was applied.\r\nAnother issue faced while automating is that there is no unique xpath to the selection information. It would be great if a class/data-qa attribute is added to the anchor tag.\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Selection information disappears when a filter is applied"
   },
   {
      "_id": "13162053",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-25 11:44:03",
      "description": "STR:\r\nEnter invalid value on Configs page for any property.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Next button enabled when invalid values entered"
   },
   {
      "_id": "13161698",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-05-24 08:51:16",
      "description": "  * Tried to deploy a cluster with viewFS enabled via blueprint\n  * HiveServer2 is failing to start with below error \n    \n        \r\n    Traceback (most recent call last):\r\n      File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/HIVE/package/scripts/hive_server.py\", line 137, in \r\n        HiveServer().execute()\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 353, in execute\r\n        method(env)\r\n      File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/HIVE/package/scripts/hive_server.py\", line 53, in start\r\n        hive_service('hiveserver2', action = 'start', upgrade_type=upgrade_type)\r\n      File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/HIVE/package/scripts/hive_service.py\", line 102, in hive_service\r\n        wait_for_znode()\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/libraries/functions/decorator.py\", line 62, in wrapper\r\n        return function(*args, **kwargs)\r\n      File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/HIVE/package/scripts/hive_service.py\", line 191, in wait_for_znode\r\n        raise Fail(format(\"ZooKeeper node /{hive_server2_zookeeper_namespace} is not ready yet\"))\r\n    resource_management.core.exceptions.Fail: ZooKeeper node /hiveserver2 is not ready yet\r\n    \n\nout log has a reference to hdfs:// Filesystem\n\n    \n        \r\n    2018-05-17 23:54:17,398 - Skipping fs root check as fs_root does not start with hdfs://\r\n    2018-05-17 23:54:17,399 - Execute['/var/lib/ambari-agent/tmp/start_hiveserver2_script /grid/0/log/hive/hive-server2.out /grid/0/log/hive/hive-server2.err /var/run/hive/hive-server.pid /usr/hdp/current/hive-server2/conf/ /grid/0/log/hive'] {'environment': {'HIVE_BIN': 'hive', 'JAVA_HOME': u'/usr/lib/jvm/java-openjdk', 'HADOOP_HOME': u'/usr/hdp/current/hadoop-client'}, 'not_if': 'ls /var/run/hive/hive-server.pid >/dev/null 2>&1 && ps -p  >/dev/null 2>&1', 'user': 'hive', 'path': [u'/usr/sbin:/sbin:/usr/lib/ambari-server/*:/usr/lib64/qt-3.3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/var/lib/ambari-agent:/usr/hdp/current/hive-server2/bin:/usr/hdp/3.0.0.0-1345/hadoop/bin']}\r\n    2018-05-17 23:54:17,507 - Execute['/usr/lib/jvm/java-openjdk/bin/java -cp /usr/lib/ambari-agent/DBConnectionVerification.jar:/usr/hdp/current/hive-server2/lib/mysql-connector-java.jar org.apache.ambari.server.DBConnectionVerification 'jdbc:mysql://ctr-e138-1518143905142-317960-01-000006.hwx.site/hivedb?createDatabaseIfNotExist=true' hiveuser [PROTECTED] com.mysql.jdbc.Driver'] {'path': ['/usr/sbin:/sbin:/usr/local/bin:/bin:/usr/bin'], 'tries': 5, 'try_sleep': 10}\r\n    2018-05-17 23:54:18,156 - call['/usr/hdp/current/zookeeper-client/bin/zkCli.sh -server ctr-e138-1518143905142-317960-01-000005.hwx.site:2181,ctr-e138-1518143905142-317960-01-000006.hwx.site:2181,ctr-e138-1518143905142-317960-01-000007.hwx.site:2181 ls /hiveserver2 | grep '\\[serverUri=''] {}\r\n    2018-05-17 23:54:19,032 - call returned (1, 'Node does not exist: /hiveserver2')\r\n    2018-05-17 23:54:19,033 - Will retry 29 time(s), caught exception: ZooKeeper node /hiveserver2 is not ready yet. Sleeping for 5 sec(s)\r\n    2018-05-17 23:54:24,038 - call['/usr/hdp/current/zookeeper-client/bin/zkCli.sh -server ctr-e138-1518143905142-317960-01-000005.hwx.site:2181,ctr-e138-1518143905142-317960-01-000006.hwx.site:2181,ctr-e138-1518143905142-317960-01-000007.hwx.site:2181 ls /hiveserver2 | grep '\\[serverUri=''] {}\r\n    2018-05-17 23:54:24,842 - call returned (1, 'Node does not exist: /hiveserver2')\r\n    \n\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Hiveserver2 fails to start on viewFS enabled cluster: {hive_server2_zookeeper_namespace} is not ready yet"
   },
   {
      "_id": "13161607",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-05-23 22:30:40",
      "description": "Steps to reproduce :\r\n\r\n1) Create a healthy cluster\r\n2) Stop a service and delete it(say\u00a0Kafka or Zookeeper)\r\n3) Try to reinstall the same service and the action fails.\r\n\r\nSeeing below error in ambari-agent.log\r\n{code:java}\r\nINFO 2018-05-21 10:17:56,852 ActionQueue.py:276 - Command execution metadata - taskId = 300, retry enabled = False, max retry duration (sec) = 0, log_output = True\r\nERROR 2018-05-21 10:17:56,852 CustomServiceOrchestrator.py:448 - Caught an exception while executing custom service command: <type 'exceptions.KeyError'>: u'KAFKA'; u'KAFKA'\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/ambari-agent/lib/ambari_agent/CustomServiceOrchestrator.py\", line 322, in runCommand\r\n    command = self.generate_command(command_header)\r\n  File \"/usr/lib/ambari-agent/lib/ambari_agent/CustomServiceOrchestrator.py\", line 487, in generate_command\r\n    command_dict = self.configuration_builder.get_configuration(cluster_id, service_name, component_name, required_config_timestamp)\r\n  File \"/usr/lib/ambari-agent/lib/ambari_agent/ConfigurationBuilder.py\", line 50, in get_configuration\r\n    command_dict['serviceLevelParams'] = metadata_cache.serviceLevelParams[service_name]\r\nKeyError: u'KAFKA'\r\nINFO 2018-05-21 10:17:56,853 ActionQueue.py:324 - Quit retrying for command with taskId = 300. Status: FAILED, retryAble: False, retryDuration (sec): -1, last delay (sec): 1\r\nINFO 2018-05-21 10:17:56,853 ActionQueue.py:339 - Command with taskId = 300 failed after 1 tries\r\n{code}\r\nAttaching the screenshot.\r\n\r\nI have tried the same action for\u00a0Zookeeper\u00a0and it fails with similar exception.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Failure during re-installation of services"
   },
   {
      "_id": "13161521",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-23 17:09:02",
      "description": "- On step 1, namespace ids are displayed next to hostname selects. When user selects hostname from other namespace, the displayed id isn't changed\r\n- After completing the last step, page URL remains {{#/main/service/reassign/step6}}, with JS error thrown: {{app.js:212117 Uncaught TypeError: Cannot read property 'modal' of undefined}}. After page refresh user is broutght to the final step of wizard again, containing no relevant data",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Reassign Master Wizard issues"
   },
   {
      "_id": "13161380",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-23 11:03:58",
      "description": "Ambari UI is failing to load completely due to below js error\r\n\r\n{code}\r\napp.js:16513 Uncaught TypeError: Cannot read property 'get' of undefined\r\n    at app.js:16513\r\n    at Array.forEach (<anonymous>)\r\n    at Class.getServiceVersionFromRepo (app.js:16494)\r\n    at invokeAction (vendor.js:4833)\r\n    at iterateSet (vendor.js:4815)\r\n    at Object.sendEvent (vendor.js:4932)\r\n    at notifyObservers (vendor.js:3524)\r\n    at Object.Ember.notifyObservers (vendor.js:3639)\r\n    at Object.propertyDidChange (vendor.js:4272)\r\n    at ChainNodePrototype.chainDidChange (vendor.js:3987)\r\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "ambari ui fails to load due to js error"
   },
   {
      "_id": "13161037",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-22 11:59:52",
      "description": "Disabled alert status isn't \"NONE\"\r\n\r\nSTR:\r\n1)Stop Hbase\r\n2)Navigate to alerts page\r\n3)Move state of first CRITICALalert to \"Disabled\"\r\n\r\nExpected:\r\nAlert status is NONE\r\n\r\nActual:\r\nAlert status is CRITICAL\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Disabled alert status isn't \"NONE\""
   },
   {
      "_id": "13161029",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-05-22 11:05:05",
      "description": "Server sends STOMP request updates with null host_name for tasks.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Phantom null request shows up on the bg ops for Stop All SCH"
   },
   {
      "_id": "13160936",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-05-22 02:10:30",
      "description": "If Kerberos is enabled and Ambari is managing Kerberos identities, then the stack upgrade prerequisite check should ensure that the KDC admin credential is stored in the Ambari persisted credential store.\r\n\r\n# The Ambari credential store must be set up (ambari-server setup-security, option #2)\r\n# The KDC administrator credential is stored in the Ambari credential store (persisted)",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "pull-request-available",
         "upgrade"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "If Kerberos is enabled, then stack upgrade prerequisite check should ensure the KDC admin credential is persisted"
   },
   {
      "_id": "13160850",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-05-21 23:06:04",
      "description": "Enable 2 way SSL between Ambari server and agent using CA Signed certificates.  Communication fails with below error/Exception\r\n\r\n{noformat}\r\nERROR 2018-05-21 15:57:35,357 Controller.py:226 - Unable to connect to: https://apappu4.hdp.com:8441/agent/v1/register/apappu4.hdp.com\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python2.6/site-packages/ambari_agent/Controller.py\", line 175, in registerWithServer\r\n    ret = self.sendRequest(self.registerUrl, data)\r\n  File \"/usr/lib/python2.6/site-packages/ambari_agent/Controller.py\", line 549, in sendRequest\r\n    raise IOError('Request to {0} failed due to {1}'.format(url, str(exception)))\r\nIOError: Request to https://apappu4.hdp.com:8441/agent/v1/register/apappu4.hdp.com failed due to [Errno 1] _ssl.c:492: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed\r\nERROR 2018-05-21 15:57:35,357 Controller.py:227 - Error:Request to https://apappu4.hdp.com:8441/agent/v1/register/apappu4.hdp.com failed due to [Errno 1] _ssl.c:492: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed\r\n{noformat}\r\n\r\n\r\nRoot cause: As part of the setup - CA Root and CA Cert chains are imported to PKCS file. but Ambari server is not pushing these root/chain to Ambari agents and Agents are unable to trust the server certs.\r\n\r\n*+Workaround:+*\r\n\r\nCombine certs, Chains, root and then copy to agent hosts.\r\n\r\n{noformat}\r\n\r\ncat certchain.pem  servercert.pem root.pem  > caroot.pem\r\n{noformat}\r\n\r\nthen copy this file to\r\n\r\n\r\n{noformat}\r\ncp caroot.pem /var/lib/ambari-agent/keys/ca.crt\r\n{noformat}\r\n\r\nRestarting agent should resolve the issue.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari 2way SSL does not work if CA signed certs are used"
   },
   {
      "_id": "13160682",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-21 12:20:31",
      "description": "When decommissioning a host in Ambari 2.6 - the button indicating the component state clearly shows \"Decommissioning\". With the change to the ... menu in Ambari 2.7, it's hard to see that the component is in a decommissioning state because the tooltip for the status indicator only shows \"Started\".\r\n\r\nWe need to change the tooltip from \"Started\" to \"Decommissioning\" when the host is in a decommissioning state.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "New UI Makes it hard to see that a host is in a \"Decommissioning\" state"
   },
   {
      "_id": "13160671",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-21 11:19:12",
      "description": "In the new Ambari web UI, when a host is selected by selecting the checkbox, the number of items selected is not shown. This was shown in previous releases.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Selection information not present in Hosts page filtering"
   },
   {
      "_id": "13160399",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-18 17:54:00",
      "description": "STR: \r\n- Deploy a cluster with 2 namespaces using blueprint.\r\n- Use the UI wizard to move Active Namenode for namespace NS2\r\n- Perform manual operations when prompted in the wizard (FormatZkfc on other 3 hosts, perform bootstrapStandby on the new NN)\r\n- In the final step, start all services, ZKFC fails to start on the host where we moved the NN \r\n\r\n{code}\r\nTraceback (most recent call last):\r\n  File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/HDFS/package/scripts/zkfc_slave.py\", line 192, in <module>\r\n    ZkfcSlave().execute()\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 353, in execute\r\n    method(env)\r\n  File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/HDFS/package/scripts/zkfc_slave.py\", line 71, in start\r\n    ZkfcSlaveDefault.start_static(env, upgrade_type)\r\n  File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/HDFS/package/scripts/zkfc_slave.py\", line 96, in start_static\r\n    create_log_dir=True\r\n  File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/HDFS/package/scripts/utils.py\", line 258, in service\r\n    Execute(daemon_cmd, not_if=process_id_exists_command, environment=hadoop_env_exports)\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/base.py\", line 166, in __init__\r\n    self.env.run()\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/environment.py\", line 160, in run\r\n    self.run_action(resource, action)\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/environment.py\", line 124, in run_action\r\n    provider_action()\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py\", line 263, in action_run\r\n    returns=self.resource.returns)\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/shell.py\", line 72, in inner\r\n    result = function(command, **kwargs)\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/shell.py\", line 102, in checked_call\r\n    tries=tries, try_sleep=try_sleep, timeout_kill_strategy=timeout_kill_strategy, returns=returns)\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/shell.py\", line 150, in _call_wrapper\r\n    result = _call(command, **kwargs_copy)\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/shell.py\", line 308, in _call\r\n    raise ExecutionFailed(err_msg, code, out, err)\r\nresource_management.core.exceptions.ExecutionFailed: Execution of 'ambari-sudo.sh su cstm-hdfs -l -s /bin/bash -c 'ulimit -c unlimited ;  /usr/hdp/3.0.0.0-1316/hadoop/bin/hdfs --config /usr/hdp/3.0.0.0-1316/hadoop/conf --daemon start zkfc'' returned 1. ######## Hortonworks #############\r\nThis is MOTD message, added for testing in qe infra\r\nWARNING: HADOOP_ZKFC_OPTS has been replaced by HDFS_ZKFC_OPTS. Using value of HADOOP_ZKFC_OPTS.\r\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "ZKFC fails to start while moving Namenode on a cluster with multiple namespaces"
   },
   {
      "_id": "13160361",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-18 15:07:53",
      "description": "\"Data Not Available\" in Dashboard / Heatmap for:\r\n* Host Disk Space Used %\r\n* Host Memory Used %\r\n\r\n\"Invalid Data\" in Dashboard / Heatmap for:\r\n* DataNode Process Disk I/O Utilization   \r\n* DataNode Process Network I/O Utilization\r\n\r\nThese should all be reporting data.\r\n\r\nSTR:\r\n- Install ZooKeeper, HDFS, AMS, SmartSense\r\n- Wait a 10 minutes to ensure data is coming into AMS\r\n- Click on Dashboard / Heatmap and view these metrics",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Heatmap Data Issues"
   },
   {
      "_id": "13160355",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-05-18 14:55:39",
      "description": "Server should send metadata updates only when metadata\u00a0was really\u00a0changed.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Server posts numerous redundant metadata updates to agent"
   },
   {
      "_id": "13160315",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-18 10:46:00",
      "description": "During installation if you change configuration there are a lot of configuration validation errors that appear to be using > and not >=.  See screenshot.  This results in 20+ things for the user to review, but most of them are correct because the value is 19 and we're asking them to set it to 19.\r\n\r\nSteps to Reproduce:\r\n# Install Ambari 2.7\r\n# Choose ZK, HDFS, YARN, Hive\r\n# Double the *Minimum Container Size (Memory)* during the *All Configurations* step\r\n# Observe that the configuration validations are mostly asking us to change values to what they already are",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Configuration Validation is throwing errors on correct configuration"
   },
   {
      "_id": "13160310",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-05-18 10:30:38",
      "description": "STR:\n\n  * Perform an EU from HDP 2.6 to HDP 3.0\n\nAfter, 2 of my 3 ZKs are shown as being down. However, they are actually alive\non my boxes:\n\n    \n    \n    \r\n    [root@c7402 ~]$ ps aux | grep [z]oo.cfg\r\n    zookeep+ 22463  0.2  2.8 3064236 53728 ?       Sl   20:41   0:01 /usr/jdk64/jdk1.8.0_144/bin/java -Dzookeeper.log.dir=/var/log/zookeeper -Dzookeeper.log.file=zookeeper-zookeeper-server-c7402.ambari.apache.org.log -Dzookeeper.root.logger=INFO,ROLLINGFILE -cp /usr/hdp/current/zookeeper-server/bin/../build/classes:/usr/hdp/current/zookeeper-server/bin/../build/lib/*.jar:/usr/hdp/current/zookeeper-server/bin/../lib/xercesMinimal-1.9.6.2.jar:/usr/hdp/current/zookeeper-server/bin/../lib/wagon-provider-api-2.4.jar:/usr/hdp/current/zookeeper-server/bin/../lib/wagon-http-shared4-2.4.jar:/usr/hdp/current/zookeeper-server/bin/../lib/wagon-http-shared-1.0-beta-6.jar:/usr/hdp/current/zookeeper-server/bin/../lib/wagon-http-lightweight-1.0-beta-6.jar:/usr/hdp/current/zookeeper-server/bin/../lib/wagon-http-2.4.jar:/usr/hdp/current/zookeeper-server/bin/../lib/wagon-file-1.0-beta-6.jar:/usr/hdp/current/zookeeper-server/bin/../lib/slf4j-log4j12-1.6.1.jar:/usr/hdp/current/zookeeper-server/bin/../lib/slf4j-api-1.6.1.jar:/usr/hdp/current/zookeeper-server/bin/../lib/plexus-utils-3.0.8.jar:/usr/hdp/current/zookeeper-server/bin/../lib/plexus-interpolation-1.11.jar:/usr/hdp/current/zookeeper-server/bin/../lib/plexus-container-default-1.0-alpha-9-stable-1.jar:/usr/hdp/current/zookeeper-server/bin/../lib/netty-3.10.5.Final.jar:/usr/hdp/current/zookeeper-server/bin/../lib/nekohtml-1.9.6.2.jar:/usr/hdp/current/zookeeper-server/bin/../lib/maven-settings-2.2.1.jar:/usr/hdp/current/zookeeper-server/bin/../lib/maven-repository-metadata-2.2.1.jar:/usr/hdp/current/zookeeper-server/bin/../lib/maven-project-2.2.1.jar:/usr/hdp/current/zookeeper-server/bin/../lib/maven-profile-2.2.1.jar:/usr/hdp/current/zookeeper-server/bin/../lib/maven-plugin-registry-2.2.1.jar:/usr/hdp/current/zookeeper-server/bin/../lib/maven-model-2.2.1.jar:/usr/hdp/current/zookeeper-server/bin/../lib/maven-error-diagnostics-2.2.1.jar:/usr/hdp/current/zookeeper-server/bin/../lib/maven-artifact-manager-2.2.1.jar:/usr/hdp/current/zookeeper-server/bin/../lib/maven-artifact-2.2.1.jar:/usr/hdp/current/zookeeper-server/bin/../lib/maven-ant-tasks-2.1.3.jar:/usr/hdp/current/zookeeper-server/bin/../lib/log4j-1.2.16.jar:/usr/hdp/current/zookeeper-server/bin/../lib/jsoup-1.7.1.jar:/usr/hdp/current/zookeeper-server/bin/../lib/jline-0.9.94.jar:/usr/hdp/current/zookeeper-server/bin/../lib/commons-logging-1.1.1.jar:/usr/hdp/current/zookeeper-server/bin/../lib/commons-io-2.2.jar:/usr/hdp/current/zookeeper-server/bin/../lib/commons-codec-1.6.jar:/usr/hdp/current/zookeeper-server/bin/../lib/classworlds-1.1-alpha-2.jar:/usr/hdp/current/zookeeper-server/bin/../lib/backport-util-concurrent-3.1.jar:/usr/hdp/current/zookeeper-server/bin/../lib/ant-launcher-1.8.0.jar:/usr/hdp/current/zookeeper-server/bin/../lib/ant-1.8.0.jar:/usr/hdp/current/zookeeper-server/bin/../zookeeper-3.4.6.3.0.0.0-1250.jar:/usr/hdp/current/zookeeper-server/bin/../src/java/lib/*.jar:/usr/hdp/current/zookeeper-server/conf::/usr/share/zookeeper/*:/usr/share/zookeeper/* -Xmx1024m -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.local.only=false org.apache.zookeeper.server.quorum.QuorumPeerMain /usr/hdp/current/zookeeper-server/conf/zoo.cfg\r\n    \r\n    [root@c7402 ~]$ telnet localhost 2181\r\n    Trying ::1...\r\n    Connected to localhost.\r\n    Escape character is '^]'.\r\n    ^CConnection closed by foreign host.\r\n    \n\nBut you can see that we clearly think it's down on c7402:\n\n    \n    \n    \r\n    {\r\n      \"href\" : \"http://localhost:8080/api/v1/clusters/c1/hosts/c7402.ambari.apache.org/host_components/ZOOKEEPER_SERVER\",\r\n      \"HostRoles\" : {\r\n        \"cluster_name\" : \"c1\",\r\n        \"component_name\" : \"ZOOKEEPER_SERVER\",\r\n        \"desired_repository_version\" : \"3.0.0.0-1250\",\r\n        \"desired_stack_id\" : \"HDP-3.0\",\r\n        \"desired_state\" : \"STARTED\",\r\n        \"display_name\" : \"ZooKeeper Server\",\r\n        \"host_name\" : \"c7402.ambari.apache.org\",\r\n        \"maintenance_state\" : \"OFF\",\r\n        \"public_host_name\" : \"c7402.ambari.apache.org\",\r\n        \"reload_configs\" : false,\r\n        \"service_name\" : \"ZOOKEEPER\",\r\n        \"stale_configs\" : false,\r\n        \"state\" : \"INSTALLED\",\r\n        \"upgrade_state\" : \"NONE\",\r\n        \"version\" : \"3.0.0.0-1250\",\r\n        \"actual_configs\" : { }\r\n      },\r\n      \"host\" : {\r\n        \"href\" : \"http://localhost:8080/api/v1/clusters/c1/hosts/c7402.ambari.apache.org\"\r\n      },\r\n      \"component\" : [\r\n        {\r\n          \"href\" : \"http://localhost:8080/api/v1/clusters/c1/services/ZOOKEEPER/components/ZOOKEEPER_SERVER\",\r\n          \"ServiceComponentInfo\" : {\r\n            \"cluster_name\" : \"c1\",\r\n            \"component_name\" : \"ZOOKEEPER_SERVER\",\r\n            \"service_name\" : \"ZOOKEEPER\"\r\n          }\r\n        }\r\n      ],\r\n      \"processes\" : [ ]\r\n    }\r\n    \n\nThe PID file looks correct:\n\n    \n    \n    \r\n    [root@c7402 zookeeper]$ cat /var/run/zookeeper/zookeeper_server.pid\r\n    22463\r\n    \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "ZooKeepers Show As Down After EU to HDP 3.0 But They Are Not"
   },
   {
      "_id": "13160077",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-05-17 16:34:58",
      "description": "Server should ensure that registration was successfully finished before applying registering/initial heartbeat timestamps.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Service stop/start/restart times out when agent registration was not completed"
   },
   {
      "_id": "13160055",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-17 15:34:18",
      "description": "Remove dependency on marked.js 0.3.2 in Ambari Web due to security concerns. See \r\n* https://nvd.nist.gov/vuln/detail/CVE-2015-1370\r\n* https://nvd.nist.gov/vuln/detail/CVE-2017-1000427\r\n\r\n{noformat}\r\n[root@host ~]# ambari-server --version\r\n2.7.0.0-519\r\n{noformat}\r\n\r\n{noformat}\r\n[root@host ~]# find /usr/lib -name marked.js\r\n/usr/lib/ambari-server/web/api-docs/lib/marked.js\r\n{noformat}\r\n\r\nRecommendation is to remove the dependency or upgrade to version 0.3.2-1 or the latest version, if possible. \r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Remove dependency on marked.js 0.3.2 in Ambari Web"
   },
   {
      "_id": "13160038",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-17 14:22:45",
      "description": "Fix small markup issues on Install Wizard:\r\n* decrease space after checkboxes on step3\r\n* increase table width on step6\r\n* change logic for bell animation on configs\r\n* use scrollable tabs for service selection on All Configurations tab\r\n* update warning color for bell and labels\r\n* add title for deploy popup on step8\r\n* change progress bar width on step9",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Install Wizard: fix markup issues"
   },
   {
      "_id": "13160014",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-17 12:43:31",
      "description": "STR: Deploy a cluster with multiple namespaces via Blueprint\r\nAdd JournalNode using the wizard\r\nIn the format JN step {code}sudo su cstm-hdfs -l -c 'hdfs namenode -initializeSharedEdits'{code} fails with \r\n\r\n{code}\r\nRe-format filesystem in QJM to [<ip0>:8485, <ip1>:8485, <ip2>:8485] ? (Y or N) y\r\n18/05/09 18:43:02 ERROR namenode.NameNode: Could not initialize shared edits dir\r\norg.apache.hadoop.hdfs.qjournal.client.QuorumException: Could not format one or more JournalNodes. 1 exceptions thrown:\r\n<ip0>:8485: Directory /hadoop/hdfs/journal/ns1 is in an inconsistent state: Can't format the storage directory because the current directory is not empty.\r\n\tat org.apache.hadoop.hdfs.server.common.Storage$StorageDirectory.checkEmptyCurrent(Storage.java:600)\r\n\tat org.apache.hadoop.hdfs.server.common.Storage$StorageDirectory.analyzeStorage(Storage.java:683)\r\n\tat org.apache.hadoop.hdfs.qjournal.server.JNStorage.format(JNStorage.java:210)\r\n\tat org.apache.hadoop.hdfs.qjournal.server.Journal.format(Journal.java:235)\r\n\tat org.apache.hadoop.hdfs.qjournal.server.JournalNodeRpcServer.format(JournalNodeRpcServer.java:181)\r\n\tat org.apache.hadoop.hdfs.qjournal.protocolPB.QJournalProtocolServerSideTranslatorPB.format(QJournalProtocolServerSideTranslatorPB.java:148)\r\n\tat org.apache.hadoop.hdfs.qjournal.protocol.QJournalProtocolProtos$QJournalProtocolService$2.callBlockingMethod(QJournalProtocolProtos.java:27399)\r\n\tat org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:523)\r\n\tat org.apache.hadoop.ipc.RPC$Server.call(RPC.java:991)\r\n\tat org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:872)\r\n\tat org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:818)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat javax.security.auth.Subject.doAs(Subject.java:422)\r\n\tat org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1682)\r\n\tat org.apache.hadoop.ipc.Server$Handler.run(Server.java:2678)\r\n\r\n\tat org.apache.hadoop.hdfs.qjournal.client.QuorumException.create(QuorumException.java:81)\r\n\tat org.apache.hadoop.hdfs.qjournal.client.QuorumCall.rethrowException(QuorumCall.java:286)\r\n\tat org.apache.hadoop.hdfs.qjournal.client.QuorumJournalManager.format(QuorumJournalManager.java:228)\r\n\tat org.apache.hadoop.hdfs.server.namenode.FSEditLog.formatNonFileJournals(FSEditLog.java:426)\r\n\tat org.apache.hadoop.hdfs.server.namenode.NameNode.initializeSharedEdits(NameNode.java:1262)\r\n\tat org.apache.hadoop.hdfs.server.namenode.NameNode.createNameNode(NameNode.java:1619)\r\n\tat org.apache.hadoop.hdfs.server.namenode.NameNode.main(NameNode.java:1710)\r\n18/05/09 18:43:02 INFO util.ExitUtil: Exiting with status 1: ExitException\r\n18/05/09 18:43:02 INFO namenode.NameNode: SHUTDOWN_MSG: \r\n/************************************************************\r\nSHUTDOWN_MSG: Shutting down NameNode at <host0>/<ip0>\r\n************************************************************/\r\n{code}\r\n\r\nSolution\r\nReorganize wizard steps:\r\n- Assign Journalnodes\r\n- Save Namespace\r\n- Add/Remove Journalnodes (no start JN)\r\n- Copy Journalnode directories\r\n- Start Journalnodes\r\n- Start All Services",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Redo the Manage Journalnodes wizard in the context of federation changes"
   },
   {
      "_id": "13159971",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-05-17 08:58:03",
      "description": "User-related information (users, groups, user-group mapping) is currently sent to agents in {{clusterLevelParams}}.  The problem is that the data reflects only a single stack, so users etc. from other stacks are not created, causing deployment failures.  In addition, {{stack_version}} should be moved, too, similar to how {{stack_name}} was moved in AMBARI-23746.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Move user-related info to stack-level params"
   },
   {
      "_id": "13159945",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-05-17 07:00:28",
      "description": "STR:\n\n  * Set a simple cluster with HDFS\n  * Attempt to create a new Alert:\n\n    \n    \n    \r\n    POST http://{{ambari-server}}:8080/api/v1/clusters/c1/alert_definitions\r\n    \r\n    {\r\n      \"AlertDefinition\": {\r\n        \"component_name\": \"NAMENODE\",\r\n        \"description\": \"This service-level alert is triggered if the total number of volume failures across the cluster is greater than the configured critical threshold.\",\r\n        \"enabled\": true,\r\n        \"help_url\": null,\r\n        \"ignore_host\": false,\r\n        \"interval\": 2,\r\n        \"label\": \"NameNode Volume Failures\",\r\n        \"name\": \"namenode_volume_failures\",\r\n        \"scope\": \"ANY\",\r\n        \"service_name\": \"HDFS\",\r\n        \"source\": {\r\n          \"jmx\": {\r\n            \"property_list\": [\r\n              \"Hadoop:service=NameNode,name=FSNamesystemState/VolumeFailuresTotal\"\r\n            ],\r\n            \"value\": \"{0}\"\r\n          },\r\n          \"reporting\": {\r\n            \"ok\": {\r\n              \"text\": \"There are {0} volume failures\"\r\n            },\r\n            \"warning\": {\r\n              \"text\": \"There are {0} volume failures\",\r\n              \"value\": 1\r\n            },\r\n            \"critical\": {\r\n              \"text\": \"There are {0} volume failures\",\r\n              \"value\": 1\r\n            },\r\n            \"units\": \"Volume(s)\"\r\n          },\r\n          \"type\": \"METRIC\",\r\n          \"uri\": {\r\n            \"http\": \"{{hdfs-site/dfs.namenode.http-address}}\",\r\n            \"https\": \"{{hdfs-site/dfs.namenode.https-address}}\",\r\n            \"https_property\": \"{{hdfs-site/dfs.http.policy}}\",\r\n            \"https_property_value\": \"HTTPS_ONLY\",\r\n            \"kerberos_keytab\": \"{{hdfs-site/dfs.web.authentication.kerberos.keytab}}\",\r\n            \"kerberos_principal\": \"{{hdfs-site/dfs.web.authentication.kerberos.principal}}\",\r\n            \"default_port\": 0,\r\n            \"connection_timeout\": 5,\r\n            \"high_availability\": {\r\n              \"nameservice\": \"{{hdfs-site/dfs.internal.nameservices}}\",\r\n              \"alias_key\": \"{{hdfs-site/dfs.ha.namenodes.{{ha-nameservice}}}}\",\r\n              \"http_pattern\": \"{{hdfs-site/dfs.namenode.http-address.{{ha-nameservice}}.{{alias}}}}\",\r\n              \"https_pattern\": \"{{hdfs-site/dfs.namenode.https-address.{{ha-nameservice}}.{{alias}}}}\"\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \n\nThis alert will not be scheduled on the agent correctly:\n\n    \n    \n    \r\n    ERROR 2018-05-16 20:11:55,186 AlertSchedulerHandler.py:307 - [AlertScheduler] Unable to load an invalid alert definition. It will be skipped.\r\n    Traceback (most recent call last):\r\n      File \"/usr/lib/ambari-agent/lib/ambari_agent/AlertSchedulerHandler.py\", line 287, in __json_to_callable\r\n        alert = MetricAlert(json_definition, source, self.config)\r\n      File \"/usr/lib/ambari-agent/lib/ambari_agent/alerts/metric_alert.py\", line 52, in __init__\r\n        self.metric_info = JmxMetric(alert_source_meta['jmx'])\r\n      File \"/usr/lib/ambari-agent/lib/ambari_agent/alerts/metric_alert.py\", line 288, in __init__\r\n        self.property_list = jmx_info['property_list']\r\n    KeyError: 'property_list'\r\n    \n\nLooking at `/var/lib/ambari-agent/cache/cluster_cache/alerts.json`, we can see\nthat `property_list` was changed into `propertyList`.\n\n    \n    \n    \r\n            \"name\": \"namenode_volume_failures\",\r\n            \"componentName\": \"NAMENODE\",\r\n            \"description\": \"This service-level alert is triggered if the total number of volume failures across the cluster is greater than the configured critical threshold.\",\r\n            \"interval\": 2,\r\n            \"clusterId\": 2,\r\n            \"label\": \"NameNode Volume Failures\",\r\n            \"ignore_host\": false,\r\n            \"source\": {\r\n              \"jmx\": {\r\n                \"urlSuffix\": \"/jmx\",\r\n                \"propertyList\": [\r\n                  \"Hadoop:service=NameNode,name=FSNamesystemState/VolumeFailuresTotal\"\r\n                ],\r\n    \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "New Alert JSON Is Invalid When Sent To Agents"
   },
   {
      "_id": "13159894",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-05-16 23:43:21",
      "description": "Remove insecure dependencies from Ambari Server\r\n\r\n*Jetty: Java based HTTP, Servlet, SPDY, WebSocket Server 6.1.26*\r\n* https://nvd.nist.gov/vuln/detail/CVE-2017-9735\r\n* https://nvd.nist.gov/vuln/detail/CVE-2011-4461\r\n* https://nvd.nist.gov/vuln/detail/CVE-2009-1523\r\n\r\n{noformat}\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Building Ambari Server 2.0.0.0-SNAPSHOT\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO]\r\n[INFO] --- maven-dependency-plugin:2.8:tree (default-cli) @ ambari-server ---\r\n[INFO] org.apache.ambari:ambari-server:jar:2.0.0.0-SNAPSHOT\r\n[INFO] +- org.mortbay.jetty:jsp-api-2.1-glassfish:jar:2.1.v20100127:compile\r\n[INFO] +- org.mortbay.jetty:jsp-2.1-glassfish:jar:2.1.v20100127:compile\r\n[INFO] \\- org.apache.hadoop:hadoop-common:jar:2.7.2:compile\r\n[INFO]    \\- org.mortbay.jetty:jetty:jar:6.1.26:compile{noformat}\r\n\r\nRecommendation is to remove the dependency or upgrade to version 6.1.26.hwx or the latest version, if possible. \r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Remove insecure dependencies from Ambari Server"
   },
   {
      "_id": "13159780",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-05-16 16:50:29",
      "description": "Steps:\r\n - Shutdown a service, like AMS\r\n - Wait for alerts (about 10 showed up)\r\n - Turn in MM for AMS\r\n\r\nAlerts don't clear until you hard refresh, even though the MM cleared them immediately.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "STOMP alert update was not sent when maintenance mode change"
   },
   {
      "_id": "13159724",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-16 13:02:07",
      "description": "In previous versions of Ambari:\r\n* A red dot that appears to the left of the service name meant that the service is down.  In the new UI, this red dot means there's an alert associated with the service, and if the service name turns red, then the service is down.  The semantics of the red dot has changed, and this is really confusing to the end user who is used to the old UI.  <- We need the red dot to mean the service is down.  \r\n* We used to show a green dot to show that the service is up.  This gave assurance to the end user and this behavior has come to be expected.   <- We need to bring back the green dot.\r\n* When there are associated service alerts, we used to show a red badge and the alert count to the right of the service name.  As mentioned above, a red dot shows up in the new UI and this is not easily understood as meaning there's an alert.  <- We need to bring back the alert badge w/ a count.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Service status is difficult to understand in the left nav of the new UI"
   },
   {
      "_id": "13159525",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-05-15 20:42:47",
      "description": "Server should notify\u00a0agent about unsupported services removal during stack upgrade.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Topology  cache on agent side is not actual after unsupported services removal during stack upgrade"
   },
   {
      "_id": "13159470",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-15 17:04:36",
      "description": "NameNode Federation wizard is stuck on Review step. Infinite spinner is displayed instead of config properties to be changed, and also JS error is thrown: {{app.js:5361 Uncaught TypeError: Cannot read property 'properties' of undefined}}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "NN Federation wizard is stuck on step 3"
   },
   {
      "_id": "13159451",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-05-15 15:47:51",
      "description": "Call to a generic collection method contains an argument with an incompatible class from that of the collection's parameter (i.e., the type of the argument is neither a supertype nor a subtype of the corresponding generic type argument). Therefore, it is unlikely that the collection contains any objects that are equal to the method argument used here. Most likely, the wrong value is being passed to the method.\r\n\r\n* {{String}} is incompatible with expected argument type {{Long}} in {{onHostRemoved(String)}}\r\n* {{Long}} is incompatible with expected argument type {{AlertDefinitionEntity}} in {{AlertGroupsUpdateListener.onAlertDefinitionDeleted(AlertDefinitionDeleteEvent)}}\r\n* {{String}} is incompatible with expected argument type {{Long}} in {{HostConfigMappingDAO.removeByClusterAndHostName(long, String)}}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "No relationship between generic parameter and method argument"
   },
   {
      "_id": "13159424",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-15 14:02:08",
      "description": "The toggle buttons don't look like a button is present there. need to change the color of the toggle button base so that it is distinguishable from the background panel color. ( See Anonymous access allowed toggle button for Smartsense )\r\n\r\nThe issue is applicable to the web elements across all services under All Configurations Tab",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Customise Services - All Configurations Tab - Issue with default dimensions of text box and toggle buttons colour"
   },
   {
      "_id": "13159397",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-15 12:09:00",
      "description": "* Add a tooltip on config version compare button: \"Compare this version with current\"\r\n* User edit page: remove extra space between columns\r\n* Group edit: Group Access select alignment",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Manage Ambari UI style fixes"
   },
   {
      "_id": "13159388",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-15 11:33:41",
      "description": "While adding new service, both existing components and new components on Assign Masters step are displayed in green.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "unable to differentiate b/w new added service and existing service"
   },
   {
      "_id": "13159374",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-05-15 10:45:39",
      "description": "\n    Traceback (most recent call last):\r\n      File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/YARN/package/scripts/timelinereader.py\", line 108, in <module>\r\n        ApplicationTimelineReader().execute()\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 353, in execute\r\n        method(env)\r\n      File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/YARN/package/scripts/timelinereader.py\", line 87, in status\r\n        for pid_file in self.get_pid_files():\r\n      File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/YARN/package/scripts/timelinereader.py\", line 99, in get_pid_files\r\n        import params\r\n      File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/YARN/package/scripts/params.py\", line 29, in <module>\r\n        from params_linux import *\r\n      File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/YARN/package/scripts/params_linux.py\", line 473, in <module>\r\n        repo_name = str(config['clusterName']) + '_yarn'\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/config_dictionary.py\", line 73, in __getattr__\r\n        raise Fail(\"Configuration parameter '\" + self.name + \"' was not found in configurations dictionary!\")\r\n    resource_management.core.exceptions.Fail: Configuration parameter 'clusterName' was not found in configurations dictionary!\r\n    \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Timeline service is shown as stopped, while being started."
   },
   {
      "_id": "13159359",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-05-15 10:03:54",
      "description": "\n    \r\n    [root@nat-r7-bjks-man-5 ~]# ambari-server setup --java-home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.161-0.b14.el7_4.ppc64le/\r\n    Using python  /usr/bin/python\r\n    Setup ambari-server\r\n    /usr/lib/ambari-server/lib/ambari_commons/subprocess32.py:153: RuntimeWarning: The _posixsubprocess module is not being used. Child process reliability may suffer if your program uses threads.\r\n      \"program uses threads.\", RuntimeWarning)\r\n    Checking SELinux...\r\n    SELinux status is 'enabled'\r\n    SELinux mode is 'permissive'\r\n    WARNING: SELinux is set to 'permissive' mode and temporarily disabled.\r\n    OK to continue [y/n] (y)?\r\n    Customize user account for ambari-server daemon [y/n] (n)?\r\n    Adjusting ambari-server permissions and ownership...\r\n    \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "ambari-server setup throwing Error \"/usr/lib/ambari-server/lib/ambari_commons/subprocess32.py:153: RuntimeWarning: The _posixsubprocess module is not being used\""
   },
   {
      "_id": "13158713",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-11 12:19:57",
      "description": " # Go to HIVE configs.\r\n # Filter configs by hive.metastore.client.socket.timeout.\r\n # Compare current version with some previous.\r\n # Close comparing panel.\r\n # Change filtered property.\r\n\r\nResult: \"Save\" button is inactive. Was reproduced not for any service/property.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Save button is inactive for changed filtered property after configs comparing\t"
   },
   {
      "_id": "13158669",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-05-11 07:49:09",
      "description": "Logs:\n\n    \n    \n    \r\n    INFO 2018-05-10 10:04:59,174 NetUtil.py:61 - Connecting to https://os-mv-07-test-3.openstacklocal:8440/ca\r\n    WARNING 2018-05-10 10:04:59,174 NetUtil.py:92 - Failed to connect to https://os-mv-07-test-3.openstacklocal:8440/ca due to 'module' object has no attribute '_create_unverified_context'  \r\n    WARNING 2018-05-10 10:04:59,174 NetUtil.py:115 - Server at https://os-mv-07-test-3.openstacklocal:8440 is not reachable, sleeping for 10 seconds...\r\n    \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari Agent registration task is failing "
   },
   {
      "_id": "13158569",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-10 20:51:50",
      "description": "STR:\r\nAdd namespace from UI. In the Restart All Services operation RM fails to start\r\n\r\n{code}\r\nTraceback (most recent call last):\r\n File \"/usr/lib/ambari-agent/lib/resource_management/libraries/functions/decorator.py\", line 54, in wrapper\r\n return function(*args, **kwargs)\r\n File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/YARN/package/scripts/resourcemanager.py\", line 244, in wait_for_dfs_directory_created\r\n raise Fail(\"DFS directory '\" + dir_path + \"' does not exist !\")\r\nFail: DFS directory '/ats/done/' does not exist !\r\n{code}\r\n\r\nThe above exception was the cause of the following exception:\r\n\r\n{code}\r\nTraceback (most recent call last):\r\n File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/YARN/package/scripts/resourcemanager.py\", line 261, in <module>\r\n Resourcemanager().execute()\r\n File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 353, in execute\r\n method(env)\r\n File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 982, in restart\r\n self.start(env, upgrade_type=upgrade_type)\r\n File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/YARN/package/scripts/resourcemanager.py\", line 142, in start\r\n self.wait_for_dfs_directories_created(params.entity_groupfs_store_dir, params.entity_groupfs_active_dir)\r\n File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/YARN/package/scripts/resourcemanager.py\", line 211, in wait_for_dfs_directories_created\r\n self.wait_for_dfs_directory_created(dir_path, ignored_dfs_dirs)\r\n File \"/usr/lib/ambari-agent/lib/resource_management/libraries/functions/decorator.py\", line 62, in wrapper\r\n return function(*args, **kwargs)\r\n File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/YARN/package/scripts/resourcemanager.py\", line 244, in wait_for_dfs_directory_created\r\n raise Fail(\"DFS directory '\" + dir_path + \"' does not exist !\")\r\nresource_management.core.exceptions.Fail: DFS directory '/ats/done/' does not exist !\r\n{code}\r\n\r\nBut after closing the wizard and starting all the services it started.\r\n\r\nAlso restarting history server failed on another host\r\n\r\n{code}\r\nTraceback (most recent call last):\r\n File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/YARN/package/scripts/historyserver.py\", line 134, in <module>\r\n HistoryServer().execute()\r\n File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 353, in execute\r\n method(env)\r\n File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 982, in restart\r\n self.start(env, upgrade_type=upgrade_type)\r\n File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/YARN/package/scripts/historyserver.py\", line 95, in start\r\n skip=params.sysprep_skip_copy_tarballs_hdfs)\r\n File \"/usr/lib/ambari-agent/lib/resource_management/libraries/functions/copy_tarball.py\", line 502, in copy_to_hdfs\r\n replace_existing_files=replace_existing_files,\r\n File \"/usr/lib/ambari-agent/lib/resource_management/core/base.py\", line 166, in __init__\r\n self.env.run()\r\n File \"/usr/lib/ambari-agent/lib/resource_management/core/environment.py\", line 160, in run\r\n self.run_action(resource, action)\r\n File \"/usr/lib/ambari-agent/lib/resource_management/core/environment.py\", line 124, in run_action\r\n provider_action()\r\n File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 627, in action_create_on_execute\r\n self.action_delayed(\"create\")\r\n File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 624, in action_delayed\r\n self.get_hdfs_resource_executor().action_delayed(action_name, self)\r\n File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 333, in action_delayed\r\n self.action_delayed_for_nameservice(nameservice, action_name, main_resource)\r\n File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 359, in action_delayed_for_nameservice\r\n self._create_resource()\r\n File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 375, in _create_resource\r\n self._create_file(self.main_resource.resource.target, source=self.main_resource.resource.source, mode=self.mode)\r\n File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 490, in _create_file\r\n self.util.run_command(target, 'CREATE', method='PUT', overwrite=True, assertable_result=False, file_to_put=source, **kwargs)\r\n File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 178, in run_command\r\n return self._run_command(*args, **kwargs)\r\n File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 251, in _run_command\r\n raise WebHDFSCallException(err_msg, result_dict)\r\nresource_management.libraries.providers.hdfs_resource.WebHDFSCallException: Execution of 'curl -sS -L -w '%\\{http_code}' -X PUT --data-binary @/var/lib/ambari-agent/tmp/mapreduce-native-tarball-staging/mapreduce-native.tar.gz -H 'Content-Type: application/octet-stream' --negotiate -u : -k 'https://<Host>:50470/webhdfs/v1/hdp/apps/3.0.0.0-1309/mapreduce/mapreduce.tar.gz?op=CREATE&overwrite=True&permission=444'' returned status_code=403. \r\n{\r\n \"RemoteException\": {\r\n \"exception\": \"IOException\", \r\n \"javaClassName\": \"java.io.IOException\", \r\n \"message\": \"Failed to find datanode, suggest to check cluster health. excludeDatanodes=null\"\r\n }\r\n}\r\n{code}\r\n\r\n\u00a0",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "NN Federation wizard: Restart Required Services should not restart JN and ZKFC"
   },
   {
      "_id": "13158536",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-10 18:10:40",
      "description": "Stop all components from the host detail page and navigate to the service actions. The start/stop button is not enabled. \r\n\r\nOnly on refresh, the Start button is enabled.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Service actions (Stop, Start) not enabled when individual components are stopped"
   },
   {
      "_id": "13158510",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323905",
            "id": "12323905",
            "name": "ambari-metrics",
            "description": "Ambari Metrics System"
         }
      ],
      "created": "2018-05-10 16:03:16",
      "description": "[PullRequest Builder|https://builds.apache.org/job/Ambari-Github-PullRequest-Builder/] is occasionally running into failure in the following 2 test cases:\r\n\r\n{noformat}\r\ntestHybridFilter(org.apache.ambari.metrics.core.timeline.TimelineMetricsFilterTest)  Time elapsed: 0.725 sec  <<< FAILURE!\r\njunit.framework.AssertionFailedError\r\n        at org.apache.ambari.metrics.core.timeline.TimelineMetricsFilterTest.testHybridFilter(TimelineMetricsFilterTest.java:221)\r\n\r\ntestMetricWhitelisting(org.apache.ambari.metrics.core.timeline.TimelineMetricsFilterTest)  Time elapsed: 0.035 sec  <<< FAILURE!\r\njunit.framework.AssertionFailedError\r\n        at org.apache.ambari.metrics.core.timeline.TimelineMetricsFilterTest.testMetricWhitelisting(TimelineMetricsFilterTest.java:78)\r\n{noformat}\r\n\r\nLooking at the logs, it only happens if two builds are running on the same Jenkins node concurrently (workspace dir has suffix {{@2}}), but timing doesn't matter, the two concurrent builds can be at completely different stages.  The problem is caused by not finding the whitelist file due to URL escaping ({{@}} is converted to {{%40}}):\r\n\r\n{noformat}\r\nFileNotFoundException: Ambari-Github-PullRequest-Builder%402/ambari-metrics/ambari-metrics-timelineservice/target/test-classes/test_data/metric_whitelist.dat (No such file or directory)\r\n{noformat}\r\n\r\nhttps://builds.apache.org/job/Ambari-Github-PullRequest-Builder/2225/\r\nhttps://builds.apache.org/job/Ambari-Github-PullRequest-Builder/2220/\r\nhttps://builds.apache.org/job/Ambari-Github-PullRequest-Builder/2214/\r\nhttps://builds.apache.org/job/Ambari-Github-PullRequest-Builder/2195/",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "TimelineMetricsFilterTest failure if dir name contains @"
   },
   {
      "_id": "13158499",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-10 15:06:38",
      "description": "Grayed-out bell should be displayed like in the top nav.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Alerts icon is absent in service page if no alerts present"
   },
   {
      "_id": "13158476",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-10 13:55:09",
      "description": "While comparing different YARN config versions, capacity scheduler values are shown as different ones. The only displayed difference is the order of properties in those sets, though even the order is the same for both versions.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Identical sets of capacity scheduler properties are displayed as unequal ones in configs comparison view"
   },
   {
      "_id": "13158264",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-09 18:09:47",
      "description": "In ambari-2.7.0.0-472, When an action is selected via the Web UI (From service/host), the action is not shown in the BG Operations window that pops up. \r\n\r\nIt is shown only after a refresh.\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Action not shown immediately in the BG Operations window"
   },
   {
      "_id": "13158263",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-09 18:06:40",
      "description": "In ambari-2.7.0.0-472, \r\n\r\nAdding Hive Metastore from Host detail page leads to the modal window being stuck and javascript errors:\r\n\r\nJavascript errors: \r\n{code}\r\nUncaught TypeError: Cannot read property 'tag' of undefined\r\n    at Class.loadHiveConfigs (app.js:24588)\r\n    at Class.opt.success (app.js:181624)\r\n    at fire (vendor.js:1141)\r\n    at Object.fireWith [as resolveWith] (vendor.js:1252)\r\n    at done (vendor.js:8178)\r\n    at XMLHttpRequest.callback (vendor.js:8702)\r\n{code}\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Unable to add Hive Metastore from Host detail Page"
   },
   {
      "_id": "13158192",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-05-09 13:26:26",
      "description": "value of the property hadoop.proxyuser.HTTP.hosts in HDFS is set to an incorrect value after regenerate keytabs operation or disable and then enable security is done post Ambari Upgrade to 2.7.0.0\r\n\r\nThe value contains hostnames repeated twice with \"\\\" at the end.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Regenerate Keytabs/Reenable security After Ambari Upgrade modifies hadoop.proxyuser.HTTP.hosts to an incorrect value"
   },
   {
      "_id": "13157929",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-05-08 15:37:50",
      "description": "When attempting to use Oozie, Hive, Superset, and Druid with an external MySQL database the jar is not properly placed in each service so startup fails. Even after running the ambari-server setup pointing to a MySQL connector jar prior to install, we still see exceptions where the jar is not in the class path.\r\n\r\nThe reason is that  db connection properties in ambariLevelParams are not updated after modifying ambari.properties.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "MySQL Connector JAR distribution is broken"
   },
   {
      "_id": "13157868",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-05-08 11:09:28",
      "description": "Server should notify agent about cluster removal\u00a0for appropriate updating topology/configs/metadata/hostlevelparams caches.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Agent is not notified about cluster delete in runtime"
   },
   {
      "_id": "13157866",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-08 11:07:37",
      "description": "See screenshots\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Manage Ambari UI issues"
   },
   {
      "_id": "13157865",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-08 11:03:48",
      "description": "Regenerating keytabs on songle host should be available with experimental flag checked only ({{regenerateKeytabsOnSingleHost}})",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Regenerate keytabs on single host should be an experimental feature"
   },
   {
      "_id": "13157848",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-05-08 09:59:22",
      "description": "By reading <https://bugzilla.redhat.com/show_bug.cgi?id=1173041> and also the\nlast update of AMBARI-14149, I think the python fix is also backported into\npython 2.7.5  \nIf so, could you change \"(2, 7, 9)\" to a lower version please?\n\nEditing /etc/python/cert-verification.cfg wouldn't be ideal workaround as it\nwould affect to all other python applications in the system.  \nAnd today I had a case which system didn't have this file (SUSE and Anaconda2\npython)\n\nThank you\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Make server/agent connection with no cert verification possible with agent python 2.7.5"
   },
   {
      "_id": "13157681",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323905",
            "id": "12323905",
            "name": "ambari-metrics",
            "description": "Ambari Metrics System"
         }
      ],
      "created": "2018-05-07 19:15:30",
      "description": "Remove dependency on com.fasterxml.jackson.core:jackson-databind 2.7.8 in Ambari Metrics Collector due to security concerns. See\r\n * [https://nvd.nist.gov/vuln/detail/CVE-2018-5968]\r\n * [https://nvd.nist.gov/vuln/detail/CVE-2018-7489]\r\n * [https://nvd.nist.gov/vuln/detail/CVE-2017-7525]\r\n * [https://nvd.nist.gov/vuln/detail/CVE-2017-17485]\r\n * [https://nvd.nist.gov/vuln/detail/CVE-2017-15095]\r\n\r\n\u00a0\r\n{noformat}\r\nHW15069:ambari-metrics-timelineservice smolnar$ mvn dependency:tree -Dincludes=com.fasterxml.jackson.core:jackson-databind -Dverbose=true\r\n[INFO] Scanning for projects...\r\n[INFO] \r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Building Ambari Metrics Collector 2.0.0.0-SNAPSHOT\r\n[INFO] ------------------------------------------------------------------------\r\n\u00a0\r\n[INFO] \r\n[INFO] --- maven-dependency-plugin:2.8:tree (default-cli) @ ambari-metrics-timelineservice ---\r\n[INFO] org.apache.ambari:ambari-metrics-timelineservice:jar:2.0.0.0-SNAPSHOT\r\n[INFO] +- org.apache.phoenix:phoenix-core:jar:5.0.0.3.0.0.0-1181:compile\r\n[INFO] |\u00a0 +- org.apache.hbase:hbase-mapreduce:jar:2.0.0.3.0.0.0-1181:compile\r\n[INFO] |\u00a0 |\u00a0 +- (com.fasterxml.jackson.core:jackson-databind:jar:2.7.8:compile - omitted for duplicate)\r\n[INFO] |\u00a0 |\u00a0 \\- org.apache.hadoop:hadoop-hdfs:jar:3.0.0.3.0.0.0-1181:compile\r\n[INFO] |\u00a0 | \u00a0 \u00a0 \\- (com.fasterxml.jackson.core:jackson-databind:jar:2.7.8:compile - omitted for conflict with 2.7.8)\r\n[INFO] |\u00a0 +- org.apache.hbase:hbase-common:jar:2.0.0.3.0.0.0-1181:compile\r\n[INFO] |\u00a0 |\u00a0 \\- (com.fasterxml.jackson.core:jackson-databind:jar:2.9.2:compile - omitted for duplicate)\r\n[INFO] |\u00a0 +- org.apache.hbase:hbase-client:jar:2.0.0.3.0.0.0-1181:compile\r\n[INFO] |\u00a0 |\u00a0 \\- (com.fasterxml.jackson.core:jackson-databind:jar:2.9.2:compile - omitted for duplicate)\r\n[INFO] |\u00a0 \\- org.apache.hadoop:hadoop-mapreduce-client-core:jar:3.0.0.3.0.0.0-1181:compile\r\n[INFO] | \u00a0 \u00a0 +- org.apache.hadoop:hadoop-hdfs-client:jar:3.0.0.3.0.0.0-1181:compile\r\n[INFO] | \u00a0 \u00a0 |\u00a0 \\- (com.fasterxml.jackson.core:jackson-databind:jar:2.7.8:compile - omitted for conflict with 2.7.8)\r\n[INFO] | \u00a0 \u00a0 \\- (com.fasterxml.jackson.core:jackson-databind:jar:2.7.8:compile - omitted for conflict with 2.7.8)\r\n[INFO] +- org.apache.hadoop:hadoop-common:jar:3.0.0.3.0.0.0-1181:provided (scope not updated to compile)\r\n[INFO] |\u00a0 \\- (com.fasterxml.jackson.core:jackson-databind:jar:2.7.8:compile - scope updated from provided; omitted for duplicate)\r\n[INFO] +- org.apache.hadoop:hadoop-common:test-jar:tests:3.0.0.3.0.0.0-1181:test\r\n[INFO] |\u00a0 \\- (com.fasterxml.jackson.core:jackson-databind:jar:2.7.8:compile - scope updated from test; omitted for duplicate)\r\n[INFO] +- org.apache.hadoop:hadoop-yarn-common:test-jar:tests:3.0.0.3.0.0.0-1181:test\r\n[INFO] |\u00a0 \\- (com.fasterxml.jackson.core:jackson-databind:jar:2.7.8:compile - scope updated from test; omitted for duplicate)\r\n[INFO] +- org.apache.hadoop:hadoop-yarn-common:jar:3.0.0.3.0.0.0-1181:compile\r\n[INFO] |\u00a0 +- com.fasterxml.jackson.core:jackson-databind:jar:2.7.8:compile\r\n[INFO] |\u00a0 +- com.fasterxml.jackson.module:jackson-module-jaxb-annotations:jar:2.7.8:compile\r\n[INFO] |\u00a0 |\u00a0 \\- (com.fasterxml.jackson.core:jackson-databind:jar:2.7.8:compile - omitted for duplicate)\r\n[INFO] |\u00a0 \\- com.fasterxml.jackson.jaxrs:jackson-jaxrs-json-provider:jar:2.7.8:compile\r\n[INFO] | \u00a0 \u00a0 +- com.fasterxml.jackson.jaxrs:jackson-jaxrs-base:jar:2.7.8:compile\r\n[INFO] | \u00a0 \u00a0 |\u00a0 \\- (com.fasterxml.jackson.core:jackson-databind:jar:2.7.8:compile - omitted for duplicate)\r\n[INFO] | \u00a0 \u00a0 \\- (com.fasterxml.jackson.core:jackson-databind:jar:2.7.8:compile - omitted for duplicate)\r\n[INFO] +- org.apache.hadoop:hadoop-yarn-server-common:jar:3.0.0.3.0.0.0-1181:compile\r\n[INFO] |\u00a0 \\- org.apache.hadoop:hadoop-yarn-registry:jar:3.0.0.3.0.0.0-1181:compile\r\n[INFO] | \u00a0 \u00a0 \\- (com.fasterxml.jackson.core:jackson-databind:jar:2.7.8:compile - omitted for duplicate)\r\n[INFO] +- org.apache.hbase:hbase-it:jar:tests:2.0.0.3.0.0.0-1181:test\r\n[INFO] |\u00a0 \\- (com.fasterxml.jackson.core:jackson-databind:jar:2.9.2:test - omitted for conflict with 2.7.8)\r\n[INFO] \\- org.apache.hbase:hbase-testing-util:jar:2.0.0.3.0.0.0-1181:test\r\n[INFO]\u00a0 \u00a0 +- org.apache.hbase:hbase-common:test-jar:tests:2.0.0.3.0.0.0-1181:test\r\n[INFO]\u00a0 \u00a0 |\u00a0 \\- (com.fasterxml.jackson.core:jackson-databind:jar:2.9.2:test - omitted for conflict with 2.7.8)\r\n[INFO]\u00a0 \u00a0 +- org.apache.hadoop:hadoop-hdfs:test-jar:tests:3.0.0.3.0.0.0-1181:test\r\n[INFO]\u00a0 \u00a0 |\u00a0 \\- (com.fasterxml.jackson.core:jackson-databind:jar:2.7.8:test - omitted for duplicate)\r\n[INFO]\u00a0 \u00a0 \\- org.apache.hadoop:hadoop-minicluster:jar:3.0.0.3.0.0.0-1181:test\r\n[INFO] \u00a0 \u00a0 \u00a0 +- org.apache.hadoop:hadoop-yarn-server-tests:test-jar:tests:3.0.0.3.0.0.0-1181:test\r\n[INFO] \u00a0 \u00a0 \u00a0 |\u00a0 \\- org.apache.hadoop:hadoop-yarn-server-timelineservice:jar:3.0.0.3.0.0.0-1181:test\r\n[INFO] \u00a0 \u00a0 \u00a0 | \u00a0 \u00a0 \\- (com.fasterxml.jackson.core:jackson-databind:jar:2.7.8:test - omitted for duplicate)\r\n[INFO] \u00a0 \u00a0 \u00a0 \\- org.apache.hadoop:hadoop-mapreduce-client-app:jar:3.0.0.3.0.0.0-1181:test\r\n[INFO]\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \\- (com.fasterxml.jackson.core:jackson-databind:jar:2.7.8:test - omitted for duplicate)\r\n{noformat}\r\nRecommendation is to remove the dependency or upgrade to version 2.8.11.1 or the latest, if possible.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Remove dependency on com.fasterxml.jackson.core:jackson-databind 2.7.8 in Ambari Metrics Collector"
   },
   {
      "_id": "13157559",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-07 11:01:07",
      "description": "See screenshot",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Service summary style tweaks"
   },
   {
      "_id": "13157526",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         }
      ],
      "created": "2018-05-07 08:11:33",
      "description": "Remove - or upgrade to a recommended version - the following libraries in ambari-agent due to security concerns:\r\n * Remove dependency on com.jcraft:jsch 0.1.42 (or upgrade to\u00a0version is\u00a00.1.45 or greater)\r\n * Remove dependency on org.mortbay.jetty:jetty-util 6.1.26 (or upgrade to\u00a0version is 6.1.26.hwx or greater)\r\n * Remove dependency on org.apache.zookeeper:zookeeper 3.4.9 (or upgrade to\u00a0version 3.4.10, 3.5.3, and later. pre [CVE-2017-5637|https://nvd.nist.gov/vuln/detail/CVE-2017-5637])\r\n * Remove dependency on commons-httpclient:commons-httpclient 3.1 (or upgrade to version\u00a0\u00a05.0-alpha2-RC1)\r\n * Remove dependency on commons-beanutils:commons-beanutils-core 1.8.0 (or upgrade to version\u00a01.9.2 or 1.9.3)\r\n\r\n\u00a0",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "black-duck",
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Remove unsecure dependencies from ambari-agent"
   },
   {
      "_id": "13157378",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-05-05 18:45:43",
      "description": "FindBugs produces 1428 warnings for String comparisons in Ambari Server's statically weaved entities.  This amounts to almost 400KB in Jenkins build logs.\r\n\r\n{noformat:title=}\r\n[INFO] Comparison of String parameter using == or != in org.apache.ambari.server.orm.entities.AlertCurrentEntity._persistence_get(String)  [org.apache.ambari.server.orm.entities.AlertCurrentEntity] In AlertCurrentEntity.java ES_COMPARING_PARAMETER_STRING_WITH_EQ\r\n[INFO] Comparison of String parameter using == or != in org.apache.ambari.server.orm.entities.AlertCurrentEntity._persistence_set(String, Object)  [org.apache.ambari.server.orm.entities.AlertCurrentEntity] In AlertCurrentEntity.java ES_COMPARING_PARAMETER_STRING_WITH_EQ\r\n{noformat}\r\n\r\nAs we have no control over this kind of generated code, it should be suppressed, both to focus on more real problems pointed out by FindBugs, and to reduce size of our build logs.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Suppress FindBugs warnings for EclipseLink-generated code"
   },
   {
      "_id": "13157244",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-04 16:13:42",
      "description": "Icon for \"Start Demo Ldap\" is missing from knox action list in ambari.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Icon for \"start demo ldap\" is missing"
   },
   {
      "_id": "13157173",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         }
      ],
      "created": "2018-05-04 14:18:19",
      "description": "If parallel_execution on Ambari Agent is enabled, two components (History Server and Hive Server) may create and upload the MapReduce and Tez archives concurrently.  This could result in a corrupt uploaded file, preventing Hive Server from starting.\r\n\r\n{noformat:title=output-32.txt}\r\n2018-05-04 07:24:40,421 - Creating a new Tez tarball at /var/lib/ambari-agent/tmp/tez-native-tarball-staging/tez-native.tar.gz\r\n...\r\n2018-05-04 07:24:49,751 - Creating new file /hdp/apps/2.6.4.5-2/tez/tez.tar.gz in DFS\r\n2018-05-04 07:24:49,753 - call['ambari-sudo.sh su hdfs -l -s /bin/bash -c 'curl -sS -L -w '\"'\"'%{http_code}'\"'\"' -X PUT --data-binary @/var/lib/ambari-agent/tmp/tez-native-tarball-staging/tez-native.tar.gz -H '\"'\"'Content-Type: application/octet-stream'\"'\"' '\"'\"'http://localhost:50070/webhdfs/v1/hdp/apps/2.6.4.5-2/tez/tez.tar.gz?op=CREATE&user.name=hdfs&overwrite=True&permission=444'\"'\"' 1>/tmp/tmpoEINHo 2>/tmp/tmpkjlNxP''] {'logoutput': None, 'quiet': False}\r\n2018-05-04 07:24:51,629 - call returned (0, '')\r\n{noformat}\r\n\r\n{noformat:title=output-30.txt}\r\n2018-05-04 07:24:46,818 - Creating a new Tez tarball at /var/lib/ambari-agent/tmp/tez-native-tarball-staging/tez-native.tar.gz\r\n...\r\n2018-05-04 07:24:54,117 - DFS file /hdp/apps/2.6.4.5-2/tez/tez.tar.gz is identical to /var/lib/ambari-agent/tmp/tez-native-tarball-staging/tez-native.tar.gz, skipping the copying\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Corrupt mapreduce/tez tar.gz may be uploaded to HDFS if parallel execution is enabled"
   },
   {
      "_id": "13157168",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-05-04 13:56:45",
      "description": "Server should sent topology info as a part of command only during\u00a0blueprint commands posting.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Remove topology info from non-blueprint commands"
   },
   {
      "_id": "13157130",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-04 12:19:59",
      "description": "Stomp client subscription should happen after WebSocket connected.\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Subscriptions should be bound to WebSocket connection"
   },
   {
      "_id": "13157112",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-04 10:49:32",
      "description": "In ambari-2.7, the dropdowns in the following screens do not conform to the rest of the UI.\r\n\r\n# Host Details Page -> Configs -> Change Config Group -> Groups\r\n# Host Details Page -> Alerts -> Filters (Service, Status) \r\n# Host Details Page -> Versions -> Filters (Stack, Name, Status) \r\n# Host Details Page -> Logs -> Filters (Service, Component, Extension) \r\n\r\nWhereas dropdowns in  other pages, e.g. HDFS -> Configs -> Config Group have a different design.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Dropdowns in Host Details Page do not conform to the new UI"
   },
   {
      "_id": "13156944",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-05-03 19:22:43",
      "description": "*STR*\r\n1) Upgrade Ambari from 2.6.X to 2.7.0.0-435 ( Unkerberized cluster)\r\n2) Upgrade Non Stack Services, like Infra Solr.\r\n3) Restart all required services (which might have stale configs)\r\n4) Run Service check on Ambari Infra Solr . It fails with below error\r\n\r\n{code:java}\r\nTraceback (most recent call last):\r\n  File \"/var/lib/ambari-agent/cache/common-services/AMBARI_INFRA_SOLR/0.1.0/package/scripts/service_check.py\", line 48, in <module>\r\n    InfraServiceCheck().execute()\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 353, in execute\r\n    method(env)\r\n  File \"/var/lib/ambari-agent/cache/common-services/AMBARI_INFRA_SOLR/0.1.0/package/scripts/service_check.py\", line 27, in service_check\r\n    import params\r\n  File \"/var/lib/ambari-agent/cache/common-services/AMBARI_INFRA_SOLR/0.1.0/package/scripts/params.py\", line 109, in <module>\r\n    infra_solr_java_stack_size = format(config['configurations']['infra-solr-env']['infra_solr_java_stack_size'])\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/functions/format.py\", line 95, in format\r\n    return ConfigurationFormatter().format(format_string, args, **result)\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/functions/format.py\", line 59, in format\r\n    result_protected = self.vformat(format_string, args, all_params)\r\n  File \"/usr/lib64/python2.7/string.py\", line 549, in vformat\r\n    result = self._vformat(format_string, args, kwargs, used_args, 2)\r\n  File \"/usr/lib64/python2.7/string.py\", line 558, in _vformat\r\n    self.parse(format_string):\r\n  File \"/usr/lib64/python2.7/string.py\", line 621, in parse\r\n    return format_string._formatter_parser()\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/config_dictionary.py\", line 73, in __getattr__\r\n    raise Fail(\"Configuration parameter '\" + self.name + \"' was not found in configurations dictionary!\")\r\nresource_management.core.exceptions.Fail: Configuration parameter 'infra_solr_java_stack_size' was not found in configurations dictionary!\r\n{code}\r\n\r\n*Cause*\r\nWhile upgrading the name of the AMBARI_INFRA service is changed to AMBARI_INFRA_SOLR, but the old name is cached in the JPA entities cause a mismatch on services names at some point. \r\n\r\n*Solution*\r\nClear the JPA entity cache after changing the AMBARI_INFRA service name. \r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available",
         "upgrade"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Ambari Infra Solr Service Check fails after Ambari Upgrade"
   },
   {
      "_id": "13156873",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-03 13:47:12",
      "description": "Our assumption is that ambari should be able to allow zero node deployment of this master component. But unfortunately, UI does not have any provision to remove master components (which has cardinality 0-3). This causes dependency issues in HDF environment where the dependent component does not exists.\r\nFor the Activity Analyzer and Activity Explorer. We don\u2019t want those to show up in assign masters for the HDF stack.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Hide SmartSense master components in HDF stack"
   },
   {
      "_id": "13156631",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-02 15:05:22",
      "description": "The \"Hive View 2.0\" and \"Debug Hive Query\" links need to be removed from the Hive Summary section as they are being removed from Ambari 2.7/HDP 3.0.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Hive Service Summary View Links Need to be removed"
   },
   {
      "_id": "13156618",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-02 14:31:41",
      "description": "See attached.\r\nModifed FE code (doNotShowAndInstall computed property) so that Ranger can be installed from Install Wizard.  Installation succeeded.  However, post-Install, there were some JS errors (see attached) that prevented the Smart Config pages from loading.  See attached. !Screen Shot 2018-04-27 at 2.17.22 PM.png|thumbnail! \r\nAfter page refresh, the problem went away and Smart Configs can be viewed just fine.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "JS error after installing Ranger from Install Wizard - Smart Configs are broken - page refresh fixed the issue"
   },
   {
      "_id": "13156604",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-05-02 13:18:51",
      "description": "Selected namespace names are shown in uppercase where as they are actually created in lowercase and in dropdown it's in lowercase",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Namespace names are converted to uppercase after selecting from dropdown"
   },
   {
      "_id": "13156117",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-30 14:30:20",
      "description": "When Spark2 is selected in services in left pane, Spark gets selected along with it.\r\nThe pointer should only point to Spark2 (which is the selected service).",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "When Spark2 is selected in left pane, Spark also gets selected along with it"
   },
   {
      "_id": "13156082",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-30 09:46:48",
      "description": "The HDFS Service Page in the new Ambari UI page displays useful information about the service components. This information would be easier to digest if all the HDFS components were grouped together at the top of the page (in the components section) as they are for the rest of the services.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Group HDFS components into the components section of the ambari service summary page"
   },
   {
      "_id": "13155760",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-27 18:14:38",
      "description": "*STR*\r\n# Enable NameNode federation\r\n# Add or remove some NameNode widgets on dashboard\r\n# Go to other page and retirn to dashboard, or stay on dashboard and refresh the page\r\n\r\n*Expected result*\r\nNameNode widgets are displayed/hidden according to the adding/removing actions described above\r\n\r\n*Actual result*\r\nDefault set of NameNode widgets is displayed",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Adding and deleting widgets of NameNode section on dashboard isn't persisted"
   },
   {
      "_id": "13155735",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-27 15:42:14",
      "description": "On cluster deploy, Ambari UI sending such request body: \r\n\r\n{code}\r\n{\"operating_systems\":[{\"OperatingSystems\":{\"os_type\":\"redhat7\",\"ambari_managed_repositories\":true},\"repositories\":[{\"Repositories\":{\"base_url\":\"\",\"repo_id\":\"HDP-3.0\",\"repo_name\":\"HDP\",\"components\":null,\"tags\":[],\"distribution\":null}},{\"Repositories\":{\"base_url\":\"\",\"repo_id\":\"HDP-3.0-GPL\",\"repo_name\":\"HDP-GPL\",\"components\":null,\"tags\":[\"GPL\"],\"distribution\":null}},{\"Repositories\":{\"base_url\":\"\",\"repo_id\":\"HDP-UTILS-1.1.0.21\",\"repo_name\":\"HDP-UTILS\",\"components\":null,\"tags\":[],\"distribution\":null}}]}]}: \r\n{code}\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Ambari UI trying to create GPL repo with empty base url for the rest repos"
   },
   {
      "_id": "13155704",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-04-27 13:16:20",
      "description": "STR\r\n\r\n1). Install Ambari-2.6.0.0-267\r\n2) Upgrade Ambari to 2.7.0.0-308 \r\n3) Check for hbase.zookeeper.property.clientPort property under Advanced ams-hbase-site in UI. It is empty and is shown as required. But it has a value before Upgrade . \r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "hbase.zookeeper.property.clientPort config of AMS is empty after Ambari Upgrade"
   },
   {
      "_id": "13155678",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-27 10:51:16",
      "description": "The Kafka Service Summary screen shows all Ambari View instances under the \"Views\" Quick Link.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Kafka Quick Links Shows all Views links"
   },
   {
      "_id": "13155677",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-27 10:51:16",
      "description": "While comparing two config versions , if config values are long , than the diff shows values merging into each other and text is not wrapped.\r\n\r\nSee Attached Screenshot",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Config Version Comparison tool shows diff text merging into each other if config values are long."
   },
   {
      "_id": "13155653",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-04-27 08:26:18",
      "description": "When upgrading Ambari from 2.6.x to 2.7.0 an error occured in SchemaUpgradeHelper:\r\n{code:java}\r\n15 Apr 2018 17:12:06,307 INFO [main] DBAccessorImpl:876 - Executing query: CREATE TABLE repo_tags (repo_definition_id BIGINT NOT NULL, tag VARCHAR(255) NOT NULL) ENGINE=INNODB\r\n15 Apr 2018 17:12:06,333 INFO [main] DBAccessorImpl:876 - Executing query: ALTER TABLE repo_tags ADD CONSTRAINT FK_repo_tag_definition_id FOREIGN KEY (repo_definition_id) REFERENCES repo_definition (id)\r\n15 Apr 2018 17:12:06,349 ERROR [main] SchemaUpgradeHelper:207 - Upgrade failed.\r\njava.lang.NullPointerException\r\n at org.apache.ambari.server.upgrade.UpgradeCatalog270.migrateRepoData(UpgradeCatalog270.java:443)\r\n at org.apache.ambari.server.upgrade.UpgradeCatalog270.upgradeRepoTables(UpgradeCatalog270.java:323)\r\n at org.apache.ambari.server.upgrade.UpgradeCatalog270.executeDDLUpdates(UpgradeCatalog270.java:291)\r\n at org.apache.ambari.server.upgrade.AbstractUpgradeCatalog.upgradeSchema(AbstractUpgradeCatalog.java:973)\r\n at org.apache.ambari.server.upgrade.SchemaUpgradeHelper.executeUpgrade(SchemaUpgradeHelper.java:205)\r\n at org.apache.ambari.server.upgrade.SchemaUpgradeHelper.main(SchemaUpgradeHelper.java:448)\r\n15 Apr 2018 17:12:06,350 ERROR [main] SchemaUpgradeHelper:473 - Exception occurred during upgrade, failed\r\norg.apache.ambari.server.AmbariException\r\n at org.apache.ambari.server.upgrade.SchemaUpgradeHelper.executeUpgrade(SchemaUpgradeHelper.java:208)\r\n at org.apache.ambari.server.upgrade.SchemaUpgradeHelper.main(SchemaUpgradeHelper.java:448)\r\nCaused by: java.lang.NullPointerException\r\n at org.apache.ambari.server.upgrade.UpgradeCatalog270.migrateRepoData(UpgradeCatalog270.java:443)\r\n at org.apache.ambari.server.upgrade.UpgradeCatalog270.upgradeRepoTables(UpgradeCatalog270.java:323)\r\n at org.apache.ambari.server.upgrade.UpgradeCatalog270.executeDDLUpdates(UpgradeCatalog270.java:291)\r\n at org.apache.ambari.server.upgrade.AbstractUpgradeCatalog.upgradeSchema(AbstractUpgradeCatalog.java:973)\r\n at org.apache.ambari.server.upgrade.SchemaUpgradeHelper.executeUpgrade(SchemaUpgradeHelper.java:205)\r\n ... 1 more{code}\r\nThis issue occurred only when we had data in\u00a0_repo_version_ and the _repositories_ JSON contained missing data (_OperatingSystems/ambari_managed_repositories_ was missing).\r\n\r\n\u00a0",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Ambari Schema Upgrade Failing source 2.6.2.0 target 2.7.0.0"
   },
   {
      "_id": "13155460",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         }
      ],
      "created": "2018-04-26 16:45:59",
      "description": "HiveServer 2 fails to start due to:\r\n\r\n{noformat}\r\n2018-04-26 07:54:04,971 - call['/usr/hdp/current/zookeeper-client/bin/zkCli.sh -server 0:2181,2:2181,4:2181 ls /hiveserver2 | grep '\\[serverUri=''] {}\r\n2018-04-26 07:54:05,693 - call returned (1, 'Exception in thread \"main\" org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss\r\n{noformat}\r\n\r\nZooKeeper connection string contains host indexes instead of hostnames.  This only happens upon command retry, initial run uses hostnames.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Agent uses compressed topology upon retry"
   },
   {
      "_id": "13155421",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-26 14:11:17",
      "description": "We should use the standard gray in the background. rgba(233, 233, 233, 0.5).\r\nSee screenshots",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "NameNode HA wizard style changes"
   },
   {
      "_id": "13155413",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-26 13:42:40",
      "description": "Need better xpaths for quicklinks when multiple namespaces are present. It would be better if quicklinks are grouped by namespaces",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Need better xpaths for quicklinks when multiple namespaces are present"
   },
   {
      "_id": "13155355",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2018-04-26 09:52:58",
      "description": "Add New HDFS Namespace wizard fails at Reconfigure Services step when trying to add new namespace \"ns2\" (existing namespace is \"TEST\") in a HDP 2.6 cluster.\r\n\r\n{noformat}\r\nTraceback (most recent call last):\r\n  File \"/var/lib/ambari-agent/cache/common-services/HDFS/2.1.0.2.0/package/scripts/hdfs_client.py\", line 78, in <module>\r\n    HdfsClient().execute()\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 353, in execute\r\n    method(env)\r\n  File \"/var/lib/ambari-agent/cache/common-services/HDFS/2.1.0.2.0/package/scripts/hdfs_client.py\", line 35, in install\r\n    import params\r\n  File \"/var/lib/ambari-agent/cache/common-services/HDFS/2.1.0.2.0/package/scripts/params.py\", line 25, in <module>\r\n    from params_linux import *\r\n  File \"/var/lib/ambari-agent/cache/common-services/HDFS/2.1.0.2.0/package/scripts/params_linux.py\", line 330, in <module>\r\n    if hostname.lower() in nn_host.lower() or public_hostname.lower() in nn_host.lower():\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/config_dictionary.py\", line 73, in __getattr__\r\n    raise Fail(\"Configuration parameter '\" + self.name + \"' was not found in configurations dictionary!\")\r\nresource_management.core.exceptions.Fail: Configuration parameter 'dfs.namenode.rpc-address.TEST,ns2.nn1' was not found in configurations dictionary!\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Adding new namespace fails at Reconfigure Services for HDFS 2"
   },
   {
      "_id": "13155342",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-04-26 08:52:22",
      "description": "A good example is when we start up a specific Namenode, say NN1. In that case,\nwe try to get the HAState of all the NNs (even NN3 and NN4) to find out the\nactive namenode. This is not really needed since starting up NN1 should not\ncare about NN3 and NN4's state.\n\nI see usages in following places.\n\n  * ambari-common/src/main/python/resource_management/libraries/providers/hdfs_resource.py\n  * ambari-server/src/main/resources/common-services/HDFS/2.1.0.2.0/package/scripts/namenode_ha_state.py\n  * ambari-common/src/main/python/resource_management/libraries/functions/namenode_ha_utils.py\n\nSome of the above might not need any change.\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Stack scripts should only try to reach corresponding Namenode pair in the context rather than all NNs"
   },
   {
      "_id": "13155263",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-04-25 22:27:29",
      "description": "# Remove dependency on com.fasterxml.jackson.dataformat:jackson-dataformat-xml 2.4.5 in ambari-utility due to security concerns.\u00a0Recommendation is to remove the dependency or upgrade to version 2.6.3.redhat-3 or the latest version, if possible.\r\n # Remove dependency on com.fasterxml.jackson.core:jackson-databind 2.9.4 in ambari-utility due to security concerns.\u00a0Recommendation is to remove the dependency or upgrade to version 2.9.5 or the latest, if possible.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Remove unsecure dependencies from ambari-utility"
   },
   {
      "_id": "13155235",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-04-25 19:53:26",
      "description": "Symlinks are not followed when requesting resources from Ambari's resources entry point.\r\n\r\nFor example if the Beacon mpack is installed, a symlink is made from /var/lib/ambari-server/resources/mpacks/beacon-engine.mpack-1.1.0.0/addon-services/BEACON/1.1.0 to /var/lib/ambari-server/resources/stacks/HDP/2.6/services/BEACON:\r\n{noformat}\r\n# ls -ltr /var/lib/ambari-server/resources/stacks/HDP/2.6/services/BEACON\r\nlrwxrwxrwx 1 root root 95 Apr 25 07:03 /var/lib/ambari-server/resources/stacks/HDP/2.6/services/BEACON -> /var/lib/ambari-server/resources/mpacks/beacon-engine.mpack-1.1.0.0/addon-services/BEACON/1.1.0\r\n{noformat}\r\n\r\n{noformat}\r\n# curl -i -X GET http://c7401.ambari.apache.org:8080/resources/stacks/HDP/2.6/services/BEACON/metainfo.xml\r\nHTTP/1.1 404 Not Found\r\nX-Frame-Options: DENY\r\nX-XSS-Protection: 1; mode=block\r\nX-Content-Type-Options: nosniff\r\nPragma: no-cache\r\nContent-Type: text/plain;charset=ISO-8859-1\r\nContent-Length: 45\r\n\r\n{\r\n  \"status\": 404,\r\n  \"message\": \"Not Found\"\r\n}\r\n{noformat}\r\n\r\nWhen this occurs, the stack definitions from BEACON are not able to be cached by the Ambari agents. \r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Symlinks are not followed when requesting resources from Ambari's resources entry point"
   },
   {
      "_id": "13155170",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-25 16:20:30",
      "description": "The UI should ignore Kerberos identity references when setting the user-supplied Kerberos descriptor.  \r\n\r\nFor example, any Kerberos identity entry that contains a \"reference\" attribute, should not be added to the JSON data stored in the cluster artifact table, which represents the _user-supplied_ Kerberos descriptor. \r\n\r\nCurrently, there are a few errors in the current process:\r\n\r\n*Variables are being replaced*\r\n{code}\r\n{\r\n  \"keytab\": {\r\n    \"configuration\": \"mapred-site/mapreduce.jobhistory.webapp.spnego-keytab-file\",\r\n    \"file\": \"/etc/security/keytabs/spnego.service.keytab\"\r\n  },\r\n  \"name\": \"mapreduce2_historyserver_spnego\",\r\n  \"principal\": {\r\n    \"configuration\": \"mapred-site/mapreduce.jobhistory.webapp.spnego-principal\",\r\n    \"local_username\": null,\r\n    \"type\": null,\r\n    \"value\": \"HTTP/_HOST@EXAMPLE.COM\"\r\n  },\r\n  \"reference\": \"/spnego\"\r\n}\r\n{code}\r\n\r\nThis should be \r\n\r\n{code}\r\n{\r\n  \"keytab\": {\r\n    \"configuration\": \"mapred-site/mapreduce.jobhistory.webapp.spnego-keytab-file\",\r\n    \"file\": \"${keytab_dir}/spnego.service.keytab\"\r\n  },\r\n  \"name\": \"mapreduce2_historyserver_spnego\",\r\n  \"principal\": {\r\n    \"configuration\": \"mapred-site/mapreduce.jobhistory.webapp.spnego-principal\",\r\n    \"local_username\": null,\r\n    \"type\": null,\r\n    \"value\": \"HTTP/_HOST@EXAMPLE.COM\"\r\n  },\r\n  \"reference\": \"/spnego\"\r\n}\r\n{code}\r\n\r\nBut really should be \r\n\r\n{code}\r\n{\r\n  \"keytab\": {\r\n    \"configuration\": \"mapred-site/mapreduce.jobhistory.webapp.spnego-keytab-file\"\r\n  },\r\n  \"name\": \"mapreduce2_historyserver_spnego\",\r\n  \"principal\": {\r\n    \"configuration\": \"mapred-site/mapreduce.jobhistory.webapp.spnego-principal\"\r\n  },\r\n  \"reference\": \"/spnego\"\r\n}\r\n{code}\r\n\r\n*Incorrect variable replacement*\r\nSome replacement issue has occurred where the keytab _file_ and the principal _name_ values have been swapped:\r\n\r\n{code}\r\n{\r\n  \"keytab\": {\r\n    \"configuration\": \"hive-site/hive.server2.authentication.spnego.keytab\",\r\n    \"file\": \"HTTP/_HOST@EXAMPLE.COM\"\r\n  },\r\n  \"name\": \"hive_hive_server_spnego\",\r\n  \"principal\": {\r\n    \"configuration\": \"hive-site/hive.server2.authentication.spnego.principal\",\r\n    \"local_username\": null,\r\n    \"type\": null,\r\n    \"value\": \"/etc/security/keytabs/spnego.service.keytab\"\r\n  },\r\n  \"reference\": \"/spnego\"\r\n},\r\n{code}\r\n\r\nAnd error that has resulted from this occurred while installing Hive into a cluster where Kerberos was enabled:\r\n{noformat}\r\n2018-04-18 19:30:24,557 - Failed to create principal, /etc/security/keytabs/spnego.service.keytab - Failed to create service principal for /etc/security/keytabs/spnego.service.keytab\r\nSTDOUT: Authenticating as principal admin/admin@EXAMPLE.COM with existing credentials.\r\nPrincipal \"/etc/security/keytabs/spnego.service.keytab@EXAMPLE.COM\" created.\r\n\r\nSTDERR: WARNING: no policy specified for /etc/security/keytabs/spnego.service.keytab@EXAMPLE.COM; defaulting to no policy\r\n\r\n\u0007\u0007\u0007Administration credentials NOT DESTROYED.\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "The UI should ignore Kerberos identity references when setting the user-supplied Kerberos descriptor"
   },
   {
      "_id": "13155141",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-04-25 14:20:25",
      "description": "* Remove dependency on org.springframework.security:spring-security-core 4.2.2.RELEASE in Ambari Server\r\n* Remove dependency on org.springframework.ldap:spring-ldap-core 2.0.4.RELEASE in Ambari Server\t\r\n* Remove dependency on org.springframework.security:spring-security-config 4.2.2.RELEASE in Ambari Server\r\n* Remove dependency on com.nimbusds:nimbus-jose-jwt 3.9 in Ambari Server\r\n* Remove dependency on org.apache.ant:ant-launcher 1.7.1 in Ambari Server\r\n* Remove dependency on org.springframework.security:spring-security-ldap 4.0.4.RELEASE in Ambari Server\r\n* Remove dependency on org.springframework.security:spring-security-web 4.2.2.RELEASE in Ambari Server\r\n* Remove dependency on com.jcraft:jsch 0.1.42 in Ambari Server\r\n* Remove dependency on com.fasterxml.jackson.dataformat:jackson-dataformat-xml 2.4.5 in Ambari Server",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Remove unsecure dependencies from ambari-server"
   },
   {
      "_id": "13155109",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-25 12:59:37",
      "description": "After enabling NameNode federation, the section with namespace-scoped widgets on HDFS metric page appears. Namespaces list is misaligned relatively to select control.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "HDFS metrics page: list of namespaces is misaligned"
   },
   {
      "_id": "13155094",
      "assignee": "smolnar",
      "components": [],
      "created": "2018-04-25 11:55:21",
      "description": "UI deployment via Ambari-2.6 has components NFSGateway & 'Phoenix Query Server' disabled (i.e. the checkbox is not checked) on 'Assign Slaves and Clients' page.\u00a0In Ambari 2.7 these check boxes are active but they should not be.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Deselect NFS Gateway (and Phoenix Query Server) by default in Ambari UI deployment"
   },
   {
      "_id": "13155076",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-04-25 09:57:25",
      "description": "{{dfs_ha_initial_namenode_active}} and {{dfs_ha_initial_namenode_standby}} properties are not removed from {{hadoop-env}} config after installing a cluster with NameNode HA using blueprints.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "dfs_ha_initial_* properties should be removed after installation"
   },
   {
      "_id": "13155068",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-04-25 09:15:09",
      "description": "In an unkerberized cluster , after ambari upgrade from 2.6.X to 2.7.0.0 , the\nservice check for Ambari Metrics fail with below error.\n\n    \r\n    Traceback (most recent call last):\r\n      File \"/var/lib/ambari-agent/cache/common-services/AMBARI_METRICS/0.1.0/package/scripts/service_check.py\", line 304, in <module>\r\n        AMSServiceCheck().execute()\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 353, in execute\r\n        method(env)\r\n      File \"/usr/lib/ambari-agent/lib/ambari_commons/os_family_impl.py\", line 89, in thunk\r\n        return fn(*args, **kwargs)\r\n      File \"/var/lib/ambari-agent/cache/common-services/AMBARI_METRICS/0.1.0/package/scripts/service_check.py\", line 170, in service_check\r\n        import params\r\n      File \"/var/lib/ambari-agent/cache/common-services/AMBARI_METRICS/0.1.0/package/scripts/params.py\", line 119, in <module>\r\n        'files', 'grafana-dashboards', stack_name))\r\n      File \"/usr/lib64/python2.7/posixpath.py\", line 75, in join\r\n        if b.startswith('/'):\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/config_dictionary.py\", line 73, in __getattr__\r\n        raise Fail(\"Configuration parameter '\" + self.name + \"' was not found in configurations dictionary!\")\r\n    resource_management.core.exceptions.Fail: Configuration parameter 'service_package_folder' was not found in configurations dictionary!\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari Metrics Service Check Fails Post Ambari Upgarde with error : Configuration parameter not found in configurations dictionary!"
   },
   {
      "_id": "13154845",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-24 15:58:56",
      "description": "In Select Target Hosts page, the current host for the component is not shown in the list of available options for the component. This leads to a blank being shown in the combo box.\r\n\r\nThe current host was part of the options in earlier ambari versions.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "In Select Target Host page as part of Move Master wizard, the host holding the component is not present in list of options"
   },
   {
      "_id": "13154811",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-24 13:59:09",
      "description": "Some of the following areas of the UI look a bit off WRT styling. \r\n\r\n- Upgrade repositories\r\n-- Button size\r\n-- Repository placement / size\r\n\r\n- Upgrade History\r\n- General styling and alignment",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "UI Styling Is Incorrect On Upgrade Repositories Page"
   },
   {
      "_id": "13154789",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-24 12:38:49",
      "description": "The service and component categorization are incorrect for e.x.\r\n\r\nNameNode, Nodemanager and and Nimbus are under \"Ambari Metrics\".",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "issue with service auto restart service categorization"
   },
   {
      "_id": "13154765",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-24 11:14:11",
      "description": "See screenshots\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Heatmaps page style changes"
   },
   {
      "_id": "13154552",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-04-23 18:08:10",
      "description": "Ensure URLs to Ambari server resources are valid.  For example, fix URLs like \r\n{noformat}\r\nhttp://ambari_server_host:8080/resources//DBConnectionVerification.jar\r\n{noformat}\r\nTo\r\n{noformat}\r\nhttp://ambari_server_host:8080/resources/DBConnectionVerification.jar\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Ensure URLs to Ambari server resources are valid"
   },
   {
      "_id": "13154503",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-04-23 14:53:05",
      "description": "Execution command should contain actual cluster topology information. Temporary fix.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Hosts topology can be incomplete for components install during blueprint deploy"
   },
   {
      "_id": "13154441",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-23 10:38:11",
      "description": "After enabling NameNode federation and adding two additional namespaces, dashboards has no widgets displayed, with infinite spinner instead of them. Also, JS error is thrown: {{Uncaught TypeError: Cannot read property '1' of undefined}}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "No widgets displayed on dashboard after adding third NameNode namespace"
   },
   {
      "_id": "13154434",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-04-23 10:05:35",
      "description": "This is required so that if connection between agent and server is lost, agent\nknows what was lost and can resend it later.\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari-agent should handle delivery status responses from server"
   },
   {
      "_id": "13154433",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-23 09:54:40",
      "description": "Namespaces should be displayed in alphabetical order.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "NameNode namespaces aren't sorted by name"
   },
   {
      "_id": "13154334",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-04-22 18:44:01",
      "description": "Ensure URLs to Ambari server resources are valid.  For example, fix URLs like \r\n{noformat}\r\nhttp://ambari_server_host:8080/resources//DBConnectionVerification.jar\r\n{noformat}\r\nTo\r\n{noformat}\r\nhttp://ambari_server_host:8080/resources/DBConnectionVerification.jar\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Ensure URLs to Ambari server resources are valid"
   },
   {
      "_id": "13154004",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-20 11:31:40",
      "description": "*STR*\r\n# Deploy HDP-2.6.1.0 cluster with Ambari-2.6.x\r\n# Upgrade Ambari to 2.7.0.0\r\n# Register HDP-3.0 VDF\r\n# Go to Version page and observe the small icon against services that are unsupported in 3.0 like Falcon, Flume, Spark, Mahout, Slider\r\n# Hover mouse over them - it does not indicate any message\r\n\r\n*Expected Result*\r\nIt would be good to say something like: This service is unsupported in the current version of the stack",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Missing tooltip/indicator for unsupported services in Versions page when HDP-3.0 VDF is registered"
   },
   {
      "_id": "13154002",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-04-20 11:22:40",
      "description": "GET http://c7401:8080/api/v1/stacks/HDP/versions/2.6/compatible_repository_versions\r\n\r\n{code}\r\n\r\n  \"href\" : \"http://c7401:8080/api/v1/stacks/HDP/versions/2.6/compatible_repository_versions\",\r\n  \"items\" : [\r\n    {\r\n      \"href\" : \"http://c7401:8080/api/v1/stacks/HDP/versions/2.6/compatible_repository_versions/51\",\r\n      \"CompatibleRepositoryVersions\" : {\r\n        \"id\" : 51,\r\n        \"stack_name\" : \"HDP\",\r\n        \"stack_version\" : \"2.6\",\r\n        \"upgrade_types\" : [\r\n          \"NON_ROLLING\",\r\n          \"HOST_ORDERED\",\r\n          \"ROLLING\"\r\n        ]\r\n      }\r\n    },\r\n    {\r\n      \"href\" : \"http://c7401:8080/api/v1/stacks/HDP/versions/2.6/compatible_repository_versions/1\",\r\n      \"CompatibleRepositoryVersions\" : {\r\n        \"id\" : 1,\r\n        \"stack_name\" : \"HDP\",\r\n        \"stack_version\" : \"3.0\",\r\n        \"upgrade_types\" : [\r\n          \"NON_ROLLING\"\r\n        ]\r\n      }\r\n    }\r\n  ]\r\n}\r\n{code}\r\n\r\nThe version in the second href is incorrect.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Compatibility repository version wrong"
   },
   {
      "_id": "13153844",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-04-19 21:16:58",
      "description": "*Scenario*\r\nRanger and Atlas are SSO enabled via BP deploys and Ambari is not SSO enabled. \r\nLater Ambari SSO has to be enabled without changing existing configs(so restart will not be required) for Atlas and Ranger. \r\nNow this is not possible with \"Enable for the selected services\" option. \r\nThis was possible in previous versions but with the latest changes from AMBARI-23253, even if SSO was enabled for services earlier we still have to opt SSO for Ranger and Atlas in the list. When services are specified in the list, this would prompt for service restart.\r\nSo,\r\n---If we enable SSO for Ambari and not the other services via the CLI, then any previous SSO setting for those services will be cleared\r\n---If we enable SSO for Ambari and the other services via the CLI, then any previous SSO setting for those services will be potentially updated and this cause services to need to restart. But since data is the same no restart should be needed for those services\r\n\r\n*Solution*\r\nAdd new prompts to separate Ambari's SSO configuration from the managed service's SSO configs so they can be managed separately:\r\n* Use SSO for Ambari ({{--sso-enabled-ambari}})\r\n* Manage SSO configurations for eligible services ({{--sso-manage-services}})\r\n\r\n{noformat}\r\n[root@c7401 ~]# ambari-server setup-sso --help\r\nUsing python  /usr/bin/python\r\nSetting up SSO authentication properties...\r\nUsage: ambari-server.py action [options]\r\n\r\nOptions:\r\n  -h, --help            show this help message and exit\r\n  -v, --verbose         Print verbose status messages\r\n  -s, --silent          Silently accepts default prompt values. For db-cleanup\r\n                        command, silent mode will stop ambari server.\r\n  --sso-enabled=SSO_ENABLED\r\n                        Indicates whether to enable/disable SSO\r\n  --sso-enabled-ambari=SSO_ENABLED_AMBARI\r\n                        Indicates whether to enable/disable SSO authentication\r\n                        for Ambari, itself\r\n  --sso-manage-services=SSO_MANAGE_SERVICES\r\n                        Indicates whether Ambari should manage the SSO\r\n                        configurations for specified services\r\n  --sso-enabled-services=SSO_ENABLED_SERVICES\r\n                        A comma separated list of services that are expected\r\n                        to be configured for SSO (you are allowed to use '*'\r\n                        to indicate ALL services)\r\n  --sso-provider-url=SSO_PROVIDER_URL\r\n                        The URL of SSO provider; this must be provided when\r\n                        --sso-enabled is set to 'true'\r\n  --sso-public-cert-file=SSO_PUBLIC_CERT_FILE\r\n                        The path where the public certificate PEM is located;\r\n                        this must be provided when --sso-enabled is set to\r\n                        'true'\r\n  --sso-jwt-cookie-name=SSO_JWT_COOKIE_NAME\r\n                        The name of the JWT cookie\r\n  --sso-jwt-audience-list=SSO_JWT_AUDIENCE_LIST\r\n                        A comma separated list of JWT audience(s)\r\n  --ambari-admin-username=AMBARI_ADMIN_USERNAME\r\n                        Ambari administrator username for accessing Ambari's REST API\r\n  --ambari-admin-password=AMBARI_ADMIN_PASSWORD\r\n                        Ambari administrator password for accessing Ambari's REST API\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Enable Ambari SSO to be enabled without impacting other service sso configs"
   },
   {
      "_id": "13153780",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-04-19 17:37:05",
      "description": "Spring dependencies should be updated to fix remote code execution vulnerabilities:\r\n[https://pivotal.io/security/cve-2018-1270]\r\n[https://pivotal.io/security/cve-2018-1275]",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Update Spring dependencies to fix CVE-2018-1270"
   },
   {
      "_id": "13153708",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-19 13:56:27",
      "description": "1) go to https://<host_name>/#/main/admin/kerberos\r\n2) click edit\r\n3) add Additional Realms config in ambari kerberos config tab\r\n4) click save\r\n5) Click OK from the popup which ask for the restart of the components\r\nIn network tab we got this error:\r\nRequest URL:https://<host_name>/api/v1/clusters/<cluster_name>/artifacts/kerberos_descriptor\r\nRequest Method:PUT\r\nStatus Code:404 Not Found\r\n{ \"status\" : 404, \"message\" : \"org.apache.ambari.server.controller.spi.NoSuchResourceException: The requested resource doesn't exist: Artifact not found, Artifacts/cluster_name=<cluster_name> AND Artifacts/artifact_name=kerberos_descriptor\" }",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Additional realm config change not working"
   },
   {
      "_id": "13153679",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-19 12:40:28",
      "description": "To repro:\r\n* Install a cluster with Hive's database type \"New MySQL\"\r\n* Add Ranger via Add Service Wizard, and have its database point to the Hive's Ambari-managed MySQL database\r\n* Attempt to enable HA via \"Enable NameNode HA Wizard\"\r\nThis fails when Ranger is being started up, because the Ambari-managed MySQL server is down\r\n\r\nTo fix this, we can start the Ambari-managed MySQL server before starting Ranger",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Enable NameNode HA fails if Ranger is set up with Ambari-managed Hive MySQL DB instance"
   },
   {
      "_id": "13153668",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-04-19 12:10:42",
      "description": "JWT cookie name and audiences not queried for during ambari-server setup-sso\r\n\r\nExample:\r\n{noformat}\r\n[root@c7401 ~]# ambari-server setup-sso\r\nUsing python  /usr/bin/python\r\nSetting up SSO authentication properties...\r\nEnter Ambari Admin login: admin\r\nEnter Ambari Admin password:\r\n\r\nSSO is currently not configured\r\nDo you want to configure SSO authentication [y/n] (y)? y\r\nProvider URL (https://knox.example.com:8443/gateway/knoxsso/api/v1/websso):https://c7401.ambari.apache.org:8443/gateway/knoxsso/api/v1/websso\r\nPublic Certificate PEM (empty line to finish input):\r\nMIICVTCCAb6gAwIBAgIILf1Tx+q3QEMwDQYJKoZIhvcNAQEFBQAwbTELMAkGA1UE\r\n...\r\n6crsjbE33yYbJ1mZCpLGtM7mCj0liitItA==\r\n\r\nUse SSO for all services [y/n] (n):\r\nUse SSO for AMBARI [y/n] (y):\r\nUse SSO for ATLAS [y/n] (y):\r\nUse SSO for RANGER [y/n] (y): n\r\nAmbari Server 'setup-sso' completed successfully.\r\n{noformat}\r\n\r\nThe following queries are expected before setup is complete:\r\n{noformat}\r\nJWT Cookie name (hadoop-jwt):\r\nJWT audiences list (comma-separated), empty for any ():\r\n{noformat}\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "JWT cookie name and audiences not queried for during ambari-server setup-sso"
   },
   {
      "_id": "13153612",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-04-19 07:28:37",
      "description": "Ambari server setup fails with the following error:\n\n    \n    \n    \r\n    Traceback (most recent call last):\r\n      File \"/usr/sbin/ambari-server.py\", line 1054, in <module>\r\n        mainBody()\r\n      File \"/usr/sbin/ambari-server.py\", line 1024, in mainBody\r\n        main(options, args, parser)\r\n      File \"/usr/sbin/ambari-server.py\", line 974, in main\r\n        action_obj.execute()\r\n      File \"/usr/sbin/ambari-server.py\", line 79, in execute\r\n        self.fn(*self.args, **self.kwargs)\r\n      File \"/usr/lib/ambari-server/lib/ambari_server/serverSetup.py\", line 1199, in setup\r\n        _setup_database(options)\r\n      File \"/usr/lib/ambari-server/lib/ambari_server/serverSetup.py\", line 1005, in _setup_database\r\n        dbmsAmbari = factory.create(options, properties, \"Ambari\")\r\n      File \"/usr/lib/ambari-server/lib/ambari_server/dbConfiguration.py\", line 511, in create\r\n        dbmsConfig = desc.create_config(options, properties, dbId)\r\n      File \"/usr/lib/ambari-server/lib/ambari_server/dbConfiguration.py\", line 81, in create_config\r\n        return self.fn_create_config(options, properties, self.storage_key, dbId)\r\n      File \"/usr/lib/ambari-server/lib/ambari_server/dbConfiguration_linux.py\", line 884, in createPGConfig\r\n        return PGConfig(options, properties, storage_type)\r\n      File \"/usr/lib/ambari-server/lib/ambari_server/dbConfiguration_linux.py\", line 421, in __init__\r\n        PGConfig.PG_HBA_DIR = get_postgre_hba_dir(OS_FAMILY)\r\n      File \"/usr/lib/ambari-server/lib/ambari_server/utils.py\", line 268, in get_postgre_hba_dir\r\n        get_pg_hba_init_files())\r\n    OSError: [Errno 17] File exists\r\n    \n\nAs I checked this function /usr/lib/ambari-server/lib/ambari_server/utils.py\nget_postgre_hba_dir determines incorrectly the postgres data dir. If I change\nit to return \"/var/lib/pgsql/9.5/data/\" the setup finishes successfully.\nVerbose log attached. Used Ambari version: 2.7.0.0-330\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari-server setup fails on Amazonlinux2"
   },
   {
      "_id": "13153600",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-04-19 06:39:08",
      "description": "In ambari 2.7.0.0-330, when the database type is changed for Oozie service, the JDBC server class does not change. This happens in the install wizard as well as post-install.\r\n\r\nThe behavior is different in Hive, where the JDBC server class changes when the database type changes\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Oozie - JDBC Driver class does not change when the Database type is changed"
   },
   {
      "_id": "13153486",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-18 21:12:05",
      "description": "Header missing in Step2 Select hosts page in NN Federation Wizard. All other pages have proper headers",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Header missing in Step2 Select hosts page in NN Federation Wizard"
   },
   {
      "_id": "13153412",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-18 16:52:50",
      "description": "- Infinite spinner is displayed\r\n- 'Next' button is disabled\r\n- JS error is thrown: {{app.js:31501 Uncaught TypeError: Cannot read property 'indexOf' of undefined}}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Move NameNode wizard is stuck on Review step after enabling federation"
   },
   {
      "_id": "13153397",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323505",
            "id": "12323505",
            "name": "ambari-views",
            "description": "Ambari Views framework and Views themselves.  Specific Views that are built on the framework will be handled with labels."
         }
      ],
      "created": "2018-04-18 16:23:38",
      "description": "In ambari-2.7.0, the view instances are not created by default. \r\n\r\nIn previous versions, the instances of YARN, Files, Hive, Hive 2.0, Smartsense and Tez  were created automatically. ",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "View instances not created by default"
   },
   {
      "_id": "13153361",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         }
      ],
      "created": "2018-04-18 14:21:44",
      "description": "STR\r\n\r\n# Install a Ambari Cluster with Ambari 2.6.1\r\n# Upgrade to Ambari 2.7\r\n# Try to enable NameNode HA\r\n\r\nResult:\r\n\r\n{noformat}\r\nTraceback (most recent call last):\r\n  File \"/var/lib/ambari-agent/cache/common-services/HDFS/2.1.0.2.0/package/scripts/journalnode.py\", line 143, in <module>\r\n    JournalNode().execute()\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 353, in execute\r\n    method(env)\r\n  File \"/var/lib/ambari-agent/cache/common-services/HDFS/2.1.0.2.0/package/scripts/journalnode.py\", line 39, in install\r\n    import params\r\n  File \"/var/lib/ambari-agent/cache/common-services/HDFS/2.1.0.2.0/package/scripts/params.py\", line 25, in <module>\r\n    from params_linux import *\r\n  File \"/var/lib/ambari-agent/cache/common-services/HDFS/2.1.0.2.0/package/scripts/params_linux.py\", line 330, in <module>\r\n    if hostname.lower() in nn_host.lower() or public_hostname.lower() in nn_host.lower():\r\nAttributeError: 'NoneType' object has no attribute 'lower'\r\n{noformat}\r\n\r\nProblem:\r\n\r\n{noformat:title=command*json}\r\n\"public_hostname\": null\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Enable NameNode HA fails after Ambari Upgrade due to AttributeError"
   },
   {
      "_id": "13153314",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323902",
            "id": "12323902",
            "name": "ambari-admin",
            "description": "Ambari Admin"
         }
      ],
      "created": "2018-04-18 10:40:53",
      "description": "*STR*\r\n# Register a remote cluster with Ambari server\r\n# Go to Admin - Remote Cluster page and select the cluster\r\n# Hit 'Update Credentials' and supply new/existing admin credentials of remote cluster\r\n# Hit Update\r\n\r\nResult: Credentials are not updated and UI shows an error",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Unable to update credentials of a remotely registered cluster"
   },
   {
      "_id": "13153051",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-17 16:02:26",
      "description": "- The add metric in the HDFS Metrics needs more padding around it\r\n- Create metric - because of menu depth the name of the metric is hard to see, we should wrap them and do anything to make sure the metric names are easily readable\r\n- In the move master wizard we need to add the namespace before the word \"NameNode\", like \"ns1 NameNode\"",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "NN Federation Lower priority changes"
   },
   {
      "_id": "13153018",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-17 13:58:03",
      "description": "UI often make calls to fetch current tags, which can be cached and updated on WebSocket event.\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Config's tags should be cached"
   },
   {
      "_id": "13152988",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-17 12:34:18",
      "description": "Should escape property's name \"a/b\" => \"a\\u002Fb\".\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Ambari web should escape slash in config names"
   },
   {
      "_id": "13152744",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-04-16 14:48:05",
      "description": "{code:title=ambari-server.log}\r\n16 Apr 2018 11:04:47,676 INFO [main] DBAccessorImpl:876 - Executing query: ALTER TABLE stage ADD status VARCHAR2(255) NULL\r\n16 Apr 2018 11:04:47,695 ERROR [main] SchemaUpgradeHelper:207 - Upgrade failed.\r\njava.sql.SQLSyntaxErrorException: ORA-00904: \"PENDING\": invalid identifier\r\n\r\nat oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:447)\r\n at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:396)\r\n at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:951)\r\n at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:513)\r\n at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:227)\r\n at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:531)\r\n at oracle.jdbc.driver.T4CStatement.doOall8(T4CStatement.java:195)\r\n at oracle.jdbc.driver.T4CStatement.executeForRows(T4CStatement.java:1036)\r\n at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1336)\r\n at oracle.jdbc.driver.OracleStatement.executeUpdateInternal(OracleStatement.java:1845)\r\n at oracle.jdbc.driver.OracleStatement.executeUpdate(OracleStatement.java:1810)\r\n at oracle.jdbc.driver.OracleStatementWrapper.executeUpdate(OracleStatementWrapper.java:294)\r\n at org.apache.ambari.server.orm.DBAccessorImpl.updateTable(DBAccessorImpl.java:829)\r\n at org.apache.ambari.server.orm.DBAccessorImpl.addColumn(DBAccessorImpl.java:632)\r\n at org.apache.ambari.server.upgrade.UpgradeCatalog270.updateStageTable(UpgradeCatalog270.java:842)\r\n at org.apache.ambari.server.upgrade.UpgradeCatalog270.executeDDLUpdates(UpgradeCatalog270.java:283)\r\n at org.apache.ambari.server.upgrade.AbstractUpgradeCatalog.upgradeSchema(AbstractUpgradeCatalog.java:973)\r\n at org.apache.ambari.server.upgrade.SchemaUpgradeHelper.executeUpgrade(SchemaUpgradeHelper.java:205)\r\n at org.apache.ambari.server.upgrade.SchemaUpgradeHelper.main(SchemaUpgradeHelper.java:448)\r\n16 Apr 2018 11:04:47,695 ERROR [main] SchemaUpgradeHelper:473 - Exception occurred during upgrade, failed\r\norg.apache.ambari.server.AmbariException: ORA-00904: \"PENDING\": invalid identifier\r\n\r\nat org.apache.ambari.server.upgrade.SchemaUpgradeHelper.executeUpgrade(SchemaUpgradeHelper.java:208)\r\n at org.apache.ambari.server.upgrade.SchemaUpgradeHelper.main(SchemaUpgradeHelper.java:448)\r\nCaused by: java.sql.SQLSyntaxErrorException: ORA-00904: \"PENDING\": invalid identifier\r\n\r\nat oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:447)\r\n at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:396)\r\n at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:951)\r\n at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:513)\r\n at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:227)\r\n at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:531)\r\n at oracle.jdbc.driver.T4CStatement.doOall8(T4CStatement.java:195)\r\n at oracle.jdbc.driver.T4CStatement.executeForRows(T4CStatement.java:1036)\r\n at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1336)\r\n at oracle.jdbc.driver.OracleStatement.executeUpdateInternal(OracleStatement.java:1845)\r\n at oracle.jdbc.driver.OracleStatement.executeUpdate(OracleStatement.java:1810)\r\n at oracle.jdbc.driver.OracleStatementWrapper.executeUpdate(OracleStatementWrapper.java:294)\r\n at org.apache.ambari.server.orm.DBAccessorImpl.updateTable(DBAccessorImpl.java:829)\r\n at org.apache.ambari.server.orm.DBAccessorImpl.addColumn(DBAccessorImpl.java:632)\r\n at org.apache.ambari.server.upgrade.UpgradeCatalog270.updateStageTable(UpgradeCatalog270.java:842)\r\n at org.apache.ambari.server.upgrade.UpgradeCatalog270.executeDDLUpdates(UpgradeCatalog270.java:283)\r\n at org.apache.ambari.server.upgrade.AbstractUpgradeCatalog.upgradeSchema(AbstractUpgradeCatalog.java:973)\r\n at org.apache.ambari.server.upgrade.SchemaUpgradeHelper.executeUpgrade(SchemaUpgradeHelper.java:205)\r\n ... 1 more\r\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available",
         "upgrade"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Ambari Schema Upgrade Failing source 2.6.1.0 target 2.7.0.0"
   },
   {
      "_id": "13152679",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-04-16 10:22:33",
      "description": "\n    \r\n    -bash-4.2# curl -v -k -u admin:admin -H \"X-Requested-By:ambari\" -X POST http://ctr-e138-1518143905142-226218-01-000002.hwx.site:8080/api/v1/version_definitions -d '{ \"VersionDefinition\": { \"version_url\": \"http://s3.amazonaws.com/dev.hortonworks.com/HDP/amazonlinux2/3.x/BUILDS/3.0.0.0-1189/HDP-3.0.0.0-1189.xml\" } }'\r\n    Note: Unnecessary use of -X or --request, POST is already inferred.\r\n    *   Trying 172.27.80.4...\r\n    * TCP_NODELAY set\r\n    * Connected to ctr-e138-1518143905142-226218-01-000002.hwx.site (172.27.80.4) port 8080 (#0)\r\n    * Server auth using Basic with user 'admin'\r\n    > POST /api/v1/version_definitions HTTP/1.1\r\n    > Host: ctr-e138-1518143905142-226218-01-000002.hwx.site:8080\r\n    > Authorization: Basic YWRtaW46YWRtaW4=\r\n    > User-Agent: curl/7.55.1\r\n    > Accept: */*\r\n    > X-Requested-By:ambari\r\n    > Content-Length: 151\r\n    > Content-Type: application/x-www-form-urlencoded\r\n    >\r\n    * upload completely sent off: 151 out of 151 bytes\r\n    < HTTP/1.1 500 Internal Server Error\r\n    < Date: Fri, 13 Apr 2018 10:09:15 GMT\r\n    < X-Frame-Options: DENY\r\n    < X-XSS-Protection: 1; mode=block\r\n    < X-Content-Type-Options: nosniff\r\n    < Cache-Control: no-store\r\n    < Pragma: no-cache\r\n    < X-Content-Type-Options: nosniff\r\n    < X-Frame-Options: DENY\r\n    < Set-Cookie: AMBARISESSIONID=node018hn2df5vsjqjuo7g1yr9mvno8.node0;Path=/;HttpOnly\r\n    < Expires: Thu, 01 Jan 1970 00:00:00 GMT\r\n    < User: admin\r\n    < Content-Type: text/plain;charset=utf-8\r\n    < Transfer-Encoding: chunked\r\n    <\r\n    {\r\n      \"status\" : 500,\r\n      \"message\" : \"An internal system exception occurred: Could not load url from http://s3.amazonaws.com/dev.hortonworks.com/HDP/amazonlinux2/3.x/BUILDS/3.0.0.0-1189/HDP-3.0.0.0-1189.xml.  null\"\r\n    * Connection #0 to host ctr-e138-1518143905142-226218-01-000002.hwx.site left intact\r\n    }-bash-4.2#\r\n    -bash-4.2#\r\n    \n\nBuild Used:\n\n    \n    \n    \r\n    -bash-4.2# cat /etc/yum.repos.d/ambari.repo\r\n    #VERSION_NUMBER=2.7.0.0-309\r\n    [ambari-2.7.0.0-309]\r\n    name=ambari Version - ambari-2.7.0.0-309\r\n    baseurl=http://s3.amazonaws.com/dev.hortonworks.com/ambari/amazonlinux2/2.x/BUILDS/2.7.0.0-309\r\n    gpgcheck=1\r\n    gpgkey=http://s3.amazonaws.com/dev.hortonworks.com/ambari/amazonlinux2/2.x/BUILDS/2.7.0.0-309/RPM-GPG-KEY/RPM-GPG-KEY-Jenkins\r\n    enabled=1\r\n    priority=1\r\n    \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Register VDF failing for AmazonLinux2 "
   },
   {
      "_id": "13152342",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-13 16:55:25",
      "description": "While installing an HDF cluster, if you provide a password which is not valid for NiFi toolkit (eg. it is less than 12 characters) the password you entered is displayed in the error message as plaintext.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Ambari shows invalid passwords as plaintext"
   },
   {
      "_id": "13152313",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-13 15:11:29",
      "description": "* In HDFS Service Summary, we need to remove the \"Service Metrics\" label, and remove the horizontal whitespace we've added between the service metrics  and the ns metrics.\r\n* In the HDFS Metrics section, we need to add \"NAMESPACE\" to the left of the Namespace drop down menu.\r\n* We need to also make sure we have the namespace label in the metric names, just like we did for the Dashboard HDFS metrics",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "NN Federation Service Pages Changes"
   },
   {
      "_id": "13152252",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-13 10:45:49",
      "description": "The additional top and bottom padding is for the sub-menu container should be added (5px).\r\nThere needs to be more padding between the Service name and the status indicator, they're too tight now\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Navigation sub-menu style changes"
   },
   {
      "_id": "13152223",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-13 09:04:27",
      "description": "if a user enters a value without specifying category we should treat as a hostname (Hostname as default category).\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Hosts page: Combo filter should use hostname as default filter"
   },
   {
      "_id": "13152031",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-04-12 16:47:43",
      "description": "Steps:\r\n # Create custom property.\r\n # Restart all recommended\u00a0services.\r\n # Roll back the version number to the one noted earlier.\r\n # Issue 1 - restart icon was not appeared.\r\n # Force restart required services.\r\n # Compare the difference in configs between current and previous version and notice the config has been removed as expected.\r\n # Issue 2 - check service's config file was not updated on hosts.\u00a0",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Restore configs does not work"
   },
   {
      "_id": "13152001",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-12 14:35:23",
      "description": "Alerts in the UI are not updated automatically. You must hard refresh the page or constantly navigate around to get them to show up correctly.\r\n\r\nSTR:\r\n- Deploy a simple cluster, just with ZK. \r\n- Kill one of the ZK servers manually (or just stop it) and wait.\r\n- The APIs will update with the newly triggered alert, but the UI will not\r\n\r\nIn some cases, navigating around will show inconsistent alerts:\r\n- The alerts hidden under the alert icon never change without a hard refresh\r\n- Visiting the page of an alert definition does show updated data, but it no longer changes to reflect the current state.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Alerts Are Not Updated in the UI"
   },
   {
      "_id": "13152000",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-04-12 14:29:51",
      "description": "1) Upgrade Ambari from 2.6.0.0-267 to 2.7.0.0-292\r\n2) Upgrade Non Stack Services ( Smartsense , Ambari Infra , Logsearch)\r\n3) Regenerate Keytabs \r\nAt this step , hadoop.proxyuser.HTTP.hosts property in HDFS core-site undergoes a change. Due to this , AMS start fails with below error.\r\n\r\n\r\n{code:java}\r\n2018-04-10 19:34:41,668 ERROR [main] regionserver.HRegionServerCommandLine: Region server exiting\r\njava.lang.RuntimeException: Failed construction of Regionserver: class org.apache.hadoop.hbase.regionserver.HRegionServer\r\n\tat org.apache.hadoop.hbase.regionserver.HRegionServer.constructRegionServer(HRegionServer.java:2801)\r\n\tat org.apache.hadoop.hbase.regionserver.HRegionServerCommandLine.start(HRegionServerCommandLine.java:64)\r\n\tat org.apache.hadoop.hbase.regionserver.HRegionServerCommandLine.run(HRegionServerCommandLine.java:87)\r\n\tat org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:76)\r\n\tat org.apache.hadoop.hbase.util.ServerCommandLine.doMain(ServerCommandLine.java:126)\r\n\tat org.apache.hadoop.hbase.regionserver.HRegionServer.main(HRegionServer.java:2816)\r\nCaused by: java.lang.reflect.InvocationTargetException\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n\tat org.apache.hadoop.hbase.regionserver.HRegionServer.constructRegionServer(HRegionServer.java:2799)\r\n\t... 5 more\r\nCaused by: java.lang.IllegalArgumentException: Could not parse [${clusterHostInfo/webhcat_server_host|append(core-site/hadoop.proxyuser.HTTP.hosts]\r\n\tat org.apache.commons.net.util.SubnetUtils.calculate(SubnetUtils.java:220)\r\n\tat org.apache.commons.net.util.SubnetUtils.<init>(SubnetUtils.java:52)\r\n\tat org.apache.hadoop.util.MachineList.<init>(MachineList.java:109)\r\n\tat org.apache.hadoop.util.MachineList.<init>(MachineList.java:83)\r\n\tat org.apache.hadoop.util.MachineList.<init>(MachineList.java:75)\r\n\tat org.apache.hadoop.security.authorize.DefaultImpersonationProvider.init(DefaultImpersonationProvider.java:97)\r\n\tat org.apache.hadoop.security.authorize.ProxyUsers.refreshSuperUserGroupsConfiguration(ProxyUsers.java:75)\r\n\tat org.apache.hadoop.security.authorize.ProxyUsers.refreshSuperUserGroupsConfiguration(ProxyUsers.java:85)\r\n\tat org.apache.hadoop.hbase.security.HBasePolicyProvider.init(HBasePolicyProvider.java:54)\r\n\tat org.apache.hadoop.hbase.ipc.RpcServer.start(RpcServer.java:2090)\r\n\tat org.apache.hadoop.hbase.regionserver.RSRpcServices.start(RSRpcServices.java:1042)\r\n\tat org.apache.hadoop.hbase.regionserver.HRegionServer.<init>(HRegionServer.java:628)\r\n\t... 10 more\r\n{code}\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Regenerate Keytabs After Ambari Upgrade leads to AMS start failure due to change in one core-site.xml config."
   },
   {
      "_id": "13151975",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-04-12 13:25:03",
      "description": "_NameNode Web UI_ alert is in critical state for all NameNodes with the\n    \n    \n    \r\n    [Alert][namenode_webui] HA nameservice value is present but there are no aliases for {{hdfs-site/dfs.ha.namenodes.ns1,ns2}}\r\n    \n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Refactor base_alert to support multiple nameservices"
   },
   {
      "_id": "13151919",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-12 10:42:21",
      "description": "After switching NN namespace for dashboard widgets nothing happens on UI, and also JS error is thrown:\r\n{noformat}\r\nUncaught Error: assertion failed: Emptying a view in the inBuffer state is not allowed and should not happen under normal circumstances. Most likely there is a bug in your application. This may be due to excessive property change notifications.\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "NN federation: switching namespaces for dashboard widgets doesn't work"
   },
   {
      "_id": "13151884",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-04-12 08:40:32",
      "description": "*STR*\r\n # Deploy HDP-2.6.3.0 with Ambari-2.6.0.0 (that stack includes services such as Slider, Mahout etc. which are unsupported in HDP-3.0 stack)\r\n # Upgrade Ambari to 2.7.0.0\r\n # Try to delete Slider (this is required since stack upgrade to HDP-3.0 needs the unsupported services to be removed)\r\n\r\n*Result*\r\nSlider prompts to delete Hive due to dependency\r\n\r\nWe need to remove the dependency, else asking customer to delete Hive may not be viable",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "express_upgrade",
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Unable to delete Slider after Ambari upgrade, due to Hive dependency"
   },
   {
      "_id": "13151777",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323905",
            "id": "12323905",
            "name": "ambari-metrics",
            "description": "Ambari Metrics System"
         }
      ],
      "created": "2018-04-11 20:56:32",
      "description": "GitHub PR builder is failing on some Jenkins nodes due to references to outdated Hadoop, etc. JARs that are no longer available.\r\n\r\n{noformat}\r\n[ERROR] Failed to execute goal on project ambari-metrics-timelineservice: Could not resolve dependencies for project org.apache.ambari:ambari-metrics-timelineservice:jar:2.0.0.0-SNAPSHOT: The following artifacts could not be resolved: org.apache.phoenix:phoenix-core:jar:5.0.0.3.0.0.2-97, org.apache.hadoop:hadoop-common:jar:3.0.0.3.0.0.2-97, org.apache.hadoop:hadoop-annotations:jar:3.0.0.3.0.0.2-97, org.apache.hadoop:hadoop-common:jar:tests:3.0.0.3.0.0.2-97, org.apache.hadoop:hadoop-yarn-common:jar:tests:3.0.0.3.0.0.2-97, org.apache.hadoop:hadoop-yarn-common:jar:3.0.0.3.0.0.2-97, org.apache.hadoop:hadoop-yarn-api:jar:3.0.0.3.0.0.2-97, org.apache.hadoop:hadoop-yarn-server-common:jar:3.0.0.3.0.0.2-97, org.apache.phoenix:phoenix-core:jar:tests:5.0.0.3.0.0.2-97, org.apache.hbase:hbase-it:jar:tests:2.0.0.3.0.0.2-97, org.apache.hbase:hbase-testing-util:jar:2.0.0.3.0.0.2-97\r\n{noformat}\r\n\r\nhttps://builds.apache.org/view/A/view/Ambari/job/Ambari-Github-PullRequest-Builder/1744/console\r\nhttps://builds.apache.org/view/A/view/Ambari/job/Ambari-Github-PullRequest-Builder/1791/console\r\netc.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Ambari Metrics references outdated JARs"
   },
   {
      "_id": "13151701",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-11 17:01:40",
      "description": "*STR*\r\n# Enable NameNode federation\r\n# Go to HDFS section (summary or any other tab)\r\n# Refresh page\r\n\r\n*Expected result*\r\nNamespaces data is displayed (sections on summary page, items of Service actions dropdown)\r\n\r\n*Actual result*\r\n- No namespaces data is displayed\r\n- Service actions dropdown is empty\r\n- JS error thrown: {{app.js:68529 Uncaught TypeError: Cannot read property 'contains' of undefined}}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "NameNode namespaces aren't displayed after HDFS page refresh"
   },
   {
      "_id": "13151654",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-11 13:45:00",
      "description": "* Make current \"selected\" font color and button border color look incorrect\r\n* Fix bottom padding\r\n* See screenshots",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Comparing config versions style tweaks"
   },
   {
      "_id": "13151644",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-11 13:06:36",
      "description": "Since we've made a ton of change to the UI, I'm noticing some slowness in page load times and interaction. \r\nSpecific Areas I'm noticing slowness in:\r\n* Initial Ambari UI Page Load\r\n* Initial Dashboard UI Page Load\r\n* Service Actions Menu Loading\r\n* Quicklinks Loading\r\n* Service Configurations Tab Loading",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "UI Performance Tuning"
   },
   {
      "_id": "13151629",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-04-11 12:19:22",
      "description": "During the install wizard, the host checks that get run immediately after hosts are registered sometimes never complete.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Sometimes host checks never complete"
   },
   {
      "_id": "13151596",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-04-11 09:34:23",
      "description": "1) login to ambari ui with admin:admin\r\n\r\n2) select ADMIN -> Manage Ambari\r\n 3) click on users section from the left pane\r\n 4) click on Add users button\r\n 5) fill in required details:\r\n\r\nusername: cloudbreak\r\n\r\npassword: admin\r\n\r\nAdd Roles For This user: None\r\n\r\nis this admin user? : YES\r\n\r\nDeactivate this user? : ACTIVE\r\n\r\n\u00a0\r\n\r\n6) click save\r\n\r\nUser creation error has been thrown (see screenshot)",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Not able to add a user in ambari"
   },
   {
      "_id": "13151568",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-04-11 07:07:39",
      "description": "TestCustomServiceOchestrator requires rewriting since configs building routine\nchanged quite a lot on branch-3.0-perf\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Fix TestCustomServiceOrchestrator.py and TestRegistration.py on branch-3.0-perf"
   },
   {
      "_id": "13151464",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         }
      ],
      "created": "2018-04-10 19:08:46",
      "description": "Traceback (most recent call last):\r\n  File \"/var/lib/ambari-agent/cache/stack-hooks/before-INSTALL/scripts/hook.py\", line 37, in <module>\r\n    BeforeInstallHook().execute()\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 353, in execute\r\n    method(env)\r\n  File \"/var/lib/ambari-agent/cache/stack-hooks/before-INSTALL/scripts/hook.py\", line 34, in hook\r\n    install_packages()\r\n  File \"/var/lib/ambari-agent/cache/stack-hooks/before-INSTALL/scripts/shared_initialization.py\", line 37, in install_packages\r\n    retry_count=params.agent_stack_retry_count)\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/base.py\", line 125, in __new__\r\n    cls(names_list.pop(0), env, provider, **kwargs)\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/base.py\", line 166, in __init__\r\n    self.env.run()\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/environment.py\", line 160, in run\r\n    self.run_action(resource, action)\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/environment.py\", line 119, in run_action\r\n    provider = provider_class(resource)\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/providers/packaging.py\", line 26, in __init__\r\n    self._pkg_manager = ManagerFactory.get()\r\n  File \"/usr/lib/ambari-agent/lib/ambari_commons/repo_manager/__init__.py\", line 46, in get\r\n    cls.__repo_manager = cls.get_new_instance(OSCheck.get_os_family())\r\n  File \"/usr/lib/ambari-agent/lib/ambari_commons/repo_manager/__init__.py\", line 71, in get_new_instance\r\n    raise RuntimeError(\"Not able to create Repository Manager object for unsupported OS family {0}\".format(os_family))\r\nRuntimeError: Not able to create Repository Manager object for unsupported OS family debian\r\nAttempt Count :1",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Debian9: Atlas client installation failed due to unsupported OS family error"
   },
   {
      "_id": "13151403",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-04-10 14:54:56",
      "description": "Document enabling SSO via CLI\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Document enabling SSO via CLI"
   },
   {
      "_id": "13151388",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-10 13:55:21",
      "description": "During the installation wizard, just before deploy, the user has the opportunity to export a blueprint. This will download two files, but the behavior in the browser is odd as the user has to accept that multiple files will be downloaded. It would be better if it just downloaded a single zip file with both the blueprint and cluster creation template included in it. Much like our client configuration export.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Usability: Generate blueprint should download a single Zip file and not 2 files."
   },
   {
      "_id": "13151375",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-10 13:25:29",
      "description": "After saving config with name \"a/b\" displayed as \"a\\u002Fb\".",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Slash not unescaped in property name"
   },
   {
      "_id": "13151367",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-04-10 12:54:12",
      "description": "*STR:*\r\n1. install Ambari 2.7.0.0 (build #220) server/agents on Centos7 machines (this issue is not OS dependent)\r\n2. install an HDP 3.0 cluster with HDFS\r\n3. check if unlimited JCE policy has been installed on the hosts where only ambari-agent has been installed:\r\n{code}\r\n[root@c7402 ~]# /usr/jdk64/jdk1.8.0_112/bin/java -jar /var/lib/ambari-agent/tools/jcepolicyinfo.jar -tu\r\n{code}\r\n*Result:*\r\n{code}\r\n[root@c7402 ~]# /usr/jdk64/jdk1.8.0_112/bin/java -jar /var/lib/ambari-agent/tools/jcepolicyinfo.jar -tu\r\nUnlimited Key JCE Policy: false\r\n{code}\r\n*Expected result:*\r\n{code}\r\n[root@c7402 ~]# /usr/jdk64/jdk1.8.0_112/bin/java -jar /var/lib/ambari-agent/tools/jcepolicyinfo.jar -tu\r\nUnlimited Key JCE Policy: true\r\n{code}\r\n*Additional information:*\r\nunlimited JCE policy in agent side is triggered by a hook: ambari-server/src/main/resources/stack-hooks/before-START/scripts/hook.py:38 -> ambari-server/src/main/resources/stack-hooks/before-START/scripts/shared_initialization.py\r\n\r\nIn this Python code we check if we really need to install unlimited JCE:\r\n{code}\r\n  elif not params.unlimited_key_jce_required:\r\n    Logger.debug(\"Skipping unlimited key JCE policy check and setup since it is not required\")\r\n{code}\r\nThis parameter is being set in params_linux.py:\r\n{code}\r\nunlimited_key_jce_required = default(\"/componentLevelParams/unlimited_key_jce_required\", False)\r\n{code}\r\nHowever org/apache/ambari/server/controller/AmbariManagementControllerImpl.java:2590 sets it in the host level parameters (and not in component level params)",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Missing unlimited JCE policy installation on ambari-agent side"
   },
   {
      "_id": "13150783",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-04-07 15:26:39",
      "description": "Tried to add new HDFS namespace with latest available build from yesterday\nevening #262  \nFormat ZKFC is failing with below error\n\n    \n    \n    \r\n    18/04/05 16:30:10 INFO zookeeper.ClientCnxn: Session establishment complete on server ctr-e138-1518143905142-202626-01-000006.hwx.site/172.27.29.151:2181, sessionid = 0x26293f2ead15e74, negotiated timeout = 9000\r\n    18/04/05 16:30:10 INFO ha.ActiveStandbyElector: Session connected.\r\n    18/04/05 16:30:10 ERROR ha.ZKFailoverController: The failover controller encounters runtime error\r\n    java.io.IOException: Couldn't create /hadoop-ha/ns1\r\n    \tat org.apache.hadoop.ha.ActiveStandbyElector.ensureParentZNode(ActiveStandbyElector.java:358)\r\n    \tat org.apache.hadoop.ha.ZKFailoverController.formatZK(ZKFailoverController.java:286)\r\n    \tat org.apache.hadoop.ha.ZKFailoverController.doRun(ZKFailoverController.java:216)\r\n    \tat org.apache.hadoop.ha.ZKFailoverController.access$000(ZKFailoverController.java:60)\r\n    \tat org.apache.hadoop.ha.ZKFailoverController$1.run(ZKFailoverController.java:175)\r\n    \tat org.apache.hadoop.ha.ZKFailoverController$1.run(ZKFailoverController.java:171)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat javax.security.auth.Subject.doAs(Subject.java:360)\r\n    \tat org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1662)\r\n    \tat org.apache.hadoop.security.SecurityUtil.doAsLoginUserOrFatal(SecurityUtil.java:480)\r\n    \tat org.apache.hadoop.ha.ZKFailoverController.run(ZKFailoverController.java:171)\r\n    \tat org.apache.hadoop.hdfs.tools.DFSZKFailoverController.main(DFSZKFailoverController.java:195)\r\n    Caused by: org.apache.zookeeper.KeeperException$NoAuthException: KeeperErrorCode = NoAuth for /hadoop-ha/ns1\r\n    \tat org.apache.zookeeper.KeeperException.create(KeeperException.java:113)\r\n    \tat org.apache.zookeeper.KeeperException.create(KeeperException.java:51)\r\n    \tat org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:783)\r\n    \tat org.apache.hadoop.ha.ActiveStandbyElector$3.run(ActiveStandbyElector.java:1033)\r\n    \tat org.apache.hadoop.ha.ActiveStandbyElector$3.run(ActiveStandbyElector.java:1030)\r\n    \tat org.apache.hadoop.ha.ActiveStandbyElector.zkDoWithRetries(ActiveStandbyElector.java:1095)\r\n    \tat org.apache.hadoop.ha.ActiveStandbyElector.zkDoWithRetries(ActiveStandbyElector.java:1087)\r\n    \tat org.apache.hadoop.ha.ActiveStandbyElector.createWithRetries(ActiveStandbyElector.java:1030)\r\n    \tat org.apache.hadoop.ha.ActiveStandbyElector.ensureParentZNode(ActiveStandbyElector.java:347)\r\n    \t... 11 more\r\n    18/04/05 16:30:11 INFO zookeeper.ZooKeeper: Session: 0x26293f2ead15e74 closed\r\n    18/04/05 16:30:11 FATAL tools.DFSZKFailoverController: DFSZKFailOverController exiting due to earlier exception java.io.IOException: Couldn't create /hadoop-ha/ns1\r\n    18/04/05 16:30:11 INFO zookeeper.ClientCnxn: EventThread shut down\r\n    18/04/05 16:30:11 INFO util.ExitUtil: Exiting with status 1: java.io.IOException: Couldn't create /hadoop-ha/ns1\r\n    18/04/05 16:30:11 INFO tools.DFSZKFailoverController: SHUTDOWN_MSG: \r\n    /************************************************************\r\n    SHUTDOWN_MSG: Shutting down DFSZKFailoverController at ctr-e138-1518143905142-202626-01-000005.hwx.site/172.27.26.14\r\n    ************************************************************/\r\n    \n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Format ZKFC fails while adding new HDFS namespace through UI in secure environment"
   },
   {
      "_id": "13150652",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-06 17:12:00",
      "description": "- Make widgets sortable\r\n- Fix Edit Delete features\r\n- Make widgets able to be added\r\n- Fix pie chart colors",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Fixes for NameNode widgets on dashboard"
   },
   {
      "_id": "13150579",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-04-06 12:13:04",
      "description": "Server should send last\u00a0state\u00a0of removed host-component to\u00a0api\u00a0topology\u00a0stomp\u00a0endpoint.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Server should acknowledge api endpoint about host-component state before deletion"
   },
   {
      "_id": "13150538",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-04-06 08:30:15",
      "description": "Bootstrap NameNode command fails due to stopped NameNode. Actually NameNode\nshould be started and command to start it was sent correctly from UI, but was\nignored by BE due to:\n\n    \n    \n    Ignoring ServiceComponentHost as the current state matches the new desired state, clusterName=c, serviceName=HDFS, componentName=NAMENODE, hostname=c7404.ambari.apache.org, currentState=STARTED, newDesiredState=STARTED\n\nThis is because Format NameNode command starts NameNode for a little period of\ntime and then stops it back, but component's current state is not updated\nimmediately and BE thinks that NameNode is still started.  \nFrom Format NameNode log:\n\n    \n    \n    \r\n    18/04/04 11:44:31 INFO namenode.NameNode: STARTUP_MSG: \r\n    /************************************************************\r\n    STARTUP_MSG: Starting NameNode\r\n    \r\n    ...\r\n    \r\n    18/04/04 11:44:35 INFO namenode.NameNode: SHUTDOWN_MSG: \r\n    /************************************************************\r\n    SHUTDOWN_MSG: Shutting down NameNode at c7404.ambari.apache.org/192.168.74.104\r\n    \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "NN Federation Wizard: Bootstrap NameNode failed"
   },
   {
      "_id": "13150480",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-04-06 00:09:00",
      "description": "Move SSO-related properties from ambari.properties into the Ambari DB so that Ambari is able to use the SSO-related properties without needing to be restarted.\r\n\r\nThe following properties should be moved:\r\n\r\n||Original Name||New Name||\r\n|authentication.jwt.providerUrl|ambari.sso.provider.url|\r\n|authentication.jwt.publicKey|ambari.sso.provider.publicKey|\r\n|authentication.jwt.originalUrlParamName|ambari.sso.provider.originalUrlParamName|\r\n|authentication.jwt.enabled|ambari.sso.authentication.enabled|\r\n|authentication.jwt.audiences|ambari.sso.jwt.audiences|\r\n|authentication.jwt.cookieName|ambari.sso.jwt.cookieName|\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available",
         "sso"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Move SSO-related properties from ambari.properties into the Ambari DB"
   },
   {
      "_id": "13150449",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-04-05 21:54:13",
      "description": "Fix Kerberos service documentation for Ambari 2.6.x",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
         "name": "Minor",
         "id": "4"
      },
      "projectname": "AMBARI",
      "summary": "Fix Kerberos service documentation for Ambari 2.6.x"
   },
   {
      "_id": "13150446",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-04-05 21:45:20",
      "description": "Update Kerberos service documentation for Ambari 2.7.0",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
         "name": "Minor",
         "id": "4"
      },
      "projectname": "AMBARI",
      "summary": "Update Kerberos service documentation for Ambari 2.7.0"
   },
   {
      "_id": "13150370",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-04-05 16:07:58",
      "description": "Ambari version is 2.7.0.0-182\r\n\r\n1. I installed HDF 3.2 on an openstack using mpack\r\n2. Enabled Kerberos which went okay and services were all restarted\r\n3. Disabling Kerberos throws following exception\r\n\r\n{code}\r\n21 Mar 2018 23:10:08,794 ERROR [Server Action Executor Worker 266] AmbariJpaLocalTxnInterceptor:180 - [DETAILED ERROR] Rollback reason: \r\nLocal Exception Stack: \r\nException [EclipseLink-4002] (Eclipse Persistence Services - 2.6.2.v20151217-774c696): org.eclipse.persistence.exceptions.DatabaseException\r\nInternal Exception: org.postgresql.util.PSQLException: ERROR: update or delete on table \"kerberos_principal\" violates foreign key constraint \"fk_kkp_principal_name\" on table \"kerberos_keytab_principal\"\r\nDetail: Key (principal_name)=(amshbase/priyank-3-2-2.openstacklocal@EXAMPLE.COM) is still referenced from table \"kerberos_keytab_principal\".\r\nError Code: 0\r\nCall: DELETE FROM kerberos_principal WHERE (principal_name = ?)\r\nbind => [1 parameter bound]\r\nat org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:340)\r\nat org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.processExceptionForCommError(DatabaseAccessor.java:1620)\r\nat org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeDirectNoSelect(DatabaseAccessor.java:900)\r\nat org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeNoSelect(DatabaseAccessor.java:964)\r\nat org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:633)\r\nat org.eclipse.persistence.internal.databaseaccess.ParameterizedSQLBatchWritingMechanism.executeBatch(ParameterizedSQLBatchWritingMechanism.java:149)\r\nat org.eclipse.persistence.internal.databaseaccess.ParameterizedSQLBatchWritingMechanism.executeBatchedStatements(ParameterizedSQLBatchWritingMechanism.java:134)\r\nat org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.writesCompleted(DatabaseAccessor.java:1845)\r\nat org.eclipse.persistence.internal.sessions.AbstractSession.writesCompleted(AbstractSession.java:4300)\r\nat org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.writesCompleted(UnitOfWorkImpl.java:5592)\r\nat org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.acquireWriteLocks(UnitOfWorkImpl.java:1646)\r\nat org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitTransactionAfterWriteChanges(UnitOfWorkImpl.java:1614)\r\nat org.eclipse.persistence.internal.sessions.RepeatableWriteUnitOfWork.commitRootUnitOfWork(RepeatableWriteUnitOfWork.java:285)\r\nat org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitAndResume(UnitOfWorkImpl.java:1169)\r\nat org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commit(EntityTransactionImpl.java:134)\r\nat org.apache.ambari.server.orm.AmbariJpaLocalTxnInterceptor.invoke(AmbariJpaLocalTxnInterceptor.java:153)\r\nat com.google.inject.internal.InterceptorStackCallback$InterceptedMethodInvocation.proceed(InterceptorStackCallback.java:77)\r\nat com.google.inject.internal.InterceptorStackCallback.intercept(InterceptorStackCallback.java:55)\r\nat org.apache.ambari.server.orm.dao.KerberosPrincipalDAO$$EnhancerByGuice$$fe23de42.remove(<generated>)\r\nat org.apache.ambari.server.serveraction.kerberos.DestroyPrincipalsServerAction.processIdentity(DestroyPrincipalsServerAction.java:143)\r\nat org.apache.ambari.server.serveraction.kerberos.KerberosServerAction.processIdentities(KerberosServerAction.java:435)\r\nat org.apache.ambari.server.serveraction.kerberos.DestroyPrincipalsServerAction.execute(DestroyPrincipalsServerAction.java:88)\r\nat org.apache.ambari.server.serveraction.ServerActionExecutor$Worker.execute(ServerActionExecutor.java:550)\r\nat org.apache.ambari.server.serveraction.ServerActionExecutor$Worker.run(ServerActionExecutor.java:466)\r\nat java.lang.Thread.run(Thread.java:745)\r\nCaused by: org.postgresql.util.PSQLException: ERROR: update or delete on table \"kerberos_principal\" violates foreign key constraint \"fk_kkp_principal_name\" on table \"kerberos_keytab_principal\"\r\nDetail: Key (principal_name)=(amshbase/priyank-3-2-2.openstacklocal@EXAMPLE.COM) is still referenced from table \"kerberos_keytab_principal\".\r\nat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2161)\r\nat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1890)\r\nat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:255)\r\nat org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:559)\r\nat org.postgresql.jdbc2.AbstractJdbc2Statement.executeWithFlags(AbstractJdbc2Statement.java:417)\r\nat org.postgresql.jdbc2.AbstractJdbc2Statement.executeUpdate(AbstractJdbc2Statement.java:363)\r\nat org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeDirectNoSelect(DatabaseAccessor.java:892)\r\n... 22 more\r\n21 Mar 2018 23:10:08,795 ERROR [Server Action Executor Worker 266] AmbariJpaLocalTxnInterceptor:188 - [DETAILED ERROR] Internal exception (1) :\r\norg.postgresql.util.PSQLException: ERROR: update or delete on table \"kerberos_principal\" violates foreign key constraint \"fk_kkp_principal_name\" on table \"kerberos_keytab_principal\"\r\nDetail: Key (principal_name)=(amshbase/priyank-3-2-2.openstacklocal@EXAMPLE.COM) is still referenced from table \"kerberos_keytab_principal\".\r\nat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2161)\r\nat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1890)\r\nat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:255)\r\nat org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:559)\r\nat org.postgresql.jdbc2.AbstractJdbc2Statement.executeWithFlags(AbstractJdbc2Statement.java:417)\r\nat org.postgresql.jdbc2.AbstractJdbc2Statement.executeUpdate(AbstractJdbc2Statement.java:363)\r\nat org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeDirectNoSelect(DatabaseAccessor.java:892)\r\nat org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeNoSelect(DatabaseAccessor.java:964)\r\nat org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:633)\r\nat org.eclipse.persistence.internal.databaseaccess.ParameterizedSQLBatchWritingMechanism.executeBatch(ParameterizedSQLBatchWritingMechanism.java:149)\r\nat org.eclipse.persistence.internal.databaseaccess.ParameterizedSQLBatchWritingMechanism.executeBatchedStatements(ParameterizedSQLBatchWritingMechanism.java:134)\r\nat org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.writesCompleted(DatabaseAccessor.java:1845)\r\nat org.eclipse.persistence.internal.sessions.AbstractSession.writesCompleted(AbstractSession.java:4300)\r\nat org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.writesCompleted(UnitOfWorkImpl.java:5592)\r\nat org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.acquireWriteLocks(UnitOfWorkImpl.java:1646)\r\nat org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitTransactionAfterWriteChanges(UnitOfWorkImpl.java:1614)\r\nat org.eclipse.persistence.internal.sessions.RepeatableWriteUnitOfWork.commitRootUnitOfWork(RepeatableWriteUnitOfWork.java:285)\r\nat org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitAndResume(UnitOfWorkImpl.java:1169)\r\nat org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commit(EntityTransactionImpl.java:134)\r\nat org.apache.ambari.server.orm.AmbariJpaLocalTxnInterceptor.invoke(AmbariJpaLocalTxnInterceptor.java:153)\r\nat com.google.inject.internal.InterceptorStackCallback$InterceptedMethodInvocation.proceed(InterceptorStackCallback.java:77)\r\nat com.google.inject.internal.InterceptorStackCallback.intercept(InterceptorStackCallback.java:55)\r\nat org.apache.ambari.server.orm.dao.KerberosPrincipalDAO$$EnhancerByGuice$$fe23de42.remove(<generated>)\r\nat org.apache.ambari.server.serveraction.kerberos.DestroyPrincipalsServerAction.processIdentity(DestroyPrincipalsServerAction.java:143)\r\nat org.apache.ambari.server.serveraction.kerberos.KerberosServerAction.processIdentities(KerberosServerAction.java:435)\r\nat org.apache.ambari.server.serveraction.kerberos.DestroyPrincipalsServerAction.execute(DestroyPrincipalsServerAction.java:88)\r\nat org.apache.ambari.server.serveraction.ServerActionExecutor$Worker.execute(ServerActionExecutor.java:550)\r\nat org.apache.ambari.server.serveraction.ServerActionExecutor$Worker.run(ServerActionExecutor.java:466)\r\nat java.lang.Thread.run(Thread.java:745)\r\n21 Mar 2018 23:10:08,795 WARN [Server Action Executor Worker 266] DestroyPrincipalsServerAction:173 - Failed to remove identity for amshbase/priyank-3-2-2.openstacklocal@EXAMPLE.COM from the Ambari database - Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.6.2.v20151217-774c696): org.eclipse.persistence.exceptions.DatabaseException\r\nInternal Exception: org.postgresql.util.PSQLException: ERROR: update or delete on table \"kerberos_principal\" violates foreign key constraint \"fk_kkp_principal_name\" on table \"kerberos_keytab_principal\"\r\nDetail: Key (principal_name)=(amshbase/priyank-3-2-2.openstacklocal@EXAMPLE.COM) is still referenced from table \"kerberos_keytab_principal\".\r\nError Code: 0\r\nCall: DELETE FROM kerberos_principal WHERE (principal_name = ?)\r\nbind => [1 parameter bound]\r\n21 Mar 2018 23:10:08,795 INFO [Server Action Executor Worker 266] DestroyPrincipalsServerAction:117 - Destroying identity, nimbus/priyank-3-2-1.openstacklocal@EXAMPLE.COM\r\n21 Mar 2018 23:10:08,824 INFO [Server Action Executor Worker 266] DestroyPrincipalsServerAction:117 - Destroying identity, ambari-qa-cl1@EXAMPLE.COM\r\n21 Mar 2018 23:10:08,864 INFO [Server Action Executor Worker 266] KerberosServerAction:456 - Processing identities completed.\r\n{code}\r\n\r\nThis happens when the same principal is stored in multiple keytabs.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Error encountered while disabling Kerberos on HDF 3.2 using Ambari 2.7.0.0"
   },
   {
      "_id": "13150326",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-04-05 15:00:57",
      "description": "The goal of this task is to provide a utility function in the resource management libraries to parse initial active namenode hostnames from {{hadoop-env}} for blueprint deployment.  These properties may be specified by the user or be set by {{BlueprintConfigurationProcessor}} (AMBARI-23467).  The utility function can be used by stack scripts.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Utility function to parse initial active namenode hostnames for blueprint deployment"
   },
   {
      "_id": "13150283",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-05 12:37:45",
      "description": "HDFS Stop option from UI doesn't work. No operation is triggered\r\n\r\nBelow Js Error is seen in the console.\r\nAmbari Build - 2.7.0.0-263\r\n\r\n{code:java}\r\napp.js:28031 Uncaught TypeError: Cannot read property 'set' of undefined\r\n    at app.js:28031\r\n    at Class.onPrimary (app.js:211716)\r\n    at Class.newFunc [as onPrimary] (vendor.js:12954)\r\n    at handler (vendor.js:31554)\r\n    at HTMLButtonElement.<anonymous> (vendor.js:23346)\r\n    at HTMLDivElement.dispatch (vendor.js:3178)\r\n    at HTMLDivElement.elemData.handle (vendor.js:2854)\r\n{code}\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "UI option to stop HDFS service doesnt work - JS Error"
   },
   {
      "_id": "13150260",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-05 10:19:10",
      "description": "When NameNode HA is enabled, the QuickLink section shows the hostname of each NameNode as a hyperlink.  This is confusing since these are not meant to be clickable; they should be displayed as labels, not hyperlinks.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "NameNode HA: QuickLinks section issues"
   },
   {
      "_id": "13150199",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323505",
            "id": "12323505",
            "name": "ambari-views",
            "description": "Ambari Views framework and Views themselves.  Specific Views that are built on the framework will be handled with labels."
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-05 02:26:22",
      "description": "In Ambari 2.7.0,  While accessing any View like HiveView 2.0 we see a blank page.\r\nOn te Browser Debugger Console we see the XFrame related error as following:\r\n\r\n{code}\r\nRefused to display 'http://latest1.example.com:8080/#/login?targetURI=/views/HIVE/2.0.0/Hive20/' in a frame because it set 'X-Frame-Options' to 'deny'.\r\n\r\nUncaught DOMException: Blocked a frame with origin \"http://latest1.example.com:8080\" from accessing a cross-origin frame.\r\n    at Class.resizeFunction (http://latest1.example.com:8080/javascripts/app.js:237835:78)\r\n    at http://latest1.example.com:8080/javascripts/app.js:237810:12\r\n{code} ",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "None of the Ambari View works because of  'X-Frame-Options' to 'deny' error"
   },
   {
      "_id": "13150077",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-04-04 17:06:41",
      "description": "PUT request to url: /api/v1/clusters/c1\r\nData:\r\n{noformat}\r\n[{\"Clusters\":{\"desired_config\":[{\"type\":\"zoo.cfg\",\"properties\":{\"autopurge.purgeInterval\":\"24\",\"autopurge.snapRetainCount\":\"30\",\"dataDir\":\"/hadoop/zookeeper\",\"tickTime\":\"3000\",\"initLimit\":\"10\",\"syncLimit\":\"5\",\"clientPort\":\"2181\",\"prop/my\":\"1\"},\"service_config_version_note\":\"\"}]}}]\r\n{noformat}\r\nwas successful, but property \"prop/my\" wasn't saved.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Server should support saving configs with names which contains slash"
   },
   {
      "_id": "13150065",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-04 16:28:57",
      "description": "- Fix colors for pie chart\r\n- Add NameNode uptime widget\r\n- Content of widgets isn't updated",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "NN federation related fixes for host details page"
   },
   {
      "_id": "13150036",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-04-04 15:19:37",
      "description": "This issue is intermittent:\r\n\r\n{noformat}\r\nERROR] testComponents(org.apache.ambari.server.agent.TestHeartbeatHandler)  Time elapsed: 1.116 s  <<< ERROR!\r\njava.lang.NullPointerException\r\n\tat org.apache.ambari.server.agent.TestHeartbeatHandler.testComponents(TestHeartbeatHandler.java:1351)\r\n{noformat}\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Fix TestHeartbeatHandler.testComponents NPE"
   },
   {
      "_id": "13150015",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         }
      ],
      "created": "2018-04-04 14:15:15",
      "description": "{code:java}\r\nError message: Stack Advisor reported an error. Exit Code: 2. Error: KeyError: 'onefs'\r\n\r\nStdOut file: /var/run/ambari-server/stack-recommendations/5/stackadvisor.out\r\n\r\n\u00a0\r\n\r\nStdErr file: /var/run/ambari-server/stack-recommendations/5/stackadvisor.err\r\n\r\n\u00a0\r\n\r\nStackadvisor.err shows the following traceback:\r\n\r\n\u00a0\r\n\r\n2018-04-03 16:09:09,711 ERROR HDP26StackAdvisor getCapacitySchedulerProperties: - Couldn't retrieve 'capacity-scheduler' from services.\r\n\r\nTraceback (most recent call last):\r\n\r\n\u00a0 File \"/var/lib/ambari-server/resources/scripts/stack_advisor.py\", line 167, in <module>\r\n\r\n\u00a0\u00a0\u00a0 main(sys.argv)\r\n\r\n\u00a0 File \"/var/lib/ambari-server/resources/scripts/stack_advisor.py\", line 116, in main\r\n\r\n\u00a0\u00a0\u00a0 result = stackAdvisor.recommendConfigurations(services, hosts)\r\n\r\n\u00a0 File \"/var/lib/ambari-server/resources/scripts/../stacks/stack_advisor.py\", line 1565, in recommendConfigurations\r\n\r\n\u00a0\u00a0\u00a0 serviceAdvisor.getServiceConfigurationRecommendations(configurations, clusterSummary, services, hosts)\r\n\r\n\u00a0 File \"/var/lib/ambari-server/resources/stacks/HDP/2.6/services/ONEFS/service_advisor.py\", line 112, in getServiceConfigurationRecommendations\r\n\r\n\u00a0\u00a0\u00a0 onefs_host = Uri.onefs(services)\r\n\r\n\u00a0 File \"/var/lib/ambari-server/resources/stacks/HDP/2.6/services/ONEFS/service_advisor.py\", line 41, in onefs\r\n\r\n\u00a0\u00a0\u00a0 return self.from_config(configs, 'onefs', 'onefs_host')\r\n\r\n\u00a0 File \"/var/lib/ambari-server/resources/stacks/HDP/2.6/services/ONEFS/service_advisor.py\", line 45, in from_config\r\n\r\n\u00a0 \u00a0\u00a0return Uri(configs['configurations'][config_type]['properties'][property_name])\r\n\r\nKeyError: 'onefs'{code}\r\n\u00a0",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "ServiceAdvisor KeyError during kerberization of OneFS"
   },
   {
      "_id": "13149983",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-04-04 12:28:48",
      "description": "Reduce the amount of work performed while holding {{configs_lock}}.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
         "name": "Minor",
         "id": "4"
      },
      "projectname": "AMBARI",
      "summary": "Improve parallel start performance"
   },
   {
      "_id": "13149939",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-04-04 09:43:37",
      "description": "This solution can possibly work to fix connection drop\n\n    \n    \n    ERROR 2018-04-04 00:22:26,771 websocket.py:272 - Failed to receive data\r\n    Traceback (most recent call last):\r\n      File \"/usr/lib/ambari-agent/lib/ambari_ws4py/websocket.py\", line 394, in once\r\n        b = self.sock.recv(self.reading_buffer_size)\r\n      File \"/usr/lib64/python2.7/ssl.py\", line 759, in recv\r\n        return self.read(buflen)\r\n      File \"/usr/lib64/python2.7/ssl.py\", line 653, in read\r\n        v = self._sslobj.read(len or 1024)\r\n    SSLError: [SSL: SSLV3_ALERT_BAD_RECORD_MAC] sslv3 alert bad record mac (_ssl.c:1783)\r\n    \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Fix connection drop on ambari-agent by locking the write code"
   },
   {
      "_id": "13149811",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-04-03 18:49:22",
      "description": "When setting up SSO via the Ambari server CLI using a new Ambari server instance, the following error is encountered:\r\n{noformat}\r\n[root@c7401 ~]# ambari-server setup-sso\r\nUsing python  /usr/bin/python\r\nSetting up SSO authentication properties...\r\nEnter Ambari Admin login: admin\r\nEnter Ambari Admin password:\r\n\r\nFetching SSO configuration from DB.ERROR: Exiting with exit code 1.\r\nREASON: Error while fetching SSO configuration. Error details: HTTP Error 404: Not Found\r\n{noformat}\r\nThis is caused by the lack of the\u00a0{{sso-configuration}}\u00a0category in the Ambari configuration set - which will be a common scenario for new Ambari clusters.\r\n{noformat}\r\nGET /api/v1/services/AMBARI/components/AMBARI_SERVER/configurations/sso-configuration\r\n{noformat}\r\n{noformat}\r\n{\r\n  \"status\" : 404,\r\n  \"message\" : \"The requested resource doesn't exist: RootServiceComponentConfiguration not found where Configuration/service_name=AMBARI AND Configuration/component_name=AMBARI_SERVER AND Configuration/category=sso-configuration.\"\r\n}\r\n{noformat}\r\nThe CLI handle this response and assume the following default values:\r\n{noformat}\r\nambari.sso.manage_services = false\r\nambari.sso.enabled_services = \r\n{noformat}\r\n\u00a0",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "SSO",
         "pull-request-available",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "404 error while setting up SSO on a new cluster "
   },
   {
      "_id": "13149733",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-04-03 12:10:51",
      "description": "For example, here are 2 things I found to be probably wrong.\n\n1\\. Journal node restart failed because we cannot find hdfs-site :\ndfs.journalnode.edits.dir. We delete that property in the wizard. We may have\nto change that to dfs.journalnode.edits.dir.&lt;nameservice&gt;\n\n2\\. The following snippet in params_linux.py on HDFS 3.0 stack seems wrong. It\nhas been designed to work with only 1 nameservice.\n\n    \n    \n    \r\n    dfs_ha_enabled = False\r\n    dfs_ha_nameservices = default('/configurations/hdfs-site/dfs.internal.nameservices', None)\r\n    if dfs_ha_nameservices is None:\r\n      dfs_ha_nameservices = default('/configurations/hdfs-site/dfs.nameservices', None)\r\n    dfs_ha_namenode_ids = default(format(\"/configurations/hdfs-site/dfs.ha.namenodes.{dfs_ha_nameservices}\"), None)\r\n    \n\n3\\. After setting up NN Fed, when I restart namenodes, I see the following\nerror.\n\n    \n    \n    \r\n        main_resource.resource.security_enabled, main_resource.resource.logoutput)\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/libraries/providers/hdfs_resource.py\", line 154, in __init__\r\n        security_enabled, run_user)\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/libraries/functions/namenode_ha_utils.py\", line 204, in get_property_for_active_namenode\r\n        if INADDR_ANY in value and rpc_key in hdfs_site:\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/config_dictionary.py\", line 73, in __getattr__\r\n        raise Fail(\"Configuration parameter '\" + self.name + \"' was not found in configurations dictionary!\")\r\n    resource_management.core.exceptions.Fail: Configuration parameter 'dfs.namenode.https-address.ns2.nn1' was not found in configurations dictionary!\r\n    \n\nThis is probably because the namenode_ha_utils is not equipped to handle\nmultiple nameservices.\n\nWe may have to create to fix such stack errors when the wizard is done.\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Fix stack issues in HDFS to support Namenode Federation setup"
   },
   {
      "_id": "13149730",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323902",
            "id": "12323902",
            "name": "ambari-admin",
            "description": "Ambari Admin"
         }
      ],
      "created": "2018-04-03 12:07:42",
      "description": "Remove unnecessary properties from the Ranger SSO configuration updates via the stack advisor\r\n\r\n* {{ranger.sso.cookiename}}\r\n* {{ranger.sso.query.param.originalurl}}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Remove unnecessary properties from the Ranger SSO configuration updates via the stack advisor"
   },
   {
      "_id": "13149723",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-03 11:36:26",
      "description": "When attempting to Save an edited Repository URL the browser reports the following error (Chrome):\r\n\r\n\r\n{noformat}\r\nvendor.js:26942 TypeError: Cannot read property 'primaryClass' of undefined\r\n    at new $modal.open.controller (http://ydavis-hdf-bug-94554-1.openstacklocal:8080/views/ADMIN_VIEW/2.7.0.0/INSTANCE/scripts/main.js:7972:41)\r\n    at Object.instantiate (http://ydavis-hdf-bug-94554-1.openstacklocal:8080/views/ADMIN_VIEW/2.7.0.0/INSTANCE/scripts/vendor.js:17529:14)\r\n    at $controller (http://ydavis-hdf-bug-94554-1.openstacklocal:8080/views/ADMIN_VIEW/2.7.0.0/INSTANCE/scripts/vendor.js:23350:28)\r\n    at resolveSuccess (http://ydavis-hdf-bug-94554-1.openstacklocal:8080/views/ADMIN_VIEW/2.7.0.0/INSTANCE/scripts/vendor.js:52701:32)\r\n    at processQueue (http://ydavis-hdf-bug-94554-1.openstacklocal:8080/views/ADMIN_VIEW/2.7.0.0/INSTANCE/scripts/vendor.js:29439:28)\r\n    at http://ydavis-hdf-bug-94554-1.openstacklocal:8080/views/ADMIN_VIEW/2.7.0.0/INSTANCE/scripts/vendor.js:29455:27\r\n    at Scope.$eval (http://ydavis-hdf-bug-94554-1.openstacklocal:8080/views/ADMIN_VIEW/2.7.0.0/INSTANCE/scripts/vendor.js:30737:28)\r\n    at Scope.$digest (http://ydavis-hdf-bug-94554-1.openstacklocal:8080/views/ADMIN_VIEW/2.7.0.0/INSTANCE/scripts/vendor.js:30551:31)\r\n    at Scope.$apply (http://ydavis-hdf-bug-94554-1.openstacklocal:8080/views/ADMIN_VIEW/2.7.0.0/INSTANCE/scripts/vendor.js:30845:24)\r\n    at done (http://ydavis-hdf-bug-94554-1.openstacklocal:8080/views/ADMIN_VIEW/2.7.0.0/INSTANCE/scripts/vendor.js:24825:47) undefined\r\n{noformat}\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Cannot save edited repository urls in Ambari Version UI"
   },
   {
      "_id": "13149717",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-04-03 11:09:45",
      "description": "After enabling Kerberos, the Ambari JAAS file is not updated. This leads to various errors like collecting JXM data from services:\r\n{noformat}\r\n28 Mar 2018 15:40:29,041  WARN [ambari-metrics-retrieval-service-thread-4] RequestTargetAuthentication:88 - NEGOTIATE authentication error: No valid credentials provided (Mechanism level: No valid credentials provided (Mechanism level: Attempt to obtain new INITIATE credentials fai\r\nled! (null)))\r\n28 Mar 2018 15:40:29,042 ERROR [ambari-metrics-retrieval-service-thread-4] AppCookieManager:122 - SPNego authentication failed, can not get hadoop.auth cookie for URL: http://c7401.ambari.apache.org:50070/jmx\r\n28 Mar 2018 15:40:29,042 ERROR [ambari-metrics-retrieval-service-thread-5] AppCookieManager:122 - SPNego authentication failed, can not get hadoop.auth cookie for URL: http://c7401.ambari.apache.org:50070/jmx?get=Hadoop:service=NameNode,name=FSNamesystem::tag.HAState\r\n2\r\n{noformat}\r\nThe JAAS file as\u00a0{{/etc/ambari-server/conf/krb5JAASLogin.conf}}\u00a0is expected to be updated to match the created Kerberos identity for the Ambari server, but is not:\r\n\r\nThe default values of\r\n{noformat}\r\n    ...\r\n    keyTab=\"/etc/security/keytabs/ambari.keytab\"\r\n    principal=\"ambari@EXAMPLE.COM\"\r\n    ...\r\n{noformat}\r\nShould have been changed to\r\n{noformat}\r\n    ...\r\n    keyTab=\"/etc/security/keytabs/ambari.server.keytab\"\r\n    principal=\"ambari-server-c1@EXAMPLE.COM\"\r\n    ...\r\n{noformat}\r\nAfter manually fixing this and restarting Ambari, the JMX requests authenticated properly.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "pull-request-available",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "After enabling Kerberos, the Ambari JAAS file is not updated"
   },
   {
      "_id": "13149585",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         }
      ],
      "created": "2018-04-02 21:01:15",
      "description": "The following error is seen in the log when disabling Kerberos:\r\n\r\n{noformat}\r\nUnable to parse task structured output: /var/lib/ambari-agent/data/structured-out-5.json\r\n{noformat}\r\n\r\nThis appears to be caused by an empty value being returned from {{resource_management.libraries.script.script.Script#disable_security}}.  Rather then returning an empty value ({{None}}), return {{\"\\{\\}\"}} instead. \r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Unable to parse task structured output when disabling Kerberos"
   },
   {
      "_id": "13149525",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-02 16:47:33",
      "description": "{noformat}\r\n\"<DS.StateManager:ember27929> could not respond to event setProperty in state rootState.loading.\"\r\n{noformat}\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "JS error while deploying new service"
   },
   {
      "_id": "13149469",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-04-02 11:29:25",
      "description": "Title: \"YARN containers\"\r\nContent:   <#allocated>/<#pending>/<#reserved>",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Dashboard: add Yarn Containers widget"
   },
   {
      "_id": "13149186",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-30 15:33:43",
      "description": "Fix and cleanup ClientConfigResourceProviderTest.  At least the following error occurs when running this unit test:\r\n\r\n{noformat:title=org.apache.ambari.server.controller.internal.ClientConfigResourceProviderTest#testGetResources}\r\njava.lang.AssertionError: \r\n  Unexpected method call Configuration.getExternalScriptThreadPoolSize():\r\n    Configuration.getResourceDirPath(): expected: 1, actual: 1\r\n    Configuration.getJavaHome(): expected: 1, actual: 0\r\n{noformat}\r\n\r\nFix and cleanup TestHeartbeatHandler.  At least the following error occurs when running this unit test:\r\n\r\n{noformat:title=org.apache.ambari.server.agent.TestHeartbeatHandler#testComponents}\r\n TestHeartbeatHandler.testComponents:1351 \u00bb NullPointer\r\n{noformat}\r\n\r\n\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Fix and cleanup ClientConfigResourceProviderTest and TestHeartbeatHandler"
   },
   {
      "_id": "13149166",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-30 13:55:22",
      "description": "See screenshot",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
         "name": "Minor",
         "id": "4"
      },
      "projectname": "AMBARI",
      "summary": "Background Operations: icons have incorrect color"
   },
   {
      "_id": "13149134",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-30 10:10:29",
      "description": "Websocket client has not ability to connect to endpoint with non-secure port:\r\n{code}\r\nWebSocket connection to 'wss://172.27.25.217:8080/api/stomp/v1/websocket' failed: Error in connection establishment: net::ERR_CONNECTION_REFUSED\r\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Invalid websocket client port when connected over https"
   },
   {
      "_id": "13148948",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-29 17:22:12",
      "description": "- HDFS links dropdown on dashboard isn't displayed with JS error thrown: {{Uncaught TypeError: Cannot read property 'hosts' of undefined}}\r\n- 'N/A' / 'Not Running' is displayed for NameNode Uptime instead of actual value\r\n- Incorrect values in Service metrics section of service summary page\r\n- Order of dashboard widgets is not restored\r\n- Incorrect value of NameNode RPC on host summary page",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Issues for no NN federation case appearing after federation support implementation"
   },
   {
      "_id": "13148892",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-29 14:30:13",
      "description": "Generally each execution command contains hash of configuration used with. Blueprint deploy workflow presumes posting configs updates after execution commands. Server should have ability to order agent to use last available configuration instead specified in command for command execution.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Add ability to use latest configs for execution commands"
   },
   {
      "_id": "13148845",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-29 11:17:41",
      "description": "While scripting the automation code for the new UI installer, could not select some properties uniquely and some problems faced:\r\n# Unable to select some properties by their label in xpath:\r\n{panel}\r\n* In Advanced zeppelin-config panel under Zeppelin configurations, there are a bunch of configurations related to zeppelin.ssl. As seen in screenshot-1, all the labels have zeppelin.ssl in them and if one were to type textbox with label zeppelin.ssl using XPATH strict text match, i.e. //*[text()=\u2019zeppelin.ssl\u2019], it fails. This is because within the label there are some html elements (see screenshot-1) like <wbr> which do not allow a strict match to the label.\r\n* A simple workaround would be to use xpath contains() operator, but it would return multiple fields for the same label, which is not good.\r\n{panel}\r\n# Try to select the property by \u2018data-qa\u2019 also has similar problems to above\r\n{panel}\r\nAs per screenshot-2, the data-qa attribute has the value \u2018service-config-zeppelin-ssl-zeppelin-config-xml-default\u2019 which can only be covered by xpath //*[contains(@data-qa,\u2019zeppelin-ssl\u2019)]. But this would again lead to multiple matches in the UI.\r\n{panel}\r\n\r\nTwo asks from a test automation point of view:\r\n# Remove any HTML entity from in between the label text\r\n{panel}\r\nExample: zeppelin.<wbr>ssl to zeppelin.ssl\r\n{panel}\r\n# Set the data-qa attribute for the input fields to just the property name as specified in Blueprint. For example, if the Blueprint property is \u2018zeppelin.ssl\u2019, the data-qa attribute can be \u2018zeppelin-ssl\u2019.\r\n \r\nThis would enable the automation code to uniquely identify the property fields.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Problems while selecting the property uniquely in Configurations screen while installation"
   },
   {
      "_id": "13148820",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-29 09:32:54",
      "description": "n Ambari 2.7 with HDFS, Zookeeper, AMS, and Smart Sense (HDP 3.0) installed, the following alert is seen:\r\n{noformat}\r\nNameNode Directory Status\r\nFailed directory count: None{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "HDFS metrics data missing in Ambari 2.7.0"
   },
   {
      "_id": "13148819",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-29 09:30:29",
      "description": "If\u00a0org.apache.ambari.server.utils.PasswordUtilsTest.shouldReadDefaultPasswordIfPasswordPropertyIsPasswordFilePathButItIsNotReadable() is running\u00a0by _root_ user the File.setReadable does not work -> the build will fail.\r\n\r\nWe should consider using\r\njava.nio.file.attribute.PosixFilePermissions\r\nI'll disable this use case until it's fixed.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "PasswordUtilsTest fails if running as 'root'"
   },
   {
      "_id": "13148592",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-28 14:40:59",
      "description": "When first logging into Ambari, the web client makes the following request:\r\nGET api/v1/clusters/<clusterName>/hosts?fields=\r\n- Hosts/cpu_count\r\n- Hosts/host_name\r\n- Hosts/host_status\r\n- Hosts/ip\r\n- Hosts/last_agent_env\r\n- Hosts/last_heartbeat_time\r\n- Hosts/maintenance_state\r\n- Hosts/ph_cpu_count\r\n- Hosts/public_host_name\r\n- Hosts/rack_info\r\n- Hosts/total_mem\r\n- alerts_summary\r\n- host_components/HostRoles/desired_admin_state\r\n- host_components/HostRoles/display_name\r\n- host_components/HostRoles/maintenance_state\r\n- host_components/HostRoles/service_name\r\n- host_components/HostRoles/stale_configs\r\n- host_components/HostRoles/state\r\n- host_components/logging\r\n- stack_versions/HostStackVersions\r\n- stack_versions/repository_versions/RepositoryVersions/display_name\r\n- stack_versions/repository_versions/RepositoryVersions/id\r\n- stack_versions/repository_versions/RepositoryVersions/repository_version\r\n\r\nIn a cluster with 100 hosts, this can cause a payload of over 200MB to be returned. The culprit seems to be the {{Hosts/last_agent_env}} property, specifically the {{activeJavaProcs}} key. If the hosts in the cluster are running a lot of Java processes, this can account for over 90% of the payload (roughly 180MB). This data takes 30 or more seconds for the server to serialize and stream to the socket.\r\n\r\nIt looks like {{Hosts/last_agent_env}} isn't even needed after initially provisioning a host during the host checks, so it probably can be removed.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Ambari Requests Too Much Data From Hosts When Logging In"
   },
   {
      "_id": "13148583",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-28 14:23:16",
      "description": "Steps to reproduce:\r\n# Open ambari web\r\n# Go to HDFS\r\n# Open Configs page\r\n# Leave page\r\n\r\nActual Result: UI has subscribed to all topics again.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Duplicate websocket subscription on Configs page"
   },
   {
      "_id": "13148550",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-28 11:59:36",
      "description": "See screenshot\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Dashboard: rationalize default widgets"
   },
   {
      "_id": "13148540",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-28 11:22:43",
      "description": "I've installed several services with Ambari 2.6.1 - HDP 2.6.4, then upgraded Ambari to 2.7. After this I've added a new HDP 3.0 repo. As Slider was installed which was removed from HDP 3.0, it displayed a white \"i\" in a blue circle in the 3.0 column (see the screenshot). As I'v clicked on the \"Install Packages\" button it returned an error message (see screenshot). I've checked the log, and it seems that the absence of the Slider service caused the issue:\r\n\r\n{code}\r\norg.apache.ambari.server.controller.spi.SystemException: Cannot obtain stack information for HDP-3.0\r\n at org.apache.ambari.server.state.stack.upgrade.RepositoryVersionHelper.buildRoleParams(RepositoryVersionHelper.java:305)\r\n at org.apache.ambari.server.controller.internal.ClusterStackVersionResourceProvider.getHostVersionInstallCommand(ClusterStackVersionResourceProvider.java:723)\r\n at org.apache.ambari.server.orm.AmbariJpaLocalTxnInterceptor.invoke(AmbariJpaLocalTxnInterceptor.java:118)\r\n at org.apache.ambari.server.controller.internal.ClusterStackVersionResourceProvider.createOrchestration(ClusterStackVersionResourceProvider.java:634)\r\n at org.apache.ambari.server.orm.AmbariJpaLocalTxnInterceptor.invoke(AmbariJpaLocalTxnInterceptor.java:118)\r\n at org.apache.ambari.server.controller.internal.ClusterStackVersionResourceProvider.createOrUpdateHostVersions(ClusterStackVersionResourceProvider.java:532)\r\n at org.apache.ambari.server.orm.AmbariJpaLocalTxnInterceptor.invoke(AmbariJpaLocalTxnInterceptor.java:128)\r\n at org.apache.ambari.server.controller.internal.ClusterStackVersionResourceProvider.createResourcesAuthorized(ClusterStackVersionResourceProvider.java:474)\r\n at org.apache.ambari.server.controller.internal.AbstractAuthorizedResourceProvider.createResources(AbstractAuthorizedResourceProvider.java:231)\r\n at org.apache.ambari.server.controller.internal.ClusterControllerImpl.createResources(ClusterControllerImpl.java:296)\r\n at org.apache.ambari.server.api.services.persistence.PersistenceManagerImpl.create(PersistenceManagerImpl.java:97)\r\n at org.apache.ambari.server.api.handlers.CreateHandler.persist(CreateHandler.java:50)\r\n at org.apache.ambari.server.api.handlers.BaseManagementHandler.handleRequest(BaseManagementHandler.java:68)\r\n at org.apache.ambari.server.api.services.BaseRequest.process(BaseRequest.java:144)\r\n at org.apache.ambari.server.api.services.BaseService.handleRequest(BaseService.java:163)\r\n at org.apache.ambari.server.api.services.BaseService.handleRequest(BaseService.java:127)\r\n at org.apache.ambari.server.api.services.ClusterStackVersionService.createRequests(ClusterStackVersionService.java:120)\r\n at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n at java.lang.reflect.Method.invoke(Method.java:498)\r\n at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)\r\n at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205)\r\n at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)\r\n at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:302)\r\n at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:137)\r\n at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)\r\n at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)\r\n at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)\r\n at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)\r\n at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1542)\r\n at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1473)\r\n at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1419)\r\n at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1409)\r\n at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:409)\r\n at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:558)\r\n at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:733)\r\n at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\r\n at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:841)\r\n at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1634)\r\n at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:317)\r\n at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)\r\n at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)\r\n at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n at org.apache.ambari.server.security.authorization.AmbariAuthorizationFilter.doFilter(AmbariAuthorizationFilter.java:290)\r\n at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:114)\r\n at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)\r\n at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)\r\n at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)\r\n at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\r\n at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n at org.apache.ambari.server.security.authentication.AmbariDelegatingAuthenticationFilter.doFilter(AmbariDelegatingAuthenticationFilter.java:135)\r\n at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n at org.apache.ambari.server.security.authorization.AmbariUserAuthorizationFilter.doFilter(AmbariUserAuthorizationFilter.java:95)\r\n at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)\r\n at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64)\r\n at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)\r\n at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)\r\n at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:214)\r\n at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:177)\r\n at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)\r\n at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262)\r\n at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1621)\r\n at org.apache.ambari.server.api.MethodOverrideFilter.doFilter(MethodOverrideFilter.java:73)\r\n at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1621)\r\n at org.apache.ambari.server.api.AmbariPersistFilter.doFilter(AmbariPersistFilter.java:53)\r\n at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1621)\r\n at org.apache.ambari.server.security.AbstractSecurityHeaderFilter.doFilter(AbstractSecurityHeaderFilter.java:130)\r\n at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1621)\r\n at org.eclipse.jetty.servlets.GzipFilter.doFilter(GzipFilter.java:51)\r\n at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1621)\r\n at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:541)\r\n at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)\r\n at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:548)\r\n at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)\r\n at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:190)\r\n at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1592)\r\n at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:188)\r\n at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1239)\r\n at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:168)\r\n at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:481)\r\n at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1561)\r\n at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:166)\r\n at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1141)\r\n at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\r\n at org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(GzipHandler.java:494)\r\n at org.apache.ambari.server.controller.AmbariHandlerList.processHandlers(AmbariHandlerList.java:220)\r\n at org.apache.ambari.server.controller.AmbariHandlerList.processHandlers(AmbariHandlerList.java:209)\r\n at org.apache.ambari.server.controller.AmbariHandlerList.handle(AmbariHandlerList.java:140)\r\n at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)\r\n at org.eclipse.jetty.server.Server.handle(Server.java:564)\r\n at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:320)\r\n at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:251)\r\n at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:279)\r\n at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:110)\r\n at org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:124)\r\n at org.eclipse.jetty.util.thread.Invocable.invokePreferred(Invocable.java:122)\r\n at org.eclipse.jetty.util.thread.strategy.ExecutingExecutionStrategy.invoke(ExecutingExecutionStrategy.java:58)\r\n at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:201)\r\n at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:133)\r\n at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:672)\r\n at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:590)\r\n at java.lang.Thread.run(Thread.java:745)\r\nCaused by: org.apache.ambari.server.StackAccessException: Stack data, stackName=HDP, stackVersion=3.0, serviceName=SLIDER\r\n at org.apache.ambari.server.api.services.AmbariMetaInfo.getService(AmbariMetaInfo.java:540)\r\n at org.apache.ambari.server.state.stack.upgrade.RepositoryVersionHelper.buildRoleParams(RepositoryVersionHelper.java:303)\r\n ... 114 more\r\norg.apache.ambari.server.controller.spi.SystemException: Cannot obtain stack information for HDP-3.0\r\n at org.apache.ambari.server.state.stack.upgrade.RepositoryVersionHelper.buildRoleParams(RepositoryVersionHelper.java:305)\r\n at org.apache.ambari.server.controller.internal.ClusterStackVersionResourceProvider.getHostVersionInstallCommand(ClusterStackVersionResourceProvider.java:723)\r\n at org.apache.ambari.server.orm.AmbariJpaLocalTxnInterceptor.invoke(AmbariJpaLocalTxnInterceptor.java:118)\r\n at org.apache.ambari.server.controller.internal.ClusterStackVersionResourceProvider.createOrchestration(ClusterStackVersionResourceProvider.java:634)\r\n at org.apache.ambari.server.orm.AmbariJpaLocalTxnInterceptor.invoke(AmbariJpaLocalTxnInterceptor.java:118)\r\n at org.apache.ambari.server.controller.internal.ClusterStackVersionResourceProvider.createOrUpdateHostVersions(ClusterStackVersionResourceProvider.java:532)\r\n at org.apache.ambari.server.orm.AmbariJpaLocalTxnInterceptor.invoke(AmbariJpaLocalTxnInterceptor.java:128)\r\n at org.apache.ambari.server.controller.internal.ClusterStackVersionResourceProvider.createResourcesAuthorized(ClusterStackVersionResourceProvider.java:474)\r\n at org.apache.ambari.server.controller.internal.AbstractAuthorizedResourceProvider.createResources(AbstractAuthorizedResourceProvider.java:231)\r\n at org.apache.ambari.server.controller.internal.ClusterControllerImpl.createResources(ClusterControllerImpl.java:296)\r\n at org.apache.ambari.server.api.services.persistence.PersistenceManagerImpl.create(PersistenceManagerImpl.java:97)\r\n at org.apache.ambari.server.api.handlers.CreateHandler.persist(CreateHandler.java:50)\r\n at org.apache.ambari.server.api.handlers.BaseManagementHandler.handleRequest(BaseManagementHandler.java:68)\r\n at org.apache.ambari.server.api.services.BaseRequest.process(BaseRequest.java:144)\r\n at org.apache.ambari.server.api.services.BaseService.handleRequest(BaseService.java:163)\r\n at org.apache.ambari.server.api.services.BaseService.handleRequest(BaseService.java:127)\r\n at org.apache.ambari.server.api.services.ClusterStackVersionService.createRequests(ClusterStackVersionService.java:120)\r\n at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n at java.lang.reflect.Method.invoke(Method.java:498)\r\n at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)\r\n at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205)\r\n at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)\r\n at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:302)\r\n at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:137)\r\n at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)\r\n at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)\r\n at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)\r\n at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)\r\n at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1542)\r\n at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1473)\r\n at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1419)\r\n at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1409)\r\n at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:409)\r\n at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:558)\r\n at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:733)\r\n at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\r\n at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:841)\r\n at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1634)\r\n at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:317)\r\n at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)\r\n at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)\r\n at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n at org.apache.ambari.server.security.authorization.AmbariAuthorizationFilter.doFilter(AmbariAuthorizationFilter.java:290)\r\n at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:114)\r\n at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)\r\n at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)\r\n at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)\r\n at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\r\n at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n at org.apache.ambari.server.security.authentication.AmbariDelegatingAuthenticationFilter.doFilter(AmbariDelegatingAuthenticationFilter.java:135)\r\n at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n at org.apache.ambari.server.security.authorization.AmbariUserAuthorizationFilter.doFilter(AmbariUserAuthorizationFilter.java:95)\r\n at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)\r\n at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64)\r\n at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)\r\n at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)\r\n at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:214)\r\n at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:177)\r\n at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)\r\n at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262)\r\n at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1621)\r\n at org.apache.ambari.server.api.MethodOverrideFilter.doFilter(MethodOverrideFilter.java:73)\r\n at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1621)\r\n at org.apache.ambari.server.api.AmbariPersistFilter.doFilter(AmbariPersistFilter.java:53)\r\n at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1621)\r\n at org.apache.ambari.server.security.AbstractSecurityHeaderFilter.doFilter(AbstractSecurityHeaderFilter.java:130)\r\n at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1621)\r\n at org.eclipse.jetty.servlets.GzipFilter.doFilter(GzipFilter.java:51)\r\n at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1621)\r\n at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:541)\r\n at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)\r\n at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:548)\r\n at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)\r\n at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:190)\r\n at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1592)\r\n at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:188)\r\n at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1239)\r\n at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:168)\r\n at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:481)\r\n at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1561)\r\n at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:166)\r\n at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1141)\r\n at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\r\n at org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(GzipHandler.java:494)\r\n at org.apache.ambari.server.controller.AmbariHandlerList.processHandlers(AmbariHandlerList.java:220)\r\n at org.apache.ambari.server.controller.AmbariHandlerList.processHandlers(AmbariHandlerList.java:209)\r\n at org.apache.ambari.server.controller.AmbariHandlerList.handle(AmbariHandlerList.java:140)\r\n at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)\r\n at org.eclipse.jetty.server.Server.handle(Server.java:564)\r\n at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:320)\r\n at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:251)\r\n at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:279)\r\n at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:110)\r\n at org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:124)\r\n at org.eclipse.jetty.util.thread.Invocable.invokePreferred(Invocable.java:122)\r\n at org.eclipse.jetty.util.thread.strategy.ExecutingExecutionStrategy.invoke(ExecutingExecutionStrategy.java:58)\r\n at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:201)\r\n at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:133)\r\n at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:672)\r\n at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:590)\r\n at java.lang.Thread.run(Thread.java:745)\r\nCaused by: org.apache.ambari.server.StackAccessException: Stack data, stackName=HDP, stackVersion=3.0, serviceName=SLIDER\r\n at org.apache.ambari.server.api.services.AmbariMetaInfo.getService(AmbariMetaInfo.java:540)\r\n at org.apache.ambari.server.state.stack.upgrade.RepositoryVersionHelper.buildRoleParams(RepositoryVersionHelper.java:303)\r\n ... 114 more\r\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Install Packages button on the versions screen fails if there is a service installed which was removed"
   },
   {
      "_id": "13148503",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-28 07:28:40",
      "description": "*STR*\r\nPQS start after Ambari upgrade to 2.7.0 failed with below error:\r\n{code}\r\nTraceback (most recent call last):\r\n File \"/var/lib/ambari-agent/cache/common-services/HBASE/0.96.0.2.0/package/scripts/phoenix_queryserver.py\", line 81, in \r\n PhoenixQueryServer().execute()\r\n File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 356, in execute\r\n self.execute_prefix_function(self.command_name, 'post', env)\r\n File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 377, in execute_prefix_function\r\n method(env)\r\n File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 419, in post_start\r\n raise Fail(\"Pid file \\{0} doesn't exist after starting of the component.\".format(pid_file))\r\nresource_management.core.exceptions.Fail: Pid file /var/run/hbase/phoenix-hbase-server.pid doesn't exist after starting of the component.\r\n{code}\r\n\r\nThe log says the following:\r\n{code}\r\n2018-03-26 16:33:13.563112 launching /base/tools/jdk1.8.0_112/bin/java -cp /usr/hdp/current/hbase-client/conf:/etc/hadoop/conf:/grid/0/hdp/2.6.4.0-91/phoenix/bin/../phoenix-4.7.0.2.6.4.0-91-client.jar:/grid/0/hdp/2.6.4.0-91/phoenix/bin/../phoenix-4.7.0.2.6.4.0-91-queryserver.jar:/usr/hdp/2.6.4.0-91/hadoop/conf:/usr/hdp/2.6.4.0-91/hadoop/lib/*:/usr/hdp/2.6.4.0-91/hadoop/.//*:/usr/hdp/2.6.4.0-91/hadoop-hdfs/./:/usr/hdp/2.6.4.0-91/hadoop-hdfs/lib/*:/usr/hdp/2.6.4.0-91/hadoop-hdfs/.//*:/usr/hdp/2.6.4.0-91/hadoop-yarn/lib/*:/usr/hdp/2.6.4.0-91/hadoop-yarn/.//*:/usr/hdp/2.6.4.0-91/hadoop-mapreduce/lib/*:/usr/hdp/2.6.4.0-91/hadoop-mapreduce/.//*::mysql-connector-java-5.1.33-bin.jar:mysql-connector-java.jar:/grid/0/hdp/2.6.4.0-91/tez/*:/grid/0/hdp/2.6.4.0-91/tez/lib/*:/grid/0/hdp/2.6.4.0-91/tez/conf\r\n -Dproc_phoenixserver -Dlog4j.configuration=file:/grid/0/hdp/2.6.4.0-91/phoenix/bin/log4j.properties -Dpsql.root.logger=INFO,DRFA -Dpsql.log.dir=/grid/0/log/hbase -Dpsql.log.file=phoenix-hbase-server.log org.apache.phoenix.queryserver.server.Main\r\nclose failed in file object destructor:\r\nIOError: [Errno 9] Bad file descriptor\r\nSLF4J: Class path contains multiple SLF4J bindings.\r\nSLF4J: Found binding in [jar:file:/grid/0/hdp/2.6.4.0-91/phoenix/phoenix-4.7.0.2.6.4.0-91-client.jar!/org/slf4j/impl/StaticLoggerBinder.class]\r\nSLF4J: Found binding in [jar:file:/grid/0/hdp/2.6.4.0-91/hadoop/lib/slf4j-log4j12-1.7.10.jar!/org/slf4j/impl/StaticLoggerBinder.class]\r\nSLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.\r\nstarting Query Server, logging to /grid/0/log/hbase/phoenix-hbase-server.log\r\nQuery Server already running, PID file found: /var/run/hbase/phoenix-hbase-server.pid\r\nclose failed in file object destructor:\r\nIOError: [Errno 9] Bad file descriptor\r\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available",
         "upgrade"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "PQS start fails after Ambari upgrade due to Bad file descriptor"
   },
   {
      "_id": "13148283",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         }
      ],
      "created": "2018-03-27 17:42:49",
      "description": "Fix intermittent \"No such file or directory\" error in TestHostCleanup\r\n\r\n{noformat}\r\n======================================================================\r\nERROR: test_do_cleanup_all (TestHostCleanup.TestHostCleanup)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/jenkins/jenkins-slave/workspace/Ambari-Github-PullRequest-Builder/ambari-common/src/test/python/mock/mock.py\", line 1199, in patched\r\n    return func(*args, **keywargs)\r\n  File \"/home/jenkins/jenkins-slave/workspace/Ambari-Github-PullRequest-Builder/ambari-agent/src/test/python/ambari_agent/TestHostCleanup.py\", line 233, in test_do_cleanup_all\r\n    self.hostcleanup.do_cleanup(propertyMap)\r\n  File \"/home/jenkins/jenkins-slave/workspace/Ambari-Github-PullRequest-Builder/ambari-agent/src/main/python/ambari_agent/HostCleanup.py\", line 168, in do_cleanup\r\n    self.do_delete_by_owner(userIds, FOLDER_LIST)\r\n  File \"/home/jenkins/jenkins-slave/workspace/Ambari-Github-PullRequest-Builder/ambari-agent/src/main/python/ambari_agent/HostCleanup.py\", line 514, in do_delete_by_owner\r\n    stat = os.stat(fileToCheck)\r\nOSError: [Errno 2] No such file or directory: '/tmp/symlink2120964127269148256test_link'\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available",
         "unit-test"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Fix intermittent \"No such file or directory\" error in TestHostCleanup"
   },
   {
      "_id": "13148255",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-27 15:48:59",
      "description": "{noformat}\r\nUncaught TypeError: Cannot read property 'toLowerCase' of null\r\n    at Class.<anonymous> (app.js:234426)\r\n    at ComputedPropertyPrototype.get (vendor.js:14954)\r\n    at get (vendor.js:13360)\r\n    at getPath (vendor.js:13482)\r\n    at get (vendor.js:13353)\r\n    at getWithGlobals (vendor.js:15987)\r\n    at Binding._sync (vendor.js:16174)\r\n    at invoke (vendor.js:15382)\r\n    at iter (vendor.js:15429)\r\n    at Array.forEach (<anonymous>)\r\n{noformat}\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "UI loading stuck after deleting service"
   },
   {
      "_id": "13148206",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-03-27 12:18:37",
      "description": "For bigger actions containing a lot of info or special workflow and a new\ntopic would be required. Small actions like restart_agent/clean_cache make\nsense to be sent in one general topic\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Create topic handler for small agent actions. Like restart_agent, clean_caches etc."
   },
   {
      "_id": "13148199",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-27 11:50:56",
      "description": "After adding a service using the Add Service Wizard and then trying to add another service using the Add Service Wizard, the user interface will not reset to the beginning of the wizard.  \r\n\r\nSteps to reproduce:\r\n# Create Ambari 2.6.1 cluster with ZK, HDFS, and Yarn (HDP 2.6)\r\n# Upgrade to Ambari 2.7.0\r\n# Add Atlas\r\n# Add Knox (or try to)\r\n\r\nNote: The upgrade or stack may not be a factor here\r\n\r\nNote: The dashboard does not refresh after the first add... so Atlas is not displayed in the service list until and manual refresh of the view. ",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Add Service Wizard will not reset after adding a service"
   },
   {
      "_id": "13148198",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-03-27 11:41:47",
      "description": "resource_management.core.exceptions.Fail: Script '/var/lib/ambari-\nagent/cache/stacks/HDP/3.0/services/HDFS/package/scripts/zkfc_slave.py' has no\nmethod 'format'\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Fix formatZKFC"
   },
   {
      "_id": "13147985",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-26 17:16:10",
      "description": "SAM's UI link is not available on side bar using Ambari-2.7.0.0. Independently, you can open SAM's UI at port 7777 (default) just fine.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Streamline Application manager's UI link is not visible in Ambari-2.7.0.0"
   },
   {
      "_id": "13147911",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-03-26 11:12:19",
      "description": "Status commands should not generate jceks as they don't need them. This was\nthe behavior in previous release.\n\nCurrently jceks are generated for every status command, flooding ambari-agent\nlogs and making status commands run unnecessary longer.\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "When credential store is enabled status commands should not generate jceks"
   },
   {
      "_id": "13147886",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-26 09:34:16",
      "description": "See screenshots",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Service page layout updates"
   },
   {
      "_id": "13147871",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-26 08:24:15",
      "description": "Remove shadow outside input box.\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
         "name": "Minor",
         "id": "4"
      },
      "projectname": "AMBARI",
      "summary": "Update combo filter style"
   },
   {
      "_id": "13147818",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-25 23:07:00",
      "description": "Enable or Disable SSO for services upon setting sso-configuration values.\r\n\r\nThe action performed by the user via the REST API to set value for the Ambari server sso-configuration value should trigger a call to the stack advisor and, using the returned recommendations, set properties needed to enable or disable SSO integration for the relevant services.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Enable or disable SSO for services upon setting sso-configuration values "
   },
   {
      "_id": "13147563",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-23 18:59:41",
      "description": "- Display namespace id for NameNode entries on Host Details page\r\n- Perform DataNode decommission status check using data of the correct NameNode\r\n- Add NameNode widgets to Host Metrics section",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Add NameNode federation support for Host Details page"
   },
   {
      "_id": "13147505",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-23 15:40:34",
      "description": "See screenshot.\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Install Wizard: Add a Cancel button to go back to Admin View."
   },
   {
      "_id": "13147463",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-23 12:47:18",
      "description": "Server should sent reply for requests to agent reports stomp endpoint.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Server should acknowledge agent about received reports"
   },
   {
      "_id": "13147453",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-23 12:13:37",
      "description": "See screenshots\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Admin View: Users and Groups style tweaks"
   },
   {
      "_id": "13147419",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-03-23 10:03:31",
      "description": "On some envs (not reproducible for me) it can result in failure like this:\n\n    \n    \n    2018/03/22 23:49:21 INFO    : [INFO]   File \"/usr/lib/ambari-agent/lib/ambari_ws4py/async_websocket.py\", line 85\r\n    2018/03/22 23:49:21 INFO    : [INFO]     yield from self.proto.writer.drain()\r\n    2018/03/22 23:49:21 INFO    : [INFO]              ^\r\n    2018/03/22 23:49:21 INFO    : [INFO] SyntaxError: invalid syntax\r\n    2018/03/22 23:49:21 INFO    : [INFO] \r\n    2018/03/22 23:49:21 INFO    : [INFO] Compiling /grid/0/jenkins/workspace/Zuul_Ambari_Build_Job/build-support/SOURCES/ambari/ambari-agent/target/rpm/ambari-agent/buildroot/usr/lib/ambari-agent/lib/ambari_ws4py/server/tulipserver.py ...\r\n    2018/03/22 23:49:21 INFO    : [INFO]   File \"/usr/lib/ambari-agent/lib/ambari_ws4py/server/tulipserver.py\", line 101\r\n    2018/03/22 23:49:21 INFO    : [INFO]     request_line = yield from self.next_line()\r\n    2018/03/22 23:49:21 INFO    : [INFO]                             ^\r\n    2018/03/22 23:49:21 INFO    : [INFO] SyntaxError: invalid syntax\r\n    2018/03/22 23:49:21 INFO    : [INFO] \r\n    \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Remove python3 files from ws4py since they can cause build failure"
   },
   {
      "_id": "13147397",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-23 09:03:58",
      "description": "STR:\r\n # Deploy a HDP-3.0 cluster\r\n # Create a user with role as \"Cluster Administrator\"\r\n # Login as the user\r\n # Click Add Service from the dashboard\r\n # Click Next button in the wizard\r\n\r\nThe same error occurs while trying the Move Components wizard too.\r\n\r\nIssue also present for Cluster Operator Role while moving components.\r\n\r\nThe page is stuck at this stage even after dismissing the popup.\r\n{code:java|title=ambari-server.log}\r\n17 Mar 2018 16:13:51,740  WARN [ambari-client-thread-524] StackAdvisorCommand:204 - Error occurred during retrieving ldap configuration, status=403, response={\r\n  \"status\" : 403,\r\n  \"message\" : \"The authenticated user does not have the appropriate authorizations to get the requested resource(s)\"\r\n}\r\n17 Mar 2018 16:13:51,741  WARN [ambari-client-thread-524] StackAdvisorCommand:182 - Error parsing services.json file content: Error occurred during retrieving ldap configuration, status=403, response={\r\n  \"status\" : 403,\r\n  \"message\" : \"The authenticated user does not have the appropriate authorizations to get the requested resource(s)\"\r\n}\r\norg.apache.ambari.server.api.services.stackadvisor.StackAdvisorException: Error occurred during retrieving ldap configuration, status=403, response={\r\n  \"status\" : 403,\r\n  \"message\" : \"The authenticated user does not have the appropriate authorizations to get the requested resource(s)\"\r\n}\r\n\tat org.apache.ambari.server.api.services.stackadvisor.commands.StackAdvisorCommand.populateLdapConfiguration(StackAdvisorCommand.java:205)\r\n\tat org.apache.ambari.server.api.services.stackadvisor.commands.StackAdvisorCommand.adjust(StackAdvisorCommand.java:177)\r\n\tat org.apache.ambari.server.api.services.stackadvisor.commands.StackAdvisorCommand.invoke(StackAdvisorCommand.java:352)\r\n\tat org.apache.ambari.server.api.services.stackadvisor.StackAdvisorHelper.recommend(StackAdvisorHelper.java:132)\r\n\tat org.apache.ambari.server.controller.internal.RecommendationResourceProvider.createResources(RecommendationResourceProvider.java:145)\r\n\tat org.apache.ambari.server.controller.internal.ClusterControllerImpl.createResources(ClusterControllerImpl.java:296)\r\n\tat org.apache.ambari.server.api.services.persistence.PersistenceManagerImpl.create(PersistenceManagerImpl.java:97)\r\n\tat org.apache.ambari.server.api.handlers.CreateHandler.persist(CreateHandler.java:50)\r\n\tat org.apache.ambari.server.api.handlers.BaseManagementHandler.handleRequest(BaseManagementHandler.java:68)\r\n\tat org.apache.ambari.server.api.services.BaseRequest.process(BaseRequest.java:144)\r\n\tat org.apache.ambari.server.api.services.BaseService.handleRequest(BaseService.java:163)\r\n\tat org.apache.ambari.server.api.services.BaseService.handleRequest(BaseService.java:127)\r\n\tat org.apache.ambari.server.api.services.RecommendationService.getRecommendation(RecommendationService.java:60)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)\r\n\tat com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205)\r\n\tat com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)\r\n\tat com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:302)\r\n\tat com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)\r\n\tat com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)\r\n\tat com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)\r\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1542)\r\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1473)\r\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1419)\r\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1409)\r\n\tat com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:409)\r\n\tat com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:558)\r\n\tat com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:733)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\r\n\tat org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:841)\r\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1634)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:317)\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.apache.ambari.server.security.authorization.AmbariAuthorizationFilter.doFilter(AmbariAuthorizationFilter.java:290)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:114)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.apache.ambari.server.security.authentication.AmbariDelegatingAuthenticationFilter.doFilter(AmbariDelegatingAuthenticationFilter.java:135)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.apache.ambari.server.security.authorization.AmbariUserAuthorizationFilter.doFilter(AmbariUserAuthorizationFilter.java:95)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:214)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:177)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262)\r\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1621)\r\n\tat org.apache.ambari.server.api.MethodOverrideFilter.doFilter(MethodOverrideFilter.java:73)\r\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1621)\r\n\tat org.apache.ambari.server.api.AmbariPersistFilter.doFilter(AmbariPersistFilter.java:53)\r\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1621)\r\n\tat org.apache.ambari.server.security.AbstractSecurityHeaderFilter.doFilter(AbstractSecurityHeaderFilter.java:130)\r\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1621)\r\n\tat org.eclipse.jetty.servlets.GzipFilter.doFilter(GzipFilter.java:51)\r\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1621)\r\n\tat org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:541)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)\r\n\tat org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:548)\r\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:190)\r\n\tat org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1592)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:188)\r\n\tat org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1239)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:168)\r\n\tat org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:481)\r\n\tat org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1561)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:166)\r\n\tat org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1141)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\r\n\tat org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(GzipHandler.java:494)\r\n\tat org.apache.ambari.server.controller.AmbariHandlerList.processHandlers(AmbariHandlerList.java:220)\r\n\tat org.apache.ambari.server.controller.AmbariHandlerList.processHandlers(AmbariHandlerList.java:209)\r\n\tat org.apache.ambari.server.controller.AmbariHandlerList.handle(AmbariHandlerList.java:140)\r\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)\r\n\tat org.eclipse.jetty.server.Server.handle(Server.java:564)\r\n\tat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:320)\r\n\tat org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:251)\r\n\tat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:279)\r\n\tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:110)\r\n\tat org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:124)\r\n\tat org.eclipse.jetty.util.thread.Invocable.invokePreferred(Invocable.java:122)\r\n\tat org.eclipse.jetty.util.thread.strategy.ExecutingExecutionStrategy.invoke(ExecutingExecutionStrategy.java:58)\r\n\tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:201)\r\n\tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:133)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:672)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:590)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n17 Mar 2018 16:13:51,744 ERROR [ambari-client-thread-524] CreateHandler:84 - Caught a runtime exception while attempting to create a resource: null\r\njavax.ws.rs.WebApplicationException\r\n\tat org.apache.ambari.server.api.services.stackadvisor.commands.StackAdvisorCommand.adjust(StackAdvisorCommand.java:183)\r\n\tat org.apache.ambari.server.api.services.stackadvisor.commands.StackAdvisorCommand.invoke(StackAdvisorCommand.java:352)\r\n\tat org.apache.ambari.server.api.services.stackadvisor.StackAdvisorHelper.recommend(StackAdvisorHelper.java:132)\r\n\tat org.apache.ambari.server.controller.internal.RecommendationResourceProvider.createResources(RecommendationResourceProvider.java:145)\r\n\tat org.apache.ambari.server.controller.internal.ClusterControllerImpl.createResources(ClusterControllerImpl.java:296)\r\n\tat org.apache.ambari.server.api.services.persistence.PersistenceManagerImpl.create(PersistenceManagerImpl.java:97)\r\n\tat org.apache.ambari.server.api.handlers.CreateHandler.persist(CreateHandler.java:50)\r\n\tat org.apache.ambari.server.api.handlers.BaseManagementHandler.handleRequest(BaseManagementHandler.java:68)\r\n\tat org.apache.ambari.server.api.services.BaseRequest.process(BaseRequest.java:144)\r\n\tat org.apache.ambari.server.api.services.BaseService.handleRequest(BaseService.java:163)\r\n\tat org.apache.ambari.server.api.services.BaseService.handleRequest(BaseService.java:127)\r\n\tat org.apache.ambari.server.api.services.RecommendationService.getRecommendation(RecommendationService.java:60)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)\r\n\tat com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205)\r\n\tat com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)\r\n\tat com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:302)\r\n\tat com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)\r\n\tat com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)\r\n\tat com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)\r\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1542)\r\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1473)\r\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1419)\r\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1409)\r\n\tat com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:409)\r\n\tat com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:558)\r\n\tat com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:733)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\r\n\tat org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:841)\r\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1634)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:317)\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.apache.ambari.server.security.authorization.AmbariAuthorizationFilter.doFilter(AmbariAuthorizationFilter.java:290)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:114)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.apache.ambari.server.security.authentication.AmbariDelegatingAuthenticationFilter.doFilter(AmbariDelegatingAuthenticationFilter.java:135)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.apache.ambari.server.security.authorization.AmbariUserAuthorizationFilter.doFilter(AmbariUserAuthorizationFilter.java:95)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:214)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:177)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262)\r\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1621)\r\n\tat org.apache.ambari.server.api.MethodOverrideFilter.doFilter(MethodOverrideFilter.java:73)\r\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1621)\r\n\tat org.apache.ambari.server.api.AmbariPersistFilter.doFilter(AmbariPersistFilter.java:53)\r\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1621)\r\n\tat org.apache.ambari.server.security.AbstractSecurityHeaderFilter.doFilter(AbstractSecurityHeaderFilter.java:130)\r\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1621)\r\n\tat org.eclipse.jetty.servlets.GzipFilter.doFilter(GzipFilter.java:51)\r\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1621)\r\n\tat org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:541)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)\r\n\tat org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:548)\r\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:190)\r\n\tat org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1592)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:188)\r\n\tat org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1239)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:168)\r\n\tat org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:481)\r\n\tat org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1561)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:166)\r\n\tat org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1141)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\r\n\tat org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(GzipHandler.java:494)\r\n\tat org.apache.ambari.server.controller.AmbariHandlerList.processHandlers(AmbariHandlerList.java:220)\r\n\tat org.apache.ambari.server.controller.AmbariHandlerList.processHandlers(AmbariHandlerList.java:209)\r\n\tat org.apache.ambari.server.controller.AmbariHandlerList.handle(AmbariHandlerList.java:140)\r\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)\r\n\tat org.eclipse.jetty.server.Server.handle(Server.java:564)\r\n\tat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:320)\r\n\tat org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:251)\r\n\tat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:279)\r\n\tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:110)\r\n\tat org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:124)\r\n\tat org.eclipse.jetty.util.thread.Invocable.invokePreferred(Invocable.java:122)\r\n\tat org.eclipse.jetty.util.thread.strategy.ExecutingExecutionStrategy.invoke(ExecutingExecutionStrategy.java:58)\r\n\tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:201)\r\n\tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:133)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:672)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:590)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "400 server error when Cluster Administrator tries to add service and move components"
   },
   {
      "_id": "13147382",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-23 08:13:24",
      "description": "When setting the URL for the SSO provider while running\u00a0{{ambari-server setup-sso}}, valid URLs are rejected.\r\n{noformat}\r\n[root@c7402 ~]# ambari-server setup-sso\r\nUsing python  /usr/bin/python\r\nSetting up SSO authentication properties...\r\nDo you want to configure SSO authentication [y/n] (y)?y\r\nProvider URL [URL] (http://example.com):https://c7402.ambari.apache.org:8443/gateway/knoxsso/api/v1/websso\r\nInvalid provider URL\r\nProvider URL [URL] (http://example.com):c7402.ambari.apache.org:8443\r\nPublic Certificate pem (empty) (empty line to finish input):\r\n{noformat}\r\nCause:\r\nThe RegEx validating the URL is only allowing hostname and port values, when it should allow for absolute URLs.\r\n{code:java|title=ambari_server/setupSso.py:72}\r\nprovider_url = get_validated_string_input(\"Provider URL [URL] ({0}):\".format(provider_url), provider_url, REGEX_HOSTNAME_PORT,\r\n                                                \"Invalid provider URL\", False){code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Provider URL validator incorrect when setting up SSO via Ambari CLI"
   },
   {
      "_id": "13147336",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-23 01:11:54",
      "description": "*Recommend SSO configuration values for ATLAS in the stack advisor*\r\nThe following values in {{application-properties}} need to be set:\r\n\r\n* {{atlas.sso.knox.enabled}}\r\n** SSO enabled (true) or disabled (false)\r\n\r\n* {{atlas.sso.knox.providerurl}}\r\n** SSO provider url. Example: https://KNOX_HOST:KNOX_PORT/gateway/TOPOLOGY_NAME/knoxsso/api/v1/websso\r\n\r\n* {{atlas.sso.knox.publicKey}}\r\n** SSO provider public key. The base64-encoded x509 Public key data (without the certificate header and footer) used for SSO provider cookie verification\r\n\r\n* {{atlas.sso.knox.providerurl}}\r\n** SSO browser useragents (comma-delimted).  Default: Mozilla,chrome\r\n\r\nAlso, update the Atlas metainfo.xml file to indicate it supports SSO configuration by Ambari\r\n\r\n*Recommend SSO configuration values for RANGER in the stack advisor*\r\nThe following values in {{ranger-admin-site}} need to be set:\r\n\r\n* {{ranger.sso.enabled}}\r\n** SSO enabled (true) or disabled (false)\r\n\r\n* {{ranger.sso.providerurl}}\r\n** SSO provider url. Example: https://KNOX_HOST:KNOX_PORT/gateway/TOPOLOGY_NAME/knoxsso/api/v1/websso\r\n\r\n* {{ranger.sso.publicKey}}\r\n** SSO provider public key. The base64-encoded x509 Public key data (without the certificate header and footer) used for SSO provider cookie verification\r\n\r\n* {{ranger.sso.cookiename}}\r\n** SSO cookie name\r\n\r\n* {{ranger.sso.query.param.originalurl}}\r\n** Query name for appending original url in SSO url\r\n\r\n* {{ranger.sso.browser.useragent}}\r\n** SSO browser useragents (comma-delimted).  Default: Mozilla,chrome\r\n\r\nAlso, update the Ranger metainfo.xml file to indicate it supports SSO configuration by Ambari",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Recommend SSO configuration values for ATLAS and RANGER in the stack advisor"
   },
   {
      "_id": "13147198",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-22 15:50:53",
      "description": "The existing LDAP synchronization process has the following challenges:\r\n\r\n* Common annoyance among Operators\r\n* Difficult to schedule as it\u2019s interactive\r\n* Introduces delay in entitlements being granted to users (in LDAP), and more importantly from revocation.\r\n* Introduces issues with remove users that are no longer active, or with the company which == compliance concerns\r\n\r\nand benefits: \r\n* Simplifies auto-complete for adding users/groups to cluster roles and view permissions\r\n* Shields users from LDAP performance issues on login, and during user/group permission mapping\r\n\r\nGiven that, Ambari's LDAP sync process should be removed to allow for users and groups to be dynamically synchronized with a configured LDAP server.  Users should be added to the Ambari DB if necessary and groups are to be dynamically assigned and mapped to Ambari roles upon successful authentication with the configured LDAP server (via Ambari).  A scheduled job may need to execute to clean out any orphaned data.\r\n\r\nThe requirements will be broken out into categories of capabilities:\r\n\r\n1.) Permission Mapping\r\n2.) Permission Resolution\r\n3.) User management\r\n\r\n*Permission Mapping*: Ability to map an individual LDAP User DN to a permission, as well as an individual Group DN to a permission\r\n\r\n*Permission Resolution*: Ability to resolve DN of user, DN of all directly mapped groups, and DN of all in-directly mapped groups (nested groups)\r\n* If the user logging in has no permissions they should not be allowed to login, but shown a message stating that they have no mapped permissions in Ambari and to contact their administrator, no Ambari DB user should be auto-created\r\n* If the user logging in has permissions, we should:\r\n** Auto-create the Ambari user in the DB if it does not exist\r\n** Check if we were asked to auto-create home directories on login, and if so check if the user has a home directory, if they don't, then auto-create it\r\n\r\n*User Management*: Because users will be auto-created in the Ambari DB, and because they will be authenticated against LDAP before being able to login we have to appropriately deal with two types of users:\r\n\r\n# Orphaned Users: Users without any mapped permissions - users enter this state by being in a group \"HadoopOps\" lets say and then six months later they are removed from this group. Or were directly mapped to a permission by name, and were removed from that permission. If they try logging into Ambari they will not be allowed to login and will be shown the message stating that they have no permissions.  These users need to be removed from Ambari individually through the Ambari UI with a \"Remove LDAP User\" button on the user.\r\n# Deprovisioned Users: Users who have been either removed or inactivated in the upstream LDAP server due to termination or other reasons - In most situations we'll never see these users again.\r\n\r\nFor both types of users having the following capabilities would be extremely helpful:\r\n\r\n* Ability to remove individual LDAP users from Ambari \"Remove LDAP User\" button\r\n* Ability to remove all users who haven't logged in in more than x days.\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/15",
         "id": "15",
         "description": "Created by Jira Software - do not edit or delete. Issue type for a big user story that needs to be broken down.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21137&avatarType=issuetype",
         "name": "Epic",
         "subtask": false,
         "avatarId": 21137
      },
      "labels": [
         "authentication",
         "ldap"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Remove LDAP Synchronization Process"
   },
   {
      "_id": "13147146",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-22 13:19:22",
      "description": "Adding placeholder replacement ability to quicklink engine.\r\n\r\nFor example:\r\n{code:java}\r\n\"url\":\"%@://%@:%@/${gateway-site/gateway.path}/knoxsso/knoxauth/login.html\"{code}\r\nHere the ${config-type/propety-name} should be replaced based on the\u00a0appropriate configuration.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Add custom context root support to quicklink engine"
   },
   {
      "_id": "13147133",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-03-22 12:41:32",
      "description": "1\\. Component1 needs component2 to be started to do configure  \n2\\. Component1 grabs the lock and retries in configure  \n3\\. Component2 cannot grab the lock waiting forever\n\nThis causes variety of timeout errors in different components.  \nThan finally one component will fail with at the end\n\n    \n    \n    2018-03-22 08:53:01,593 - Trying to acquire a lock on /var/lib/ambari-agent/tmp/link_configs_lock_file\r\n    \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Locking configure to single process causes deadlock"
   },
   {
      "_id": "13146844",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-21 14:04:34",
      "description": "Steps:\r\n# Change the value of fs.trash.interval for HDFS service.\r\n# Save configs\r\n# Notice Restart required icon\r\n# Try to apply 'Restart All Affected'\r\n\r\nNo op was triggered. Could see js error error in console:\r\n{noformat}\r\nUncaught TypeError: Cannot read property 'get' of undefined\r\npullNnCheckPointTime @ app.js:27950\r\ncheckNnLastCheckpointTime @ app.js:27905\r\nrestartAllStaleConfigComponents @ app.js:26478\r\nActionHelper.registeredActions.(anonymous function).handler @ vendor.js:31554\r\n(anonymous function) @ vendor.js:23346\r\njQuery.event.dispatch @ vendor.js:3178\r\nelemData.handle @ vendor.js:2854\r\napp.js:56248 \r\n{noformat}\r\n\r\nAlso for 'Stop' service operation:\r\n{noformat}\r\nUncaught TypeError: Cannot read property 'get' of undefined\r\npullNnCheckPointTime @ app.js:27950\r\ncheckNnLastCheckpointTime @ app.js:27905\r\nstartStopPopup @ app.js:27842\r\nstopService @ app.js:28176\r\ndoAction @ app.js:28662\r\nActionHelper.registeredActions.(anonymous function).handler @ vendor.js:31554\r\n(anonymous function) @ vendor.js:23346\r\njQuery.event.dispatch @ vendor.js:3178\r\nelemData.handle @ vendor.js:2854\r\napp.js:56248 \r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "JS error on service stop/restart after config changes"
   },
   {
      "_id": "13146826",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-21 13:05:37",
      "description": "Atlas is already installed in the cluster. To make Atlas HA , tried to add a new instance of Atlas Metadata server on host summary page. if Atlas Metadata server is added, \"Confirmation\" window keeps buffering forever.\r\n\r\nrefer to screenshot  provided\r\n\r\nWorkaround :\r\n1. Inspect on the Confirm button\r\n2. Remove the \"disabled\" attribute (Now Confirm button is enabled)\r\n3. Submit the confirm button",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Regression : Adding Atlas Metadata server' for HA on an host takes forever."
   },
   {
      "_id": "13146822",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-21 12:50:33",
      "description": "Use Ambari CLI to specify which services should be setup for SSO integration.\r\n{noformat:title=Example}\r\n# ambari-server setup-sso\r\nUsing python  /usr/bin/python\r\nSetting up SSO authentication properties...\r\nDo you want to configure SSO authentication [y/n] (y)?y\r\nEnter Ambari Admin login: admin\r\nEnter Ambari Admin password: admin\r\nProvider URL [URL] (http://example.com):http://knox.ambari.apache.org:8080\r\nPublic Certificate pem (stored) (empty line to finish input):\r\nAAAAB3NzaC1yc2EAAAADAQABAAABAQD....\r\n\r\nUse SSO for all services [y/n] (y)? n\r\nUse SSO for Ambari [y/n] (y)? y\r\nUse SSO for HDFS [y/n] (y)? y\r\nUse SSO for YARN [y/n] (y)? y\r\n...\r\nUse SSO for ZOOKEEPER [y/n] (y)? n\r\nDo you want to configure advanced properties [y/n] (n) ?\r\nAmbari Server 'setup-sso' completed successfully.\r\n{noformat}\r\nNOTE: this will require obtaining an Ambari administrator username and password to GET, PUT, and POST to the Ambari REST API.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available",
         "security",
         "sso"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Use Ambari CLI to specify which services should be setup for SSO integration"
   },
   {
      "_id": "13146815",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-21 12:19:58",
      "description": "Add SSO-related configuration recommendations to the stack advisor.\r\n\r\n# Add a new action - {{recommend-configurations-for-sso}} - to query services for only SSO-related configuration changes\r\n# Append to the stack advisor input data, the Ambari-stored SSO integration data (list of services that should enable SSO integration, proxy url, public key details, etc...).\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available",
         "stack_advisor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Add SSO-related configuration recommendations to the stack advisor"
   },
   {
      "_id": "13146810",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-21 11:35:47",
      "description": "Users are not able to see cluster memory graph under YARN. This was working before upgrade.\r\n\r\nWe were able to reproduce this internally on Ambari 2.6. We checked across 5 clusters and all of them exhibited same behaviour.\r\n\r\nSeems like problem with the compute : mem_total._sum - mem_free._sum fails but mem_total._sum + mem_free._sum succeeds.\r\n\r\nAlso if we load mem_total._sum AND mem_free._sum individually, they come up fine.\r\n\r\nSeems like issue when we do a 'subtract'.\r\n\r\nAttaching UI Screenshot",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "YARN cluster memory graph is not loading in Ambari 2.6"
   },
   {
      "_id": "13146586",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-20 16:16:00",
      "description": "After Ambari Upgrade from 2.6.0.0 to 2.7.0.0 , start all services operation fails at MapReduce2 Client Install with below error.\r\n\r\n{code:java}\r\nTraceback (most recent call last):\r\n  File \"/var/lib/ambari-agent/cache/common-services/YARN/2.1.0.2.0/package/scripts/mapreduce2_client.py\", line 91, in <module>\r\n    MapReduce2Client().execute()\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 377, in execute\r\n    method(env)\r\n  File \"/var/lib/ambari-agent/cache/common-services/YARN/2.1.0.2.0/package/scripts/mapreduce2_client.py\", line 41, in install\r\n    self.configure(env)\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 122, in locking_configure\r\n    original_configure(obj, *args, **kw)\r\n  File \"/var/lib/ambari-agent/cache/common-services/YARN/2.1.0.2.0/package/scripts/mapreduce2_client.py\", line 50, in configure\r\n    yarn(config_dir=config_dir)\r\n  File \"/usr/lib/ambari-agent/lib/ambari_commons/os_family_impl.py\", line 89, in thunk\r\n    return fn(*args, **kwargs)\r\n  File \"/var/lib/ambari-agent/cache/common-services/YARN/2.1.0.2.0/package/scripts/yarn.py\", line 166, in yarn\r\n    content=InlineTemplate(params.container_executor_cfg_template)\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/source.py\", line 150, in __init__\r\n    super(InlineTemplate, self).__init__(name, extra_imports, **kwargs) \r\n  File \"/usr/lib/ambari-agent/lib/resource_management/core/source.py\", line 137, in __init__\r\n    self.template = self.template_env.get_template(self.name)     \r\n  File \"/usr/lib/ambari-agent/lib/ambari_jinja2/environment.py\", line 716, in get_template\r\n    return self._load_template(name, self.make_globals(globals))\r\n  File \"/usr/lib/ambari-agent/lib/ambari_jinja2/environment.py\", line 686, in _load_template\r\n    template = self.cache.get(name)\r\n  File \"/usr/lib/ambari-agent/lib/ambari_jinja2/utils.py\", line 405, in get\r\n    return self[key]\r\n  File \"/usr/lib/ambari-agent/lib/ambari_jinja2/utils.py\", line 448, in __getitem__\r\n    rv = self._mapping[key]\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/config_dictionary.py\", line 73, in __getattr__\r\n    raise Fail(\"Configuration parameter '\" + self.name + \"' was not found in configurations dictionary!\")\r\nresource_management.core.exceptions.Fail: Configuration parameter 'container-executor' was not found in configurations dictionary!\r\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available",
         "upgrade"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Ambari Upgrade:  Start All Services fails after AU at MapReduce2 Client Install with error \"Configuration parameter 'container-executor' was not found in configurations dictionary!\""
   },
   {
      "_id": "13146549",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-20 13:53:00",
      "description": "After Ambari Upgrade from 2.6.0.0 to 2.7.0.0 , the Ambari UI Dashboard is unable to load. Spinner keeps spinning,\r\nSeems like Wizard-Data API calls are returning null and not being handled properly on the UI. Ideally, the dashboard should be shown with widgets with No data (if AMS is down)\r\nAdditional Information:\r\nAdding few more observed issues. These might be related to the originally raised issue.\r\n# Quick Links are not shown for services. Spinner keeps spinning.\r\n# Component information is not shown for some services. e.g. Oozie.\r\n# For HDFS, YARN -> DataNodes, NodeManagers keep showing Loading and never loads.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Ambari Upgrade from 2.6.0.0 - 2.7.0.0 - Dashboard is unable to load and spinner keeps spinning"
   },
   {
      "_id": "13146510",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-03-20 10:33:28",
      "description": "\n    ERROR: test_get_service_base_dir (TestFileCache.TestFileCache)\r\n    ----------------------------------------------------------------------\r\n    ERROR 2018-03-20 06:58:54,744 - Python unit tests failed\r\n    Traceback (most recent call last):\r\n      File \"/home/jenkins/jenkins-slave/workspace/Ambari-Github-PullRequest-Builder/ambari-common/src/test/python/mock/mock.py\", line 1199, in patched\r\n        return func(*args, **keywargs)\r\n      File \"/home/jenkins/jenkins-slave/workspace/Ambari-Github-PullRequest-Builder/ambari-agent/src/test/python/ambari_agent/TestFileCache.py\", line 72, in test_get_service_base_dir\r\n        res = fileCache.get_service_base_dir(command, \"server_url_pref\")\r\n      File \"/home/jenkins/jenkins-slave/workspace/Ambari-Github-PullRequest-Builder/ambari-agent/src/main/python/ambari_agent/FileCache.py\", line 77, in get_service_base_dir\r\n        if 'service_package_folder' in command['commandParams']:\r\n    KeyError: 'commandParams'\r\n    \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Python UT failure"
   },
   {
      "_id": "13146369",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-19 20:49:33",
      "description": "Add SSO integration support information to service information via Ambari's REST API.  This information should be usable by Ambari's search predicate feature.\r\n\r\nNew _read-only_ properties for (stack) services should be:\r\n* *{{sso_integration_supported}}* - Indicates whether the service supports SSO integration or not\r\n** Information is expected to be determined by service's meta info (see BUG-98626)\r\n\r\nNew _read-only_ properties for installed services should be:\r\n* *{{sso_integration_supported}}* - Indicates whether the service supports SSO integration or not\r\n** Information is expected to be determined by the service's meta info (see BUG-98626)\r\n* *{{sso_integration_enabled}}* - Indicates whether the service is configured for SSO integration or not\r\n** Information is expected to be determined by a value indicated in the service's meta info (see BUG-98626)\r\n* *{{sso_integration_desired}}* - Indicates whether the service is chosen for SSO integration or not\r\n** Information is expected to be in {{cluster-env/sso_enabled_services}} (see BUG-98451)\r\n\r\nExamples:\r\n{noformat:title=Get stack service details}\r\nGET /api/v1/stacks/:STACK_NAME/versions/:VERSION/services/:SERVICE_NAME\",\r\n{\r\n  \"href\" : \":URL\",\r\n  \"StackServices\" : {\r\n     ...\r\n     \"sso_integration_supported\": \"false\",\r\n     ...\r\n  },\r\n  ...\r\n{noformat}\r\n\r\n{noformat:title=Get installed service information}\r\nGET /api/v1/clusters/:CLUSTER_NAME/services/:SERVICE_NAME\r\n{\r\n  \"href\" : \":URL\",\r\n  \"ServiceInfo\" : {\r\n    \"cluster_name\" : \":CLUSTER_NAME\",\r\n    ...\r\n    \"sso_integration_supported\": \"true\",\r\n    \"sso_integration_enabled\": \"false\",\r\n    \"sso_integration_desired\": \"false\",\r\n     ...\r\n    },\r\n    ...\r\n{noformat}\r\n\r\n{noformat:title=List installed services that support SSO integration}\r\nGET /api/v1/clusters/:CLUSTER_NAME/services?ServiceInfo/sso_integration_supported=true\r\n{\r\n  \"href\" : \":URL\",\r\n  \"items\" : [\r\n      ...\r\n   ]\r\n}\r\n{noformat}\r\n\r\n{noformat:title=List stack services that support SSO integration}\r\nGET /api/v1/stacks/:STACK_NAME/versions/:VERSION/services?StackServices/credential_store_enabled=false\r\n{\r\n  \"href\" : \":URL\",\r\n  \"items\" : [\r\n      ...\r\n   ]\r\n}\r\n{noformat}\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Add SSO integration support information to service information via Ambari's REST API"
   },
   {
      "_id": "13146306",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-19 16:59:12",
      "description": "Add Ambari configuration data to stack/service advisor input data. Currently the\u00a0{{ldap-configuration}}\u00a0data is passed in to the stack/service advisor. However, generically all Ambari configuration data should be passed in.\r\n\r\nFor example, the current data set (in service.json) contains\r\n{code:java}\r\n{\r\n  ...  \"services\" : [],\r\n  ... \"configurations\" : \\{ ... }, \"ambari-server-properties\" : \\{ ... },\r\n  ...  \"ldap-configurations\" : \\{ ... }\r\n}\r\n\u00a0\r\n\r\n{code}\r\n\u00a0\r\n\r\n\"\\{{ldap-configurations}}\" may or may not exist depending on if LDAP authentication/sync was setup. This should be treated generically and part of a larger block of data named \"\\{{ambari-server-configuration}}\". For example:\r\n{code:java}\r\n{\r\n...\r\n\"services\" : [],\r\n...\r\n\"configurations\" :\r\n\r\n{ ... },\r\n\"ambari-server-properties\" : { ... }\r\n\r\n,\r\n...\r\n\"ambari-server-configuration\" : {\r\n\"ldap-configurations\" :\r\n\r\n{ ... }\r\n\r\n,\r\n...\r\n}\r\n}\r\n\r\n\u00a0\r\n\r\n\u00a0{code}\r\n\u00a0",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Add Ambari configuration data to stack/service advisor input data"
   },
   {
      "_id": "13146270",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-19 15:19:16",
      "description": "STR:\r\n* Launch Install Wizard\r\n* On Select Version page, select \"Use Local Repository\" and then \"Use RedHat Satellite/Spacewalk\"\r\n* The Next button is disabled.  The Next button must be enabled in this scenario.\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Install Wizard > Select Version page: the user cannot proceed with Redhat Satellite option"
   },
   {
      "_id": "13146254",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-19 14:25:22",
      "description": "Atlas uses the atlas-application.properties file and a clear-text-password can be found there. Therefore, OS permissions\u00a0should be set to just allowing the atlas user to access it, but ambari resets them every time, making it not possible to restrict world-read access to the file.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
         "name": "Minor",
         "id": "4"
      },
      "projectname": "AMBARI",
      "summary": "Ambari should not set world-readable permissions for atlas-application.properties file"
   },
   {
      "_id": "13146233",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-19 14:02:19",
      "description": "# Reduce top padding for modal of wizard\r\n# Test KDC connection success icon should be green\r\n# the retry button on the 'Kerberize Cluster' page does not conform to the retry button styles found in other wizards\r\n\r\nSee screenshots.\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Enable Kerberos Wizard style edits"
   },
   {
      "_id": "13146159",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-19 08:50:20",
      "description": "I can confirm that\u00a0{{config _hostLevelParams/stack_version_\u00a0}}is not present at command.json\r\n{code:java}\r\n2018-03-15 17:17:15,891 - Task. Type: EXECUTE, Script: scripts/namenode.py - Function: wait_for_safemode_off\r\n2018-03-15 17:17:16,026 - Using hadoop conf dir: /usr/hdp/3.0.0.0-1040/hadoop/conf\r\nTraceback (most recent call last):\r\n  File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/HDFS/package/scripts/namenode.py\", line 383, in <module>\r\n    NameNode().execute()\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 377, in execute\r\n    method(env)\r\n  File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/HDFS/package/scripts/namenode.py\", line 194, in wait_for_safemode_off\r\n    wait_for_safemode_off(self.get_hdfs_binary(), afterwait_sleep=30, execute_kinit=True)\r\n  File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/HDFS/package/scripts/namenode.py\", line 72, in get_hdfs_binary\r\n    return get_hdfs_binary(\"hadoop-hdfs-namenode\")\r\n  File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/HDFS/package/scripts/utils.py\", line 397, in get_hdfs_binary\r\n    import params\r\n  File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/HDFS/package/scripts/params.py\", line 25, in <module>\r\n    from params_linux import *\r\n  File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/HDFS/package/scripts/params_linux.py\", line 59, in <module>\r\n    stack_version_formatted = format_stack_version(stack_version_unformatted)\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/functions/version.py\", line 42, in format_stack_version\r\n    if value:\r\n  File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/config_dictionary.py\", line 73, in getattr\r\n    raise Fail(\"Configuration parameter '\" + self.name + \"' was not found in configurations dictionary!\")\r\nresource_management.core.exceptions.Fail: Configuration parameter 'stack_version' was not found in configurations dictionary!{code}\r\nMay be related to mpack work",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "upgrade"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": " Wait to leave Safemode failed on EU "
   },
   {
      "_id": "13146045",
      "assignee": "adoroszlai",
      "components": [],
      "created": "2018-03-18 13:17:57",
      "description": "Clean up some of the duplications in {{pom.xml}}.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Maven cleanup"
   },
   {
      "_id": "13145836",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-16 19:30:39",
      "description": "Widgets on dashboard and HDFS summary page should be namespace-scoped.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Make HDFS widgets namespace-scoped"
   },
   {
      "_id": "13145788",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-16 17:09:20",
      "description": "Additional logging is required to investigate intermittent issue with config updates.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": " Add more logging for config update process"
   },
   {
      "_id": "13145780",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-16 16:39:33",
      "description": "Upgrade HDP 2.6 to HDP 3.0 in Ambari 2.7; EU is supported only (i.e. no RU).\r\n\r\nAt upgrade time, when the services are starting we should use the new stack version's _service_package_folder_ instead of the old one. This was ok, until the change in FileCache.get_service_base_dir to get the base directory from 'serviceLevelParams' instead of 'commandParams'.\r\n\r\n{code:java}\r\n ...\r\n \"serviceLevelParams\": {\r\n \"credentialStoreEnabled\": false, \r\n \"status_commands_timeout\": 300, \r\n \"version\": \"2.7.3\", \r\n \"service_package_folder\": \"common-services/YARN/2.1.0.2.0/package\"\r\n },\r\n ...\r\n \"commandParams\": {\r\n \"service_package_folder\": \"stacks/HDP/3.0/services/YARN/package\", \r\n \"hooks_folder\": \"stack-hooks\", \r\n \"clusterName\": \"cluster1\", \r\n \"custom_command\": \"RESTART\", \r\n \"upgrade_direction\": \"upgrade\", \r\n \"upgrade_type\": \"nonrolling_upgrade\", \r\n \"script\": \"scripts/historyserver.py\", \r\n \"version\": \"3.0.0.2-155\", \r\n \"forceRefreshConfigTagsBeforeExecution\": \"true\", \r\n \"request_id\": \"17\", \r\n \"command_timeout\": \"900\", \r\n \"script_type\": \"PYTHON\"\r\n },\r\n{code}\r\n\r\nThe _service_package_folder_ is different; the one in _commandParams_ is the correct value.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Wrong service_package_folder in serviceLevelParams during Express Upgrade from HDP 2.6 to HDP 3.0"
   },
   {
      "_id": "13145776",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-16 16:24:18",
      "description": "Fix TestMySqlServer error while executing unit tests on MacOS/Darwin.\r\n\r\n\u00a0\r\n{noformat}\r\nERROR: test_configure_secured (test_mysql_server.TestMySqlServer)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\nFile \"/Users/rlevas/github/ambari/ambari-common/src/test/python/mock/mock.py\", line 1199, in patched\r\nreturn func(*args, **keywargs)\r\nFile \"/Users/rlevas/github/ambari/ambari-server/src/test/python/stacks/2.0.6/HIVE/test_mysql_server.py\", line 84, in test_configure_secured\r\nself.assert_configure_secured()\r\nFile \"/Users/rlevas/github/ambari/ambari-server/src/test/python/stacks/2.0.6/HIVE/test_mysql_server.py\", line 168, in assert_configure_secured\r\nmode = 0755,\r\nFile \"/Users/rlevas/github/ambari/ambari-server/src/test/python/stacks/utils/RMFTestCase.py\", line 345, in assertResourceCalled\r\nself.assertEquals(kwargs, resource.arguments)\r\nFile \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/unittest/case.py\", line 515, in assertEqual\r\nassertion_func(first, second, msg=msg)\r\nFile \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/unittest/case.py\", line 831, in assertDictEqual\r\nif d1 != d2:\r\nFile \"/Users/rlevas/github/ambari/ambari-common/src/main/python/resource_management/core/source.py\", line 59, in __eq__\r\nand ((self.name.startswith(os.sep) and self.name == other.name) or self.get_content() == other.get_content()))\r\nFile \"/Users/rlevas/github/ambari/ambari-common/src/main/python/resource_management/core/source.py\", line 78, in get_content\r\nreturn self.read_file(path)\r\nFile \"/Users/rlevas/github/ambari/ambari-common/src/main/python/ambari_commons/os_family_impl.py\", line 84, in thunk\r\nfn_id = fn_id_base + \".\" + OSCheck.get_os_family()\r\nFile \"/Users/rlevas/github/ambari/ambari-common/src/main/python/ambari_commons/os_check.py\", line 277, in get_os_family\r\nos_family = OSCheck.get_os_type()\r\nFile \"/Users/rlevas/github/ambari/ambari-common/src/main/python/ambari_commons/os_check.py\", line 242, in get_os_type\r\nreturn OSCheck.get_alias(OSCheck._get_os_type(), OSCheck._get_os_version())[0]\r\nFile \"/Users/rlevas/github/ambari/ambari-common/src/main/python/ambari_commons/os_check.py\", line 248, in _get_os_type\r\ndist = OSCheck.os_distribution()\r\nFile \"/Users/rlevas/github/ambari/ambari-common/src/main/python/ambari_commons/os_check.py\", line 202, in os_distribution\r\ndistribution = platform.linux_distribution()\r\nFile \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/platform.py\", line 329, in linux_distribution\r\nreturn _dist_try_harder(distname,version,id)\r\nFile \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/platform.py\", line 205, in _dist_try_harder\r\ninfo = open('/var/adm/inst-log/info').readlines()\r\nIOError: [Errno 2] No such file or directory: '/var/adm/inst-log/info'{noformat}\r\n\u00a0\r\n*Cause*\r\nThis is caused by the following mock\r\n{code:java}\r\n@patch(\"os.path.exists\", MagicMock(return_value=True))\r\n{code}\r\n\u00a0Which allow a later call on the Python 2.7 library to return {{True}}, causing\u00a0{{/var/adm/inst-log/info}} to appear to exist and then be read. Since {{/var/adm/inst-log/info}} does not exist, this fails, as seen above. \r\n\r\n*Solution*\r\nMock the OsCheck function to avoid this.\r\n\u00a0",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available",
         "unit-test"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Fix TestMySqlServer error while executing unit tests on MacOS/Darwin"
   },
   {
      "_id": "13145775",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-16 16:23:15",
      "description": "1. Changed 'dfs.datanode.data.dir' in hdfs-site.xml to new value.\r\n2. Restarted HDFS service.\r\n3. The value of 'dfs.datanode.data.dir' is not updated in hdfs-site.xml.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "hdfs-site.xml is not getting updated after config change and restart via Ambari"
   },
   {
      "_id": "13145750",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-16 15:09:59",
      "description": "Create \\{{sso-configuration}} category in Ambari Configurations data and allow for the {{ambari.sso.enabled_services}} property to be added to it. This property is used to declare what services are expected to be configured for SSO and is expected to be a comma-delimited list of services or \"{{*}}\" to indicate all services.\r\n\r\nExamples:\r\n{code:title=All services}\r\n\"ambari.sso.enabled_services\":\"*\"\r\n{code}\r\n{code:title=Only Ambari}\r\n\"ambari.sso.enabled_services\":\"Ambari\"\r\n{code}\r\n{code:title=Ambari, Ranger, and Atlas}\r\n\"ambari.sso.enabled_services\":\"Ambari, Ranger, Atlas\"\r\n{code}\r\n\r\nEach service in the set of services should have indicated it supports SSO (see AMBARI-23252) else it will silently be ignored.\r\n\r\nThis value should be set via Ambari's REST API or a Blueprint.\r\n\r\nUpon setting this value via the Ambari REST API, it is expected that internal logic will be triggered to ensure the relevant services in the list are configured for SSO or not configured for SSO as the case may be.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Create sso-configuration category in Ambari Configurations data"
   },
   {
      "_id": "13145726",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-16 14:14:15",
      "description": "Steps to reproduce: \r\n# Install latest ambari server (2.7.0.2-30)\r\n# Upload a custom vdf in step2\r\n# Proceed till the \"Review\" step. The summary misses \"HDP-GPL\" repo url.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari web - Install wizard \"Review\" step does not show HDP-GPL repo"
   },
   {
      "_id": "13145687",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-16 12:45:17",
      "description": "For UI based installation, /spnego reference principal used in Ranger Service kerberos descriptor is not getting updated in ranger.spnego.kerberos.keytab configuration.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "For Ranger Service /spnego reference principal is not getting updated in config"
   },
   {
      "_id": "13145465",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-15 19:16:06",
      "description": "Today enabling SSO requires visiting each component that supports SSO and adding configuration entries to each.\u00a0This task is to enable\u00a0a single entry point via the Ambari CLI to configure SSO for each service that supports it.\r\n\r\nChanges to the ambari-server setup-sso CLI are needed allow configuration of all SSO-capable services using that single CLI. This facility can be used to enable, disable, and reconfigure SSO integration.\r\n\r\n*Proposed implementation:*\r\n\r\nServices are to declare they support SSO integration by indicating in the service's \\{{metainfo.xml}} file as follows: \r\n{code}\r\n<sso>\r\n <supported>true</supported>\r\n <enabledConfiguration>config-type/sso.enabled.property</enabledConfiguration>\r\n</sso>\r\n{code}\r\n\r\nThe stack/service advisor will be used to retrieve the recommended configurations needed by a service to set up SSO integration. A special stack advisor action will be added to ensure only SSO-related recommendations are returned upon request. The new action name is \"{{recommend-configurations-for-sso}}\". Ambari (or common) SSO information will be provided to the stack advisor via the input data under the label \"sso-configuration\". This information may be used by the stack advisor when creating recommendations.\r\n\r\nAmbari will store details on which services should be enabled for SSO so it _knows_ how to behave when SSO integration is enabled and new services are added. This data will be stored within Ambari's configuration data under the category of {{sso-configuration}}. The list of services to have SSO integration turned on will be stored in the property named {{ambari.sso.enabled_services}}. The value will be a comma-delimited list of service names, or \"{{*}}\" to indicate all services that support SSO integration.\r\n\r\nThe Ambari REST API entry point for installed services ({{/api/v1/clusters/:CLUSTER_NAME/services/:SERVICE_NAME}}) is to be enhance by adding the following properties:\r\n* *\\{{sso_integration_supported}}* - Indicates whether the service supports SSO integration or not\r\n* *\\{{sso_integration_enabled}}* - Indicates whether the service is configured for SSO integration or not\r\n* *\\{{sso_integration_desired}}* - Indicates whether the service is chosen for SSO integration or not\r\n\r\nThe Ambari REST API entry point for stack services ({{/api/v1/stacks/:STACK_NAME/versions/:VERSION/services/:SERVICE_NAME}}) is to be enhance by adding the following properties:\r\n* *\\{{sso_integration_supported}}* - Indicates whether the service supports SSO integration or not\r\n\r\nWhen producing a list of installed services that support SSO integration in the CLI, the Ambari REST API is to be used to query for the relevant service names. Once the user selects the set of services to enable SSO for (or all), the Ambari REST API is to be used to set the value of the Ambari configuration \\{{sso-configuration/ambari.sso.enabled_services}}. Upon setting this, logic is triggered in the backend to query the stack advisor for SSO-related configuration recommendations which will be automatically applied. This will potentially yield new configuration versions and require services to be manually restarted.\r\n\r\nWhen adding new services, the \\{{sso-configuration/ambari.sso.enabled_services}} value is to be checked to see if the new service is on the list of services to have SSO integration enabled. If so, and the service has a SSO descriptor, its configuration will be updated as needed before the service is started.\r\n\r\nIn a Blueprint scenario, it is expected that the user first sets up Ambari for SSO integration using the {{ambari-server setup-sso}} CLI. The Blueprint is expected to set the relevant properties needed to enable SSO integration per service. However, if SSO details were set up, the stack advisor may recommend relevant changes which may be applied depending on the Blueprint settings.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/15",
         "id": "15",
         "description": "Created by Jira Software - do not edit or delete. Issue type for a big user story that needs to be broken down.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21137&avatarType=issuetype",
         "name": "Epic",
         "subtask": false,
         "avatarId": 21137
      },
      "labels": [
         "SSO",
         "sso"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Allow Ambari Server to Setup SSO for the entire stack using the CLI"
   },
   {
      "_id": "13145464",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-15 19:10:50",
      "description": "Update service metainfo to declare SSO integration support. The following tag may be optionally set in a service's {{metainfo.xml}} file:\r\n{code:java}\r\n<sso>\r\n <supported>true</supported>\r\n <enabledConfiguration>config-type/sso.enabled.property</enabledConfiguration>\r\n</sso>\r\n{code}\r\n\u00a0",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available",
         "sso"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Update service metainfo to declare SSO integration support"
   },
   {
      "_id": "13145416",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-15 15:41:15",
      "description": "Suse deployments fails during ambari-server setup with error:\r\n\r\n{noformat}\r\nConfiguring ambari database...\r\nINFO: Loading properties from /etc/ambari-server/conf/ambari.properties\r\nEnter full path to custom jdbc driver:\r\nTraceback (most recent call last):\r\n File \"/usr/sbin/ambari-server.py\", line 1042, in <module>\r\n mainBody()\r\n File \"/usr/sbin/ambari-server.py\", line 1012, in mainBody\r\n main(options, args, parser)\r\n File \"/usr/sbin/ambari-server.py\", line 962, in main\r\n action_obj.execute()\r\n File \"/usr/sbin/ambari-server.py\", line 79, in execute\r\n self.fn(*self.args, **self.kwargs)\r\n File \"/usr/lib/ambari-server/lib/ambari_server/serverSetup.py\", line 1199, in setup\r\n _setup_database(options)\r\n File \"/usr/lib/ambari-server/lib/ambari_server/serverSetup.py\", line 1012, in _setup_database\r\n dbmsAmbari.setup_database()\r\n File \"/usr/lib/ambari-server/lib/ambari_server/dbConfiguration.py\", line 154, in setup_database\r\n self._setup_remote_database()\r\n File \"/usr/lib/ambari-server/lib/ambari_server/dbConfiguration_linux.py\", line 162, in _setup_remote_database\r\n if self.ensure_jdbc_driver_installed(properties):\r\n File \"/usr/lib/ambari-server/lib/ambari_server/dbConfiguration.py\", line 177, in ensure_jdbc_driver_installed\r\n path_to_custom_jdbc_driver = get_validated_string_input(\"Enter full path to custom jdbc driver: \", None, None, None, False, False)\r\n File \"/usr/lib/ambari-server/lib/ambari_server/userInput.py\", line 87, in get_validated_string_input\r\n if not input.strip():\r\nAttributeError: 'NoneType' object has no attribute 'strip'\r\n{noformat}\r\n\r\n\r\nExecuted command during test:\r\n{noformat}\r\nambari-server setup --database=postgres --databasehost=<hostName> --databaseport=<port> --databasename=<databaseName> --databaseusername=<userName> --databasepassword=<password> --java-home=/base/tools/jdk1.8.0_112 -s\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Ambari Setup with external postgres db failed on configuring database."
   },
   {
      "_id": "13145308",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-15 09:13:07",
      "description": "Following properties should be added to the\u00a0appropriate config\r\n * hadoop.security.token.service.use_ip should be false when kerberos is enabled\r\n * dfs.checksum.type should always be null\r\n\r\n * dfs.datanode.http.address/dfs.datanode.https.address =\u00a00.0.0.0:8082/0.0.0.0:8080 [?]\r\n\r\n * -yarn.scheduler.capacity.node-locality-delay = 0-\r\n\r\n * dfs.client-write-packet-size = 131072",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Adding missing properties to OneFS mpack"
   },
   {
      "_id": "13145156",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-14 19:54:46",
      "description": "Currently {{ClusterId}} property is used on UI to identify the namespaces. Values from\u00a0{{hdfs-site}} configs should be used instead.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Incorrect property for NN namespace value is used"
   },
   {
      "_id": "13145086",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-14 16:25:12",
      "description": "We should tolerate agent reconnect for now when agent was not restarted.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Connection dropped during task execution caused stage abort"
   },
   {
      "_id": "13145085",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-14 16:25:10",
      "description": "During deploy on debian 7 with oracle database ambari server reported  many errors related to SQL queries:\r\n\r\n{noformat}\r\n14 Mar 2018 10:51:08,721 ERROR [ExecutionScheduler_QuartzSchedulerThread] JobStoreTX:3652 - Couldn't rollback jdbc connection. No more data to read from socket\r\njava.sql.SQLRecoverableException: No more data to read from socket\r\n{noformat}\r\n\r\n{noformat}\r\nInternal Exception: java.sql.SQLSyntaxErrorException: ORA-00942: table or view does not exist\r\n\r\nError Code: 942\r\nCall: INSERT INTO hostcomponentstate (id, current_state, last_live_state, upgrade_state, version, host_id, service_name, cluster_id, component_name) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)\r\n        bind => [9 parameters bound]\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "SQL errors in Oracle schema create script"
   },
   {
      "_id": "13145057",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-14 15:10:12",
      "description": "See screenshot",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Broken view of Configs after saving changes"
   },
   {
      "_id": "13145027",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-14 13:23:50",
      "description": "Set full name (cn) when creating user accounts in FreeIPA server.\r\n\r\n{code:title=Example IPA CLI}\r\nipa user-add user1 --principal user1@AMBARI.APACHE.ORG --first user1 --last user1 --cn \"user1\"\r\n{code}\r\n\r\nThe new argument is \"\\{{--cn \"user1\"}}.\r\n\r\nThis may allow for compatibility with IPA server version 3.x",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "freeipa",
         "kerberos",
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
         "name": "Minor",
         "id": "4"
      },
      "projectname": "AMBARI",
      "summary": "Set full name (cn) when creating user accounts in FreeIPA server"
   },
   {
      "_id": "13144834",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-13 19:58:09",
      "description": "{{BlueprintValidatorImpl}} throws NPE if encounters an unknown component.\r\n\r\n{noformat}\r\n\tat org.apache.ambari.server.topology.BlueprintValidatorImpl.validateHostGroup(BlueprintValidatorImpl.java:250)\r\n\tat org.apache.ambari.server.topology.BlueprintValidatorImpl.validateTopology(BlueprintValidatorImpl.java:70)\r\n\tat org.apache.ambari.server.topology.BlueprintImpl.validateTopology(BlueprintImpl.java:332)\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Dependency check should ignore unknown services"
   },
   {
      "_id": "13144820",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-03-13 18:55:45",
      "description": "\n    ERROR 2018-03-13 17:15:04,264 security.py:122 - Could not connect to wss://ctr-e138-1518143905142-94896-01-000002.hwx.site:8441/agent/stomp/v1\r\n    Traceback (most recent call last):\r\n      File \"/usr/lib/ambari-agent/lib/ambari_agent/security.py\", line 113, in establish_connection\r\n        conn.start()\r\n      File \"/usr/lib/ambari-agent/lib/ambari_stomp/connect.py\", line 46, in start\r\n        self.transport.start()\r\n      File \"/usr/lib/ambari-agent/lib/ambari_stomp/transport.py\", line 109, in start\r\n        self.attempt_connection()\r\n      File \"/usr/lib/ambari-agent/lib/ambari_stomp/adapter/websocket.py\", line 89, in attempt_connection\r\n        self.ws.connect()\r\n      File \"/usr/lib/ambari-agent/lib/ambari_ws4py/client/__init__.py\", line 216, in connect\r\n        self.sock.connect(self.bind_addr)\r\n      File \"/usr/lib64/python2.7/ssl.py\", line 869, in connect\r\n        self._real_connect(addr, False)\r\n      File \"/usr/lib64/python2.7/ssl.py\", line 860, in _real_connect\r\n        self.do_handshake()\r\n      File \"/usr/lib64/python2.7/ssl.py\", line 833, in do_handshake\r\n        self._sslobj.do_handshake()\r\n    SSLError: [SSL: SSLV3_ALERT_BAD_CERTIFICATE] sslv3 alert bad certificate (_ssl.c:579)\r\n    \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari-agent fails to connect to server with two_way_auth enabled"
   },
   {
      "_id": "13144767",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-13 15:47:32",
      "description": "There are two issues w.r.t alignment\r\n\r\n*Issue#1*\r\n1) Go to All Configurations Tab under Customise Services Step of Install Wizard.\r\n2) Select any property say under HDFS 'DataNode directories permission' . Click '+' to override.\r\n3) Select a new config group\r\n4) The new text box which appears to provide overridden value is misaligned with original one.\r\n\r\n*Issue#2*\r\nFollowing same steps as in Issue#1. Check the warning 'You are changing not default group, please select config group to which you want to save dependent configs from other services +Show Details+' at page top. \r\nClick Show Details link.\r\nA pop up opens. The text which appears on the pop up  is not aligned properly.\r\n\r\nAttaching screenshots for both issues.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Customise Services : Alignment not proper for Select Config group Pop up and overriden text box"
   },
   {
      "_id": "13144440",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-12 20:30:14",
      "description": "To enable or disable SSO using the Ambari CLI, the user needs to answer each prompt. This is not convenient for automated tools. So the following command line options should be available for use. If any mandatory option is not specified via the command line, the user should be prompted for a value.\r\n\r\nGlobal SSO options:\r\n * {{--sso-enabled}}\r\n\r\nif {{sso-enabled}} is \"true\":\r\n * {{--sso-provider-url}}\r\n * {{--sso-public-cert-file}}\r\n * {{--sso-jwt-cookie-name}}\r\n ** optional, if not supplied, the documented default value will be used\r\n * {{--sso-jwt-audience-list}}\r\n ** optional, if not supplied, the documented default value will be used\r\n\r\n{noformat:title=Examples}\r\nambari-server setup-sso --help\r\n\r\nambari-server setup-sso --sso-enabled=true --sso-provider-url=https://knox.ambari.apache.org:8443 --sso-public-cert-file=/tmp/sso.pem\r\n\r\nambari-server setup-sso --sso-enabled=true --sso-provider-url=https://knox.ambari.apache.org:8443 --sso-public-cert-file=/tmp/sso.pem --sso-jwt-cookie-name=ambari-jtw \r\n\r\nambari-server setup-sso --sso-enabled=true --sso-provider-url=https://knox.ambari.apache.org:8443 --sso-public-cert-file=/tmp/sso.pem --sso-jwt-cookie-name=ambari-jtw --sso-jwt-audience-list=ambari\r\n\r\nambari-server setup-sso --sso-enabled=true --sso-provider-url=https://knox.ambari.apache.org:8443 --sso-public-cert-file=/tmp/sso.pem\r\n\r\nambari-server setup-sso --sso-enabled=false\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "SSO",
         "pull-request-available",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Enable or disable SSO using Ambari CLI with options"
   },
   {
      "_id": "13144384",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-12 17:35:48",
      "description": "When a new custom property is added whose Type is Password , the two textboxes that appear are not properly aligned with Remove button.\r\nThe length of the text boxes should be reduced so that both textboxes(password/confirm password) fit in the same line along with remove button.\r\n\r\nAttached screenshot from old and new UI.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Customise Services: Alignment issue while adding new custom password property"
   },
   {
      "_id": "13144370",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-12 16:49:33",
      "description": "The 'Edit' link of Kerberos properties page does not confirm to the new UI design styles. All the actions are buttons on this page, and it is easy to miss the edit link.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos 'Edit' Properties not conforming to the new style"
   },
   {
      "_id": "13144342",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-12 15:33:13",
      "description": "The tooltip for Overriden properties shown under manage Config Groups page has '<br/>' in the tooltip text\r\nAlso if there are more than one properties overriden then the they are not shown in new lines.\r\n\r\n\r\nAttached Screenshot",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "The tooltip for Overriden properties shown under manage Config Groups page has '<br/>' in the tooltip text"
   },
   {
      "_id": "13144305",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-12 14:09:45",
      "description": "Ambari Schema Upgrade from 2.6.X to 2.7.0.0 fails with below exception . \r\nA blocker for Ambari Upgrades testing.\r\n\r\n{code:java}\r\n12 Mar 2018 00:51:37,879  INFO [main] SchemaUpgradeHelper:424 - Upgrading schema to target version = 2.7.0.0\r\n12 Mar 2018 00:51:37,883  INFO [main] SchemaUpgradeHelper:433 - Upgrading schema from source version = 2.6.1\r\n12 Mar 2018 00:51:37,888  INFO [main] SchemaUpgradeHelper:163 - Upgrade path: [{ upgradeCatalog: sourceVersion = 2.6.1, targetVersion = 2.6.2 }, { upgradeCatalog: sourceVersion = 2.6.2, targetVersion = 2.7.0 }, { upgradeCatalog: sourceVersion = null, targetVersion = 2.7.0 }, { upgradeCatalog: sourceVersion = null, targetVersion = 2.7.0 }]\r\n12 Mar 2018 00:51:37,889  INFO [main] SchemaUpgradeHelper:200 - Executing DDL upgrade...\r\n12 Mar 2018 00:51:37,911  INFO [main] DBAccessorImpl:876 - Executing query: ALTER TABLE topology_host_request ADD status VARCHAR(255)\r\n12 Mar 2018 00:51:37,948  INFO [main] DBAccessorImpl:876 - Executing query: ALTER TABLE topology_host_request ADD status_message VARCHAR(1024)\r\n12 Mar 2018 00:51:37,982  INFO [main] DBAccessorImpl:876 - Executing query: ALTER TABLE stage ADD status VARCHAR(255) NOT NULL DEFAULT 'PENDING'\r\n12 Mar 2018 00:51:38,017  INFO [main] DBAccessorImpl:876 - Executing query: ALTER TABLE stage ADD display_status VARCHAR(255) NOT NULL DEFAULT 'PENDING'\r\n12 Mar 2018 00:51:38,055  INFO [main] DBAccessorImpl:876 - Executing query: ALTER TABLE request ADD display_status VARCHAR(255) NOT NULL DEFAULT 'PENDING'\r\n12 Mar 2018 00:51:38,091  INFO [main] DBAccessorImpl:876 - Executing query: ALTER TABLE request ADD user_name VARCHAR(255)\r\n12 Mar 2018 00:51:38,127  INFO [main] DBAccessorImpl:876 - Executing query: ALTER TABLE host_role_command ADD ops_display_name VARCHAR(255)\r\n12 Mar 2018 00:51:38,314  INFO [main] DBAccessorImpl:876 - Executing query: ALTER TABLE hostcomponentdesiredstate DROP COLUMN security_state\r\n12 Mar 2018 00:51:38,351  INFO [main] DBAccessorImpl:876 - Executing query: ALTER TABLE hostcomponentstate DROP COLUMN security_state\r\n12 Mar 2018 00:51:38,387  INFO [main] DBAccessorImpl:876 - Executing query: ALTER TABLE servicedesiredstate DROP COLUMN security_state\r\n12 Mar 2018 00:51:38,426  INFO [main] DBAccessorImpl:876 - Executing query: CREATE TABLE ambari_configuration (category_name VARCHAR(100) NOT NULL, property_name VARCHAR(100) NOT NULL, property_value VARCHAR(255)) ENGINE=INNODB\r\n12 Mar 2018 00:51:38,435  INFO [main] DBAccessorImpl:876 - Executing query: ALTER TABLE ambari_configuration ADD CONSTRAINT PK_ambari_configuration PRIMARY KEY (category_name,property_name)\r\n12 Mar 2018 00:51:38,443  INFO [main] DBAccessorImpl:876 - Executing query: ALTER TABLE hostcomponentstate ADD last_live_state VARCHAR(255) DEFAULT 'UNKNOWN'\r\n12 Mar 2018 00:51:38,476  WARN [main] DBAccessorImpl:965 - user_authentication_tmp table doesn't exists, skipping\r\n12 Mar 2018 00:51:38,477  INFO [main] DBAccessorImpl:876 - Executing query: CREATE TABLE user_authentication_tmp (user_authentication_id BIGINT NOT NULL, user_id BIGINT NOT NULL, authentication_type VARCHAR(50) NOT NULL, authentication_key LONGTEXT, create_time DATETIME, update_time DATETIME) ENGINE=INNODB\r\n12 Mar 2018 00:51:38,483  INFO [main] DBAccessorImpl:876 - Executing query: CREATE TABLE user_authentication (user_authentication_id BIGINT NOT NULL, user_id BIGINT NOT NULL, authentication_type VARCHAR(50) NOT NULL, authentication_key LONGTEXT, create_time DATETIME, update_time DATETIME) ENGINE=INNODB\r\n12 Mar 2018 00:51:38,490  INFO [main] DBAccessorImpl:876 - Executing query: ALTER TABLE user_authentication ADD CONSTRAINT PK_user_authentication PRIMARY KEY (user_authentication_id)\r\n12 Mar 2018 00:51:38,555  INFO [main] DBAccessorImpl:876 - Executing query: ALTER TABLE user_authentication ADD CONSTRAINT FK_user_authentication_users FOREIGN KEY (user_id) REFERENCES users (user_id)\r\n12 Mar 2018 00:51:38,572 ERROR [main] DBAccessorImpl:882 - Error executing query: ALTER TABLE user_authentication ADD CONSTRAINT FK_user_authentication_users FOREIGN KEY (user_id) REFERENCES users (user_id)\r\n12 Mar 2018 00:51:38,572 ERROR [main] DBAccessorImpl:882 - Error executing query: ALTER TABLE user_authentication ADD CONSTRAINT FK_user_authentication_users FOREIGN KEY (user_id) REFERENCES users (user_id)\r\njava.sql.SQLException: Can't create table `ambaricustom`.`#sql-642_c9` (errno: 150 \"Foreign key constraint is incorrectly formed\")\r\n        at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:996)\r\n        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3887)\r\n        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3823)\r\n        at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2435)\r\n        at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2582)\r\n        at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2526)\r\n        at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2484)\r\n        at com.mysql.jdbc.StatementImpl.execute(StatementImpl.java:848)\r\n        at com.mysql.jdbc.StatementImpl.execute(StatementImpl.java:742)\r\n        at org.apache.ambari.server.orm.DBAccessorImpl.executeQuery(DBAccessorImpl.java:879)\r\n        at org.apache.ambari.server.orm.DBAccessorImpl.addFKConstraint(DBAccessorImpl.java:519)\r\n        at org.apache.ambari.server.orm.DBAccessorImpl.addFKConstraint(DBAccessorImpl.java:484)\r\n        at org.apache.ambari.server.upgrade.UpgradeCatalog270.createUserAuthenticationTable(UpgradeCatalog270.java:560)\r\n        at org.apache.ambari.server.upgrade.UpgradeCatalog270.upgradeUserTables(UpgradeCatalog270.java:303)\r\n        at org.apache.ambari.server.upgrade.UpgradeCatalog270.executeDDLUpdates(UpgradeCatalog270.java:280)\r\n        at org.apache.ambari.server.upgrade.AbstractUpgradeCatalog.upgradeSchema(AbstractUpgradeCatalog.java:973)\r\n        at org.apache.ambari.server.upgrade.SchemaUpgradeHelper.executeUpgrade(SchemaUpgradeHelper.java:205)\r\n        at org.apache.ambari.server.upgrade.SchemaUpgradeHelper.main(SchemaUpgradeHelper.java:448)\r\n12 Mar 2018 00:51:38,572  WARN [main] DBAccessorImpl:521 - Add FK constraint failed, constraintName = FK_user_authentication_users, tableName = user_authentication\r\n12 Mar 2018 00:51:38,572 ERROR [main] SchemaUpgradeHelper:207 - Upgrade failed.\r\njava.sql.SQLException: Can't create table `ambaricustom`.`#sql-642_c9` (errno: 150 \"Foreign key constraint is incorrectly formed\")\r\n        at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:996)\r\n        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3887)\r\n        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3823)\r\n        at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2435)\r\n        at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2582)\r\n        at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2526)\r\n        at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2484)\r\n        at com.mysql.jdbc.StatementImpl.execute(StatementImpl.java:848)\r\n        at com.mysql.jdbc.StatementImpl.execute(StatementImpl.java:742)\r\n        at org.apache.ambari.server.orm.DBAccessorImpl.executeQuery(DBAccessorImpl.java:879)\r\n        at org.apache.ambari.server.orm.DBAccessorImpl.addFKConstraint(DBAccessorImpl.java:519)\r\n        at org.apache.ambari.server.orm.DBAccessorImpl.addFKConstraint(DBAccessorImpl.java:484)\r\n        at org.apache.ambari.server.upgrade.UpgradeCatalog270.createUserAuthenticationTable(UpgradeCatalog270.java:560)\r\nat com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3823)\r\n        at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2435)\r\n        at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2582)\r\n        at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2526)\r\n        at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2484)\r\n        at com.mysql.jdbc.StatementImpl.execute(StatementImpl.java:848)\r\n        at com.mysql.jdbc.StatementImpl.execute(StatementImpl.java:742)\r\n        at org.apache.ambari.server.orm.DBAccessorImpl.executeQuery(DBAccessorImpl.java:879)\r\n        at org.apache.ambari.server.orm.DBAccessorImpl.addFKConstraint(DBAccessorImpl.java:519)\r\n        at org.apache.ambari.server.orm.DBAccessorImpl.addFKConstraint(DBAccessorImpl.java:484)\r\n        at org.apache.ambari.server.upgrade.UpgradeCatalog270.createUserAuthenticationTable(UpgradeCatalog270.java:560)\r\n        at org.apache.ambari.server.upgrade.UpgradeCatalog270.upgradeUserTables(UpgradeCatalog270.java:303)\r\n        at org.apache.ambari.server.upgrade.UpgradeCatalog270.executeDDLUpdates(UpgradeCatalog270.java:280)\r\n        at org.apache.ambari.server.upgrade.AbstractUpgradeCatalog.upgradeSchema(AbstractUpgradeCatalog.java:973)\r\n        at org.apache.ambari.server.upgrade.SchemaUpgradeHelper.executeUpgrade(SchemaUpgradeHelper.java:205)\r\n        at org.apache.ambari.server.upgrade.SchemaUpgradeHelper.main(SchemaUpgradeHelper.java:448)\r\n12 Mar 2018 00:51:38,573 ERROR [main] SchemaUpgradeHelper:473 - Exception occurred during upgrade, failed\r\norg.apache.ambari.server.AmbariException: Can't create table `ambaricustom`.`#sql-642_c9` (errno: 150 \"Foreign key constraint is incorrectly formed\")\r\n        at org.apache.ambari.server.upgrade.SchemaUpgradeHelper.executeUpgrade(SchemaUpgradeHelper.java:208)\r\n        at org.apache.ambari.server.upgrade.SchemaUpgradeHelper.main(SchemaUpgradeHelper.java:448)\r\nCaused by: java.sql.SQLException: Can't create table `ambaricustom`.`#sql-642_c9` (errno: 150 \"Foreign key constraint is incorrectly formed\")\r\n        at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:996)\r\n        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3887)\r\n        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3823)\r\n        at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2435)\r\n        at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2582)\r\n        at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2526)\r\n        at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2484)\r\n        at com.mysql.jdbc.StatementImpl.execute(StatementImpl.java:848)\r\n        at com.mysql.jdbc.StatementImpl.execute(StatementImpl.java:742)\r\n        at org.apache.ambari.server.orm.DBAccessorImpl.executeQuery(DBAccessorImpl.java:879)\r\n        at org.apache.ambari.server.orm.DBAccessorImpl.addFKConstraint(DBAccessorImpl.java:519)\r\n        at org.apache.ambari.server.orm.DBAccessorImpl.addFKConstraint(DBAccessorImpl.java:484)\r\n        at org.apache.ambari.server.upgrade.UpgradeCatalog270.createUserAuthenticationTable(UpgradeCatalog270.java:560)\r\n        at org.apache.ambari.server.upgrade.UpgradeCatalog270.upgradeUserTables(UpgradeCatalog270.java:303)\r\n        at org.apache.ambari.server.upgrade.UpgradeCatalog270.executeDDLUpdates(UpgradeCatalog270.java:280)\r\n        at org.apache.ambari.server.upgrade.AbstractUpgradeCatalog.upgradeSchema(AbstractUpgradeCatalog.java:973)\r\n        at org.apache.ambari.server.upgrade.SchemaUpgradeHelper.executeUpgrade(SchemaUpgradeHelper.java:205)\r\n        ... 1 more\r\n{code}\r\n\r\nPossibly the issue is in different datatypes of user_id(int(11)) column in users and user_id(bigint(20)) in user_authentication table : See below:\r\n\r\n{code:java}\r\n\r\nMariaDB [ambaricustom]> desc user_authentication;\r\n+------------------------+-------------+------+-----+---------+-------+\r\n| Field                  | Type        | Null | Key | Default | Extra |\r\n+------------------------+-------------+------+-----+---------+-------+\r\n| user_authentication_id | bigint(20)  | NO   | PRI | NULL    |       |\r\n| user_id                | bigint(20)  | NO   |     | NULL    |       |\r\n| authentication_type    | varchar(50) | NO   |     | NULL    |       |\r\n| authentication_key     | longtext    | YES  |     | NULL    |       |\r\n| create_time            | datetime    | YES  |     | NULL    |       |\r\n| update_time            | datetime    | YES  |     | NULL    |       |\r\n+------------------------+-------------+------+-----+---------+-------+\r\n6 rows in set (0.01 sec)\r\n\r\nMariaDB [ambaricustom]> desc users;\r\n+-----------------------+---------------+------+-----+---------------------+-------+\r\n| Field                 | Type          | Null | Key | Default             | Extra |\r\n+-----------------------+---------------+------+-----+---------------------+-------+\r\n| user_id               | int(11)       | NO   | PRI | NULL                |       |\r\n| principal_id          | bigint(20)    | NO   | MUL | NULL                |       |\r\n| create_time           | timestamp     | NO   |     | current_timestamp() |       |\r\n| ldap_user             | int(11)       | NO   |     | 0                   |       |\r\n| user_type             | varchar(100)  | NO   |     | LOCAL               |       |\r\n| user_name             | varchar(100)  | NO   | MUL | NULL                |       |\r\n| user_password         | varchar(255)  | YES  |     | NULL                |       |\r\n| active                | int(11)       | NO   |     | 1                   |       |\r\n| active_widget_layouts | varchar(1024) | YES  |     | NULL                |       |\r\n+-----------------------+---------------+------+-----+---------------------+-------+\r\n9 rows in set (0.00 sec)\r\n{code}\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available",
         "upgrade"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Ambari Upgrade : Schema Upgrade Fails with error \"Foreign key constraint is incorrectly formed\""
   },
   {
      "_id": "13144284",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-12 12:38:22",
      "description": "See screenshot.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Websocket client should use secure endpoint when connected over https"
   },
   {
      "_id": "13144038",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         }
      ],
      "created": "2018-03-10 10:24:26",
      "description": "The following 2 tests consistently fail on CentOS7 with Python 2.7.5:\r\n\r\n{noformat:title=mvn -am -pl ambari-agent -Drat.skip clean test}\r\n======================================================================\r\nFAIL: test_load_definitions_noFile (TestAlertSchedulerHandler.TestAlertSchedulerHandler)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"ambari-agent/src/test/python/ambari_agent/TestAlertSchedulerHandler.py\", line 314, in test_load_definitions_noFile\r\n    self.assertEquals(definitions, [])\r\nAssertionError: Lists differ: [<ambari_agent.alerts.port_ale... != []\r\n\r\nFirst list contains 1 additional elements.\r\nFirst extra element 0:\r\n<ambari_agent.alerts.port_alert.PortAlert object at 0x384c990>\r\n\r\n- [<ambari_agent.alerts.port_alert.PortAlert object at 0x384c990>]\r\n+ []\r\n\r\n======================================================================\r\nFAIL: test_generation (TestCertGeneration.TestCertGeneration)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"ambari-common/src/test/python/mock/mock.py\", line 1199, in patched\r\n    return func(*args, **keywargs)\r\n  File \"ambari-agent/src/test/python/ambari_agent/TestCertGeneration.py\", line 49, in test_generation\r\n    self.assertTrue(os.path.exists(self.certMan.getAgentKeyName()))\r\nAssertionError: False is not true\r\n\r\n----------------------------------------------------------------------\r\nRan 342 tests in 17.726s\r\n\r\nFAILED (failures=2)\r\n{noformat}\r\n\r\nThe first one also fails on Ubuntu 16 with Python 2.7.12:\r\n\r\n{noformat}\r\nFAIL: test_load_definitions_noFile (TestAlertSchedulerHandler.TestAlertSchedulerHandler)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"ambari-agent/src/test/python/ambari_agent/TestAlertSchedulerHandler.py\", line 314, in test_load_definitions_noFile\r\n    self.assertEquals(definitions, [])\r\nAssertionError: Lists differ: [<ambari_agent.alerts.port_ale... != []\r\n\r\nFirst list contains 1 additional elements.\r\nFirst extra element 0:\r\n<ambari_agent.alerts.port_alert.PortAlert object at 0x7fbc86c56fd0>\r\n\r\n- [<ambari_agent.alerts.port_alert.PortAlert object at 0x7fbc86c56fd0>]\r\n+ []\r\n\r\n----------------------------------------------------------------------\r\nRan 342 tests in 18.052s\r\n\r\nFAILED (failures=1)\r\n{noformat}\r\n\r\nAlso seen in Jenkins:\r\nhttps://builds.apache.org/job/Ambari-Github-PullRequest-Builder/1083/\r\nhttps://builds.apache.org/job/Ambari-Github-PullRequest-Builder/950/\r\nhttps://builds.apache.org/job/Ambari-Github-PullRequest-Builder/938/",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari Agent unit test failures on Python 2.7"
   },
   {
      "_id": "13143984",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-09 21:48:29",
      "description": "{noformat:title=ambari-server check-database}\r\nUsing python  /usr/bin/python\r\nChecking database\r\nERROR: Exiting with exit code 1.\r\nREASON: Database check failed to complete: No errors and warnings were found.\r\n...\r\nCaused by: com.google.inject.CreationException: Unable to create injector, see the following errors:\r\n\r\n1) No implementation for org.apache.ambari.server.ldap.service.LdapFacade was bound.\r\n  while locating org.apache.ambari.server.ldap.service.LdapFacade\r\n    for field at org.apache.ambari.server.controller.internal.AmbariServerLDAPConfigurationHandler.ldapFacade(AmbariServerLDAPConfigurationHandler.java:43)\r\n  at org.apache.ambari.server.controller.ControllerModule.bindByAnnotation(ControllerModule.java:568)\r\n\r\n1 error\r\n\tat com.google.inject.internal.Errors.throwCreationExceptionIfErrorsExist(Errors.java:470)\r\n\tat com.google.inject.internal.InternalInjectorCreator.initializeStatically(InternalInjectorCreator.java:155)\r\n\tat com.google.inject.internal.InternalInjectorCreator.build(InternalInjectorCreator.java:107)\r\n\tat com.google.inject.Guice.createInjector(Guice.java:99)\r\n\tat com.google.inject.Guice.createInjector(Guice.java:73)\r\n\tat com.google.inject.Guice.createInjector(Guice.java:62)\r\n\tat org.apache.ambari.server.checks.DatabaseConsistencyChecker.main(DatabaseConsistencyChecker.java:101)\r\n{noformat}\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Missing LdapFacade in ambari-server check-database"
   },
   {
      "_id": "13143974",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-09 20:57:23",
      "description": "{noformat:title=ambari-server reset -s}\r\nUsing python  /usr/bin/python\r\nResetting ambari-server\r\nINFO: Loading properties from /etc/ambari-server/conf/ambari.properties\r\n**** WARNING **** You are about to reset and clear the Ambari Server database. This will remove all cluster host and configuration information from the database. You will be required to re-configure the Ambari server and re-run the cluster wizard.\r\nAre you SURE you want to perform the reset [yes/no] (yes)?\r\nINFO: Loading properties from /etc/ambari-server/conf/ambari.properties\r\nINFO: Loading properties from /etc/ambari-server/conf/ambari.properties\r\nINFO: Loading properties from /etc/ambari-server/conf/ambari.properties\r\nTraceback (most recent call last):\r\n  File \"/usr/sbin/ambari-server.py\", line 1033, in <module>\r\n    mainBody()\r\n  File \"/usr/sbin/ambari-server.py\", line 1003, in mainBody\r\n    main(options, args, parser)\r\n  File \"/usr/sbin/ambari-server.py\", line 953, in main\r\n    action_obj.execute()\r\n  File \"/usr/sbin/ambari-server.py\", line 79, in execute\r\n    self.fn(*self.args, **self.kwargs)\r\n  File \"/usr/lib/ambari-server/lib/ambari_server/serverSetup.py\", line 1326, in reset\r\n    _reset_database(options)\r\n  File \"/usr/lib/ambari-server/lib/ambari_server/serverSetup.py\", line 1052, in _reset_database\r\n    dbmsAmbari = factory.create(options, properties)\r\n  File \"/usr/lib/ambari-server/lib/ambari_server/dbConfiguration.py\", line 501, in create\r\n    dbmsConfig = desc.create_config(options, properties, dbId)\r\n  File \"/usr/lib/ambari-server/lib/ambari_server/dbConfiguration.py\", line 81, in create_config\r\n    return self.fn_create_config(options, properties, self.storage_key, dbId)\r\n  File \"/usr/lib/ambari-server/lib/ambari_server/dbConfiguration_linux.py\", line 881, in createPGConfig\r\n    return PGConfig(options, properties, storage_type)\r\n  File \"/usr/lib/ambari-server/lib/ambari_server/dbConfiguration_linux.py\", line 391, in __init__\r\n    super(PGConfig, self).__init__(options, properties, storage_type)\r\n  File \"/usr/lib/ambari-server/lib/ambari_server/dbConfiguration_linux.py\", line 94, in __init__\r\n    self.database_password = DBMSConfig._read_password_from_properties(properties, options)\r\n  File \"/usr/lib/ambari-server/lib/ambari_server/dbConfiguration.py\", line 222, in _read_password_from_properties\r\n    database_password = decrypt_password_for_alias(properties, JDBC_RCA_PASSWORD_ALIAS, options)\r\n  File \"/usr/lib/ambari-server/lib/ambari_server/serverConfiguration.py\", line 940, in decrypt_password_for_alias\r\n    return read_passwd_for_alias(alias, masterKey, options)\r\n  File \"/usr/lib/ambari-server/lib/ambari_server/serverConfiguration.py\", line 911, in read_passwd_for_alias\r\n    if options is not None and options.master_key is not None and options.master_key:\r\nAttributeError: Values instance has no attribute 'master_key'\r\n{noformat}\r\n\r\n{noformat:title=grep passwd /etc/ambari-server/conf/ambari.properties}\r\nserver.jdbc.user.passwd=${alias=ambari.db.password}\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Values instance has no attribute 'master_key' during ambari-server reset"
   },
   {
      "_id": "13143940",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323505",
            "id": "12323505",
            "name": "ambari-views",
            "description": "Ambari Views framework and Views themselves.  Specific Views that are built on the framework will be handled with labels."
         }
      ],
      "created": "2018-03-09 18:29:28",
      "description": "{code:java}\r\n06 Mar 2018 08:52:07,987 ERROR [ambari-client-thread-6083] ContainerResponse:423 - The exception contained within MappableContainerException could not be mapped to a response, re-throwing to the HTTP container\r\njava.lang.NoClassDefFoundError: Could not initialize class com.amazonaws.ClientConfiguration\r\n\tat org.apache.hadoop.fs.s3a.S3ClientFactory$DefaultS3ClientFactory.createS3Client(S3ClientFactory.java:75)\r\n\tat org.apache.hadoop.fs.s3a.S3AFileSystem.initialize(S3AFileSystem.java:205)\r\n\tat org.apache.hadoop.fs.FileSystem.createFileSystem(FileSystem.java:2795)\r\n\tat org.apache.hadoop.fs.FileSystem.access$200(FileSystem.java:99)\r\n\tat org.apache.hadoop.fs.FileSystem$Cache.getInternal(FileSystem.java:2829)\r\n\tat org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:2811)\r\n\tat org.apache.hadoop.fs.FileSystem.get(FileSystem.java:390)\r\n\tat org.apache.hadoop.fs.FileSystem.get(FileSystem.java:179)\r\n\tat org.apache.ambari.view.utils.hdfs.HdfsApi$1.run(HdfsApi.java:77)\r\n\tat org.apache.ambari.view.utils.hdfs.HdfsApi$1.run(HdfsApi.java:75)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat javax.security.auth.Subject.doAs(Subject.java:422)\r\n\tat org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1866)\r\n\tat org.apache.ambari.view.utils.hdfs.HdfsApi.execute(HdfsApi.java:513)\r\n\tat org.apache.ambari.view.utils.hdfs.HdfsApi.execute(HdfsApi.java:489)\r\n\tat org.apache.ambari.view.utils.hdfs.HdfsApi.<init>(HdfsApi.java:75)\r\n\tat org.apache.ambari.view.utils.hdfs.HdfsUtil.getHdfsApi(HdfsUtil.java:157)\r\n\tat org.apache.ambari.view.utils.hdfs.HdfsUtil.connectToHDFSApi(HdfsUtil.java:129)\r\n\tat org.apache.ambari.view.commons.hdfs.HdfsService.getApi(HdfsService.java:98)\r\n\tat org.apache.ambari.view.commons.hdfs.FileOperationService.listdir(FileOperationService.java:100)\r\n\tat sun.reflect.GeneratedMethodAccessor443.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)\r\n\tat com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205){code}\r\n\u00a0\r\n\r\nThis is caused by an incorrect version from jackson-core.\r\n\r\nIn /var/lib/ambari-server/resources/views/work/FILES\\{1.0.0}/WEB-INF/lib/ there is jackson-core-2.2.3.jar (instead of 2.9.4).\r\n\r\nIn 2.2.3 there was no requiresPropertyOrdering() method in com.fasterxml.jackson.core.JsonFactory.\r\n\r\njackson-core, jackson-databind and jackson-annotations should all have the same version (2.9.4).",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "NoClassDefFoundError on Files View on S3"
   },
   {
      "_id": "13143901",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-09 14:19:02",
      "description": "Current implementation attached. \r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Background Ops: Make the operations column wider (shrink the other columns to make space)"
   },
   {
      "_id": "13143885",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-09 12:43:23",
      "description": "# Space required between Name: and Version number on Register Versions Page (Screen Shot 2018-02-09 at 12.12.06 PM.png)\r\n# Space required between '-' and Remove text next to Base URL text boxes.(Screen Shot 2018-02-09 at 12.13.09 PM.png)\r\n# Alignment between Version Details and Service Details  in that version needs to be corrected in Versions Page (Screen Shot 2018-02-09 at 12.13.51 PM.png)\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "UI Changes required for Manage Versions /Register Versions Page"
   },
   {
      "_id": "13143878",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-03-09 11:57:15",
      "description": "Automate the actions needed for the wizard so UI can make a call to perform\nthe commands on the new NN hosts and setup federation.\n\nFavoring automation here over manual steps like in the past NN HA wizard\nforced user to do this instead of Ambari doing it for them.\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Add custom actions for: format NN, format ZK and bootStrapStandBy"
   },
   {
      "_id": "13143861",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-09 10:46:51",
      "description": "As part of the job in AMBARI-22905 a change has been made to ask a question in case there is no configured authentication method or the one is different than LDAP (previously that question has been asked only if PAM was configured).\r\n\r\nTo allow any automated tests to bypass that question we should introduce a new CLI option.\u00a0",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Provide a new CLI option for setup-ldap to bypass question when there is no auth method configured (or different than LDAP)"
   },
   {
      "_id": "13143856",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-03-09 10:23:15",
      "description": "We have the very first run on Atlantic run using Ambari 2.7.0.2-60 and\nHDP-3.0.0.2-130.  \nNoticed in HA cluster that deploy has failed at Metrics collector install with\nbelow error\n\n    \n    \n    \r\n    Caught an exception while executing custom service command: <class 'ambari_agent.AgentException.AgentException'>: 'Script /var/lib/ambari-agent/cache/stacks/HDP/3.0/services/AMBARI_METRICS/package/scripts/metrics_collector.py does not exist'; 'Script /var/lib/ambari-agent/cache/stacks/HDP/3.0/services/AMBARI_METRICS/package/scripts/metrics_collector.py does not exist'\r\n    \r\n    \n\nArtifacts can be found\n[here](http://logserver.eng.hortonworks.com/?prefix=qelogs/nat/86939/yarn-\nha/split-1/nat-yc-r7-schs-yarn-ha-re-\nre/deploy_logs/logs/ctr-e138-1518143905142-62501-01-000002.hwx.site/)  \nLive cluster: <http://172.27.15.145:8080/> (lifetime 48hrs)  \nCould you please help take a look\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Metrics Collector Install failed on HA cluster"
   },
   {
      "_id": "13143576",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-08 15:04:38",
      "description": "Downgrade button should be removed from the stack upgrade wizard for upgrade paths from HDP-2.6 to 3.0",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "express_upgrade"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Hide downgrade option from stack upgrade wizard"
   },
   {
      "_id": "13143327",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-07 20:17:52",
      "description": "See the screenshot.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Ambari logo is missing."
   },
   {
      "_id": "13143233",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-07 14:02:35",
      "description": "Config dependencies alert bar not displayed properly while scrolling down the page.\r\n\r\nAttaching screenshot",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Config dependencies alert bar not displayed properly while scrolling down the page"
   },
   {
      "_id": "13143205",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-07 12:33:42",
      "description": "Installed Ambari using build 2.7.0.2-70 and HDP-3.0.0.2-150.\r\nAdded services HDFS, Yarn, Hive, HBase, Zookeeper and Solr.\r\nNow trying to Add Knox / Ranger, after customizing the configurations and clicked on the\u00a0{{Next}}\u00a0button UI is stuck and unable to reach the deploy screen.\r\nBrowser console shows error\u00a0{{unable to load modification handler for RANGER}}.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Unable to add a service in second go from Ambari-UI"
   },
   {
      "_id": "13142875",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-06 14:56:26",
      "description": "While navigating through the Manage Journal Nodes wizard, the 'BootStrap Standby NameNode' is not as per the new Ambari style.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "BootStrap Standby NameNode page does not conform to new UI"
   },
   {
      "_id": "13142865",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-06 14:22:48",
      "description": "Ambari agent should trust Ambari server's SSL certificate.  \r\n\r\nWhen using Python 2.7 and above, the agent tends to fail connecting with the Ambari server with a {{CERTIFICATE_VERIFY_FAILED}} error.   \r\n\r\nTo solve this, else tell Python to no verify certificates (which is insecure):\r\n{noformat:title=/etc/python/cert-verification.cfg}\r\n[https]\r\nverify=disable\r\n{noformat}\r\nSee https://access.redhat.com/articles/2039753\r\n\r\nOr import the Ambari server's SSL cert into the truststore used by Python, which is more secure. \r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "security",
         "ssl"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari agent should trust Ambari server's SSL certificate"
   },
   {
      "_id": "13142855",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-06 13:43:28",
      "description": "h3. STEPS TO REPRODUCE\r\n# Install the latest Sandbox docker (to re-reproduce the issue docker is easier)\r\n# Add \"hadoop.security.group.mapping.ldap.bind.password\" in Custom core-site with the value \"admin-password\" with Property Type *\"PASSWORD\"*, and save\r\n!image-2018-02-27-20-00-12-533.png|thumbnail! \r\n# From Add Service Wizard, add some service (I tested with Nifi and Solr but any service should be OK)\r\n# After Wizard, go to HDFS => Configs and search ldap.bind.password, it shows text input box rather than password input box",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Configurations attributes reset after running Add Service wizard"
   },
   {
      "_id": "13142846",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-03-06 13:22:56",
      "description": "I'm seeing the following error during HDP 3 beta installation.\n\n    \n    \n    \r\n    Traceback (most recent call last):\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/core/providers/package/__init__.py\", line 268, in _call_with_retries\r\n        code, out = func(cmd, **kwargs)\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/core/shell.py\", line 72, in inner\r\n        result = function(command, **kwargs)\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/core/shell.py\", line 102, in checked_call\r\n        tries=tries, try_sleep=try_sleep, timeout_kill_strategy=timeout_kill_strategy)\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/core/shell.py\", line 150, in _call_wrapper\r\n        result = _call(command, **kwargs_copy)\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/core/shell.py\", line 303, in _call\r\n        raise ExecutionFailed(err_msg, code, out, err)\r\n    ExecutionFailed: Execution of '/usr/bin/yum -d 0 -e 0 -y install mysql-community-release' returned 1. Error: Nothing to do\r\n    \r\n    The above exception was the cause of the following exception:\r\n    \r\n    Traceback (most recent call last):\r\n      File \"/var/lib/ambari-agent/cache/common-services/HIVE/3.0.0.3.0/package/scripts/mysql_server.py\", line 68, in <module>\r\n        MysqlServer().execute()\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/libraries/script/script.py\", line 376, in execute\r\n        method(env)\r\n      File \"/var/lib/ambari-agent/cache/common-services/HIVE/3.0.0.3.0/package/scripts/mysql_server.py\", line 37, in install\r\n        self.install_packages(env)\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/libraries/script/script.py\", line 831, in install_packages\r\n        retry_count=agent_stack_retry_count)\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/core/base.py\", line 166, in __init__\r\n        self.env.run()\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/core/environment.py\", line 160, in run\r\n        self.run_action(resource, action)\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/core/environment.py\", line 124, in run_action\r\n        provider_action()\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/core/providers/package/__init__.py\", line 53, in action_install\r\n        self.install_package(package_name, self.resource.use_repos, self.resource.skip_repos)\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/core/providers/package/yumrpm.py\", line 251, in install_package\r\n        self.checked_call_with_retries(cmd, sudo=True, logoutput=self.get_logoutput())\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/core/providers/package/__init__.py\", line 251, in checked_call_with_retries\r\n        return self._call_with_retries(cmd, is_checked=True, **kwargs)\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/core/providers/package/__init__.py\", line 268, in _call_with_retries\r\n        code, out = func(cmd, **kwargs)\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/core/shell.py\", line 72, in inner\r\n        result = function(command, **kwargs)\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/core/shell.py\", line 102, in checked_call\r\n        tries=tries, try_sleep=try_sleep, timeout_kill_strategy=timeout_kill_strategy)\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/core/shell.py\", line 150, in _call_wrapper\r\n        result = _call(command, **kwargs_copy)\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/core/shell.py\", line 303, in _call\r\n        raise ExecutionFailed(err_msg, code, out, err)\r\n    resource_management.core.exceptions.ExecutionFailed: Execution of '/usr/bin/yum -d 0 -e 0 -y install mysql-community-release' returned 1. Error: Nothing to do\r\n    stdout:   /var/lib/ambari-agent/data/output-49.txt\r\n    2018-02-16 18:25:54,593 - Stack Feature Version Info: Cluster Stack=3.0, Command Stack=None, Command Version=None -> 3.0\r\n    2018-02-16 18:25:54,605 - Using hadoop conf dir: /usr/hdp/3.0.0.0-814/hadoop/conf\r\n    2018-02-16 18:25:54,608 - Group['livy'] {}\r\n    2018-02-16 18:25:54,609 - Group['spark'] {}\r\n    2018-02-16 18:25:54,610 - Group['hdfs'] {}\r\n    2018-02-16 18:25:54,610 - Group['zeppelin'] {}\r\n    2018-02-16 18:25:54,610 - Group['hadoop'] {}\r\n    2018-02-16 18:25:54,611 - Group['users'] {}\r\n    2018-02-16 18:25:54,611 - Group['knox'] {}\r\n    2018-02-16 18:25:54,612 - User['hive'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-02-16 18:25:54,614 - User['zookeeper'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-02-16 18:25:54,615 - User['infra-solr'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-02-16 18:25:54,617 - User['atlas'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-02-16 18:25:54,618 - User['ams'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-02-16 18:25:54,620 - User['tez'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop', 'users'], 'uid': None}\r\n    2018-02-16 18:25:54,621 - User['zeppelin'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['zeppelin', 'hadoop'], 'uid': None}\r\n    2018-02-16 18:25:54,623 - User['livy'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['livy', 'hadoop'], 'uid': None}\r\n    2018-02-16 18:25:54,624 - User['spark'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['spark', 'hadoop'], 'uid': None}\r\n    2018-02-16 18:25:54,626 - User['ambari-qa'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop', 'users'], 'uid': None}\r\n    2018-02-16 18:25:54,627 - User['kafka'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-02-16 18:25:54,629 - User['hdfs'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hdfs', 'hadoop'], 'uid': None}\r\n    2018-02-16 18:25:54,630 - User['yarn'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-02-16 18:25:54,632 - User['mapred'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-02-16 18:25:54,633 - User['hbase'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-02-16 18:25:54,635 - User['knox'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop', 'knox'], 'uid': None}\r\n    2018-02-16 18:25:54,636 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0555}\r\n    2018-02-16 18:25:54,639 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] {'not_if': '(test $(id -u ambari-qa) -gt 1000) || (false)'}\r\n    2018-02-16 18:25:54,650 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] due to not_if\r\n    2018-02-16 18:25:54,651 - Directory['/tmp/hbase-hbase'] {'owner': 'hbase', 'create_parents': True, 'mode': 0775, 'cd_access': 'a'}\r\n    2018-02-16 18:25:54,653 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0555}\r\n    2018-02-16 18:25:54,657 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0555}\r\n    2018-02-16 18:25:54,658 - call['/var/lib/ambari-agent/tmp/changeUid.sh hbase'] {}\r\n    2018-02-16 18:25:54,672 - call returned (0, '1015')\r\n    2018-02-16 18:25:54,674 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] {'not_if': '(test $(id -u hbase) -gt 1000) || (false)'}\r\n    2018-02-16 18:25:54,683 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] due to not_if\r\n    2018-02-16 18:25:54,684 - Group['hdfs'] {}\r\n    2018-02-16 18:25:54,685 - User['hdfs'] {'fetch_nonlocal_groups': True, 'groups': ['hdfs', 'hadoop', u'hdfs']}\r\n    2018-02-16 18:25:54,687 - FS Type: \r\n    2018-02-16 18:25:54,687 - Directory['/etc/hadoop'] {'mode': 0755}\r\n    2018-02-16 18:25:54,731 - File['/usr/hdp/3.0.0.0-814/hadoop/conf/hadoop-env.sh'] {'content': InlineTemplate(...), 'owner': 'hdfs', 'group': 'hadoop'}\r\n    2018-02-16 18:25:54,732 - Writing File['/usr/hdp/3.0.0.0-814/hadoop/conf/hadoop-env.sh'] because contents don't match\r\n    2018-02-16 18:25:54,733 - Directory['/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'] {'owner': 'hdfs', 'group': 'hadoop', 'mode': 01777}\r\n    2018-02-16 18:25:54,771 - Repository['HDP-3.0-repo-1'] {'append_to_file': False, 'base_url': 'http://s3.amazonaws.com/dev.hortonworks.com/HDP/centos7/3.x/BUILDS/3.0.0.0-814', 'action': ['create'], 'components': [u'HDP', 'main'], 'repo_template': '[{{repo_id}}]\\nname={{repo_id}}\\n{% if mirror_list %}mirrorlist={{mirror_list}}{% else %}baseurl={{base_url}}{% endif %}\\n\\npath=/\\nenabled=1\\ngpgcheck=0', 'repo_file_name': 'ambari-hdp-1', 'mirror_list': None}\r\n    2018-02-16 18:25:54,786 - File['/etc/yum.repos.d/ambari-hdp-1.repo'] {'content': '[HDP-3.0-repo-1]\\nname=HDP-3.0-repo-1\\nbaseurl=http://s3.amazonaws.com/dev.hortonworks.com/HDP/centos7/3.x/BUILDS/3.0.0.0-814\\n\\npath=/\\nenabled=1\\ngpgcheck=0'}\r\n    2018-02-16 18:25:54,787 - Writing File['/etc/yum.repos.d/ambari-hdp-1.repo'] because contents don't match\r\n    2018-02-16 18:25:54,788 - Repository with url http://s3.amazonaws.com/dev.hortonworks.com/HDP-GPL/centos7/3.x/BUILDS/3.0.0.0-814 is not created due to its tags: set([u'GPL'])\r\n    2018-02-16 18:25:54,788 - Repository['HDP-UTILS-1.1.0.22-repo-1'] {'append_to_file': True, 'base_url': 'http://s3.amazonaws.com/dev.hortonworks.com/HDP-UTILS-1.1.0.22/repos/centos7', 'action': ['create'], 'components': [u'HDP-UTILS', 'main'], 'repo_template': '[{{repo_id}}]\\nname={{repo_id}}\\n{% if mirror_list %}mirrorlist={{mirror_list}}{% else %}baseurl={{base_url}}{% endif %}\\n\\npath=/\\nenabled=1\\ngpgcheck=0', 'repo_file_name': 'ambari-hdp-1', 'mirror_list': None}\r\n    2018-02-16 18:25:54,796 - File['/etc/yum.repos.d/ambari-hdp-1.repo'] {'content': '[HDP-3.0-repo-1]\\nname=HDP-3.0-repo-1\\nbaseurl=http://s3.amazonaws.com/dev.hortonworks.com/HDP/centos7/3.x/BUILDS/3.0.0.0-814\\n\\npath=/\\nenabled=1\\ngpgcheck=0\\n[HDP-UTILS-1.1.0.22-repo-1]\\nname=HDP-UTILS-1.1.0.22-repo-1\\nbaseurl=http://s3.amazonaws.com/dev.hortonworks.com/HDP-UTILS-1.1.0.22/repos/centos7\\n\\npath=/\\nenabled=1\\ngpgcheck=0'}\r\n    2018-02-16 18:25:54,796 - Writing File['/etc/yum.repos.d/ambari-hdp-1.repo'] because contents don't match\r\n    2018-02-16 18:25:54,798 - Package['unzip'] {'retry_on_repo_unavailability': False, 'retry_count': 5}\r\n    2018-02-16 18:25:54,943 - Skipping installation of existing package unzip\r\n    2018-02-16 18:25:54,944 - Package['curl'] {'retry_on_repo_unavailability': False, 'retry_count': 5}\r\n    2018-02-16 18:25:54,960 - Skipping installation of existing package curl\r\n    2018-02-16 18:25:54,961 - Package['hdp-select'] {'retry_on_repo_unavailability': False, 'retry_count': 5}\r\n    2018-02-16 18:25:54,976 - Skipping installation of existing package hdp-select\r\n    2018-02-16 18:25:54,995 - Skipping stack-select on MYSQL_SERVER because it does not exist in the stack-select package structure.\r\n    2018-02-16 18:25:55,435 - Using hadoop conf dir: /usr/hdp/3.0.0.0-814/hadoop/conf\r\n    2018-02-16 18:25:55,471 - call['ambari-python-wrap /usr/bin/hdp-select status hive-server2'] {'timeout': 20}\r\n    2018-02-16 18:25:55,523 - call returned (0, 'hive-server2 - 3.0.0.0-814')\r\n    2018-02-16 18:25:55,525 - Stack Feature Version Info: Cluster Stack=3.0, Command Stack=None, Command Version=None -> 3.0\r\n    2018-02-16 18:25:55,567 - File['/var/lib/ambari-agent/cred/lib/CredentialUtil.jar'] {'content': DownloadSource('http://will-hdp-1.field.hortonworks.com:8080/resources/CredentialUtil.jar'), 'mode': 0755}\r\n    2018-02-16 18:25:55,569 - Not downloading the file from http://will-hdp-1.field.hortonworks.com:8080/resources/CredentialUtil.jar, because /var/lib/ambari-agent/tmp/CredentialUtil.jar already exists\r\n    2018-02-16 18:25:55,570 - checked_call[('/usr/jdk64/jdk1.8.0_112/bin/java', '-cp', u'/var/lib/ambari-agent/cred/lib/*', 'org.apache.ambari.server.credentialapi.CredentialUtil', 'get', 'javax.jdo.option.ConnectionPassword', '-provider', u'jceks://file/var/lib/ambari-agent/cred/conf/mysql_server/hive-site.jceks')] {}\r\n    2018-02-16 18:25:56,859 - checked_call returned (0, 'SLF4J: Failed to load class \"org.slf4j.impl.StaticLoggerBinder\".\\nSLF4J: Defaulting to no-operation (NOP) logger implementation\\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\\nFeb 16, 2018 6:25:56 PM org.apache.hadoop.util.NativeCodeLoader <clinit>\\nWARNING: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable\\nhive')\r\n    2018-02-16 18:25:56,873 - Package['mysql-community-release'] {'retry_on_repo_unavailability': False, 'retry_count': 5}\r\n    2018-02-16 18:25:57,038 - Installing package mysql-community-release ('/usr/bin/yum -d 0 -e 0 -y install mysql-community-release')\r\n    2018-02-16 18:25:58,091 - Execution of '/usr/bin/yum -d 0 -e 0 -y install mysql-community-release' returned 1. Error: Nothing to do\r\n    2018-02-16 18:25:58,091 - Failed to install package mysql-community-release. Executing '/usr/bin/yum clean metadata'\r\n    2018-02-16 18:25:58,386 - Retrying to install package mysql-community-release after 30 seconds\r\n    2018-02-16 18:26:37,003 - Skipping stack-select on MYSQL_SERVER because it does not exist in the stack-select package structure.\r\n    \r\n    Command failed after 1 tries\r\n    \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Installation of MySQL fails on CentOS 7.2, should install mariadb"
   },
   {
      "_id": "13142588",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-05 16:40:40",
      "description": "The alignment of the radio buttons and checkboxes with the labels are messed up.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Alignment issues for checkboxes and radio buttons"
   },
   {
      "_id": "13142556",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-05 15:04:25",
      "description": "Ambari UI can not save changes due to Ambari StackAdvisor failing if accessible-node-labels is used as a queue name:\r\n\r\n2018-02-20 05:16:30,497 - Entered __getSelectedQueueTotalCap fn() with llap_daemon_selected_queue_name= 'llap'.\u00a0\r\n2018-02-20 05:16:30,498 - DBG: Selected queue name as: yarn.scheduler.capacity.root.accessible-node-labels.llap.capacity\u00a0\r\n2018-02-20 05:16:30,498 - Queue list :\u00a0['root', 'accessible-node-labels', 'llap']\u00a0\r\n2018-02-20 05:16:30,498 - DBG: Selected queue name as: yarn.scheduler.capacity.root.capacity\u00a0\r\n2018-02-20 05:16:30,498 - Total capacity available for queue root is : 1187840.0\u00a0\r\nError occured in stack advisor.\u00a0\r\nError details: float() argument must be a string or a number\u00a0\r\n===",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Stack Advisor Should not Use 'accessible-node-labels' as a Queue Name"
   },
   {
      "_id": "13142543",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323900",
            "id": "12323900",
            "name": "ambari-client",
            "description": "Ambari Client (Python, Groovy, and others)"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323901",
            "id": "12323901",
            "name": "ambari-shell",
            "description": "Ambari Shell"
         }
      ],
      "created": "2018-03-05 14:26:51",
      "description": "The following obsolete modules should be removed from Ambari.  Since they are not used or maintained there is no need to keep them around:  \r\n\r\n* Groovy Shell (ambari-shell/ambari-groovy-shell) [last updated 9 months ago*]\r\n* Groovy Client (ambari-client/groovy_client) [last updated 2 years ago]\r\n* Python Shell (ambari-shell/ambari-python-shell) [last updated 4 years ago*]\r\n*  Python Client (ambari-client/python_client)  [last updated 2 years ago]\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Remove obsolete modules from the Ambari source code"
   },
   {
      "_id": "13142440",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315623",
            "id": "12315623",
            "name": "test",
            "description": "unit tests, functional tests, and test automation"
         }
      ],
      "created": "2018-03-05 07:45:05",
      "description": "Fix BlackDuck found security issues in Ambari Functional Tests",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "black-duck",
         "pull-request-available",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Fix BlackDuck found security issues in Ambari Functional Tests"
   },
   {
      "_id": "13142439",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-05 07:32:23",
      "description": "In our groovy-client project the Python unit tests are failing in Jenkins due to the following typo in\u00a0\r\n\r\nAmbariHostsTest.test get host components as map when there is no cluster yet:\r\n\r\nambari.metaClass.getHostComponenets\u00a0",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Fix typo in AmbariHostsTest in groovy-client"
   },
   {
      "_id": "13142122",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-02 15:35:11",
      "description": "Fix ConfigUpgradeValidityTest.testConfigurationDefinitionsExist test failure which is caused since no active HDP stacks are available in the core Ambari source code tree. \r\n\r\nThanks [~smolnar] for pointing out the issue.\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Fix ConfigUpgradeValidityTest.testConfigurationDefinitionsExist test failure"
   },
   {
      "_id": "13142114",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-03-02 14:47:00",
      "description": "STR:\r\n# Navigate to HDFS -> Config Tab\r\n# Create new Config group 'group1' and add 2 hosts with DataNode to the Config group\r\n# Select this new group\r\n# Override properties in Advanced Tab for this config group and Click Save\r\n\r\nObserved: After the config change is saved, the Version is not populated in the version dropdown and also there is a \"Make Current\" Button which is not present in earlier releases.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Config version not shown after overriding properties with a config group"
   },
   {
      "_id": "13141949",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-01 23:55:43",
      "description": "*1. An NPE is thrown will initializing the Ambari server upgrade catalog*\r\n\r\n{code:title=com.google.inject.persist.jpa.JpaPersistService#begin}\r\n    public void begin() {\r\n        Preconditions.checkState(null == this.entityManager.get(), \"Work already begun on this thread. Looks like you have called UnitOfWork.begin() twice without a balancing call to end() in between.\");\r\n        this.entityManager.set(this.emFactory.createEntityManager());\r\n    }\r\n{code}\r\n\r\n{{this.emFactory}} is {{null}}.\r\n\r\n*Cause*\r\n{{com.google.inject.persist.jpa.JpaPersistService#start()}} was not called before {{com.google.inject.persist.jpa.JpaPersistService#begin}} to do order of operations in {{org.apache.ambari.server.upgrade.SchemaUpgradeHelper#main}}.  \r\n\r\n*Solution*\r\nEnsure {{com.google.inject.persist.jpa.JpaPersistService#start()}} is being called before {{com.google.inject.persist.jpa.JpaPersistService#begin}} in {{org.apache.ambari.server.upgrade.SchemaUpgradeHelper#main}}.  \r\n\r\n-----\r\n\r\n*2. Missing repo_os, repo_definition, and repo_tags tables*\r\n\r\nThe {{repo_os}}, {{repo_definition}}, and {{repo_tags}} tables were  never added to the UpgradeCatalog implementation.  The migration logic is also needed.\r\n*Solution*\r\n\r\nAdd the missing tables and logic while executing {{org.apache.ambari.server.upgrade.UpgradeCatalog270#executeDDLUpdates}}. \r\n\r\n-----\r\n\r\n*3. Entity classes are initialized before the schema of the underlying database is updated*\r\n\r\n*Solution*\r\nNotify relevant classes that the persistence infrastructure is ready after DDL updates have been applied. \r\n\r\nThe {{org.apache.ambari.server.events.publishers.AmbariEventPublisher}} is to be used for issuing  a {{org.apache.ambari.server.events.JpaInitializedEvent}}.\r\n\r\n-----\r\n\r\n*4. JVM does not exit after performing upgrade*\r\n\r\nAfter executing {{ambari-server upgrade}}, the JVM process hangs and does not exit.  According to the logs, no errors have occurred.\r\n\r\n*Cause*\r\nThe cause of this is several non-daemon threads not being shutdown by Ambari code. \r\n\r\n*Solution*\r\nChange relevant non-daemon threads to daemon threads and ensure any thread polls are not forcing one thread to be alive at all times. \r\n\r\n\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Multiple issues while executing Ambari server upgrade to Ambari 2.7.0"
   },
   {
      "_id": "13141892",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-01 19:54:44",
      "description": "Fix BlackDuck found security issues in Ambari Server",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "black-duck",
         "pull-request-available",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Fix BlackDuck found security issues in Ambari Server"
   },
   {
      "_id": "13141768",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-03-01 11:46:19",
      "description": "{noformat}\r\nTraceback (most recent call last):\r\n File \"/usr/lib/ambari-agent/lib/ambari_agent/HeartbeatThread.py\", line 130, in register\r\n listener.on_event({}, response)\r\n File \"/usr/lib/ambari-agent/lib/ambari_agent/listeners/AlertDefinitionsEventListener.py\", line 51, in on_event\r\n self.alert_definitions_cache.rewrite_cache(message['clusters'], message['hash'])\r\nKeyError: 'hash'\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Missing 'hash' in alert update message."
   },
   {
      "_id": "13141595",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-02-28 18:24:26",
      "description": "- Add mapping of namespace id property from API\r\n- Display NameNodes as active and standby ones\r\n- Remove tabs to select certain namespace\r\n- Add namespace-scoped HDFS checkpoint check and warning message before stopping and restarting NameNodes\r\n- Too long namespace id should be cropped with adding ellipsis and beung displayed fully in tooltip",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Additional fixes for service summary page to support NameNode Federation"
   },
   {
      "_id": "13141562",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315623",
            "id": "12315623",
            "name": "test",
            "description": "unit tests, functional tests, and test automation"
         }
      ],
      "created": "2018-02-28 15:45:44",
      "description": "Remove dependency on org.apache.httpcomponents:httpclient:jar before version 4.3.5.1 due to security concerns. See\r\n * CVE-2015-5262 -\u00a0[https://nvd.nist.gov/vuln/detail/CVE-2015-5262]\r\n * CVE-2014-3577 -\u00a0[https://nvd.nist.gov/vuln/detail/CVE-2014-3577]\r\n\r\n{noformat}\r\n--- maven-dependency-plugin:2.8:tree(default-cli) @ ambari-funtest ---\r\n org.apache.ambari:ambari-funtest:jar:2.6.1.0.0\r\n +- org.apache.httpcomponents:httpclient:jar:4.5.2:compile\r\n +- org.apache.ambari:ambari-metrics-common:jar:2.6.1.0.0:compile\r\n |  \\- (org.apache.httpcomponents:httpclient:jar:4.2.5:compile - omitted for conflict with 4.5.2)\r\n \\- org.apache.ambari:ambari-server:jar:2.6.1.0.0:compile\r\n    +- (org.apache.httpcomponents:httpclient:jar:4.2.5:compile - omitted for conflict with 4.5.2)\r\n    +- org.apache.hadoop:hadoop-auth:jar:2.7.2:compile\r\n    |  \\- (org.apache.httpcomponents:httpclient:jar:4.2.5:compile - omitted for conflict with 4.5.2)\r\n    \\- org.apache.hadoop:hadoop-common:jar:2.7.2:compile\r\n       \\- net.java.dev.jets3t:jets3t:jar:0.9.0:compile\r\n          \\- (org.apache.httpcomponents:httpclient:jar:4.1.2:compile - omitted for conflict with 4.5.2){noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "black-duck",
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Remove dependency on org.apache.httpcomponents:httpclient before version 4.3.5.1 for Ambari Functional Tests"
   },
   {
      "_id": "13141555",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315623",
            "id": "12315623",
            "name": "test",
            "description": "unit tests, functional tests, and test automation"
         }
      ],
      "created": "2018-02-28 15:25:50",
      "description": "Remove dependency on commons-collections:commons-collections before version 3.2.2 due to security concerns. See\r\n * CVE-2015-6420 -\u00a0[https://nvd.nist.gov/vuln/detail/CVE-2015-6420]\r\n * CVE-2015-7501 -\u00a0[https://nvd.nist.gov/vuln/detail/CVE-2015-7501]\r\n * CVE-2017-15708 -\u00a0[https://nvd.nist.gov/vuln/detail/CVE-2017-15708]\r\n\r\n{noformat}\r\n--- maven-dependency-plugin:2.8:tree(default-cli) @ ambari-funtest ---\r\n org.apache.ambari:ambari-funtest:jar:2.6.1.0.0\r\n +- org.apache.directory.server:apacheds-server-annotations:jar:2.0.0-M19:test\r\n |  +- org.apache.directory.server:apacheds-core-annotations:jar:2.0.0-M19:test\r\n |  |  +- org.apache.directory.server:apacheds-xdbm-partition:jar:2.0.0-M19:test\r\n |  |  |  \\- (commons-collections:commons-collections:jar:3.2.1:test - omitted for duplicate)\r\n |  |  \\- org.apache.directory.mavibot:mavibot:jar:1.0.0-M6:test\r\n |  |     \\- (commons-collections:commons-collections:jar:3.2.1:test - omitted for duplicate)\r\n |  \\- org.apache.directory.api:api-ldap-codec-core:jar:1.0.0-M26:test\r\n |     \\- (commons-collections:commons-collections:jar:3.2.1:compile - scope updated from test; omitted for duplicate)\r\n +- org.apache.directory.server:apacheds-core-integ:jar:2.0.0-M19:test\r\n |  +- org.apache.directory.server:apacheds-interceptors-authn:jar:2.0.0-M19:test\r\n |  |  \\- (commons-collections:commons-collections:jar:3.2.1:test - omitted for duplicate)\r\n |  \\- org.apache.directory.server:apacheds-interceptors-hash:jar:2.0.0-M19:test\r\n |     \\- (commons-collections:commons-collections:jar:3.2.1:test - omitted for duplicate)\r\n +- org.apache.directory.server:apacheds-kerberos-codec:jar:2.0.0-M19:compile\r\n |  \\- org.apache.directory.api:api-ldap-model:jar:1.0.0-M26:compile\r\n |     \\- (commons-collections:commons-collections:jar:3.2.1:compile - omitted for duplicate)\r\n +- org.apache.directory.server:apacheds-core:jar:2.0.0-M19:test\r\n |  \\- org.apache.directory.server:apacheds-interceptors-exception:jar:2.0.0-M19:test\r\n |     \\- (commons-collections:commons-collections:jar:3.2.1:test - omitted for duplicate)\r\n +- org.apache.directory.shared:shared-ldap:jar:0.9.17:test\r\n |  \\- (commons-collections:commons-collections:jar:3.2.1:compile - scope updated from test; omitted for duplicate)\r\n +- org.apache.velocity:velocity:jar:1.7:compile{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "black-duck",
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Remove dependency on commons-collections:commons-collections:jar before version 3.2.2 for Ambari Functional Tests"
   },
   {
      "_id": "13141470",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-02-28 09:18:36",
      "description": "While installing Timeline Service V2.0 during CI run, the following error is\ncaptured:\n\n    \n    \n    Caught an exception while executing custom service command: <type 'exceptions.Exception'>: Command requires configs with timestamp=1519782088331 but configs on agent have timestamp=1519783511993; Command requires configs with timestamp=1519782088331 but configs on agent have timestamp=1519783511993\r\n    \n\nSee <http://172.27.30.209:8080> (up until 8pm ET 3/1)\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Exception caught while installing Timeline Service V2.0 "
   },
   {
      "_id": "13141224",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-02-27 13:52:27",
      "description": "While running CI tests\n\n    \n    \n     \r\n    Traceback (most recent call last): \r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/providers/package/__init__.py\", line 283, in _call_with_retries \r\n        code, out = func(cmd, **kwargs) \r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/shell.py\", line 72, in inner \r\n        result = function(command, **kwargs) \r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/shell.py\", line 102, in checked_call \r\n        tries=tries, try_sleep=try_sleep, timeout_kill_strategy=timeout_kill_strategy) \r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/shell.py\", line 150, in _call_wrapper \r\n        result = _call(command, **kwargs_copy) \r\n      File \"/usr/lib/ambari-agent/lib/resource_management/core/shell.py\", line 303, in _call \r\n        raise ExecutionFailed(err_msg, code, out, err) \r\n    ExecutionFailed: Execution of '/usr/bin/yum -d 0 -e 0 -y install hadooplzo_3_0_0_2_87' returned 1. Error: Nothing to do \r\n    \n    \n    \n    2018-02-26 12:16:14,479 - Repository for HDP/3.0.0.2-87/HDP-3.0 is not managed by Ambari\r\n    2018-02-26 12:16:14,479 - Repository for HDP/3.0.0.2-87/HDP-3.0-GPL is not managed by Ambari\r\n    2018-02-26 12:16:14,480 - Repository for HDP/3.0.0.2-87/HDP-UTILS-1.1.0.22 is not managed by Ambari\r\n    \n\nI checked in DB and indeed manage_repos was false, however I didn't found any\nsigns in logs etc. that it was set to false during cluster setup.\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari does not manage repositories"
   },
   {
      "_id": "13141219",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-02-27 13:24:34",
      "description": "Remove dependency on org.apache.zookeeper:zookeeper before version 3.4.6.2.0.0.0-579 due to security concerns. See\r\n * CVE-2017-5637 -\u00a0[https://nvd.nist.gov/vuln/detail/CVE-2017-5637]\r\n * CVE-2016-5017 -\u00a0[https://nvd.nist.gov/vuln/detail/CVE-2016-5017]\r\n\r\n{noformat}\r\n --- maven-dependency-plugin:2.8:tree (default-cli) @ ambari-server ---\r\n org.apache.ambari:ambari-server:jar:2.6.1.0.0\r\n +- org.apache.ambari:ambari-metrics-common:jar:2.6.1.0.0:compile\r\n |  \\- org.apache.curator:curator-framework:jar:2.7.1:compile\r\n |     \\- (org.apache.zookeeper:zookeeper:jar:3.4.6:compile - omitted for duplicate)\r\n +- org.apache.hadoop:hadoop-auth:jar:2.7.2:compile\r\n |  \\- org.apache.zookeeper:zookeeper:jar:3.4.6:compile\r\n \\- org.apache.hadoop:hadoop-common:jar:2.7.2:compile\r\n    +- org.apache.curator:curator-client:jar:2.7.1:compile\r\n    |  \\- (org.apache.zookeeper:zookeeper:jar:3.4.6:compile - omitted for duplicate)\r\n    +- org.apache.curator:curator-recipes:jar:2.7.1:compile\r\n    |  \\- (org.apache.zookeeper:zookeeper:jar:3.4.6:compile - omitted for duplicate)\r\n    \\- (org.apache.zookeeper:zookeeper:jar:3.4.6:compile - omitte{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Remove dependency on org.apache.zookeeper:zookeeper before version 3.4.6.2.0.0.0-579 for Ambari Server"
   },
   {
      "_id": "13141000",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-02-26 18:40:43",
      "description": "The target host selection in the Move Wizard shows all the available hosts in the cluster instead of the hosts where the component is not installed.\u00a0",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Target host shows all the hosts available in Move Wizard"
   },
   {
      "_id": "13140910",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-02-26 12:24:43",
      "description": "# Deploy Ambari-2.6.2.0 server on machine A\r\n# Manually install and register agents on other machines (including machine A)\r\n# Enable 2 way SSL between server and agents\r\n# Enable https at Ambari server\r\n# Deploy a cluster via blueprints with HDP-2.6.5.0\r\n\r\nAfter cluster is deployed, observed that the permission of files such as hadoop-env.sh is '-rw-r-----'\r\nComplete output:\r\n{code}\r\n[root@ctr-e138-1518143905142-36503-01-000002 logs]# ls -lhrt /etc/hadoop/conf/\r\ntotal 176K\r\n-rw-r--r-- 1 cstm-hdfs hadoop 8.9K Feb 22 09:30 core-site.xml\r\n-rw-r----- 1 cstm-hdfs hadoop 333 Feb 22 09:35 hdfs_dn_jaas.conf\r\n-rw-r----- 1 cstm-hdfs hadoop 333 Feb 22 09:35 hdfs_nn_jaas.conf\r\n-rw-r----- 1 cstm-hdfs hadoop 1.3K Feb 22 09:35 hadoop-policy.xml\r\n-rw-r----- 1 cstm-hdfs hadoop 884 Feb 22 09:35 ssl-client.xml\r\ndrwxr-xr-x 2 root hadoop 4.0K Feb 22 09:35 secure\r\n-rw-r----- 1 cstm-hdfs hadoop 1000 Feb 22 09:35 ssl-server.xml\r\n-rw-r--r-- 1 cstm-hdfs hadoop 8.7K Feb 22 09:35 hdfs-site.xml\r\n-rw-r--r-- 1 cstm-mr hadoop 7.5K Feb 22 09:37 mapred-site.xml\r\n-rw-r--r-- 1 cstm-hdfs hadoop 2.3K Feb 22 09:37 capacity-scheduler.xml\r\n-rw-r--r-- 1 root hadoop 1.1K Feb 22 09:37 container-executor.cfg\r\n-rwxr-xr-x 1 root root 984 Feb 22 09:37 mapred-env.sh\r\n-rw-r--r-- 1 root hadoop 947 Feb 22 09:37 taskcontroller.cfg\r\n-rw-r----- 1 cstm-yarn hadoop 571 Feb 22 09:37 yarn_jaas.conf\r\n-rw-r----- 1 cstm-yarn hadoop 337 Feb 22 09:37 yarn_ats_jaas.conf\r\n-rw-r----- 1 cstm-yarn hadoop 333 Feb 22 09:37 yarn_nm_jaas.conf\r\n-rw-r----- 1 cstm-mr hadoop 320 Feb 22 09:37 mapred_jaas.conf\r\n-rw-r----- 1 root root 1020 Feb 22 09:48 commons-logging.properties\r\n-rw-r----- 1 root root 1.6K Feb 22 09:48 health_check\r\n-rw-r--r-- 1 cstm-hdfs hadoop 11K Feb 22 09:48 log4j.properties\r\n-rwxr-xr-x 1 root root 4.2K Feb 22 09:48 task-log4j.properties\r\n-rwxr-xr-x 1 root root 2.4K Feb 22 09:48 topology_script.py\r\n-rw-r----- 1 root root 241 Feb 22 10:10 slaves\r\n-rw-r----- 1 root hadoop 6.3K Feb 22 10:10 hadoop-env.sh\r\n-rw-r--r-- 1 cstm-yarn hadoop 24K Feb 22 10:10 yarn-site.xml\r\n-rwxr-xr-x 1 cstm-yarn hadoop 5.5K Feb 22 10:10 yarn-env.sh\r\n-rw-r----- 1 cstm-hdfs hadoop 2.6K Feb 22 10:12 hadoop-metrics2.properties\r\n-rw-r--r-- 1 cstm-hdfs hadoop 467 Feb 22 10:12 topology_mappings.data\r\n-rw-r----- 1 cstm-hdfs hadoop 1 Feb 22 10:13 dfs.exclude\r\n{code}\r\n\r\n\u00a0\r\n\r\n\r\nWhen compared this with a non-SSL cluster the permission is '-rw-r--r--' i.e. read permission is available for other users",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "system_test"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Missing permission for 'others' when Ambari is configured with two way SSL and https enabled"
   },
   {
      "_id": "13140527",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-02-23 15:36:48",
      "description": "*STR*\r\n# navigate / Admin / Service Auto Start\r\n# disable Auto Start\r\n# save \r\n# refresh page",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Service Auto Start cannot be disabled"
   },
   {
      "_id": "13140522",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-02-23 15:10:37",
      "description": "Remove dependency on commons-collections:commons-collections before version 3.2.2 due to security concerns. See\r\n * CVE-2015-6420 -\u00a0[https://nvd.nist.gov/vuln/detail/CVE-2015-6420]\r\n * CVE-2015-7501 -\u00a0[https://nvd.nist.gov/vuln/detail/CVE-2015-7501]\r\n * CVE-2017-15708 -\u00a0[https://nvd.nist.gov/vuln/detail/CVE-2017-15708]\r\n\r\n{noformat}\r\n--- maven-dependency-plugin:2.8:tree(default-cli) @ ambari-server ---\r\n org.apache.ambari:ambari-server:jar:2.6.1.0.0\r\n +- org.apache.directory.server:apacheds-server-annotations:jar:2.0.0-M19:test\r\n |  +- org.apache.directory.server:apacheds-core-annotations:jar:2.0.0-M19:test\r\n |  |  +- org.apache.directory.server:apacheds-xdbm-partition:jar:2.0.0-M19:test\r\n |  |  |  \\- (commons-collections:commons-collections:jar:3.2.1:test - omitted for duplicate)\r\n |  |  \\- org.apache.directory.mavibot:mavibot:jar:1.0.0-M6:test\r\n |  |     \\- (commons-collections:commons-collections:jar:3.2.1:test - omitted for duplicate)\r\n |  \\- org.apache.directory.api:api-ldap-codec-core:jar:1.0.0-M26:test\r\n |     \\- (commons-collections:commons-collections:jar:3.2.1:compile - scope updated from test; omitted for duplicate)\r\n +- org.apache.directory.server:apacheds-core-integ:jar:2.0.0-M19:test\r\n |  +- org.apache.directory.server:apacheds-interceptors-authn:jar:2.0.0-M19:test\r\n |  |  \\- (commons-collections:commons-collections:jar:3.2.1:test - omitted for duplicate)\r\n |  \\- org.apache.directory.server:apacheds-interceptors-hash:jar:2.0.0-M19:test\r\n |     \\- (commons-collections:commons-collections:jar:3.2.1:test - omitted for duplicate)\r\n +- org.apache.directory.server:apacheds-kerberos-codec:jar:2.0.0-M19:compile\r\n |  \\- org.apache.directory.api:api-ldap-model:jar:1.0.0-M26:compile\r\n |     \\- (commons-collections:commons-collections:jar:3.2.1:compile - omitted for duplicate)\r\n +- org.apache.directory.server:apacheds-core:jar:2.0.0-M19:test\r\n |  \\- org.apache.directory.server:apacheds-interceptors-exception:jar:2.0.0-M19:test\r\n |     \\- (commons-collections:commons-collections:jar:3.2.1:test - omitted for duplicate)\r\n +- org.apache.directory.shared:shared-ldap:jar:0.9.17:test\r\n |  \\- (commons-collections:commons-collections:jar:3.2.1:compile - scope updated from test; omitted for duplicate)\r\n +- org.apache.velocity:velocity:jar:1.7:compile\r\n |  \\- commons-collections:commons-collections:jar:3.2.1:compile\r\n +- org.apache.hadoop:hadoop-common:jar:2.7.2:compile\r\n |  +- (commons-collections:commons-collections:jar:3.2.2:compile - omitted for conflict with 3.2.1)\r\n |  \\- commons-configuration:commons-configuration:jar:1.6:compile\r\n |     \\- (commons-collections:commons-collections:jar:3.2.1:compile - omitted for duplicate)\r\n \\- utility:utility:jar:1.0.0.0-SNAPSHOT:test\r\n    \\- com.puppycrawl.tools:checkstyle:jar:6.19:test\r\n       \\- (commons-collections:commons-collections:jar:3.2.2:test - omitted for conflict with 3.2.1){noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "black-duck",
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Remove dependency on commons-collections:commons-collections:jar before version 3.2.2 for Ambari Server"
   },
   {
      "_id": "13140495",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-02-23 13:14:53",
      "description": "Remove dependency on org.apache.httpcomponents:httpclient:jar before version 4.3.5.1 due to security concerns. See\r\n * CVE-2015-5262 -\u00a0[https://nvd.nist.gov/vuln/detail/CVE-2015-5262]\r\n * CVE-2014-3577 -\u00a0[https://nvd.nist.gov/vuln/detail/CVE-2014-3577]\r\n\r\n{noformat}\r\n--- maven-dependency-plugin:2.8:tree(default-cli) @ ambari-server ---\r\n org.apache.ambari:ambari-server:jar:2.6.1.0.0\r\n +- org.apache.httpcomponents:httpclient:jar:4.2.5:compile\r\n +- org.apache.ambari:ambari-metrics-common:jar:2.6.1.0.0:compile\r\n |  \\- (org.apache.httpcomponents:httpclient:jar:4.2.5:compile - omitted for duplicate)\r\n +- org.apache.hadoop:hadoop-auth:jar:2.7.2:compile\r\n |  \\- (org.apache.httpcomponents:httpclient:jar:4.2.5:compile - omitted for duplicate)\r\n \\- org.apache.hadoop:hadoop-common:jar:2.7.2:compile\r\n    \\- net.java.dev.jets3t:jets3t:jar:0.9.0:compile\r\n       \\- (org.apache.httpcomponents:httpclient:jar:4.1.2:compile - omitted for conflict with 4.2.5)\r\n {noformat}\r\n * \r\n * \r\n[Options|https://hortonworks.jira.com/browse/BUG-97133?filter=54432]\r\n\r\nh2. \u00a0",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "black-duck",
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Remove dependency on org.apache.httpcomponents:httpclient before version 4.3.5.1 for Ambari Server"
   },
   {
      "_id": "13140436",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-02-23 08:59:48",
      "description": "Remove dependency on com.fasterxml.jackson.core:jackson-databind before version 2.9.4 due to security concerns. See\r\n * CVE-2018-5968 -\u00a0[https://nvd.nist.gov/vuln/detail/CVE-2018-5968]\r\n * CVE-2017-17485 -\u00a0[https://nvd.nist.gov/vuln/detail/CVE-2017-17485]\r\n\r\n{noformat}\r\n --- maven-dependency-plugin:2.8:tree (default-cli) @ ambari-server ---\r\n org.apache.ambari:ambari-server:jar:2.6.1.0.0\r\n \\- com.networknt:json-schema-validator:jar:0.1.10:test\r\n    \\- com.fasterxml.jackson.core:jackson-databind:jar:2.8.7:test\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "black-duck",
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Remove dependency on com.fasterxml.jackson.core:jackson-databind before version 2.9.4 for Ambari Server"
   },
   {
      "_id": "13140359",
      "assignee": "aonishuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-02-22 23:32:10",
      "description": "Starting from 2.6.1 Ambari started checking transaction files during the repo/service installation and it fails with below error.\r\n\r\n\r\n{noformat}\r\n2018-02-16 16:12:21,639 - File['/etc/yum.repos.d/ambari-hdp-104.repo'] {'content': '[HDP-2.6-repo-104]\\nname=HDP-2.6-repo-104\\nbaseurl=http://xxxxxxx/vcm_hadoop/HDP/centos6/2.6.4.0-91\\n\\npath=/\\nenabled=1\\ngpgcheck=0\\n[HDP-UTILS-1.1.0.22-repo-104]\\nname=HDP-UTILS-1.1.0.22-repo-104\\nbaseurl=http://xxxxxx/vcm_hadoop/HDP-UTILS-1.1.0.22\\n\\npath=/\\nenabled=1\\ngpgcheck=0'} \r\n2.  2018-02-16 16:12:21,639 - Writing File['/etc/yum.repos.d/ambari-hdp-104.repo'] because contents don't match \r\n3.  2018-02-16 16:12:21,639 - Yum non-completed transactions check failed, found 1 non-completed transaction(s): \r\n4.  2018-02-16 16:12:21,640 - [2015-03-12.17:13.28.disabled] Packages broken: hue-common-2.6.1.2.2.0.0-2041.el6.x86_64; Packages not-installed hue-hcatalog-2.6.1.2.2.0.0-2041.el6.x86_64, hue-2.6.1.2.2.0.0-2041.el6.x86_64, hue-pig-2.6.1.2.2.0.0-2041.el6.x86_64, hue-oozie-2.6.1.2.2.0.0-2041.el6.x86_64, hue-beeswax-2.6.1.2.2.0.0-2041.el6.x86_64, hue-server-2.6.1.2.2.0.0-2041.el6.x86_64 \r\n5.  2018-02-16 16:12:21,640 - *** Incomplete Yum Transactions *** \r\n6.  2018-02-16 16:12:21,640 - \r\n7.  2018-02-16 16:12:21,640 - Ambari has detected that there are incomplete Yum transactions on this host. This will interfere with the installation process and must be resolved before continuing. \r\n8.  2018-02-16 16:12:21,640 - \r\n9.  2018-02-16 16:12:21,640 - - Identify the pending transactions with the command 'yum history list <packages failed>' \r\n10. 2018-02-16 16:12:21,640 - - Revert each pending transaction with the command 'yum history undo' \r\n11. 2018-02-16 16:12:21,640 - - Flush the transaction log with 'yum-complete-transaction --cleanup-only' \r\nAfter cleaning up with 'yum-complete-transaction --cleanup-only' still Ambari could not able to proceed further with same error.\r\n\r\nWhen user tried to do yum install it was going through successfully.\r\n\r\nFinally had to delete /var/lib/yum/transaction* manually for ambari to proceed further with installation. these transactions files were very old and nothing to do with any latest installation but still ambari does not proceed further.\r\n{noformat}\r\n\r\n\r\nWhat is expected: If this validation was done intentionally then it should throw proper message guiding the user to remove those files.\r\n\r\nOptionsAttachments",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "yum installation fails if there is any transaction files"
   },
   {
      "_id": "13140258",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-02-22 17:23:15",
      "description": "Ambari server has gpl license disabled i.e.\r\n{code}\r\ncat /etc/ambari-server/conf/ambari.properties | grep -i gpl\r\ngpl.license.accepted=false\r\n{code}\r\n\r\n- On register version page, upon choosing HDP-2.6.4.0 from the drop-down, the GPL repo field is not masked (see default-version.png)\r\n- However upon choosing to upload the version from VDF URL, the GPL field is correctly masked (see version-via-vdf.png)\r\n\r\nLooks like the problem is [showRepo()|https://github.com/apache/ambari/blob/branch-2.6/ambari-admin/src/main/resources/ui/admin-web/app/scripts/controllers/stackVersions/StackVersionsCreateCtrl.js#L50] function which calls [isGPLRepo|https://github.com/apache/ambari/blob/branch-2.6/ambari-admin/src/main/resources/ui/admin-web/app/scripts/controllers/stackVersions/StackVersionsCreateCtrl.js#L46] function where if we do not load version fromVDF URL the showRepo return true\r\n\r\n\u00a0",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available",
         "system_test"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "GPL repo is not hidden when default version is chosen in UI"
   },
   {
      "_id": "13140247",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-02-22 16:29:07",
      "description": "Remove dependency on commons-beanutils:commons-beanutils before version 1.9.2 due to security concerns. See CVE-2014-0114 -\u00a0[https://nvd.nist.gov/vuln/detail/CVE-2014-0114]\r\n{noformat}\r\n--- maven-dependency-plugin:2.8:tree(default-cli) @ ambari-server ---\r\n org.apache.ambari:ambari-server:jar:2.6.1.0.0\r\n +- org.apache.hadoop:hadoop-common:jar:2.7.2:compile\r\n |  \\- commons-configuration:commons-configuration:jar:1.6:compile\r\n |     +- commons-digester:commons-digester:jar:1.8:compile\r\n |     |  \\- commons-beanutils:commons-beanutils:jar:1.9.2:compile\r\n |     \\- commons-beanutils:commons-beanutils-core:jar:1.8.0:compile\r\n \\- utility:utility:jar:1.0.0.0-SNAPSHOT:test\r\n    \\- com.puppycrawl.tools:checkstyle:jar:6.19:test\r\n       \\- (commons-beanutils:commons-beanutils:jar:1.9.2:compile -{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Remove dependency on commons-beanutils:commons-beanutils before version 1.9.2 for Ambari Server"
   },
   {
      "_id": "13140213",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-02-22 14:45:18",
      "description": "- User should be able to apply the service action (if it can be executed for certain components only) to the given namespace\r\n- Add Restart NameNodes item",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Extend service actions dropdowns with namespace-specific items"
   },
   {
      "_id": "13140193",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-02-22 13:47:15",
      "description": "The Background Ops opened inside an install wizard do not show all the operations running by default. They are shown only after selecting the dropdown.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Background Ops during wizard pages do not show all the ops running by default"
   },
   {
      "_id": "13140178",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-02-22 12:19:54",
      "description": "STR:\r\n# Login and navigate to Zookeeper service\r\n# Click actions button\r\n# Select Add Zookeeper Server option\r\n\r\nIn the confirmation window that appears, the host selection is not present.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Hosts selection not shown while adding Zookeeper server"
   },
   {
      "_id": "13140155",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323901",
            "id": "12323901",
            "name": "ambari-shell",
            "description": "Ambari Shell"
         }
      ],
      "created": "2018-02-22 10:10:05",
      "description": "*\u00a0Remove dependency on org.apache.zookeeper:zookeeper before version 3.4.6.2.0.0.0-579 for Ambari Groovy Shell\r\n\r\n*\u00a0Remove dependency on xerces:xercesImpl before version 2.11.2 for Ambari Groovy Shell\r\n\r\n*\u00a0Remove dependency on tomcat:jasper-compiler and tomcat:jasper-runtime before version 6.0.20.0 for Ambari Groovy Shell\r\n\r\n*\u00a0Remove dependency on org.apache.httpcomponents:httpclient before version 4.3.5.1 for Ambari Groovy Shell\r\n\r\n*\u00a0Remove dependency on commons-httpclient:commons-httpclient before version 3.1.0 for Ambari Groovy Shell\r\n\r\n*\u00a0Remove dependency on commons-collections:commons-collections:jar before version 3.2.2 for Ambari Groovy Shell\r\n\r\n*\u00a0Remove dependency on commons-beanutils:commons-beanutils-core before version 1.9.2 for Ambari Groovy Shell",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Remove unsecure dependencies from Ambari Groovy Shell"
   },
   {
      "_id": "13140140",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323900",
            "id": "12323900",
            "name": "ambari-client",
            "description": "Ambari Client (Python, Groovy, and others)"
         }
      ],
      "created": "2018-02-22 09:06:50",
      "description": "Remove dependency on xerces:xercesImpl before version 2.11.2 for Ambari Groovy Client\r\n\r\nRemove dependency on org.apache.httpcomponents:httpclient before version 4.3.5.1 for Ambari Groovy Client\r\n\r\nRemove dependency on commons-collections:commons-collections:jar before version 3.2.2 for Ambari Groovy Client\r\n\r\nRemove dependency on commons-beanutils:commons-beanutils-core before version 1.9.2 for Ambari Groovy Client",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Remove unsecure dependencies from Ambari Groovy Client"
   },
   {
      "_id": "13139918",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-02-21 14:41:04",
      "description": "STR:\r\n1) go to ambari ui\r\n2) open ranger configs\r\n\r\nER: there should be save/discard button\r\nAR: no save/discard button found",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Save/discard button is not found for ranger configuration"
   },
   {
      "_id": "13139880",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-02-21 11:52:47",
      "description": "Deploy jobs are failing with following exception during installation of Atlas\nmetadata client:\n\n    \n    \n    \r\n    Traceback (most recent call last):\r\n      File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/ATLAS/package/scripts/atlas_client.py\", line 53, in \r\n        AtlasClient().execute()\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 377, in execute\r\n        method(env)\r\n      File \"/var/lib/ambari-agent/cache/stacks/HDP/3.0/services/ATLAS/package/scripts/atlas_client.py\", line 41, in install\r\n        self.install_packages(env)\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 823, in install_packages\r\n        name = self.format_package_name(package['name'])\r\n      File \"/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py\", line 567, in format_package_name\r\n        raise Fail(\"Cannot match package for regexp name {0}. Available packages: {1}\".format(name, self.available_packages_in_repos))\r\n    resource_management.core.exceptions.Fail: Cannot match package for regexp name atlas-metadata_${stack_version}. Available packages: ['openblas', 'openblas-Rblas', 'openblas-devel', 'openblas-openmp', 'openblas-openmp64', 'openblas-openmp64_', 'openblas-serial64', 'openblas-serial64_', 'openblas-static', 'openblas-threads', 'openblas-threads64', 'openblas-threads64_', 'snappy', 'snappy', 'snappy-devel', 'snappy-devel']\r\n    \n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Deploy fails during Atlas Client installation"
   },
   {
      "_id": "13139878",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-02-21 11:46:19",
      "description": "The 'Current' tag is not shown against the installed cluster.\r\n\r\nAlso, on the Stacks & Versions page, there are lines shown when an older version of HDP is registered:",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "'Current' Tag not shown in the Versions page for the currently installed version"
   },
   {
      "_id": "13139803",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-02-21 01:29:45",
      "description": "Alert filter with services having space is not working.\r\nSTR:\r\n1. Navigate to Alerts page\r\n2. Try to filter using Service as filter key with services like \"Ambari Infra\"/\"Log Search\"\r\n3. Alerts are not filtered.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Alert filter with services having space is not working"
   },
   {
      "_id": "13139802",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-02-21 01:27:23",
      "description": "Admin user can delete own user from Users page.\r\n\r\n\u00a0\r\n\r\nSTR:\r\n # Login to ambari\u00a0UI as admin user\r\n # Navigate to Users page\r\n # Try to delete the same user (admin) from the users list\r\n\r\nThe delete option is disabled in the individual user page, but not from the all Users page.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Admin user can delete own user from Users page"
   },
   {
      "_id": "13139719",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-02-20 17:02:35",
      "description": "This is similar issue as reported on AMBARI-22417, but for service checks. \r\n\r\nThe original issue of ambari check is resolved. But the same issue is seen when running the HDFS balancer via Ambari.\r\n\r\n*Solution*\r\nMD5 is disabled on the OS, Code needs to be updated to use SHA\r\n\r\nThis is required when FIPS mode is enabled on the RHEL OS",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "HDFS Balancer via Ambari fails when FIPS mode is activated on the OS"
   },
   {
      "_id": "13139671",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-02-20 14:20:13",
      "description": "*Steps to reporduce:-*\r\n1. go to ambari-views tab\r\n2. create as many view you can create \r\n3. see the views dashboard\r\n\r\nScreenshot:\u00a0[^Screen Shot 2018-02-09 at 11.44.53 AM.png]\r\n\r\nThe Name field is blank\r\n\r\nthe Name Only get populated add a \"Short URL\".",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "View name is not displayed in ambari-views page"
   },
   {
      "_id": "13139646",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-02-20 12:29:58",
      "description": "I am not able to delete livy(only one instance of livy is present on the cluster) from a host.\r\nAfter stopping livy, when I try to delete, its showing below message :\r\n\"WARNING! Delete the last Livy for Spark2 Server component in the cluster?\r\nDeleting the last component in the cluster could result in permanent loss of service data.\" (Attaching the screenshot)\r\n\r\nBut there's not way to enable 'Confirm Delete' button.\r\n\r\nNote : In earlier versions of ambari there used to be a check box and user has to check it to enable delete button.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Not able to delete livy component from a host"
   },
   {
      "_id": "13139569",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323904",
            "id": "12323904",
            "name": "alerts",
            "description": "Ambari Alerts System"
         }
      ],
      "created": "2018-02-20 04:54:40",
      "description": "In a Kerberized cluster some web endpoints (App Timeline Web UI, ResourceManger Web UI, etc.) require authentication. Any Ambari alerts checking those endpoints must then be able to authenticate.\r\n\r\nThis was addressed in AMBARI-9586, however the default principal and keytab used in the alerts.json is that of the \"bare\" SPNEGO principal HTTP/_HOST@REALM. \r\n My understanding is that the HTTP service principal is used to authenticate users to a service, not used to authenticate to another service.\r\n\r\n1. Since most endpoints involved are Web UI, would it be more appropriate to use the smokeuser in the alerts?\r\n\r\n2. This was first observed in Ranger Audit, the YARN Ranger Plug-in showed many access denied from HTTP user. [This post|https://community.hortonworks.com/content/supportkb/150206/ranger-audit-logs-refers-to-access-denied-for-http.html] provided some direction as to where those requests were coming from. We have updated the ResourceManger Web UI alert definition to use cluster-env/smokeuser_keytab and cluster-env/smokeuser_principal_name and this has resolved the initial HTTP access denied. \r\n Would it also be advisable to make the change in the other secure Web UI alert definitions?",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
         "name": "Minor",
         "id": "4"
      },
      "projectname": "AMBARI",
      "summary": "WEB type alerts authentication in Kerberos secured cluster"
   },
   {
      "_id": "13139436",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-02-19 13:55:53",
      "description": "Try to update {{credential_store_supported}} property of a service:\r\n\r\n{noformat}\r\n$ curl -X PUT -d @- \"http://$AMBARI_SERVER:8080/api/v1/clusters/TEST/services/HDFS\" <<EOF\r\n{ \"ServiceInfo\": { \"credential_store_supported\": \"true\" } }\r\nEOF\r\nHTTP/1.1 400 Bad Request\r\n...\r\n  \"message\" : \"java.lang.IllegalArgumentException: No enum constant org.apache.ambari.server.state.MaintenanceState.true\"\r\n{noformat}\r\n\r\nExpected response:\r\n\r\n{{IllegalArgumentException: Invalid arguments, cannot update credential_store_supported as it is set only via service definition.}}\r\n\r\nThe response code is the same as expected due to a coincidence.\r\n\r\nThe problem is setting the wrong property:\r\n\r\n{noformat}\r\n 414     o = properties.get(SERVICE_CREDENTIAL_STORE_SUPPORTED_PROPERTY_ID);\r\n 415     if (null != o) {\r\n 416       svcRequest.setMaintenanceState(o.toString());\r\n 417     }\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
         "name": "Minor",
         "id": "4"
      },
      "projectname": "AMBARI",
      "summary": "ServiceInfo: credential_store_supported attempts to overwrite maintenance_state"
   },
   {
      "_id": "13139417",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-02-19 12:57:47",
      "description": "Missing LDAP configuration property warning should be a debug statement. The Ambari server log is being filled with statements like:\r\n{noformat}\r\n  \r\n16 Feb 2018 14:01:36,617  WARN [main] AmbariLdapConfiguration:47 - Ldap configuration property [ambari.ldap.connectivity.server.host] hasn't been set; using default value\r\n{noformat}\r\nThe log level for these messages should be lowered to at least DEBUG.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Missing LDAP configuration property warning should be a debug statement"
   },
   {
      "_id": "13139371",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-02-19 08:33:47",
      "description": "While deploying PERF stack, PERF 1.0 stack is not installed and shows up as\nOut of sync  \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "[PERF] Deployment of PERF stack leads to Out of Sync"
   },
   {
      "_id": "13138991",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-02-16 08:48:52",
      "description": "As discussed with Sid Wagle for now we should ignore UT failing on branch-3.0-perf as they take up a lot of\ntime rework.\n\nThe reason for this is that we need to merge into trunk soon, so the feature\ncode gets enough test cycles.  \nThe tests will be unignored and fixed after the merge is done.\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ignore python UT failing on branch-3.0-perf"
   },
   {
      "_id": "13138982",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-02-16 07:33:11",
      "description": "Previously. Every x seconds any alert was updated with information from agent.\nEven if nothing changed.  \nDue to perf reasons this behavior was changed so that agent reports alerts\nonly when their status changes.\n\nDue this change, \"stale alerts\" alert started appearing on clusters, showing\nthat alerts were not updated for a long time.\n\nWe should consider alert up-to-date to the point of last heartbeat. Which\nshows that the connection between server and agent is okay due to\nlast_hb_timestamp, and so agent could send alert updates.\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "\"Stale Alerts\" alert appears on cluster after some time"
   },
   {
      "_id": "13138942",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-02-16 00:24:27",
      "description": "For Ranger HA, when we give External url as LB url and port (LB:port), but when we click on quick link is pointing to LB url, but it is using ranger port(6080 or 6182 depend it's http or https).\r\n\r\nBelow code snippet - reading the host name from policymgr_external_url and then using default ranger port.\r\n\r\n\r\n{noformat}\r\n} else if (serviceName === 'RANGER') {\r\n      var siteConfigs = this.get('configProperties').findProperty('type', 'admin-properties').properties;\r\n      if (siteConfigs['policymgr_external_url']) {\r\n        host = siteConfigs['policymgr_external_url'].split('://')[1].split(':')[0];\r\n         var newItem = {};\r\n        newItem.url = siteConfigs['policymgr_external_url'];\r\n        newItem.label = link.label;\r\n         return newItem;\r\n        }\r\n    }\r\n{noformat}\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ranger LB URL is pointing to ranger port by default when we click on Quick link"
   },
   {
      "_id": "13138758",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-02-15 12:24:12",
      "description": "Encountered while testing Atlantic Beta 1.  \nTimeline Service V2.0 reader install fails if wget is already not installed on\nthe host beforehand.\n\n    \n    \n    stderr: \r\n    Traceback (most recent call last):\r\n      File \"/var/lib/ambari-agent/cache/common-services/YARN/3.0.0.3.0/package/scripts/timelinereader.py\", line 101, in <module>\r\n        ApplicationTimelineReader().execute()\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/libraries/script/script.py\", line 376, in execute\r\n        method(env)\r\n      File \"/var/lib/ambari-agent/cache/common-services/YARN/3.0.0.3.0/package/scripts/timelinereader.py\", line 45, in install\r\n        hbase_service.install_hbase(env)\r\n      File \"/var/lib/ambari-agent/cache/common-services/YARN/3.0.0.3.0/package/scripts/hbase_service.py\", line 82, in install_hbase\r\n        Execute(hbase_download_cmd, user=\"root\", logoutput=True)\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/core/base.py\", line 166, in __init__\r\n        self.env.run()\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/core/environment.py\", line 160, in run\r\n        self.run_action(resource, action)\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/core/environment.py\", line 124, in run_action\r\n        provider_action()\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/core/providers/system.py\", line 262, in action_run\r\n        tries=self.resource.tries, try_sleep=self.resource.try_sleep)\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/core/shell.py\", line 72, in inner\r\n        result = function(command, **kwargs)\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/core/shell.py\", line 102, in checked_call\r\n        tries=tries, try_sleep=try_sleep, timeout_kill_strategy=timeout_kill_strategy)\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/core/shell.py\", line 150, in _call_wrapper\r\n        result = _call(command, **kwargs_copy)\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/core/shell.py\", line 303, in _call\r\n        raise ExecutionFailed(err_msg, code, out, err)\r\n    resource_management.core.exceptions.ExecutionFailed: Execution of 'umask 0022;wget --no-cookies --no-check-certificate http://public-repo-1.hortonworks.com/ARTIFACTS/dist/hbase/1.2.6/hadoop-2.7.5/hbase-1.2.6-bin.tar.gz && tar -xzf hbase-1.2.6-bin.tar.gz && rm -rf hbase-1.2.6-bin.tar.gz && rm -rf /usr/hdp/3.0.0.0-809/hadoop-yarn-hbase && mv hbase-* /usr/hdp/3.0.0.0-809/hadoop-yarn-hbase' returned 127. -bash: wget: command not found\r\n     stdout:\r\n    2018-02-13 07:39:31,705 - Stack Feature Version Info: Cluster Stack=3.0, Command Stack=None, Command Version=None -> 3.0\r\n    2018-02-13 07:39:31,711 - Using hadoop conf dir: /usr/hdp/current/hadoop-client/conf\r\n    2018-02-13 07:39:31,713 - Group['livy'] {}\r\n    2018-02-13 07:39:31,714 - Group['spark'] {}\r\n    2018-02-13 07:39:31,714 - Group['hdfs'] {}\r\n    2018-02-13 07:39:31,714 - Group['zeppelin'] {}\r\n    2018-02-13 07:39:31,714 - Group['hadoop'] {}\r\n    2018-02-13 07:39:31,715 - Group['users'] {}\r\n    2018-02-13 07:39:31,715 - Group['knox'] {}\r\n    2018-02-13 07:39:31,716 - User['hive'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-02-13 07:39:31,717 - User['zookeeper'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-02-13 07:39:31,718 - User['infra-solr'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-02-13 07:39:31,719 - User['atlas'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-02-13 07:39:31,720 - User['ams'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-02-13 07:39:31,721 - User['tez'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop', 'users'], 'uid': None}\r\n    2018-02-13 07:39:31,722 - User['zeppelin'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['zeppelin', 'hadoop'], 'uid': None}\r\n    2018-02-13 07:39:31,723 - User['livy'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['livy', 'hadoop'], 'uid': None}\r\n    2018-02-13 07:39:31,724 - User['spark'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['spark', 'hadoop'], 'uid': None}\r\n    2018-02-13 07:39:31,724 - User['ambari-qa'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop', 'users'], 'uid': None}\r\n    2018-02-13 07:39:31,725 - User['kafka'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-02-13 07:39:31,726 - User['hdfs'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hdfs', 'hadoop'], 'uid': None}\r\n    2018-02-13 07:39:31,727 - User['yarn'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-02-13 07:39:31,728 - User['mapred'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-02-13 07:39:31,729 - User['hbase'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-02-13 07:39:31,731 - User['knox'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop', 'knox'], 'uid': None}\r\n    2018-02-13 07:39:31,732 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0555}\r\n    2018-02-13 07:39:31,735 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] {'not_if': '(test $(id -u ambari-qa) -gt 1000) || (false)'}\r\n    2018-02-13 07:39:31,744 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] due to not_if\r\n    2018-02-13 07:39:31,744 - Directory['/tmp/hbase-hbase'] {'owner': 'hbase', 'create_parents': True, 'mode': 0775, 'cd_access': 'a'}\r\n    2018-02-13 07:39:31,746 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0555}\r\n    2018-02-13 07:39:31,748 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0555}\r\n    2018-02-13 07:39:31,749 - call['/var/lib/ambari-agent/tmp/changeUid.sh hbase'] {}\r\n    2018-02-13 07:39:31,759 - call returned (0, '1014')\r\n    2018-02-13 07:39:31,760 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1014'] {'not_if': '(test $(id -u hbase) -gt 1000) || (false)'}\r\n    2018-02-13 07:39:31,766 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1014'] due to not_if\r\n    2018-02-13 07:39:31,766 - Group['hdfs'] {}\r\n    2018-02-13 07:39:31,767 - User['hdfs'] {'fetch_nonlocal_groups': True, 'groups': ['hdfs', 'hadoop', u'hdfs']}\r\n    2018-02-13 07:39:31,767 - FS Type: \r\n    2018-02-13 07:39:31,767 - Directory['/etc/hadoop'] {'mode': 0755}\r\n    2018-02-13 07:39:31,786 - File['/usr/hdp/current/hadoop-client/conf/hadoop-env.sh'] {'content': InlineTemplate(...), 'owner': 'hdfs', 'group': 'hadoop'}\r\n    2018-02-13 07:39:31,787 - Directory['/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'] {'owner': 'hdfs', 'group': 'hadoop', 'mode': 01777}\r\n    2018-02-13 07:39:31,803 - Repository['HDP-3.0-repo-1'] {'append_to_file': False, 'base_url': 'http://s3.amazonaws.com/dev.hortonworks.com/HDP/centos7/3.x/BUILDS/3.0.0.0-809', 'action': ['create'], 'components': [u'HDP', 'main'], 'repo_template': '[{{repo_id}}]\\nname={{repo_id}}\\n{% if mirror_list %}mirrorlist={{mirror_list}}{% else %}baseurl={{base_url}}{% endif %}\\n\\npath=/\\nenabled=1\\ngpgcheck=0', 'repo_file_name': 'ambari-hdp-1', 'mirror_list': None}\r\n    2018-02-13 07:39:31,811 - File['/etc/yum.repos.d/ambari-hdp-1.repo'] {'content': '[HDP-3.0-repo-1]\\nname=HDP-3.0-repo-1\\nbaseurl=http://s3.amazonaws.com/dev.hortonworks.com/HDP/centos7/3.x/BUILDS/3.0.0.0-809\\n\\npath=/\\nenabled=1\\ngpgcheck=0'}\r\n    2018-02-13 07:39:31,812 - Writing File['/etc/yum.repos.d/ambari-hdp-1.repo'] because contents don't match\r\n    2018-02-13 07:39:31,813 - Repository['HDP-UTILS-1.1.0.21-repo-1'] {'append_to_file': True, 'base_url': 'http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.21/repos/centos7', 'action': ['create'], 'components': [u'HDP-UTILS', 'main'], 'repo_template': '[{{repo_id}}]\\nname={{repo_id}}\\n{% if mirror_list %}mirrorlist={{mirror_list}}{% else %}baseurl={{base_url}}{% endif %}\\n\\npath=/\\nenabled=1\\ngpgcheck=0', 'repo_file_name': 'ambari-hdp-1', 'mirror_list': None}\r\n    2018-02-13 07:39:31,816 - File['/etc/yum.repos.d/ambari-hdp-1.repo'] {'content': '[HDP-3.0-repo-1]\\nname=HDP-3.0-repo-1\\nbaseurl=http://s3.amazonaws.com/dev.hortonworks.com/HDP/centos7/3.x/BUILDS/3.0.0.0-809\\n\\npath=/\\nenabled=1\\ngpgcheck=0\\n[HDP-UTILS-1.1.0.21-repo-1]\\nname=HDP-UTILS-1.1.0.21-repo-1\\nbaseurl=http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.21/repos/centos7\\n\\npath=/\\nenabled=1\\ngpgcheck=0'}\r\n    2018-02-13 07:39:31,817 - Writing File['/etc/yum.repos.d/ambari-hdp-1.repo'] because contents don't match\r\n    2018-02-13 07:39:31,817 - Package['unzip'] {'retry_on_repo_unavailability': False, 'retry_count': 5}\r\n    2018-02-13 07:39:31,902 - Skipping installation of existing package unzip\r\n    2018-02-13 07:39:31,902 - Package['curl'] {'retry_on_repo_unavailability': False, 'retry_count': 5}\r\n    2018-02-13 07:39:31,912 - Skipping installation of existing package curl\r\n    2018-02-13 07:39:31,912 - Package['hdp-select'] {'retry_on_repo_unavailability': False, 'retry_count': 5}\r\n    2018-02-13 07:39:31,922 - Skipping installation of existing package hdp-select\r\n    2018-02-13 07:39:32,207 - Looking for matching packages in the following repositories: HDP-3.0-repo-1, HDP-UTILS-1.1.0.21-repo-1\r\n    2018-02-13 07:39:34,268 - Package['hadoop_3_0_0_0_809-yarn'] {'retry_on_repo_unavailability': False, 'retry_count': 5}\r\n    2018-02-13 07:39:34,352 - Skipping installation of existing package hadoop_3_0_0_0_809-yarn\r\n    2018-02-13 07:39:34,354 - Package['hadoop_3_0_0_0_809-mapreduce'] {'retry_on_repo_unavailability': False, 'retry_count': 5}\r\n    2018-02-13 07:39:34,363 - Skipping installation of existing package hadoop_3_0_0_0_809-mapreduce\r\n    2018-02-13 07:39:34,365 - Package['hadoop_3_0_0_0_809-hdfs'] {'retry_on_repo_unavailability': False, 'retry_count': 5}\r\n    2018-02-13 07:39:34,380 - Skipping installation of existing package hadoop_3_0_0_0_809-hdfs\r\n    2018-02-13 07:39:34,393 - Using hadoop conf dir: /usr/hdp/current/hadoop-client/conf\r\n    2018-02-13 07:39:34,394 - Stack Feature Version Info: Cluster Stack=3.0, Command Stack=None, Command Version=None -> 3.0\r\n    2018-02-13 07:39:34,394 - call['ambari-python-wrap /usr/bin/hdp-select status hadoop-yarn-resourcemanager'] {'timeout': 20}\r\n    2018-02-13 07:39:34,421 - call returned (0, 'hadoop-yarn-resourcemanager - 3.0.0.0-809')\r\n    2018-02-13 07:39:34,461 - Using hadoop conf dir: /usr/hdp/current/hadoop-client/conf\r\n    2018-02-13 07:39:34,472 - Execute['umask 0022;wget --no-cookies --no-check-certificate http://public-repo-1.hortonworks.com/ARTIFACTS/dist/hbase/1.2.6/hadoop-2.7.5/hbase-1.2.6-bin.tar.gz && tar -xzf hbase-1.2.6-bin.tar.gz && rm -rf hbase-1.2.6-bin.tar.gz && rm -rf /usr/hdp/3.0.0.0-809/hadoop-yarn-hbase && mv hbase-* /usr/hdp/3.0.0.0-809/hadoop-yarn-hbase'] {'logoutput': True, 'user': 'root'}\r\n    -bash: wget: command not found\r\n    \r\n    Command failed after 1 tries\r\n    \n    \n    \n    stderr: \r\n    Traceback (most recent call last):\r\n      File \"/var/lib/ambari-agent/cache/common-services/YARN/3.0.0.3.0/package/scripts/timelinereader.py\", line 101, in <module>\r\n        ApplicationTimelineReader().execute()\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/libraries/script/script.py\", line 376, in execute\r\n        method(env)\r\n      File \"/var/lib/ambari-agent/cache/common-services/YARN/3.0.0.3.0/package/scripts/timelinereader.py\", line 45, in install\r\n        hbase_service.install_hbase(env)\r\n      File \"/var/lib/ambari-agent/cache/common-services/YARN/3.0.0.3.0/package/scripts/hbase_service.py\", line 82, in install_hbase\r\n        Execute(hbase_download_cmd, user=\"root\", logoutput=True)\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/core/base.py\", line 166, in __init__\r\n        self.env.run()\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/core/environment.py\", line 160, in run\r\n        self.run_action(resource, action)\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/core/environment.py\", line 124, in run_action\r\n        provider_action()\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/core/providers/system.py\", line 262, in action_run\r\n        tries=self.resource.tries, try_sleep=self.resource.try_sleep)\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/core/shell.py\", line 72, in inner\r\n        result = function(command, **kwargs)\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/core/shell.py\", line 102, in checked_call\r\n        tries=tries, try_sleep=try_sleep, timeout_kill_strategy=timeout_kill_strategy)\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/core/shell.py\", line 150, in _call_wrapper\r\n        result = _call(command, **kwargs_copy)\r\n      File \"/usr/lib/python2.6/site-packages/resource_management/core/shell.py\", line 303, in _call\r\n        raise ExecutionFailed(err_msg, code, out, err)\r\n    resource_management.core.exceptions.ExecutionFailed: Execution of 'umask 0022;wget --no-cookies --no-check-certificate http://public-repo-1.hortonworks.com/ARTIFACTS/dist/hbase/1.2.6/hadoop-2.7.5/hbase-1.2.6-bin.tar.gz && tar -xzf hbase-1.2.6-bin.tar.gz && rm -rf hbase-1.2.6-bin.tar.gz && rm -rf /usr/hdp/3.0.0.0-809/hadoop-yarn-hbase && mv hbase-* /usr/hdp/3.0.0.0-809/hadoop-yarn-hbase' returned 127. -bash: wget: command not found\r\n     stdout:\r\n    2018-02-13 07:39:31,705 - Stack Feature Version Info: Cluster Stack=3.0, Command Stack=None, Command Version=None -> 3.0\r\n    2018-02-13 07:39:31,711 - Using hadoop conf dir: /usr/hdp/current/hadoop-client/conf\r\n    2018-02-13 07:39:31,713 - Group['livy'] {}\r\n    2018-02-13 07:39:31,714 - Group['spark'] {}\r\n    2018-02-13 07:39:31,714 - Group['hdfs'] {}\r\n    2018-02-13 07:39:31,714 - Group['zeppelin'] {}\r\n    2018-02-13 07:39:31,714 - Group['hadoop'] {}\r\n    2018-02-13 07:39:31,715 - Group['users'] {}\r\n    2018-02-13 07:39:31,715 - Group['knox'] {}\r\n    2018-02-13 07:39:31,716 - User['hive'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-02-13 07:39:31,717 - User['zookeeper'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-02-13 07:39:31,718 - User['infra-solr'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-02-13 07:39:31,719 - User['atlas'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-02-13 07:39:31,720 - User['ams'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-02-13 07:39:31,721 - User['tez'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop', 'users'], 'uid': None}\r\n    2018-02-13 07:39:31,722 - User['zeppelin'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['zeppelin', 'hadoop'], 'uid': None}\r\n    2018-02-13 07:39:31,723 - User['livy'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['livy', 'hadoop'], 'uid': None}\r\n    2018-02-13 07:39:31,724 - User['spark'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['spark', 'hadoop'], 'uid': None}\r\n    2018-02-13 07:39:31,724 - User['ambari-qa'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop', 'users'], 'uid': None}\r\n    2018-02-13 07:39:31,725 - User['kafka'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-02-13 07:39:31,726 - User['hdfs'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hdfs', 'hadoop'], 'uid': None}\r\n    2018-02-13 07:39:31,727 - User['yarn'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-02-13 07:39:31,728 - User['mapred'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-02-13 07:39:31,729 - User['hbase'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop'], 'uid': None}\r\n    2018-02-13 07:39:31,731 - User['knox'] {'gid': 'hadoop', 'fetch_nonlocal_groups': True, 'groups': ['hadoop', 'knox'], 'uid': None}\r\n    2018-02-13 07:39:31,732 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0555}\r\n    2018-02-13 07:39:31,735 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] {'not_if': '(test $(id -u ambari-qa) -gt 1000) || (false)'}\r\n    2018-02-13 07:39:31,744 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] due to not_if\r\n    2018-02-13 07:39:31,744 - Directory['/tmp/hbase-hbase'] {'owner': 'hbase', 'create_parents': True, 'mode': 0775, 'cd_access': 'a'}\r\n    2018-02-13 07:39:31,746 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0555}\r\n    2018-02-13 07:39:31,748 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0555}\r\n    2018-02-13 07:39:31,749 - call['/var/lib/ambari-agent/tmp/changeUid.sh hbase'] {}\r\n    2018-02-13 07:39:31,759 - call returned (0, '1014')\r\n    2018-02-13 07:39:31,760 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1014'] {'not_if': '(test $(id -u hbase) -gt 1000) || (false)'}\r\n    2018-02-13 07:39:31,766 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1014'] due to not_if\r\n    2018-02-13 07:39:31,766 - Group['hdfs'] {}\r\n    2018-02-13 07:39:31,767 - User['hdfs'] {'fetch_nonlocal_groups': True, 'groups': ['hdfs', 'hadoop', u'hdfs']}\r\n    2018-02-13 07:39:31,767 - FS Type: \r\n    2018-02-13 07:39:31,767 - Directory['/etc/hadoop'] {'mode': 0755}\r\n    2018-02-13 07:39:31,786 - File['/usr/hdp/current/hadoop-client/conf/hadoop-env.sh'] {'content': InlineTemplate(...), 'owner': 'hdfs', 'group': 'hadoop'}\r\n    2018-02-13 07:39:31,787 - Directory['/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'] {'owner': 'hdfs', 'group': 'hadoop', 'mode': 01777}\r\n    2018-02-13 07:39:31,803 - Repository['HDP-3.0-repo-1'] {'append_to_file': False, 'base_url': 'http://s3.amazonaws.com/dev.hortonworks.com/HDP/centos7/3.x/BUILDS/3.0.0.0-809', 'action': ['create'], 'components': [u'HDP', 'main'], 'repo_template': '[{{repo_id}}]\\nname={{repo_id}}\\n{% if mirror_list %}mirrorlist={{mirror_list}}{% else %}baseurl={{base_url}}{% endif %}\\n\\npath=/\\nenabled=1\\ngpgcheck=0', 'repo_file_name': 'ambari-hdp-1', 'mirror_list': None}\r\n    2018-02-13 07:39:31,811 - File['/etc/yum.repos.d/ambari-hdp-1.repo'] {'content': '[HDP-3.0-repo-1]\\nname=HDP-3.0-repo-1\\nbaseurl=http://s3.amazonaws.com/dev.hortonworks.com/HDP/centos7/3.x/BUILDS/3.0.0.0-809\\n\\npath=/\\nenabled=1\\ngpgcheck=0'}\r\n    2018-02-13 07:39:31,812 - Writing File['/etc/yum.repos.d/ambari-hdp-1.repo'] because contents don't match\r\n    2018-02-13 07:39:31,813 - Repository['HDP-UTILS-1.1.0.21-repo-1'] {'append_to_file': True, 'base_url': 'http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.21/repos/centos7', 'action': ['create'], 'components': [u'HDP-UTILS', 'main'], 'repo_template': '[{{repo_id}}]\\nname={{repo_id}}\\n{% if mirror_list %}mirrorlist={{mirror_list}}{% else %}baseurl={{base_url}}{% endif %}\\n\\npath=/\\nenabled=1\\ngpgcheck=0', 'repo_file_name': 'ambari-hdp-1', 'mirror_list': None}\r\n    2018-02-13 07:39:31,816 - File['/etc/yum.repos.d/ambari-hdp-1.repo'] {'content': '[HDP-3.0-repo-1]\\nname=HDP-3.0-repo-1\\nbaseurl=http://s3.amazonaws.com/dev.hortonworks.com/HDP/centos7/3.x/BUILDS/3.0.0.0-809\\n\\npath=/\\nenabled=1\\ngpgcheck=0\\n[HDP-UTILS-1.1.0.21-repo-1]\\nname=HDP-UTILS-1.1.0.21-repo-1\\nbaseurl=http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.21/repos/centos7\\n\\npath=/\\nenabled=1\\ngpgcheck=0'}\r\n    2018-02-13 07:39:31,817 - Writing File['/etc/yum.repos.d/ambari-hdp-1.repo'] because contents don't match\r\n    2018-02-13 07:39:31,817 - Package['unzip'] {'retry_on_repo_unavailability': False, 'retry_count': 5}\r\n    2018-02-13 07:39:31,902 - Skipping installation of existing package unzip\r\n    2018-02-13 07:39:31,902 - Package['curl'] {'retry_on_repo_unavailability': False, 'retry_count': 5}\r\n    2018-02-13 07:39:31,912 - Skipping installation of existing package curl\r\n    2018-02-13 07:39:31,912 - Package['hdp-select'] {'retry_on_repo_unavailability': False, 'retry_count': 5}\r\n    2018-02-13 07:39:31,922 - Skipping installation of existing package hdp-select\r\n    2018-02-13 07:39:32,207 - Looking for matching packages in the following repositories: HDP-3.0-repo-1, HDP-UTILS-1.1.0.21-repo-1\r\n    2018-02-13 07:39:34,268 - Package['hadoop_3_0_0_0_809-yarn'] {'retry_on_repo_unavailability': False, 'retry_count': 5}\r\n    2018-02-13 07:39:34,352 - Skipping installation of existing package hadoop_3_0_0_0_809-yarn\r\n    2018-02-13 07:39:34,354 - Package['hadoop_3_0_0_0_809-mapreduce'] {'retry_on_repo_unavailability': False, 'retry_count': 5}\r\n    2018-02-13 07:39:34,363 - Skipping installation of existing package hadoop_3_0_0_0_809-mapreduce\r\n    2018-02-13 07:39:34,365 - Package['hadoop_3_0_0_0_809-hdfs'] {'retry_on_repo_unavailability': False, 'retry_count': 5}\r\n    2018-02-13 07:39:34,380 - Skipping installation of existing package hadoop_3_0_0_0_809-hdfs\r\n    2018-02-13 07:39:34,393 - Using hadoop conf dir: /usr/hdp/current/hadoop-client/conf\r\n    2018-02-13 07:39:34,394 - Stack Feature Version Info: Cluster Stack=3.0, Command Stack=None, Command Version=None -> 3.0\r\n    2018-02-13 07:39:34,394 - call['ambari-python-wrap /usr/bin/hdp-select status hadoop-yarn-resourcemanager'] {'timeout': 20}\r\n    2018-02-13 07:39:34,421 - call returned (0, 'hadoop-yarn-resourcemanager - 3.0.0.0-809')\r\n    2018-02-13 07:39:34,461 - Using hadoop conf dir: /usr/hdp/current/hadoop-client/conf\r\n    2018-02-13 07:39:34,472 - Execute['umask 0022;wget --no-cookies --no-check-certificate http://public-repo-1.hortonworks.com/ARTIFACTS/dist/hbase/1.2.6/hadoop-2.7.5/hbase-1.2.6-bin.tar.gz && tar -xzf hbase-1.2.6-bin.tar.gz && rm -rf hbase-1.2.6-bin.tar.gz && rm -rf /usr/hdp/3.0.0.0-809/hadoop-yarn-hbase && mv hbase-* /usr/hdp/3.0.0.0-809/hadoop-yarn-hbase'] {'logoutput': True, 'user': 'root'}\r\n    -bash: wget: command not found\r\n    \r\n    Command failed after 1 tries\r\n    \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Timeline Service V2.0 reader install fails if wget is not already installed on the host"
   },
   {
      "_id": "13138662",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-02-15 00:32:00",
      "description": "{code:title=common-services/SPARK/1.2.1/package/scripts/service_check.py:36}\r\n livy_kinit_cmd = format(\"{kinit_path_local} -kt {smoke_user_keytab} {smokeuser_principal}; \")\r\n Execute(livy_kinit_cmd, user=params.livy_user)\r\n{code}\r\nNotice the Kerberos identity is for the smoke user, but the exec is for the livy user. This will replace the livy user's interactive Kerberos ticket cache.\r\n\r\nThis should be\u00a0\r\n{code}\r\nsmoke_user_kinit_cmd = format(\"{kinit_path_local} -kt {smoke_user_keytab} {smokeuser_principal}; \")\r\nExecute(smoke_user_kinit_cmd, user=params.smoke_user)\r\n{code}\r\nWhere\u00a0{{smoke_user}} is\r\n{code}\r\nsmoke_user =  config['configurations']['cluster-env']['smokeuser']\r\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Wrong user used to execute the Spark/Livy Server service check"
   },
   {
      "_id": "13138538",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-02-14 17:09:18",
      "description": "{{ambari-server setup --enable-lzo-under-gpl-license}}\u00a0failing with {{Unexpected AttibuteError}}\r\n\r\n{noformat}\r\n# ambari-server setup --enable-lzo-under-gpl-license -s\r\nUsing python /usr/bin/python\r\nSetup ambari-server\r\nChecking SELinux...\r\nSELinux status is 'disabled'\r\nCustomize user account for ambari-server daemon [y/n] (n)?\r\nAdjusting ambari-server permissions and ownership...\r\nChecking firewall status...\r\nChecking JDK...\r\nDo you want to change Oracle JDK [y/n] (n)?\r\nCheck JDK version for Ambari Server...\r\nJDK version found: 8\r\nMinimum JDK version is 8 for Ambari. Skipping to setup different JDK for Ambari Server.\r\nChecking GPL software agreement...\r\nCompleting setup...\r\nConfiguring database...\r\nEnter advanced database configuration [y/n] (n)?\r\nConfiguring database...\r\nERROR: Unexpected AttributeError: Values instance has no attribute 'master_key'\r\nFor more info run ambari-server with -v or --verbose option\r\n{noformat}\r\n\r\n*Note*: This occurs after encrypting passwords in the {{ambari_server.properties}} file:\r\n{noformat}\r\n# ambari-server setup-security\r\nUsing python  /usr/bin/python\r\nSecurity setup options...\r\n===========================================================================\r\nChoose one of the following options:\r\n  [1] Enable HTTPS for Ambari server.\r\n  [2] Encrypt passwords stored in ambari.properties file.\r\n  [3] Setup Ambari kerberos JAAS configuration.\r\n  [4] Setup truststore.\r\n  [5] Import certificate to truststore.\r\n===========================================================================\r\nEnter choice, (1-5): 2\r\nPlease provide master key for locking the credential store:\r\nRe-enter master key:\r\nDo you want to persist master key. If you choose not to persist, you need to provide the Master Key while starting the ambari server as an env variable named AMBARI_SECURITY_MASTER_KEY or the start will prompt for the master key. Persist [y/n] (y)? y\r\nAdjusting ambari-server permissions and ownership...\r\nAmbari Server 'setup-security' completed successfully.\r\n{noformat}\r\n\r\n\u00a0",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "master-key option is missing from ambari-server setup action"
   },
   {
      "_id": "13138476",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-02-14 11:43:34",
      "description": "Currently quick links are grouped by host. These groups in their part should be grouped by namespace (if any).",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Quick links should be grouped by namespace"
   },
   {
      "_id": "13138448",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-02-14 10:01:31",
      "description": "Add Hosts(UI/API) is broken and the following error is seen .\r\n{code:java}\r\nError while bootstrapping:\r\nCannot run program \"/usr/lib/python2.6/site-packages/ambari_server/bootstrap.py\": error=2, No such file or directory\r\n{code}\r\n\u00a0",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Add Hosts is Failing with - Error while bootstrapping: Cannot run program \"/usr/lib/python2.6/site-packages/ambari_server/bootstrap.py\""
   },
   {
      "_id": "13138422",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-02-14 07:53:37",
      "description": "When *HDP 3.0.0* is installed, clients should have the ability to choose encrypted communication over RPC when talking to core hadoop components. Today, the properties that control this are:\r\n - {{core-site.xml : hadoop.rpc.protection = authentication}}\r\n - {{hdfs-site.xml : dfs.data.transfer.protection = authentication}}\r\n\r\nThe new value of\u00a0{{privacy}}\u00a0enables clients to choose an encrypted means of communication. By keeping\u00a0{{authentication}}\u00a0first, it will be taken as the default mechanism so that wire encryption is not automatically enabled by accident.\r\n\r\nThe following properties should be changed to add\u00a0{{privacy}}:\r\n - {{core-site.xml : hadoop.rpc.protection = authentication,privacy}}\r\n - {{hdfs-site.xml : dfs.data.transfer.protection = authentication,privacy}}\r\n\r\nThe following are cases when this needs to be performed:\r\n - During Kerberization (this case is covered by AMBARI-22803)\r\n - During a stack upgrade to any version of *HDP 3.0.0*, they should be automatically merged\r\n\r\nBlueprint deployment is not a scenario being covered here.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Update Hadoop RPC Encryption Properties During Upgrade"
   },
   {
      "_id": "13138219",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-02-13 15:54:33",
      "description": "If a group name or group access is missing from a kerberos descriptor ambari will throw an NPE during enable kerberos\r\n{code:java}\r\n\r\n13 Feb 2018 11:27:37,466  WARN [Server Action Executor Worker 39] ServerActionExecutor:471 - Task #39 failed to complete execution due to thrown exception: java.lang.NullPointerException:null\r\njava.lang.NullPointerException\r\n\tat org.apache.ambari.server.controller.KerberosHelperImpl.addIdentities(KerberosHelperImpl.java:1601)\r\n\tat org.apache.ambari.server.serveraction.kerberos.AbstractPrepareKerberosServerAction.processServiceComponents(AbstractPrepareKerberosServerAction.java:177)\r\n\tat org.apache.ambari.server.serveraction.kerberos.AbstractPrepareKerberosServerAction.processServiceComponentHosts(AbstractPrepareKerberosServerAction.java:87)\r\n\tat org.apache.ambari.server.serveraction.kerberos.PrepareKerberosIdentitiesServerAction.execute(PrepareKerberosIdentitiesServerAction.java:128)\r\n\tat org.apache.ambari.server.serveraction.ServerActionExecutor$Worker.execute(ServerActionExecutor.java:550)\r\n\tat org.apache.ambari.server.serveraction.ServerActionExecutor$Worker.run(ServerActionExecutor.java:466)\r\n\tat java.lang.Thread.run(Thread.java:748){code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "NullPointerException in KerberosHelperImpl.addIdentities"
   },
   {
      "_id": "13138138",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-02-13 11:40:54",
      "description": "- HDFS components should be grouped by namespace\r\n- Service summary page should have separate tab for each namespace",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Add namespace-specific layout for service summary page"
   },
   {
      "_id": "13138117",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-02-13 09:27:11",
      "description": "STR:\r\n # In the cluster, click add service\r\n # Select the remaining services to be added (Pig, Knox, Logsearch, RangerKMS, Zeppelin) and click Next\r\n # Accept Defaults and Select Next on Assign Masters page\r\n\r\nIn the Assign Slaves and Clients page, there is an empty page.\r\n\r\nAdding services individually does not hit this issue.\r\n\r\nThere are some error logs in the console:\r\n{code:java}\r\nUncaught TypeError: Cannot read property 'get' of undefined\r\nat app.js:38709\r\nat Array.forEach (<anonymous>)\r\nat app.js:38707\r\nat Class.forEach (vendor.js:18038)\r\nat app.js:38706\r\nat Array.forEach (<anonymous>)\r\nat Class.enableCheckboxesForDependentComponents (app.js:38705)\r\nat Class.renderSlaves (app.js:38671)\r\nat Class.render (app.js:38646)\r\nat Class.loadStep (app.js:38569)\r\n{code}\r\nCalls to server made during while navigating to Assign Slaves and Clients page",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "'Assign Slaves & Clients' page is empty when 3 or more services selected while adding multiple services"
   },
   {
      "_id": "13137750",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         }
      ],
      "created": "2018-02-11 23:53:42",
      "description": "If ambari-agent was started from bash script (for example), this script will be killed on ambari-agent stop.\r\nIssue prevents some automatization scenarios.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Ambari agent kills parent process on stop"
   },
   {
      "_id": "13137634",
      "assignee": "adoroszlai",
      "components": [],
      "created": "2018-02-10 15:45:43",
      "description": "Apache Rat 0.12 can automatically exclude patterns from SCM ignore files ({{.gitignore}} in Ambari's case) from its check.  See RAT-171 for details.\r\n\r\nBenefits:\r\n\r\n# No need to duplicate the exclude information in the {{apache-rat-plugin}}'s configuration.\r\n# Improved run time for non-clean workdir, since it can exclude everything under {{target}}.\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Upgrade Apache Rat to 0.12"
   },
   {
      "_id": "13137446",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-02-09 14:08:49",
      "description": "Subprocess has problem when run in multithreaded environment. As stated by developers it should not be used in such env.\r\nAs a result Ambari done multiple patches to subprocess. However still we are having multithreading problems with it.\r\n\r\nThis jira targets moving from Subprocess to Subprocess32 (a port of Python3.0 subprocess) which support multithreaded execution.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Heartbeat gets lost due to subprocess lock"
   },
   {
      "_id": "13137432",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-02-09 12:53:15",
      "description": "The UI must allow changing the repo_id field when enabling RH Satellite.\u00a0it just needs to be a text box, don't allow (trimmed) empty strings or blanks. Each repo must have an ID. Text inputs only count for redhat/centos. (Ubuntu, suse, etc don't have this).",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "UI Install is unable to work with 'Redhat Satellite/Spacewalk' as local repository"
   },
   {
      "_id": "13137326",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-02-09 02:19:16",
      "description": "spnego.service.keytab is getting deleted upon deleting components.\r\n\r\nSteps to reproduce :\r\n# Add additional \"livy\" component to some host in the cluster\r\n# Delete added \"livy\" component\r\n# Deletion of livy is deleting /etc/security/keytabs/spnego.service.keytab as well\r\n\r\n\r\nThe cause of this is due to an invalid check to determine if a Kerberos identity is a reference or no at \r\n{code:title=org.apache.ambari.server.state.kerberos.AbstractKerberosDescriptorContainer#getIdentitiesSkipReferences}\r\n  public List<KerberosIdentityDescriptor> getIdentitiesSkipReferences() {\r\n    return nullToEmpty(getIdentities())\r\n      .stream()\r\n      .filter(identity -> !identity.getReferencedServiceName().isPresent() && identity.getName() != null && !identity.getName().startsWith(\"/\"))\r\n      .collect(toList());\r\n  }\r\n{code}\r\n\r\nThe fixed code should be\r\n\r\n{code:title=org.apache.ambari.server.state.kerberos.AbstractKerberosDescriptorContainer#getIdentitiesSkipReferences}\r\n  public List<KerberosIdentityDescriptor> getIdentitiesSkipReferences() {\r\n    return nullToEmpty(getIdentities())\r\n      .stream()\r\n.filter(identity -> !identity.getReferencedServiceName().isPresent() && !identity.isReference())      .collect(toList());\r\n  }\r\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "SPNEGO service keytab is getting deleted upon deleting component from host"
   },
   {
      "_id": "13137290",
      "assignee": "smolnar",
      "components": [],
      "created": "2018-02-08 23:06:22",
      "description": "Currently, only few properties from Container-executor.cfg can be managed via ambari UI. \r\nContainer-executor.cfg should be handled similar to yarn-env.sh in ambari.\r\nThis way ambari ui can manage all config properties for Container-executor.cfg",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "All Container-executor.cfg properties should be managed by ambari ui"
   },
   {
      "_id": "13137277",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12331412",
            "id": "12331412",
            "name": "ambari-sever"
         }
      ],
      "created": "2018-02-08 22:11:03",
      "description": "Download client configs API failing with 500 server error\r\n{code:java}\r\nhttp://<AMBARI_SERVER>:<PORT>/api/v1/clusters/cl1/components?format=client_config_tar\r\nhttp://<AMBARI_SERVER>:<PORT>/api/v1/clusters/cl1/hosts/<HOST_NAME>/host_components?format=client_config_tar\r\n\r\n{ \"status\": 500, \"message\": \"org.apache.ambari.server.controller.spi.SystemException: Execution of \\\"ambari-python-wrap /var/lib/ambari-server/resources/common-services/KERBEROS/1.10.3-10/package/scripts/kerberos_client.py generate_configs /var/lib/ambari-server/data/tmp/KERBEROS_CLIENT2999359502875665328-configuration.json /var/lib/ambari-server/resources/common-services/KERBEROS/1.10.3-10/package /var/lib/ambari-server/data/tmp/structured-out.json INFO /var/lib/ambari-server/data/tmp\\\" returned 1. java.lang.Throwable: Traceback (most recent call last):\\n File \\\"/var/lib/ambari-server/resources/common-services/KERBEROS/1.10.3-10/package/scripts/kerberos_client.py\\\", line 20, in <module>\\n from kerberos_common import *\\n File \\\"/var/lib/ambari-server/resources/common-services/KERBEROS/1.10.3-10/package/scripts/kerberos_common.py\\\", line 32, in <module>\\n from ambari_agent import Constants\\nImportError: No module named ambari_agent\\n\" }\r\n\r\n\r\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Download client configs API failing with 500 server error"
   },
   {
      "_id": "13137257",
      "assignee": "smolnar",
      "components": [],
      "created": "2018-02-08 20:52:17",
      "description": "{code:title=org/apache/ambari/server/state/kerberos/KerberosKeytabDescriptor.java:466}\r\n    if (!owner.isEmpty()) {\r\n      map.put(KEY_GROUP, group);\r\n    }\r\n{code}\r\nThe if statement checks wrong variable.\r\n\r\nShould read\r\n{code}\r\n    if (!group.isEmpty()) {\r\n      map.put(KEY_GROUP, group);\r\n    }\r\n{code}\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Wrong variable in KerberosKeytabDescriptor#toMap()"
   },
   {
      "_id": "13137130",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-02-08 11:37:11",
      "description": "Debian stackdeploys failing with \"ambari-agent: command not found\" errors even\nthough ambari-agent is installed.\n\nFrom a debian cluster:\n\n    \n    \n    \r\n    root@ctr-e137-1514896590304-63273-01-000006:~# dpkg-query -l | grep ambari\r\n    ii  ambari-agent                                  2.6.2.0-45                        amd64        Ambari Agent\r\n    root@ctr-e137-1514896590304-63273-01-000006:~# find / -name ambari-agent\r\n    /run/ambari-agent\r\n    /usr/lib/ambari-agent\r\n    /var/log/ambari-agent\r\n    /var/lib/ambari-agent\r\n    /var/lib/ambari-agent/bin/ambari-agent\r\n    /etc/init.d/ambari-agent\r\n    /etc/ambari-agent\r\n    /grid/0/log/ambari-agent\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Debian stackdeploys failing with \"ambari-agent: command not found\" errors"
   },
   {
      "_id": "13137126",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-02-08 11:18:22",
      "description": "See screenshot",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Service-auto start page update of UI"
   },
   {
      "_id": "13137085",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-02-08 08:14:10",
      "description": "When a config group exists with service_name = null, ambari will throw a NullPointerException after removing a service. Ambari tries to remove config groups after deleting a service which causes the NPE",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari throws NPE when deleting a service"
   },
   {
      "_id": "13136968",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-02-07 21:51:34",
      "description": "Deactivate unsupported stack definitions in Ambari.  This includes HDP versions before 2.6.\r\n\r\n{noformat:title=Active Stacks}\r\n./3.0/metainfo.xml:    <active>true</active>\r\n./2.6/metainfo.xml:    <active>true</active>\r\n./2.5/metainfo.xml:    <active>true</active>\r\n./2.4/metainfo.xml:    <active>true</active>\r\n./2.3/metainfo.xml:    <active>true</active>\r\n{noformat}\r\n\r\nThere is no enforcement of minimum stack level during the upgrade process. The user is expected to have performed the necessary actions to meet the _documented_ minimum stack level. \r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Deactivate unsupported stack definitions in Ambari"
   },
   {
      "_id": "13136953",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-02-07 20:29:12",
      "description": "# Install HDP 2.6.4.0 stack with Ambari 2.6.1\r\n # Update the current repository versions with the following body on ambari-2.6.1\r\n\r\n{code:java}\r\nPUT http://<ambari-server>:8080/api/v1/stacks/HDP/versions/2.6/repository_versions/1\r\n{\r\n \"operating_systems\": [\r\n {\r\n \"OperatingSystems\": {\r\n \"os_type\": \"debian7\",\r\n \"ambari_managed_repositories\": true\r\n },\r\n \"repositories\": [\r\n {\r\n \"Repositories\": {\r\n \"base_url\": \"http://public-repo-1.hortonworks.com/HDP/debian7/2.x/updates/2.6.0.3\",\r\n \"repo_id\": \"HDP-2.6\",\r\n \"repo_name\": \"HDP\"\r\n }\r\n },\r\n {\r\n \"Repositories\": {\r\n \"base_url\": \"http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.21/repos/debian6\",\r\n \"repo_id\": \"HDP-UTILS-1.1.0.21\",\r\n \"repo_name\": \"HDP-UTILS\"\r\n }\r\n }\r\n ]\r\n },\r\n {\r\n \"OperatingSystems\": {\r\n \"os_type\": \"redhat6\",\r\n \"ambari_managed_repositories\": true\r\n },\r\n \"repositories\": [\r\n {\r\n \"Repositories\": {\r\n \"base_url\": \"http://public-repo-1.hortonworks.com/HDP/centos6/2.x/updates/2.4.2.0/\",\r\n \"repo_id\": \"HDP-2.6\",\r\n \"repo_name\": \"HDP\"\r\n }\r\n },\r\n {\r\n \"Repositories\": {\r\n \"base_url\": \"http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.21/repos/centos6\",\r\n \"repo_id\": \"HDP-UTILS-1.1.0.21\",\r\n \"repo_name\": \"HDP-UTILS\"\r\n }\r\n }\r\n ]\r\n },\r\n {\r\n \"OperatingSystems\": {\r\n \"os_type\": \"redhat7\",\r\n \"ambari_managed_repositories\": true\r\n },\r\n \"repositories\": [\r\n {\r\n \"Repositories\": {\r\n \"base_url\": \"http://public-repo-1.hortonworks.com/HDP/centos7/2.x/updates/2.6.0.3\",\r\n \"repo_id\": \"HDP-2.6\",\r\n \"repo_name\": \"HDP\"\r\n }\r\n },\r\n {\r\n \"Repositories\": {\r\n \"base_url\": \"http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.21/repos/centos7\",\r\n \"repo_id\": \"HDP-UTILS-1.1.0.21\",\r\n \"repo_name\": \"HDP-UTILS\"\r\n }\r\n }\r\n ]\r\n },\r\n {\r\n \"OperatingSystems\": {\r\n \"os_type\": \"suse11\",\r\n \"ambari_managed_repositories\": true\r\n },\r\n \"repositories\": [\r\n {\r\n \"Repositories\": {\r\n \"base_url\": \"http://public-repo-1.hortonworks.com/HDP/suse11sp3/2.x/updates/2.6.0.3\",\r\n \"repo_id\": \"HDP-2.6\",\r\n \"repo_name\": \"HDP\"\r\n }\r\n },\r\n {\r\n \"Repositories\": {\r\n \"base_url\": \"http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.21/repos/suse11sp3\",\r\n \"repo_id\": \"HDP-UTILS-1.1.0.21\",\r\n \"repo_name\": \"HDP-UTILS\"\r\n }\r\n }\r\n ]\r\n },\r\n {\r\n \"OperatingSystems\": {\r\n \"os_type\": \"suse12\",\r\n \"ambari_managed_repositories\": true\r\n },\r\n \"repositories\": [\r\n {\r\n \"Repositories\": {\r\n \"base_url\": \"http://public-repo-1.hortonworks.com/HDP/suse11sp3/2.x/updates/2.6.0.3\",\r\n \"repo_id\": \"HDP-2.6\",\r\n \"repo_name\": \"HDP\"\r\n }\r\n },\r\n {\r\n \"Repositories\": {\r\n \"base_url\": \"http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.21/repos/suse11sp3\",\r\n \"repo_id\": \"HDP-UTILS-1.1.0.21\",\r\n \"repo_name\": \"HDP-UTILS\"\r\n }\r\n }\r\n ]\r\n },\r\n {\r\n \"OperatingSystems\": {\r\n \"os_type\": \"ubuntu12\",\r\n \"ambari_managed_repositories\": true\r\n },\r\n \"repositories\": [\r\n {\r\n \"Repositories\": {\r\n \"base_url\": \"http://public-repo-1.hortonworks.com/HDP/ubuntu12/2.x/updates/2.6.0.3\",\r\n \"repo_id\": \"HDP-2.6\",\r\n \"repo_name\": \"HDP\"\r\n }\r\n },\r\n {\r\n \"Repositories\": {\r\n \"base_url\": \"http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.21/repos/ubuntu12\",\r\n \"repo_id\": \"HDP-UTILS-1.1.0.21\",\r\n \"repo_name\": \"HDP-UTILS\"\r\n }\r\n }\r\n ]\r\n },\r\n {\r\n \"OperatingSystems\": {\r\n \"os_type\": \"ubuntu14\",\r\n \"ambari_managed_repositories\": true\r\n },\r\n \"repositories\": [\r\n {\r\n \"Repositories\": {\r\n \"base_url\": \"http://public-repo-1.hortonworks.com/HDP/ubuntu14/2.x/updates/2.6.0.3\",\r\n \"repo_id\": \"HDP-2.6\",\r\n \"repo_name\": \"HDP\"\r\n }\r\n },\r\n {\r\n \"Repositories\": {\r\n \"base_url\": \"http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.21/repos/ubuntu14\",\r\n \"repo_id\": \"HDP-UTILS-1.1.0.21\",\r\n \"repo_name\": \"HDP-UTILS\"\r\n }\r\n }\r\n ]\r\n },\r\n {\r\n \"OperatingSystems\": {\r\n \"os_type\": \"ubuntu16\",\r\n \"ambari_managed_repositories\": true\r\n },\r\n \"repositories\": [\r\n {\r\n \"Repositories\": {\r\n \"base_url\": \"http://public-repo-1.hortonworks.com/HDP/ubuntu16/2.x/updates/2.6.0.3\",\r\n \"repo_id\": \"HDP-2.6\",\r\n \"repo_name\": \"HDP\"\r\n }\r\n },\r\n {\r\n \"Repositories\": {\r\n \"base_url\": \"http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.21/repos/ubuntu16\",\r\n \"repo_id\": \"HDP-UTILS-1.1.0.21\",\r\n \"repo_name\": \"HDP-UTILS\"\r\n }\r\n }\r\n ]\r\n }\r\n ]\r\n}\r\n{code}\r\nResponse: 200 OK\r\n\r\nNavigating to the UI results in GPL fields missing.\r\n\r\nExpected: Error to be thrown when trying to update repos without the GPL repo when stack >= HDP-2.6.4.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "[API] Updating current stack repo without GPL repos in the body does not throw any error"
   },
   {
      "_id": "13136950",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-02-07 20:19:22",
      "description": "Create UpgradeCatalog270 to migrate data.\r\n\r\nThis will entail renaming \\{{org.apache.ambari.server.upgrade.UpgradeCatalog300}} to \\{{org.apache.ambari.server.upgrade.UpgradeCatalog270}} and making adjustments as needed.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Create UpgradeCatalog270 to migrate data"
   },
   {
      "_id": "13136578",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-02-06 14:37:44",
      "description": "Move and align checkboxes to the left in Select configuration Group Hosts modal.\r\nSee screenshot.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Style edits of Service Configuration Group modal"
   },
   {
      "_id": "13136552",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-02-06 12:26:37",
      "description": "While trying to enable the hive interactive plugin identified\nthat Ambari was looking in the incorrect directory when trying to locate the\nusers keytab.\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Unable to enable hive interactive, LLAP, on our Ambari 2.5.2 managed cluster"
   },
   {
      "_id": "13136350",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-02-05 18:35:04",
      "description": "See screenshots",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Dashboard-Metrics page style edits"
   },
   {
      "_id": "13136308",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-02-05 16:42:06",
      "description": "Looks like Oracle DDL is broken\r\n{code}\r\nERROR at line 1:\r\nORA-00904: \"CREATE_TIMESTAMP\": invalid identifier\r\n\r\n\r\ninsert into user_authentication(user_authentication_id, user_id, authentication_type, authentication_key, create_time, update_time)\r\n*\r\nERROR at line 1:\r\nORA-02291: integrity constraint (AMBARI.FK_USER_AUTHENTICATION_USERS) violated\r\n- parent key not found\r\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Oracle DDL is broken at trunk"
   },
   {
      "_id": "13136298",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-02-05 16:05:48",
      "description": "The upgrade behavior which figures out the restart order for the Namenodes needs to become namespace aware to support NN federation in Ambari.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Add ability to MasterHostResolver to resolve by namespace at a time"
   },
   {
      "_id": "13136285",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-02-05 14:21:19",
      "description": "# When deleting a host, after components deletion config changes not triggered, as opposed to when they removed individually.\r\n # When adding/deleting component config modification triggered before actual call to add/delete a component, so even if the call fails then configs would be modified",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Host details page: components not reconfigured after deleting their host"
   },
   {
      "_id": "13136277",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12329612",
            "id": "12329612",
            "name": "ambari-logsearch"
         }
      ],
      "created": "2018-02-05 13:59:09",
      "description": "- Move 'Capture' button from filters panel to top menu\r\n- Buttons order: Undo, Redo, History, Filter, Capture, Refresh",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Log Search UI: move Capture button to top menu"
   },
   {
      "_id": "13136237",
      "assignee": "smolnar",
      "components": [],
      "created": "2018-02-05 10:16:48",
      "description": "Since we use Amabri's REST API in the\u00a0_setup-ldap_\u00a0tool to persists its outcome into the DB we require the end-user to type his/her Ambari username and password during the user input phase.\r\n This makes automated integration tests very hard to implement.\r\n\r\nThe solution is to add two new CLI option names for _setup-ldap_ (similarly\u00a0to the _sync-ldap_ tool):\r\n{code:java}\r\n--ldap-setup-admin-name\r\n--ldap-setup-admin-password{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "ldap",
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Add Ambari admin/pw CLI options for setup-ldap tool"
   },
   {
      "_id": "13136235",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12329612",
            "id": "12329612",
            "name": "ambari-logsearch"
         }
      ],
      "created": "2018-02-05 10:14:26",
      "description": "User should be able to filter access logs by username",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Log Search UI: implement filter by username for access logs"
   },
   {
      "_id": "13135824",
      "assignee": "aonishuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-02-02 17:57:18",
      "description": "Steps to reproduce the issue\r\n\r\n1. Install Ambari2.5.x and install HDP on that.\r\n\r\n2. Now Upgrade ambari to 2.6.1 version.\r\n\r\n3. Now try to register HDP version with VDF file - Save button is not enabled (also UI does not load repo URLs and)\r\n\r\n4. In JS it fails with below error\r\n\r\nCannot read property 'gpl.license.accepted' of undefined\r\nWhat is expected: UI should properly show the message that gpl license needs to be enabled. also Upgrade should take care of adding this property if it is needed.\r\n\r\nWorkaround for this is : add \"gpl.license.accepted=true\" to ambari.proeprties and then restart should fix the problem",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Not able to register new HDP version after upgrading to Ambari2.6.1"
   },
   {
      "_id": "13135750",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-02-02 11:48:46",
      "description": "While working on AMBARI-22797\u00a0we modified the following option names for the setup-ldap tool in AMBARI server:\r\n # {{ldap-url}}\u00a0became\u00a0{{ldap-primary-host}}\u00a0and\u00a0{{ldap-primary-port}}\r\n # {{ldap-secondary-url}}\u00a0became\u00a0{{ldap-secondary-host}}\u00a0and\u00a0{{ldap-secondary-port}}\r\n\r\nTo support backward compatibility we need to support old option names too.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Support old option names in setup-ldap tool"
   },
   {
      "_id": "13135513",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-02-01 18:13:12",
      "description": "Update kerberos-env/admin_server_host description to specify KCD admin host must be a FQDN.\r\n\r\nThe following needs to be changed in\r\n* {{common-services/KERBEROS/1.10.3-10/configuration/kerberos-env.xml:168}}\r\n* {{common-services/KERBEROS/1.10.3-30/configuration/kerberos-env.xml:168}}\r\n{code}\r\nThe IP address or FQDN for the KDC Kerberos administrative host. Optionally a port number may be included.\r\n{code}\r\nTo \r\n{code}\r\nThe FQDN for the KDC Kerberos administrative host. Optionally a port number may be included.\r\n{code}\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Update kerberos-env/admin_server_host description to specify KCD admin host must be a FQDN"
   },
   {
      "_id": "13135482",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12329612",
            "id": "12329612",
            "name": "ambari-logsearch"
         }
      ],
      "created": "2018-02-01 16:36:40",
      "description": "History of user's actions should be available for viewing and undoing/redoing.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Log Search UI: implement 'History' functionality"
   },
   {
      "_id": "13135406",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-02-01 12:42:01",
      "description": "How the configs and alerts definitions are consumed by the alerts framework\nhas completely changed on branch-3.0-perf so most alert-related tests require\nrewriting.\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Fix TestAlertSchedulerHandler.py and TestAlerts.py"
   },
   {
      "_id": "13135165",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-01-31 18:34:17",
      "description": "+*Steps to reproduce:*+\r\n\r\nrun _ambari-server setup-ldap_ and set primary host:port to \"myHost:1\"\r\n\r\nrun _ambari-server sync-ldap --all_\r\n\r\n+*Actual results:*+\r\n\r\nthe synch process will fail due to a CommunicationException saying that *localhost:33389* is not reachable.\r\n\r\n+*Expected results:*+\r\n\r\nthe synch process will fail due to a CommunicationException saying that\u00a0*myHost:1*\u00a0is not reachable.\r\n\r\n+*Additional information:*+\r\n\r\nin ambari-server.log I saw that\u00a0AmbariConfigurationChangedEvent has been triggered and processed when setup-ldap updated the DB (see org.apache.ambari.server.ldap.service.AmbariLdapConfigurationProvider; however the get() method does not seem to be called when needed; it's maybe a Guice injection scope issue)",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "LDAP configuration is not reloaded in Guice"
   },
   {
      "_id": "13135012",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-01-31 08:14:47",
      "description": "LDAP sync fails with 'LDAP is not configured' error after configuring LDAP.\r\n\r\n*Steps to Reproduce*\r\n # ambari-server setup-ldap\r\n # ambari-server sync-ldap --all\r\n\r\n{noformat:title=Example}\r\n[root@c6404 ~]# ambari-server sync-ldap --all\r\nUsing python  /usr/bin/python\r\nSyncing with LDAP...\r\nERROR: Exiting with exit code 1.\r\nREASON: LDAP is not configured. Run 'ambari-server setup-ldap' first.\r\n{noformat}\r\n*Cause*\r\nThe ambari-server script is looking for the value of\u00a0{{ambari.ldap.authentication.enabled}}\u00a0(from the the\u00a0{{ambari.properties}}\u00a0file. The value is expected to be \"true\". Since\u00a0{{ambari.ldap.authentication.enabled}}\u00a0is not being set in the ambari.properties file, the check is failing and thus, the unexpected error.\r\n\r\nSee\u00a0{{ambari-server/src/main/python/ambari_server/setupSecurity.py:298}}.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "LDAP sync fails with 'LDAP is not configured' error after configuring LDAP"
   },
   {
      "_id": "13134848",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-01-30 18:37:45",
      "description": "Long cannot be cast to String error when changing a user's password:\r\n{noformat}\r\n30 Jan 2018 18:21:11,308 ERROR [ambari-client-thread-38] AbstractResourceProvider:353 - Caught AmbariException when modifying a resource\r\norg.apache.ambari.server.AmbariException: java.lang.Long cannot be cast to java.lang.String\r\nat org.apache.ambari.server.controller.internal.UserResourceProvider.addOrUpdateLocalAuthenticationSource(UserResourceProvider.java:559)\r\nat org.apache.ambari.server.controller.internal.UserResourceProvider.updateUsers(UserResourceProvider.java:486)\r\nat org.apache.ambari.server.controller.internal.UserResourceProvider.access$200(UserResourceProvider.java:69)\r\nat org.apache.ambari.server.controller.internal.UserResourceProvider$3.invoke(UserResourceProvider.java:264)\r\nat org.apache.ambari.server.controller.internal.UserResourceProvider$3.invoke(UserResourceProvider.java:261)\r\nat org.apache.ambari.server.controller.internal.AbstractResourceProvider.invokeWithRetry(AbstractResourceProvider.java:465)\r\nat org.apache.ambari.server.controller.internal.AbstractResourceProvider.modifyResources(AbstractResourceProvider.java:346)\r\nat org.apache.ambari.server.controller.internal.UserResourceProvider.updateResources(UserResourceProvider.java:261)\r\nat org.apache.ambari.server.controller.internal.ClusterControllerImpl.updateResources(ClusterControllerImpl.java:317)\r\n...\r\n{noformat}\r\n\r\n*Steps to reproduce*\r\n # Create a {{LOCAL}}\u00a0user account (using either the Ambari UI or REST API)\r\n{noformat}\r\nPOST /api/v1/users\r\n{noformat}\r\n{code:title=Payload}\r\n{ \r\n  \"Users\" : {\r\n    \"user_name\" : \"myuser\",\r\n    \"password\" : \"hadoop\"\r\n  }\r\n}\r\n{code}\r\n # Change the user's password (using either the Ambari UI or REST API via the users entry point)\r\n{noformat}\r\nPUT /api/v1/users/myuser\r\n{noformat}\r\n{code:title=Payload}\r\n{ \r\n  \"Users\" : {\r\n    \"old_password\" : \"hadoop\"\r\n    \"password\" : \"hadoop1234\"\r\n  }\r\n}\r\n{code}\r\n{code:title=Response}\r\n{\r\n  \"status\" : 500,\r\n  \"message\" : \"org.apache.ambari.server.controller.spi.SystemException: An internal system exception occurred: java.lang.Long cannot be cast to java.lang.String\"\r\n}\r\n{code}\r\n\r\n*Cause*\r\nWhen building the internal request to set the user's password via the UserAuthenticationSource resource provider, the authentication source key is set as a {{Long}}. The UserAuthenticationSource resource provider expects this value to be a {{String}}.\r\n\r\n*Solution*\r\nThe User resource provider should set the {{AuthenticationSourceInfo/source_id}} as a {{String}} value.\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Long cannot be cast to String error when changing a user's password"
   },
   {
      "_id": "13134830",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-01-30 17:44:02",
      "description": "Missing user_authentication_id_seq in ambari_sequences table upon upgrade.\r\n\r\nThe missing sequence should be added using a value greater than the largest\u00a0{{user_authentication.user_authentication_id}}. For example:\r\n{code:sql}\r\ninsert into ambari_sequences (sequence_name, sequence_value) \r\n  select 'user_authentication_id_seq', max(user_authentication_id) + 1 from user_authentication;{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Missing user_authentication_id_seq in ambari_sequences table upon upgrade"
   },
   {
      "_id": "13134730",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-01-30 11:52:20",
      "description": "*STR:*\r\n# Delete a host from ambari-web ui that has only slave components like datanode, nodemanager, etc \r\n# This action will make API calls to delete host components and then delete host api\r\n# Somehow environment should be configured in a way such that delete host component API succeeds but delete host api errors out\r\n\r\n*Expected Result:* Host should still exist with no components. NO config changes should happen as none were previewed and slave component deletion generally does not result in config changes\r\n\r\n*Actual Result:* ZK quorum related config changes happen in all services",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Ambari makes unrelated changes to zookeeper quorum config in all services when delete host action fails"
   },
   {
      "_id": "13134591",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-01-29 22:35:50",
      "description": "Disable consecutive authentication failure account lockout feature by default. This feature locks an account after a configured number of failed authentication attempts. By defaulting {{authentication.local.max.failures}} to {{0}}, this feature will be disabled by default.\r\n\r\nIf enabled, a user account may be locked out due to number of authentication failures. There is a REST API call to unlock the user; however a user interface change will not be available until Ambari 3.x.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "authentication",
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Disable consecutive authentication failure account lockout feature by default"
   },
   {
      "_id": "13134576",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-01-29 21:49:26",
      "description": "Deploy a cluster via blueprint based on one or more MPacks that have already been manually installed.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "blueprints",
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Blueprint cluster creation using manually installed mpacks"
   },
   {
      "_id": "13134510",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-01-29 17:52:55",
      "description": "jdbc related properties like:\r\n{noformat}\r\nprevious_custom_mysql_jdbc_name, custom_mysql_jdbc_name, custom_postgres_jdbc_name, previous_custom_postgres_jdbc_name\r\n{noformat}\r\nalso\r\n{noformat}\r\ngpl_license_accepted\r\n{noformat}\r\nare missing.\r\n\r\nWe should sent them in metadata/ambariLevelParams in order for Ranger andother db dependent services to work properly.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Ranger fails to install (branch-3.0-perf)"
   },
   {
      "_id": "13134465",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-01-29 15:04:43",
      "description": "# We should add a new state \"Data Not Available\"\r\n# Roundup metric values based on data type",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Add new state for Not Available data in Heatmap widget"
   },
   {
      "_id": "13134432",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-01-29 12:21:03",
      "description": "The following error occurred in Ambari 3.0.0 when I tried to install Hive from HDP 3.0 (v2.1.0.3.0):\r\n\r\n\u00a0\r\n{code:java}\r\nTraceback (most recent call last):\r\n\u00a0 File \"/var/lib/ambari-server/resources/scripts/stack_advisor.py\", line 167, in <module>\r\n\u00a0 \u00a0 main(sys.argv)\r\n\u00a0 File \"/var/lib/ambari-server/resources/scripts/stack_advisor.py\", line 116, in main\r\n\u00a0 \u00a0 result = stackAdvisor.recommendConfigurations(services, hosts)\r\n\u00a0 File \"/var/lib/ambari-server/resources/scripts/../stacks/stack_advisor.py\", line 1565, in recommendConfigurations\r\n\u00a0 \u00a0 serviceAdvisor.getServiceConfigurationRecommendations(configurations, clusterSummary, services, hosts)\r\n\u00a0 File \"/var/lib/ambari-server/resources/common-services/HIVE/2.1.0.3.0/service_advisor.py\", line 126, in getServiceConfigurationRecommendations\r\n\u00a0 \u00a0 recommender.recommendHiveConfigurationsFromHDP21(configurations, clusterData, services, hosts)\r\n  File \"/var/lib/ambari-server/resources/common-services/HIVE/2.1.0.3.0/service_advisor.py\", line 209, in recommendHiveConfigurationsFromHDP21\r\n    meta = self.get_service_component_meta(\"HIVE\", \"WEBHCAT_SERVER\", services)\r\nAttributeError: 'HiveRecommender' object has no attribute 'get_service_component_meta'\r\n{code}\r\n\u00a0",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Error while installing Hive 2.1.0.3.0 from Ambari 3.0.0"
   },
   {
      "_id": "13134423",
      "assignee": "aonishuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-01-29 11:33:52",
      "description": "*STR*\r\n# Install a cluster with Ambari-2.6.2 and HDP-2.6.4.0\r\n# Go the host (say host1) running Nimbus component and restart Nimbus\r\n# Fill up the disk space on host1 (in my test, the disk space was filled up on the host running Nimbus component)\r\n# Try to restart Nimbus. Nimbus restart expectedly fails with error:\r\n{code}\r\nCaught an exception while executing custom service command: <type 'exceptions.IOError'>: [Errno 28] No space left on device; [Errno 28] No space left on device\r\n{code}\r\n# Now free up the disk space on host1 and try to restart Nimbus\r\n\r\n\u00a0\r\n\r\n*Result*\r\nNimbus restart command hangs and eventually times out\r\n\r\nLooks like the issue is because the action queue is unable to create new command for Nimbus restart.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available",
         "system_test"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Agent commands hang even after freeing up disk space on the host"
   },
   {
      "_id": "13134402",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-01-29 09:46:32",
      "description": "Hive should handle a customized Zookeeper service principal name.\r\n\r\nCurrently this is not supported due to hardcoded and implicit values expecting the Zookeeper service principal name to be\u00a0{{zookeeper/_HOST}}\u00a0as opposed to something like\u00a0{{zookeeper-mycluster/_HOST}}.\r\n\r\nThe following changes need to be made:\r\n * {{-Dzookeeper.sasl.client.username=<ZOOKEEPER_PRINCPAL_NAME>}}\u00a0should be added to\u00a0{{HIVE_OPTS}}\r\n * Other changes may be needed to handle Hive-related tool and JDBC/ODBC implementations",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "kerberos",
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Hive should handle a customized Zookeeper service principal name"
   },
   {
      "_id": "13134115",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-01-26 21:33:53",
      "description": "First prereq not displaying for Free IPA method in Enable Kerberos Wizard.\r\n\r\n !image-2018-01-26-16-32-14-802.png! \r\n\r\nThis is due to a typo at \r\n{code:title=ambari-web/app/controllers/main/admin/kerberos/step1_controller.js:88}\r\n          dsplayText: Em.I18n.t('admin.kerberos.wizard.step1.option.ipa.condition.1'),\r\n{code}\r\n\r\nThe code should be \r\n{code:title=ambari-web/app/controllers/main/admin/kerberos/step1_controller.js:88}\r\n          displayText: Em.I18n.t('admin.kerberos.wizard.step1.option.ipa.condition.1')\r\n{code}\r\n\r\nNotice \"dsplayText\" vs \"displayText\".\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "First prereq not displaying for Free IPA method in Enable Kerberos Wizard"
   },
   {
      "_id": "13134015",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-01-26 13:49:12",
      "description": "/grid/0/log/**hdfs//hadoop-hdfs-root-\nnfs3-ctr-e137-1514896590304-8236-01-000002.hwx.site.out**\n\n    \n    \n    \r\n    [root@ctr-e137-1514896590304-8236-01-000002 ~]# cd /grid/0/log/hdfs/\r\n    [root@ctr-e137-1514896590304-8236-01-000002 hdfs]# ls -ltr\r\n    total 500\r\n    -rw------- 1 root root        0 Jan  9 22:52 hadoop-hdfs-root-nfs3-ctr-e137-1514896590304-8236-01-000002.hwx.site.out\r\n    -rw------- 1 hdfs hadoop      0 Jan  9 22:52 SecurityAuth.audit\r\n    -rw-r--r-- 1 root root      714 Jan  9 22:52 privileged-root-nfs3-ctr-e137-1514896590304-8236-01-000002.hwx.site.out\r\n    -rw------- 1 root root      117 Jan  9 23:00 privileged-root-nfs3-ctr-e137-1514896590304-8236-01-000002.hwx.site.err\r\n    drwxrwxr-x 2 root hadoop   4096 Jan  9 23:54 root\r\n    drwxr-xr-x 2 hdfs hadoop   4096 Jan  9 23:59 hdfs\r\n    -rw------- 1 hdfs hadoop 493804 Jan 10 00:58 hadoop-hdfs-root-nfs3-ctr-e137-1514896590304-8236-01-000002.hwx.site.log\r\n    [root@ctr-e137-1514896590304-8236-01-000002 hdfs]# ps -ef| grep nfs\r\n    root       10637       1  0 Jan09 ?        00:00:00 jsvc.exec -Dproc_nfs3 -outfile /grid/0/log/hdfs//hadoop-hdfs-root-nfs3-ctr-e137-1514896590304-8236-01-000002.hwx.site.out -errfile /grid/0/log/hdfs//privileged-root-nfs3-ctr-e137-1514896590304-8236-01-000002.hwx.site.err -pidfile /var/run/hadoop//hadoop-hdfs-root-nfs3.pid -nodetach -user hdfs -cp /usr/hdp/3.0.0.0-691/hadoop/conf:/usr/hdp/3.0.0.0-691/hadoop/lib/*:/usr/hdp/3.0.0.0-691/hadoop/.//*:/usr/hdp/3.0.0.0-691/hadoop-hdfs/./:/usr/hdp/3.0.0.0-691/hadoop-hdfs/lib/*:/usr/hdp/3.0.0.0-691/hadoop-hdfs/.//*:/usr/hdp/3.0.0.0-691/hadoop-mapreduce/lib/*:/usr/hdp/3.0.0.0-691/hadoop-mapreduce/.//*:/usr/hdp/3.0.0.0-691/hadoop-yarn/./:/usr/hdp/3.0.0.0-691/hadoop-yarn/lib/*:/usr/hdp/3.0.0.0-691/hadoop-yarn/.//*:/usr/hdp/3.0.0.0-691/tez/*:/usr/hdp/3.0.0.0-691/tez/lib/*:/usr/hdp/3.0.0.0-691/tez/conf:/usr/hdp/3.0.0.0-691/tez/doc:/usr/hdp/3.0.0.0-691/tez/hadoop-shim-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/hadoop-shim-2.8-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/lib:/usr/hdp/3.0.0.0-691/tez/man:/usr/hdp/3.0.0.0-691/tez/tez-api-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/tez-common-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/tez-dag-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/tez-examples-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/tez-ext-service-tests-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/tez-history-parser-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/tez-javadoc-tools-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/tez-job-analyzer-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/tez-mapreduce-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/tez-runtime-internals-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/tez-runtime-library-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/tez-tests-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/tez-yarn-timeline-cache-plugin-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/tez-yarn-timeline-history-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/tez-yarn-timeline-history-with-acls-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/tez-yarn-timeline-history-with-fs-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/ui:/usr/hdp/3.0.0.0-691/tez/lib/RoaringBitmap-0.4.9.jar:/usr/hdp/3.0.0.0-691/tez/lib/async-http-client-1.8.16.jar:/usr/hdp/3.0.0.0-691/tez/lib/commons-cli-1.2.jar:/usr/hdp/3.0.0.0-691/tez/lib/commons-codec-1.4.jar:/usr/hdp/3.0.0.0-691/tez/lib/commons-collections-3.2.2.jar:/usr/hdp/3.0.0.0-691/tez/lib/commons-collections4-4.1.jar:/usr/hdp/3.0.0.0-691/tez/lib/commons-io-2.4.jar:/usr/hdp/3.0.0.0-691/tez/lib/commons-lang-2.6.jar:/usr/hdp/3.0.0.0-691/tez/lib/commons-math3-3.1.1.jar:/usr/hdp/3.0.0.0-691/tez/lib/guava-11.0.2.jar:/usr/hdp/3.0.0.0-691/tez/lib/hadoop-hdfs-client-3.0.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/lib/hadoop-mapreduce-client-common-3.0.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/lib/hadoop-mapreduce-client-core-3.0.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/lib/hadoop-yarn-server-timeline-pluginstorage-3.0.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/lib/jersey-client-1.9.jar:/usr/hdp/3.0.0.0-691/tez/lib/jersey-json-1.9.jar:/usr/hdp/3.0.0.0-691/tez/lib/jettison-1.3.4.jar:/usr/hdp/3.0.0.0-691/tez/lib/jetty-6.1.26.hwx.jar:/usr/hdp/3.0.0.0-691/tez/lib/jetty-util-6.1.26.hwx.jar:/usr/hdp/3.0.0.0-691/tez/lib/jsr305-3.0.0.jar:/usr/hdp/3.0.0.0-691/tez/lib/metrics-core-3.1.0.jar:/usr/hdp/3.0.0.0-691/tez/lib/netty-3.6.2.Final.jar:/usr/hdp/3.0.0.0-691/tez/lib/protobuf-java-2.5.0.jar:/usr/hdp/3.0.0.0-691/tez/lib/servlet-api-2.5.jar:/usr/hdp/3.0.0.0-691/tez/lib/slf4j-api-1.7.10.jar:/usr/hdp/3.0.0.0-691/tez/lib/tez.tar.gz -Dhdp.version=3.0.0.0-691 -Djava.net.preferIPv4Stack=true -Dhdp.version=3.0.0.0-691 -Xmx1024m -Dhadoop.security.logger=ERROR,DRFAS -jvm server -Dyarn.log.dir=/grid/0/log/hdfs/ -Dyarn.log.file=hadoop-hdfs-root-nfs3-ctr-e137-1514896590304-8236-01-000002.hwx.site.log -Dyarn.home.dir=/usr/hdp/3.0.0.0-691/hadoop-yarn -Dyarn.root.logger=INFO,console -Djava.library.path=:/usr/hdp/3.0.0.0-691/hadoop/lib/native/Linux-amd64-64:/usr/hdp/3.0.0.0-691/hadoop/lib/native -Dhadoop.log.dir=/grid/0/log/hdfs/ -Dhadoop.log.file=hadoop-hdfs-root-nfs3-ctr-e137-1514896590304-8236-01-000002.hwx.site.log -Dhadoop.home.dir=/usr/hdp/3.0.0.0-691/hadoop -Dhadoop.id.str=root -Dhadoop.root.logger=INFO,RFA -Dhadoop.policy.file=hadoop-policy.xml org.apache.hadoop.hdfs.nfs.nfs3.PrivilegedNfsGatewayStarter\r\n    hdfs       25658   10637  0 Jan09 ?        00:06:37 jsvc.exec -Dproc_nfs3 -outfile /grid/0/log/hdfs//hadoop-hdfs-root-nfs3-ctr-e137-1514896590304-8236-01-000002.hwx.site.out -errfile /grid/0/log/hdfs//privileged-root-nfs3-ctr-e137-1514896590304-8236-01-000002.hwx.site.err -pidfile /var/run/hadoop//hadoop-hdfs-root-nfs3.pid -nodetach -user hdfs -cp /usr/hdp/3.0.0.0-691/hadoop/conf:/usr/hdp/3.0.0.0-691/hadoop/lib/*:/usr/hdp/3.0.0.0-691/hadoop/.//*:/usr/hdp/3.0.0.0-691/hadoop-hdfs/./:/usr/hdp/3.0.0.0-691/hadoop-hdfs/lib/*:/usr/hdp/3.0.0.0-691/hadoop-hdfs/.//*:/usr/hdp/3.0.0.0-691/hadoop-mapreduce/lib/*:/usr/hdp/3.0.0.0-691/hadoop-mapreduce/.//*:/usr/hdp/3.0.0.0-691/hadoop-yarn/./:/usr/hdp/3.0.0.0-691/hadoop-yarn/lib/*:/usr/hdp/3.0.0.0-691/hadoop-yarn/.//*:/usr/hdp/3.0.0.0-691/tez/*:/usr/hdp/3.0.0.0-691/tez/lib/*:/usr/hdp/3.0.0.0-691/tez/conf:/usr/hdp/3.0.0.0-691/tez/doc:/usr/hdp/3.0.0.0-691/tez/hadoop-shim-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/hadoop-shim-2.8-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/lib:/usr/hdp/3.0.0.0-691/tez/man:/usr/hdp/3.0.0.0-691/tez/tez-api-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/tez-common-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/tez-dag-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/tez-examples-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/tez-ext-service-tests-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/tez-history-parser-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/tez-javadoc-tools-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/tez-job-analyzer-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/tez-mapreduce-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/tez-runtime-internals-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/tez-runtime-library-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/tez-tests-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/tez-yarn-timeline-cache-plugin-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/tez-yarn-timeline-history-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/tez-yarn-timeline-history-with-acls-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/tez-yarn-timeline-history-with-fs-0.9.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/ui:/usr/hdp/3.0.0.0-691/tez/lib/RoaringBitmap-0.4.9.jar:/usr/hdp/3.0.0.0-691/tez/lib/async-http-client-1.8.16.jar:/usr/hdp/3.0.0.0-691/tez/lib/commons-cli-1.2.jar:/usr/hdp/3.0.0.0-691/tez/lib/commons-codec-1.4.jar:/usr/hdp/3.0.0.0-691/tez/lib/commons-collections-3.2.2.jar:/usr/hdp/3.0.0.0-691/tez/lib/commons-collections4-4.1.jar:/usr/hdp/3.0.0.0-691/tez/lib/commons-io-2.4.jar:/usr/hdp/3.0.0.0-691/tez/lib/commons-lang-2.6.jar:/usr/hdp/3.0.0.0-691/tez/lib/commons-math3-3.1.1.jar:/usr/hdp/3.0.0.0-691/tez/lib/guava-11.0.2.jar:/usr/hdp/3.0.0.0-691/tez/lib/hadoop-hdfs-client-3.0.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/lib/hadoop-mapreduce-client-common-3.0.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/lib/hadoop-mapreduce-client-core-3.0.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/lib/hadoop-yarn-server-timeline-pluginstorage-3.0.0.3.0.0.0-691.jar:/usr/hdp/3.0.0.0-691/tez/lib/jersey-client-1.9.jar:/usr/hdp/3.0.0.0-691/tez/lib/jersey-json-1.9.jar:/usr/hdp/3.0.0.0-691/tez/lib/jettison-1.3.4.jar:/usr/hdp/3.0.0.0-691/tez/lib/jetty-6.1.26.hwx.jar:/usr/hdp/3.0.0.0-691/tez/lib/jetty-util-6.1.26.hwx.jar:/usr/hdp/3.0.0.0-691/tez/lib/jsr305-3.0.0.jar:/usr/hdp/3.0.0.0-691/tez/lib/metrics-core-3.1.0.jar:/usr/hdp/3.0.0.0-691/tez/lib/netty-3.6.2.Final.jar:/usr/hdp/3.0.0.0-691/tez/lib/protobuf-java-2.5.0.jar:/usr/hdp/3.0.0.0-691/tez/lib/servlet-api-2.5.jar:/usr/hdp/3.0.0.0-691/tez/lib/slf4j-api-1.7.10.jar:/usr/hdp/3.0.0.0-691/tez/lib/tez.tar.gz -Dhdp.version=3.0.0.0-691 -Djava.net.preferIPv4Stack=true -Dhdp.version=3.0.0.0-691 -Xmx1024m -Dhadoop.security.logger=ERROR,DRFAS -jvm server -Dyarn.log.dir=/grid/0/log/hdfs/ -Dyarn.log.file=hadoop-hdfs-root-nfs3-ctr-e137-1514896590304-8236-01-000002.hwx.site.log -Dyarn.home.dir=/usr/hdp/3.0.0.0-691/hadoop-yarn -Dyarn.root.logger=INFO,console -Djava.library.path=:/usr/hdp/3.0.0.0-691/hadoop/lib/native/Linux-amd64-64:/usr/hdp/3.0.0.0-691/hadoop/lib/native -Dhadoop.log.dir=/grid/0/log/hdfs/ -Dhadoop.log.file=hadoop-hdfs-root-nfs3-ctr-e137-1514896590304-8236-01-000002.hwx.site.log -Dhadoop.home.dir=/usr/hdp/3.0.0.0-691/hadoop -Dhadoop.id.str=root -Dhadoop.root.logger=INFO,RFA -Dhadoop.policy.file=hadoop-policy.xml org.apache.hadoop.hdfs.nfs.nfs3.PrivilegedNfsGatewayStarter\r\n    root      449951  449877  0 21:36 pts/0    00:00:00 grep --color=auto nfs\r\n    [root@ctr-e137-1514896590304-8236-01-000002 hdfs]# \r\n    \n\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "NFS Gateway is not logging at the correct location"
   },
   {
      "_id": "13133985",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-01-26 11:21:07",
      "description": "# Remove back button\r\n# Use a table to display components\r\n# Restart component notification should be at page level",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Host Details page style fixes"
   },
   {
      "_id": "13133803",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-01-25 19:28:41",
      "description": "HBase should handle a customized Zookeeper service principal name.\r\n\r\nCurrently this is not supported due to hardcoded and implicit values expecting the Zookeeper service principal name to be\u00a0{{zookeeper/_HOST}}\u00a0as opposed to something like\u00a0{{zookeeper-mycluster/_HOST}}.\r\n\r\nThe following changes need to be made:\r\n * Add\u00a0{{-Dzookeeper.sasl.client.username=<ZOOKEEPER_PRINCPAL_NAME>}}\u00a0to\u00a0{{HBASE_OPTS}}\u00a0in\u00a0{{hbase-env/template}}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "kerberos",
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "HBase should handle a customized Zookeeper service principal name"
   },
   {
      "_id": "13133401",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-01-24 15:17:21",
      "description": "Duration should have the following format \"1d 3h 46m\".",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Standardize precision when expressing durations"
   },
   {
      "_id": "13133340",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-01-24 11:28:57",
      "description": "Fix the below tests on branch-3.0-perf:\n\n    \n    \n    TestClusterConfigurationCache.py\r\n    TestFileCache.py\r\n    TestRecoveryManager.py\r\n    TestScript.py\r\n    \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Fix TestRecoveryManager ClusterConfigurationCache and a bunch of small tests."
   },
   {
      "_id": "13133133",
      "assignee": "ababiichuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12329612",
            "id": "12329612",
            "name": "ambari-logsearch"
         }
      ],
      "created": "2018-01-23 17:46:31",
      "description": "User should be able to choose the log levels visible to log feeder.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Log Search UI: implement log level filter"
   },
   {
      "_id": "13133045",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-01-23 13:26:55",
      "description": "User needs to upgrade all OSes for security purposes, and will need to remove all directories related to Python2.6 due to\nTLS violations, they need this ASAP to test, as they have a hard deadline.  \nOS: Red Hat Enterprise Linux Server release 7.4  \nJDK version: 1.8.0_144  \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari-agent puts Python scripts in 2.6 directory on OSes that use python 2.7.x by default"
   },
   {
      "_id": "13132910",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-01-23 02:16:32",
      "description": "When the ambari DB size is too large (around 1+ GB) then the db-purge-history may fail with the postgres error Tried to send an out-of-range integer as a 2-byte value\r\n\r\n\u00a0\r\n\r\nFollowing error trace is from Ambari 2.5.2 however the same might cause in higher version as well.\r\n\r\n{code}\r\nInternal Exception: org.postgresql.util.PSQLException: An I/O error occurred while sending to the backend.\r\nError Code: 0\r\nCall: SELECT DISTINCT host_task_id FROM topology_logical_task WHERE (physical_task_id IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,\r\n....\r\n....\r\n.....\r\n......\r\n?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?))\r\n\r\nQuery: ReportQuery(name=\"TopologyLogicalTaskEntity.findHostTaskIdsByPhysicalTaskIds\" referenceClass=TopologyLogicalTaskEntity sql=\"SELECT DISTINCT host_task_id FROM topology_logical_task WHERE (physical_task_id IN ?)\")\r\n at org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:340)\r\n at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.processExceptionForCommError(DatabaseAccessor.java:1620)\r\n at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:676)\r\n at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeCall(DatabaseAccessor.java:560)\r\n at org.eclipse.persistence.internal.sessions.AbstractSession.basicExecuteCall(AbstractSession.java:2055)\r\n at org.eclipse.persistence.sessions.server.ServerSession.executeCall(ServerSession.java:570)\r\n at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:242)\r\n at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:228)\r\n at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeSelectCall(DatasourceCallQueryMechanism.java:299)\r\n at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.selectAllRows(DatasourceCallQueryMechanism.java:694)\r\n at org.eclipse.persistence.internal.queries.ExpressionQueryMechanism.selectAllRowsFromTable(ExpressionQueryMechanism.java:2740)\r\n at org.eclipse.persistence.internal.queries.ExpressionQueryMechanism.selectAllReportQueryRows(ExpressionQueryMechanism.java:2677)\r\n at org.eclipse.persistence.queries.ReportQuery.executeDatabaseQuery(ReportQuery.java:852)\r\n at org.eclipse.persistence.queries.DatabaseQuery.execute(DatabaseQuery.java:904)\r\n at org.eclipse.persistence.queries.ObjectLevelReadQuery.execute(ObjectLevelReadQuery.java:1134)\r\n at org.eclipse.persistence.queries.ReadAllQuery.execute(ReadAllQuery.java:460)\r\n at org.eclipse.persistence.queries.ObjectLevelReadQuery.executeInUnitOfWork(ObjectLevelReadQuery.java:1222)\r\n at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.internalExecuteQuery(UnitOfWorkImpl.java:2896)\r\n at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1857)\r\n at org.eclipse.persistence.internal.sessions.AbstractSession.retryQuery(AbstractSession.java:1927)\r\n at org.eclipse.persistence.sessions.server.ClientSession.retryQuery(ClientSession.java:694)\r\n at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.retryQuery(UnitOfWorkImpl.java:5536)\r\n at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1893)\r\n at org.eclipse.persistence.internal.sessions.AbstractSession.retryQuery(AbstractSession.java:1927)\r\n at org.eclipse.persistence.sessions.server.ClientSession.retryQuery(ClientSession.java:694)\r\n at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.retryQuery(UnitOfWorkImpl.java:5536)\r\n at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1893)\r\n at org.eclipse.persistence.internal.sessions.AbstractSession.retryQuery(AbstractSession.java:1927)\r\n at org.eclipse.persistence.sessions.server.ClientSession.retryQuery(ClientSession.java:694)\r\n at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.retryQuery(UnitOfWorkImpl.java:5536)\r\n at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1893)\r\n at org.eclipse.persistence.internal.sessions.AbstractSession.retryQuery(AbstractSession.java:1927)\r\n at org.eclipse.persistence.sessions.server.ClientSession.retryQuery(ClientSession.java:694)\r\n at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.retryQuery(UnitOfWorkImpl.java:5536)\r\n at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1893)\r\n at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1839)\r\n at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1804)\r\n at org.eclipse.persistence.internal.jpa.QueryImpl.executeReadQuery(QueryImpl.java:258)\r\n at org.eclipse.persistence.internal.jpa.QueryImpl.getResultList(QueryImpl.java:473)\r\n at org.apache.ambari.server.orm.dao.DaoUtils.selectList(DaoUtils.java:60)\r\n at org.apache.ambari.server.orm.dao.TopologyLogicalTaskDAO.findHostTaskIdsByPhysicalTaskIds(TopologyLogicalTaskDAO.java:56)\r\n at org.apache.ambari.server.orm.AmbariLocalSessionInterceptor.invoke(AmbariLocalSessionInterceptor.java:53)\r\n at org.apache.ambari.server.orm.dao.RequestDAO.cleanup(RequestDAO.java:403)\r\n at org.apache.ambari.server.orm.AmbariJpaLocalTxnInterceptor.invoke(AmbariJpaLocalTxnInterceptor.java:128)\r\n at org.apache.ambari.server.cleanup.CleanupServiceImpl.cleanup(CleanupServiceImpl.java:82)\r\n at org.apache.ambari.server.cleanup.CleanupDriver.main(CleanupDriver.java:89)\r\nCaused by: org.postgresql.util.PSQLException: An I/O error occurred while sending to the backend.\r\n at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:281)\r\n at org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:559)\r\n at org.postgresql.jdbc2.AbstractJdbc2Statement.executeWithFlags(AbstractJdbc2Statement.java:417)\r\n at org.postgresql.jdbc2.AbstractJdbc2Statement.executeQuery(AbstractJdbc2Statement.java:302)\r\n at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeSelect(DatabaseAccessor.java:1009)\r\n at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:644)\r\n... 43 more\r\nCaused by: java.io.IOException: Tried to send an out-of-range integer as a 2-byte value: 43222\r\n at org.postgresql.core.PGStream.SendInteger2(PGStream.java:196)\r\n at org.postgresql.core.v3.QueryExecutorImpl.sendParse(QueryExecutorImpl.java:1242)\r\n at org.postgresql.core.v3.QueryExecutorImpl.sendOneQuery(QueryExecutorImpl.java:1547)\r\n at org.postgresql.core.v3.QueryExecutorImpl.sendQuery(QueryExecutorImpl.java:1100)\r\n at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:253)\r\n... 48 more\r\n{code}\r\n\r\n\r\nLooks like Postgres side limitation of around 32k parameters. However Ambari can send the large number of parameters in batch instead of sending it as bunch.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "db-purge-history operation fails with large DB size in postgres."
   },
   {
      "_id": "13132626",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-01-22 09:55:12",
      "description": "Yarn and MapReduce2 should handle a customized Zookeeper service principal name.\r\n\r\nCurrently this is not supported due to hardcoded and implicit values expecting the Zookeeper service principal name to be\u00a0{{zookeeper/_HOST}}\u00a0as opposed to something like\u00a0{{zookeeper-mycluster/_HOST}}.\r\n\r\nThe following changes need to be made:\r\n * common-services/YARN/2.1.0.2.0/package/scripts/params_linux.py must be changed to not hardcode the Zookeeper principal name in\r\n{code:java}\r\nm_security_opts = format('-Dzookeeper.sasl.client=true -Dzookeeper.sasl.client.username=zookeeper -Djava.security.auth.login.config={yarn_jaas_file} -Dzookeeper.sasl.clientconfig=Client')\r\n{code}\r\n\r\n * {{-Dzookeeper.sasl.client.username=<ZOOKEEPER_PRINCPAL_NAME>}}\u00a0should be added to\u00a0{{YARN_OPTS}}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "kerberos",
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Yarn/MR2 should handle a customized Zookeeper service principal name"
   },
   {
      "_id": "13131970",
      "assignee": "rlevas",
      "components": [],
      "created": "2018-01-18 18:46:46",
      "description": "Fix checkstyle error in UpgradeCatalog300Test\u00a0\r\n{noformat}\r\n[ERROR] .../ambari/ambari-server/src/test/java/org/apache/ambari/server/upgrade/UpgradeCatalog300Test.java:20: Using the '.*' form of import should be avoided - org.apache.ambari.server.upgrade.UpgradeCatalog300.*. [AvoidStarImport]\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Fix checkstyle error in UpgradeCatalog300Test"
   },
   {
      "_id": "13131874",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-01-18 13:16:28",
      "description": "Because of branch-3.0-perf changes ActionQueue had some big chunks completely\nrewritten.  \nWhich causes all TestActionQueue unit tests to fail.\n\nFor these changes the TestActionQueue tests have to be rewritten as well. Some\ndeleted due to already non-existant functionality like the one related to\nstatus commands execution.\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Rewrite TestActionQueue"
   },
   {
      "_id": "13131695",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-01-17 20:46:30",
      "description": "Failures in the\u00a0cluster configuration task and topology host tasks during blueprint cluster deployment or upscaling are not visible via request status. The logical request stays PENDING even after Ambari Server gave up retrying. Both the fact that it no longer makes progress and any reason of the failure can be seen only in {{ambari-server.log}}.\r\n\r\nSome ways to reproduce (all via blueprints):\r\n * Create cluster with ZooKeeper and HDFS, but omit the NAMENODE component\r\n * Create a secure cluster with wrong Kerberos credentials\r\n * Create a secure cluster without storing Kerberos credentials, restart Ambari Server, add a new node",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "blueprints",
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Blueprints do not handle some failures properly"
   },
   {
      "_id": "13131577",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-01-17 14:00:25",
      "description": "There are side effects of Add Host/Add Service in kerberized clusters that have common properties customized. In this situation the customer installs HDP, kerberizes the cluster, makes their configuration property customizations for their environment, and then after that if they add a host or service their configuration customizations are overwritten.\r\n\r\nHere are examples of the properties that are commonly customized and have been known to be overwritten during add host/service:\r\n* yarn.admin.acl\r\n* yarn.resourcemanager.proxy-user-privileges.enabled\r\n* yarn.timeline-service.http-authentication.cookie.domain\r\n* yarn.timeline-service.http-authentication.signature.secret.file\r\n* capacity-scheduler.xml configuration\r\n* auth_to_local customizations\r\n\r\nNote: This may also occur during the \"Regenerate Keytabs\" operation.\u00a0\r\n\r\n\u00a0",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Configuration overwritten during Add Host/Add Service in Kerberized Cluster"
   },
   {
      "_id": "13131329",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12331412",
            "id": "12331412",
            "name": "ambari-sever"
         }
      ],
      "created": "2018-01-16 19:51:43",
      "description": "Role authorization \\{{AMBARI.MANAGE_CONFIGURATION}} is not added to \\{{AMBARI.ADMINISTRATOR}} role during Ambari upgrade. This privilege needs to be added to the AMBARI.ADMINISTRATOR role upon upgrade.\r\n\r\nNote: A fresh install of Ambari contains the role authorization association.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Role authorization AMBARI.MANAGE_CONFIGURATION is not added to AMBARI.ADMINISTRATOR role during Ambari upgrade"
   },
   {
      "_id": "13131265",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-01-16 15:22:42",
      "description": "{{ambari-server setup-ldap}}\u00a0should set configurations in the Ambari database rather than the ambari.properties file.\r\n\r\nSimilar to the following, but updated to collect the relevant data for Ambari 3.0.0:\r\n{noformat}\r\n# ambari-server setup-ldap\r\nUsing python  /usr/bin/python\r\nSetting up LDAP properties...\r\nPrimary URL* {host:port} : c6409.ambari.apache.org\r\nInvalid characters in the input!\r\nPrimary URL* {host:port} : c6409.ambari.apache.org:363\r\nSecondary URL {host:port} :\r\nUse SSL* [true/false] (false):\r\nUser object class* (posixAccount):\r\nUser name attribute* (uid):\r\nGroup object class* (posixGroup):\r\nGroup name attribute* (cn):\r\nGroup member attribute* (memberUid):\r\nDistinguished name attribute* (dn):\r\n...{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "ambari-server setup-ldap should set configurations in the Ambari database"
   },
   {
      "_id": "13131063",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-01-15 16:03:55",
      "description": "See attached.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Unsightly artifacts during Login"
   },
   {
      "_id": "13131035",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-01-15 14:09:43",
      "description": "Ambari template should conditionally force to TCP by setting the following in the krb5.conf template if configured to do so:\r\n{code:java}\r\n{%- if force_tcp %}\r\n  udp_preference_limit = 1\r\n{%- endif -%}{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari should setup tcp preference in krb5.conf"
   },
   {
      "_id": "13131023",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-01-15 13:23:00",
      "description": "See attached.\r\n\r\n1. There's no Ambari branding on trunk. There's nothing that says this is a login page for Ambari.\r\n2. The spacing is odd.\r\n\r\nSee attached for trunk vs 2.6.1 comparison.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Login page lost Ambari branding"
   },
   {
      "_id": "13130991",
      "assignee": "aonishuk",
      "components": [],
      "created": "2018-01-15 10:57:21",
      "description": "Namnode alerts need to be fixed.\n\n<http://104.196.73.142:8080/#/main/alerts>\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Fix Namenode alerts broken due to enabling federation"
   },
   {
      "_id": "13130968",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-01-15 09:24:34",
      "description": "STR:\r\n# Create cluster using blueprint\r\n# Restart Ambari Server\r\n# Install Ambari Agent on new host and register with server\r\n# Add the new host via API request\r\n# Start Ambari Agent on the new host\r\n\r\nResult: Ambari Server accepts the scale request, but does not proceed to install/start components on the new host\r\n\r\nThe problem is that AMBARI-22012 fixed a timing/ordering issue by introducing an executor, which is started on \"cluster configured\" event during blueprint cluster creation. If Ambari Server is restarted afterwards, the executor will stay stopped, hence tasks for scale requests are never executed.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "blueprints",
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Cannot scale cluster if Ambari Server restarted since blueprint cluster creation"
   },
   {
      "_id": "13130549",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2018-01-12 15:25:25",
      "description": "{code}\r\nError loading resource file:///api/v1/clusters/c1/upgrades?fields=Upgrade&_=1515682880321 (203). Details: Error opening /api/v1/clusters/c1/upgrades: No such file or directory\r\n\r\n  30514 passing (31s)\r\n  157 pending\r\n  1 failing\r\n\r\n  1) Ambari Web Unit tests test/utils/date/timezone_test timezoneUtils #detectUserTimezone Detect UTC+1:\r\n     expected '0-60|Africa' to include '0-60|Atlantic'\r\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "ambari-web unit test is failing at apache ambari jenkins job"
   },
   {
      "_id": "13130538",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-01-12 14:09:32",
      "description": "Async events should support RU scenario.\r\nMain concern: RU process involves server execution commands which may change configs in the middle of request processing, so all new tasks should be executed with new configs.\r\nCurrently this is achieved by mutating config with tag used on request construction.\r\n\r\nWe may achieve similar result by implementing upgrade mode (with flag or by analyzing upgrades in progress similar to UI) and when it is enabled intercept execution commands events and extend them with actual configs just before sending to message broker.\r\n\r\nIn this case we can also consider to force agent refresh configs when RU finishes.\r\n\r\nCurrent upgrade process relies on disabling auto-start of components prior to upgrade and doesn't care about status commands (as their configs usually don't change dramatically)",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Handle configs update in the middle of request (RU)"
   },
   {
      "_id": "13130496",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-01-12 11:16:01",
      "description": "Ambari Server loads {{ambari.properties}} using {{Properties.load(InputStream)}}, which [uses ISO 8859-1 character encoding|https://docs.oracle.com/javase/8/docs/api/java/util/Properties.html#load-java.io.InputStream-].  This causes a problem for non-Latin1 characters that can occur in several properties, eg. in any directory or file name.\r\n\r\nSTR:\r\n\r\n# Install and setup Ambari Server\r\n# Update {{ambari.properties}} changing {{server.jdbc.user.passwd}} to {{/etc/ambari-server/conf/password.\u0151\u0151\u0151}}\r\n# {{mv -iv /etc/ambari-server/conf/password.dat /etc/ambari-server/conf/password.\u0151\u0151\u0151}}\r\n# Try to start Ambari Server\r\n\r\nResult:\r\n\r\n{noformat}\r\n...\r\nERROR: Exiting with exit code 1.\r\nREASON: Database check failed to complete. Please check /var/log/ambari-server/ambari-server.log and /var/log/ambari-server/ambari-server-check-database.log for more information.\r\n{noformat}\r\n\r\n{noformat:title=/var/log/ambari-server/ambari-server-check-database.log}\r\n...\r\nFileNotFoundException: File '/etc/ambari-server/conf/password.\u00c5\u0091\u00c5\u0091\u00c5\u0091' does not exist\r\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari loads ambari.properties using ISO 8859-1 encoding"
   },
   {
      "_id": "13129560",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-01-09 15:33:38",
      "description": "There are some metrics like a (NameNode uptime/StartTime and HDFS disk usage/Capacity*) which cannot be shown in a widget because widgets only support AMS based metrics.\r\nNormally these metrics are shown in a service specific dashboard which is hardcoded in the ui (summary.js/serviceCustomViewsMap).\r\n\r\n{code}\r\nserviceCustomViewsMap: function() {\r\n    return {\r\n      HBASE: App.MainDashboardServiceHbaseView,\r\n      HDFS: App.MainDashboardServiceHdfsView,\r\n      STORM: App.MainDashboardServiceStormView,\r\n      YARN: App.MainDashboardServiceYARNView,\r\n      RANGER: App.MainDashboardServiceRangerView,\r\n      FLUME: App.MainDashboardServiceFlumeView,\r\n      HIVE:  App.MainDashboardServiceHiveView\r\n    }\r\n  }.property('serviceName'),\r\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Show OneFS JMX metrics on the UI"
   },
   {
      "_id": "13129538",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-01-09 14:22:21",
      "description": "Fix failing unit tests",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Fix existing unit tests after STOMP protocol implementation"
   },
   {
      "_id": "13129251",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-01-08 14:01:16",
      "description": "Loosely store users authenticating from remote sources (LDAP, PAM, etc) such that minimal information is store in the Ambari database, relying on information from the remote sources to provide details like group membership and username.\r\n\r\nGroup membership, consecutive authentication failure count, and etc... should not be stored in the Ambari database for user accounts that are not authenticated locally. \r\n\r\nTo do this, convert the {{users}} table into the following tables:\r\n\r\n*user*\r\n* user_id  (primary key)\r\n* principal_id (foreign key to adminprincipal table)\r\n* user_name\r\n* authentication_source (LOCAL, LDAP, PAM)\r\n* active_widget_layouts\r\n* create_time\r\n\r\n*local_user_authentication*\r\n* user_id (foreign key to user table)\r\n* password\r\n* active\r\n* consecutive_failures\r\n* create_time\r\n* update_time\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "authentication"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Loosely store users authenticating from remote sources (LDAP, PAM, etc)"
   },
   {
      "_id": "13128824",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2018-01-05 15:03:58",
      "description": "/alert_definitions topic doesn't emit any events to the client when definition properties are modified.\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "alert_definitions topic doesn't emit any events to client"
   },
   {
      "_id": "13125821",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-12-19 08:34:41",
      "description": "Upon upgrade to Ambari 3.0.0, move the relevant LDAP properties from ambari.properties file to internal Ambari configuration storage under the \"ldap-configuration\" category. \r\n\r\n||ambari.properties||ldap-configuration||\r\n|ambari.ldap.isConfigured|ambari.ldap.authentication.enabled|\r\n|authentication.ldap.useSSL|ambari.ldap.connectivity.use_ssl|\r\n|authentication.ldap.primaryUrl|ambari.ldap.connectivity.server.host, ambari.ldap.connectivity.server.port|\r\n|authentication.ldap.secondaryUrl|ambari.ldap.connectivity.secondary.server.host, ambari.ldap.connectivity.secondary.server.port|\r\n|authentication.ldap.baseDn|ambari.ldap.attributes.user.search_base, ambari.ldap.attributes.group.search_base|\r\n|authentication.ldap.bindAnonymously|ambari.ldap.connectivity.anonymous_bind|\r\n|authentication.ldap.managerDn|ambari.ldap.connectivity.bind_dn|\r\n|authentication.ldap.managerPassword|ambari.ldap.connectivity.bind_password|\r\n|authentication.ldap.dnAttribute|ambari.ldap.attributes.dn_attr|\r\n|authentication.ldap.usernameAttribute|ambari.ldap.attributes.user.name_attr|\r\n|authentication.ldap.username.forceLowercase|ambari.ldap.advanced.force_lowercase_usernames|\r\n|authentication.ldap.userBase|ambari.ldap.attributes.search_user_base|\r\n|authentication.ldap.userObjectClass|ambari.ldap.attributes.user.object_class|\r\n|authentication.ldap.groupBase|ambari.ldap.attributes.group.search_group_base|\r\n|authentication.ldap.groupObjectClass|ambari.ldap.attributes.group.object_class|\r\n|authentication.ldap.groupNamingAttr|ambari.ldap.attributes.group.name_attr|\r\n|authentication.ldap.groupMembershipAttr|ambari.ldap.attributes.group.member_attr|\r\n|authorization.ldap.adminGroupMappingRules|ambari.ldap.advanced.group_mapping_rules|\r\n|authentication.ldap.userSearchFilter|ambari.ldap.advanced.user_search_filter|\r\n|authentication.ldap.alternateUserSearchEnabled|ambari.ldap.advanced.alternate_user_search_enabled|\r\n|authentication.ldap.alternateUserSearchFilter|ambari.ldap.advanced.alternate_user_search_filter|\r\n|authorization.ldap.groupSearchFilter|ambari.ldap.advanced.group_search_filter|\r\n|authentication.ldap.referral|ambari.ldap.advanced.referrals|\r\n|authentication.ldap.pagination.enabled|ambari.ldap.advanced.pagination_enabled|\r\n|authentication.ldap.sync.userMemberReplacePattern|ambari.ldap.advanced.user_member_replace_pattern|\r\n|authentication.ldap.sync.groupMemberReplacePattern|ambari.ldap.advanced.group_member_replace_pattern|\r\n|authentication.ldap.sync.userMemberFilter|ambari.ldap.advanced.user_member_filter|\r\n|authentication.ldap.sync.groupMemberFilter|ambari.ldap.advanced.group_member_filter|\r\n|ldap.sync.username.collision.behavior|ambari.ldap.advance.collision_behavior|",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "ldap",
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Upon upgrade, move LDAP properties from ambari.properties file to internal Ambari configuration storage"
   },
   {
      "_id": "13125820",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-12-19 08:27:14",
      "description": "Use internal LDAP configuration values rather than ambari.properties values when accessing the configured LDAP server for LDAP sync and authentication. \r\n\r\n* Deprecate {{setup-ldap}} from the {{ambari-server}} script.  \r\n** Rather then perform any operations, alert user to configure LDAP integration from the Ambari UI\r\n* Lookup LDAP-specific properties from the Ambari configuration data under the \"ldap-configuration\" category.\r\n* Remove relevant properties from {{org.apache.ambari.server.configuration.Configuration}}\r\n** ambari.ldap.isConfigured\r\n** authentication.ldap.useSSL\r\n** authentication.ldap.primaryUrl\r\n** authentication.ldap.secondaryUrl\r\n** authentication.ldap.baseDn\r\n** authentication.ldap.bindAnonymously\r\n** authentication.ldap.managerDn\r\n** authentication.ldap.managerPassword\r\n** authentication.ldap.dnAttribute\r\n** authentication.ldap.usernameAttribute\r\n** authentication.ldap.username.forceLowercase\r\n** authentication.ldap.userBase\r\n** authentication.ldap.userObjectClass\r\n** authentication.ldap.groupBase\r\n** authentication.ldap.groupObjectClass\r\n** authentication.ldap.groupNamingAttr\r\n** authentication.ldap.groupMembershipAttr\r\n** authorization.ldap.adminGroupMappingRules\r\n** authentication.ldap.userSearchFilter\r\n** authentication.ldap.alternateUserSearchEnabled\r\n** authentication.ldap.alternateUserSearchFilter\r\n** authorization.ldap.groupSearchFilter\r\n** authentication.ldap.referral\r\n** authentication.ldap.pagination.enabled\r\n** authentication.ldap.sync.userMemberReplacePattern\r\n** authentication.ldap.sync.groupMemberReplacePattern\r\n** authentication.ldap.sync.userMemberFilter\r\n** authentication.ldap.sync.groupMemberFilter\r\n** ldap.sync.username.collision.behavior\r\n ",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "ldap",
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Use internal LDAP configuration values rather than ambari.properties values when accessing the configured LDAP server"
   },
   {
      "_id": "13124713",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-12-13 15:49:45",
      "description": "The following curl will result in 500 if post it more than once:\r\n{noformat}\r\ncurl -vvv -u admin:admin -k -H \"X-Requested-By:ambari\" -X POST https://$AMBARI_SERVER/api/v1/version_definitions -d '{\r\n  \"VersionDefinition\": {\r\n   \"version_url\":\r\n\"http://public-repo-1.hortonworks.com/HDP/centos7/2.x/updates/2.6.3.0/HDP-2.6.3.0-235.xml\"\r\n    }\r\n  }'\r\n{noformat}\r\n\r\nThe http response is:\r\n\r\n{noformat}\r\n{\r\n  \"status\" : 500,\r\n  \"message\" : \"An internal system exception occurred: Base url http://public-repo-1.hortonworks.com/HDP/centos7/2.x/updates/2.6.3.0 is already defined for another repository version. Setting up base urls that contain the same versions of components will cause stack upgrade to fail.\"\r\n}\r\n{noformat}\r\n\r\nIt would be better, if in this case the http response status would be {noformat}409 - Conflict{noformat}\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "AmbariServer will throw internal server error in case of post existing version_definition"
   },
   {
      "_id": "13122616",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-12-04 16:14:25",
      "description": "\r\nFix the wording of the IPA requirements in the Enable Kerberos Wizard to read as follows\r\n\r\n* All cluster hosts are joined to the IPA domain and hosts are registered in DNS\r\n* A password policy is in place that sets no expiry for created principals\r\n* If you do not plan on using Ambari to manage the krb5.conf, ensure the following is set in each krb5.conf file in your cluster: default_ccache_name = /tmp/krb5cc_%{uid}\r\n* The Java Cryptography Extensions (JCE) have been setup on the Ambari Server host and all hosts in the cluster\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "freeipa",
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Fix the wording on IPA integration requirements in the Enable Kerberos Wizard"
   },
   {
      "_id": "13122614",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-12-04 16:07:34",
      "description": "When creating user principals while enabling Kerberos using FreeIPA, Ambari should not force accounts to be added a user named 'ambari-managed-principals'. \r\n\r\nThis occurs because the default value of {{kerberos-env/ipa_user_group}} is \"ambari-managed-principals\". To stop forcing this, the default value should be empty.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "freeipa",
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari should not force accounts created in IPA to be added a user named 'ambari-managed-principals'"
   },
   {
      "_id": "13122291",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-12-01 22:00:37",
      "description": "Migrate data from the {{users}} table (pre-Ambari 3.0.0) to the updated {{users}} table and {{user_authentication}} tables.\r\n\r\nSee [^user_management_db_schema_upgrade.png]\r\n\r\n!user_management_db_schema_upgrade.png|thumbnail!",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Migrate user data for upgrade to improved user account management"
   },
   {
      "_id": "13122288",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-12-01 21:57:17",
      "description": "LDAP sync should be based off of DN rather than username.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "ldap"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "LDAP sync should be based off of DN rather than username"
   },
   {
      "_id": "13122151",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-12-01 11:05:06",
      "description": "Passwords and other sensitive data stored as values to properties in Ambari configurations need to be masked or not stored in cleartext.\r\n\r\nFor example, {{ldap-configuration/ambari.ldap.connectivity.trust_store.password}} and ldap-{{configuration/ambari.ldap.connectivity.bind_password}}.\r\n\r\nIf the Ambari credential store is enabled (which might be by default as of Ambari 3.0.0), the sensitive date can be stored there like we do when sensitive data is to be stored in the ambari.properties file - see {{org.apache.ambari.server.security.encryption.CredentialStoreService}}.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "config",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
         "name": "Minor",
         "id": "4"
      },
      "projectname": "AMBARI",
      "summary": "Handle passwords/sensitive data in Ambari configuration properties"
   },
   {
      "_id": "13121915",
      "assignee": "aonishuk",
      "components": [],
      "created": "2017-11-30 13:28:10",
      "description": "  * User denies the GPL license agreement, UI will still issue PUT call to create the repo\n  * Ambari should not write HDP-GPL repo info to the ambari-hdp-1.repo because it will break yum in local repo world.\n  * Then the user accepts the license by running ambari-server setup\n  * The repo file does not get updated on existing hosts\n  * We need to push the HDP-GPL repo to the repo files on existing hosts only when the license is accepted\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Need to address HDP-GPL repo update after user accepts license in post-install scenario"
   },
   {
      "_id": "13121898",
      "assignee": "smolnar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-11-30 12:06:30",
      "description": "Remove hack to set KDC admin credential via the API to set session attribute via the Cluster resource.\r\nNear *org/apache/ambari/server/controller/AmbariManagementControllerImpl.java:1469*\r\n\r\n{code:java}\r\n      // TODO: Once the UI uses the Credential Resource API, remove this block to _clean_ the\r\n      // TODO: session attributes and store any KDC administrator credentials in the secure\r\n      // TODO: credential provider facility.\r\n      // For now, to keep things backwards compatible, get and remove the KDC administrator credentials\r\n      // from the session attributes and store them in the CredentialsProvider. The KDC administrator\r\n      // credentials are prefixed with kdc_admin/. The following attributes are expected, if setting\r\n      // the KDC administrator credentials:\r\n      //    kerberos_admin/principal\r\n      //    kerberos_admin/password\r\n      if((sessionAttributes != null) && !sessionAttributes.isEmpty()) {\r\n        Map<String, Object> cleanedSessionAttributes = new HashMap<>();\r\n        String principal = null;\r\n        char[] password = null;\r\n\r\n        for(Map.Entry<String,Object> entry: sessionAttributes.entrySet()) {\r\n          String name = entry.getKey();\r\n          Object value = entry.getValue();\r\n\r\n          if (\"kerberos_admin/principal\".equals(name)) {\r\n            if(value instanceof String) {\r\n              principal = (String)value;\r\n            }\r\n          }\r\n          else if (\"kerberos_admin/password\".equals(name)) {\r\n            if(value instanceof String) {\r\n              password = ((String) value).toCharArray();\r\n            }\r\n          } else {\r\n            cleanedSessionAttributes.put(name, value);\r\n          }\r\n        }\r\n\r\n        if(principal != null) {\r\n          // The KDC admin principal exists... set the credentials in the credentials store\r\n          credentialStoreService.setCredential(cluster.getClusterName(),\r\n              KerberosHelper.KDC_ADMINISTRATOR_CREDENTIAL_ALIAS,\r\n              new PrincipalKeyCredential(principal, password), CredentialStoreType.TEMPORARY);\r\n        }\r\n\r\n        sessionAttributes = cleanedSessionAttributes;\r\n      }\r\n      // TODO: END\r\n{code}\r\n\r\n\r\nThis is no longer needed once the UI uses the new Credential Resource REST API - see  AMBARI-13292",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kdc_credentials",
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
         "name": "Minor",
         "id": "4"
      },
      "projectname": "AMBARI",
      "summary": "Remove obsolete hack to set KDC admin credentials via Cluster session API"
   },
   {
      "_id": "13121621",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2017-11-29 11:39:49",
      "description": "Use /events/hostcomponents and /events/ui_topologies topics to track component counters. Events will update counters of component: TOTAL, INSTALLED, STARTED, INIT, INSTALL_FAILED, UNKNOWN.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Integrate component state counters with websocket events"
   },
   {
      "_id": "13111504",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-10-23 18:31:39",
      "description": "Improve KDC integration by making the interfaces more consistent with each other.\r\n\r\n*Notes:*\r\n* When using the MIT KDC or IPA options, the {{kerberos-env/admin_server_host}} value *must be the fully qualified domain name* (FQDN) of the host were the KDC administrator service is. \r\n* When connecting to the MIT KDC and IPA server, a username a password is not used to authenticate using the kadmin utility.  A Kerberos ticket is first acquired and that is used for authentication.\r\n* When creating Kerberos identities using the MIT KDC and IPA handlers, the Ambari-generated password is not used.  All password's for principals in the MIT KDC and IP server are generated randomly by the KDC.\r\n* Removed {{kerberos-env/set_password_expiry}} and {{kerberos-env/password_chat_timeout}} properties since they are no longer needed\r\n* Changed {{kerberos-env/groups}} to {{kerberos-env/ipa_user_groups}} to be more explicit in how the property is used.\r\n* The setPassword implementation for the MIT KDC and IPA handlers do nothing except check to see if the relevant principal exists. This is to maintain backward compatibility with previous implementations.  \r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Improve KDC integration"
   },
   {
      "_id": "13109010",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-10-12 18:30:02",
      "description": "The host and hostname built-in variables are not populated when performing Kerberos-related operations.  These variables may be used like \r\n\r\n{code}\r\nservice-${host}\r\n{code}\r\n\r\nIf the current host being processed is host1.example.com, the value should be converted to\r\n\r\n{code}\r\nservice-host1.example.com\r\n{code}\r\n\r\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "host and hostname built-in variables are not populated when performing Kerberos-related operations"
   },
   {
      "_id": "13107059",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-10-04 20:52:34",
      "description": "When regenerating keytab files for a service, non-service-specific principals are affected. For example, when regenerating the keytab files for HDFS using the following ReST API call:\n\n{code:title=PUT /api/v1/clusters/c1?regenerate_keytabs=all&regenerate_components=HDFS}\n{\n  \"Clusters\": {\n    \"security_type\": \"KERBEROS\"\n  }\n}\n{code}\n\nThe following principals are affected:\n* HTTP/c6402.ambari.apache.org@EXAMPLE.COM\n* ambari-qa-c1@EXAMPLE.COM\n* nn/c6402.ambari.apache.org@EXAMPLE.COM\n* hdfs-c1@EXAMPLE.COM\n* HTTP/c6403.ambari.apache.org@EXAMPLE.COM\n* dn/c6403.ambari.apache.org@EXAMPLE.COM\n* HTTP/c6401.ambari.apache.org@EXAMPLE.COM\n* nn/c6401.ambari.apache.org@EXAMPLE.COM\n* ambari-server-c1@EXAMPLE.COM\n\nHowever only the following principals *should be*  affected:\n* nn/c6402.ambari.apache.org@EXAMPLE.COM\n* hdfs-c1@EXAMPLE.COM\n* dn/c6403.ambari.apache.org@EXAMPLE.COM\n* nn/c6401.ambari.apache.org@EXAMPLE.COM\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "When regenerating keytab files for a service, non-service-specific principals are affected"
   },
   {
      "_id": "13106881",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-10-04 07:51:08",
      "description": "*STR*\n# Deployed cluster with Ambari version: 2.5.1.0-159 and HDP version: 2.5.6.0-40\n# Upgrade Ambari to 2.6.0.0-173\n# Register HDP Version 2.6.3.0-151 and try to install the packages\n\n*Result*\nPackage install fails with below error\n{code}\n2017-10-03 05:27:09,454 - Will install packages for repository version 2.6.3.0-151\n2017-10-03 05:27:09,455 - Repository['HDP-2.6-repo-51'] {'append_to_file': False, 'base_url': 'http://s3.amazonaws.com/dev.hortonworks.com/HDP/debian7/2.x/BUILDS/2.6.3.0-151', 'action': ['create'], 'components': ['HDP', 'main'], 'repo_template': '{{package_type}} {{base_url}} {{components}}', 'repo_file_name': 'ambari-hdp-51', 'mirror_list': None}\n2017-10-03 05:27:09,460 - File['/tmp/tmpPriIC1'] {'content': 'deb http://s3.amazonaws.com/dev.hortonworks.com/HDP/debian7/2.x/BUILDS/2.6.3.0-151 HDP main'}\n2017-10-03 05:27:09,461 - Writing File['/tmp/tmpPriIC1'] because contents don't match\n2017-10-03 05:27:09,461 - File['/tmp/tmpWBU9KY'] {'content': StaticFile('/etc/apt/sources.list.d/ambari-hdp-51.list')}\n2017-10-03 05:27:09,462 - Writing File['/tmp/tmpWBU9KY'] because contents don't match\n2017-10-03 05:27:09,462 - File['/etc/apt/sources.list.d/ambari-hdp-51.list'] {'content': StaticFile('/tmp/tmpPriIC1')}\n2017-10-03 05:27:09,463 - Writing File['/etc/apt/sources.list.d/ambari-hdp-51.list'] because contents don't match\n2017-10-03 05:27:09,463 - checked_call[['apt-get', 'update', '-qq', '-o', 'Dir::Etc::sourcelist=sources.list.d/ambari-hdp-51.list', '-o', 'Dir::Etc::sourceparts=-', '-o', 'APT::Get::List-Cleanup=0']] {'sudo': True, 'quiet': False}\n2017-10-03 05:27:10,166 - checked_call returned (0, '')\n2017-10-03 05:27:10,169 - Repository['HDP-UTILS-1.1.0.21-repo-51'] {'append_to_file': True, 'base_url': 'http://s3.amazonaws.com/dev.hortonworks.com/HDP-UTILS-1.1.0.21/repos/debian7', 'action': ['create'], 'components': ['HDP-UTILS', 'main'], 'repo_template': '{{package_type}} {{base_url}} {{components}}', 'repo_file_name': 'ambari-hdp-51', 'mirror_list': None}\n2017-10-03 05:27:10,176 - File['/tmp/tmpnjTvFL'] {'content': 'deb http://s3.amazonaws.com/dev.hortonworks.com/HDP/debian7/2.x/BUILDS/2.6.3.0-151 HDP main\\ndeb http://s3.amazonaws.com/dev.hortonworks.com/HDP-UTILS-1.1.0.21/repos/debian7 HDP-UTILS main'}\n2017-10-03 05:27:10,176 - Writing File['/tmp/tmpnjTvFL'] because contents don't match\n2017-10-03 05:27:10,177 - File['/tmp/tmprvUQz1'] {'content': StaticFile('/etc/apt/sources.list.d/ambari-hdp-51.list')}\n2017-10-03 05:27:10,178 - Writing File['/tmp/tmprvUQz1'] because contents don't match\n2017-10-03 05:27:10,179 - File['/etc/apt/sources.list.d/ambari-hdp-51.list'] {'content': StaticFile('/tmp/tmpnjTvFL')}\n2017-10-03 05:27:10,180 - Writing File['/etc/apt/sources.list.d/ambari-hdp-51.list'] because contents don't match\n2017-10-03 05:27:10,181 - checked_call[['apt-get', 'update', '-qq', '-o', 'Dir::Etc::sourcelist=sources.list.d/ambari-hdp-51.list', '-o', 'Dir::Etc::sourceparts=-', '-o', 'APT::Get::List-Cleanup=0']] {'sudo': True, 'quiet': False}\n2017-10-03 05:27:11,641 - checked_call returned (0, '')\n2017-10-03 05:27:11,642 - call[('ambari-python-wrap', '/usr/bin/hdp-select', 'versions')] {}\n2017-10-03 05:27:11,681 - call returned (0, '2.5.6.0-40')\n2017-10-03 05:27:11,683 - Package['hdp-select'] {'retry_on_repo_unavailability': True, 'retry_count': 5, 'use_repos': ['HDP-2.6-repo-51', 'HDP-UTILS-1.1.0.21-repo-51'], 'action': ['upgrade']}\n2017-10-03 05:27:11,683 - Temporal sources directory was created: /tmp/tmpN_6yuF-ambari-apt-sources-d\n2017-10-03 05:27:11,683 - Package Manager failed to install packages. Error: global name 'EMPTY_FILE' is not defined\nTraceback (most recent call last):\n  File \"/var/lib/ambari-agent/cache/custom_actions/scripts/install_packages.py\", line 335, in install_packages\n    retry_count=agent_stack_retry_count)\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/base.py\", line 166, in __init__\n    self.env.run()\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/environment.py\", line 160, in run\n    self.run_action(resource, action)\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/environment.py\", line 124, in run_action\n    provider_action()\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/providers/package/__init__.py\", line 57, in action_upgrade\n    self.upgrade_package(package_name, self.resource.use_repos, self.resource.skip_repos)\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/providers/package/apt.py\", line 74, in wrapper\n    return function_to_decorate(self, name, *args[2:])\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/providers/package/apt.py\", line 385, in upgrade_package\n    return self.install_package(name, use_repos, skip_repos, is_upgrade)\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/providers/package/apt.py\", line 74, in wrapper\n    return function_to_decorate(self, name, *args[2:])\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/providers/package/apt.py\", line 352, in install_package\n    cmd = cmd + ['-o', 'Dir::Etc::SourceList=%s' % EMPTY_FILE]\nNameError: global name 'EMPTY_FILE' is not defined\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "express_upgrade"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Package install fails on Debian7 with 'EMPTY_FILE' global variable not defined"
   },
   {
      "_id": "13101703",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-09-12 16:34:28",
      "description": "Validate kerberos.json files to ensure they meet the expected schema.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Validate kerberos.json files to ensure they meet the expected schema"
   },
   {
      "_id": "13101018",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-09-09 10:48:24",
      "description": "Kerberos identity references should use the \"reference\" attribute rather than rely on the \"name\" attribute to indicate the identity descriptor references some other identity descriptor.  \n\nEither method should work on the backend, however the UI appears to not fully handle the \"named\" reference properly. \n\nThe solution is to change \n{code}\n            {\n              \"name\": \"/HDFS/NAMENODE/namenode_nn\",\n              \"principal\": {\n                \"configuration\": \"ranger-hdfs-audit/xasecure.audit.jaas.Client.option.principal\"\n              },\n              \"keytab\": {\n                \"configuration\": \"ranger-hdfs-audit/xasecure.audit.jaas.Client.option.keyTab\"\n              }\n            }\n{code}\n\nby changing the \"name\" attribute to \"reference\" and adding a new \"name\" reference with a unique name relative to the scope of the identity descriptor. For example:\n\n{code}\n            {\n              \"name\":\"ranger_hdfs_audit\"\n              \"reference\": \"/HDFS/NAMENODE/namenode_nn\",\n              \"principal\": {\n                \"configuration\": \"ranger-hdfs-audit/xasecure.audit.jaas.Client.option.principal\"\n              },\n              \"keytab\": {\n                \"configuration\": \"ranger-hdfs-audit/xasecure.audit.jaas.Client.option.keyTab\"\n              }\n            }\n{code}\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos identity references should use the \"reference\" attribute"
   },
   {
      "_id": "13097579",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-08-25 12:05:02",
      "description": "Python unit test in {{test_kms_server}} occasionally fails due to timing.  Expected and actual output use two separate calls to get current time, which may be different if happens to be executed around the turn of a second.\n\n{noformat}\nFAIL: test_start_secured (test_kms_server.TestRangerKMS)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-common/src/test/python/mock/mock.py\", line 1199, in patched\n    return func(*args, **keywargs)\n  File \"/home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-server/src/test/python/stacks/2.5/RANGER_KMS/test_kms_server.py\", line 522, in test_start_secured\n    mode = 0644\n  File \"/home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-server/src/test/python/stacks/utils/RMFTestCase.py\", line 330, in assertResourceCalled\n    self.assertEquals(kwargs, resource.arguments)\nAssertionError: {'owner': 'kms', 'content': '<ranger>\\n<enabled>2017-08-25 11:02:46</enabled>\\n< [truncated]... != {'content': '<ranger>\\n<enabled>2017-08-25 11:02:45</enabled>\\n</ranger>', 'owne [truncated]...\n- {'content': '<ranger>\\n<enabled>2017-08-25 11:02:46</enabled>\\n</ranger>',\n?                                                   ^\n\n+ {'content': '<ranger>\\n<enabled>2017-08-25 11:02:45</enabled>\\n</ranger>',\n?                                                   ^\n\n-  'group': 'kms',\n+  'group': u'kms',\n?           +\n\n   'mode': 420,\n-  'owner': 'kms'}\n+  'owner': u'kms'}\n?           +\n\n{noformat}\n\nAffected code: {{test_start_default}} and {{test_start_secured}} in {{ambari-server/src/test/python/stacks/2.5/RANGER_KMS/test_kms_server.py}}.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
         "name": "Minor",
         "id": "4"
      },
      "projectname": "AMBARI",
      "summary": "test_kms_server timing issue"
   },
   {
      "_id": "13093766",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-08-10 12:49:01",
      "description": "Occasionally an import from {{org.apache.hadoop.metrics2.sink.relocated....}} creeps into {{ambari-server}} source code, causing compile errors:\n\n{noformat}\n$ mvn -am -pl ambari-server clean test\n...\n[ERROR] ambari-server/src/test/java/org/apache/ambari/server/checks/AbstractCheckDescriptorTest.java:[39,71] package org.apache.hadoop.metrics2.sink.relocated.google.common.collect does not exist\n[ERROR] ambari-server/src/test/java/org/apache/ambari/server/checks/AbstractCheckDescriptorTest.java:[114,34] cannot find symbol\n[ERROR]   symbol:   variable Sets\n[ERROR]   location: class org.apache.ambari.server.checks.AbstractCheckDescriptorTest\n{noformat}\n\nThe problem is that the same code can be compiled if dependencies are already installed in one's local Maven repository.\n\n{noformat}\n$ mvn -am -pl ambari-metrics/ambari-metrics-common,ambari-serviceadvisor,ambari-views clean install\n...\n$ mvn -pl ambari-server clean test\n...\n[INFO] BUILD SUCCESS\n{noformat}\n\nThis succeeds because {{ambari-metrics-common}} installs a shaded uber jar including the {{..relocated..}} packages, hence they are available when compiling {{ambari-server}}.  On the other hand, when building from scratch (selectively with {{-am -pl ...}}, or the entire multimodule project) classpath contains {{ambari-metrics-common}} classes and individual dependencies without relocation.\n\nThe goal of this change is to add a checkstyle check to catch such imports at build-time with both compilation methods.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
         "name": "Minor",
         "id": "4"
      },
      "projectname": "AMBARI",
      "summary": "Add check for import from relocated packages"
   },
   {
      "_id": "13093694",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-08-10 08:00:28",
      "description": "*STR*\n# Deployed IOP-4.2.5 cluster with Ambari-2.4.2\n# Upgrade Ambari to 2.5.2\n# Stop Hbase service and delete HBASE_REST_SERVER component via API\n# Try to start HBase service\n\nResult\n{code}\nTraceback (most recent call last):\n  File \"/var/lib/ambari-agent/cache/stacks/BigInsights/4.2.5/hooks/before-INSTALL/scripts/hook.py\", line 37, in <module>\n    BeforeInstallHook().execute()\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/script/script.py\", line 329, in execute\n    method(env)\n  File \"/var/lib/ambari-agent/cache/stacks/BigInsights/4.2.5/hooks/before-INSTALL/scripts/hook.py\", line 33, in hook\n    install_repos()\n  File \"/var/lib/ambari-agent/cache/stacks/BigInsights/4.2.5/hooks/before-INSTALL/scripts/repo_initialization.py\", line 68, in install_repos\n    _alter_repo(\"create\", params.repo_info, template)\n  File \"/var/lib/ambari-agent/cache/stacks/BigInsights/4.2.5/hooks/before-INSTALL/scripts/repo_initialization.py\", line 35, in _alter_repo\n    repo_dicts = json.loads(repo_string)\n  File \"/usr/lib/python2.6/site-packages/ambari_simplejson/__init__.py\", line 307, in loads\n    return _default_decoder.decode(s)\n  File \"/usr/lib/python2.6/site-packages/ambari_simplejson/decoder.py\", line 335, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n  File \"/usr/lib/python2.6/site-packages/ambari_simplejson/decoder.py\", line 353, in raw_decode\n    raise ValueError(\"No JSON object could be decoded\")\nValueError: No JSON object could be decoded\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "system_test"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Error starting client components on RedHat7 and BI 4.2.5 after Ambari upgrade"
   },
   {
      "_id": "13091162",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-07-31 11:10:55",
      "description": "Dynamically determine what keytab files have been distributed to hosts. A custom command should be available via the KERBEROS_CLIENT to query for the keytab files installed on the relevant host. The communication between the Ambari server and the agents should generate data needed to determine what keytab files exist.\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Dynamically determine what keytab files have been distributed"
   },
   {
      "_id": "13087272",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-07-14 18:47:10",
      "description": "Ambari-server.log:- \n{code}\njava.lang.NullPointerException\n\tat org.apache.ambari.server.state.kerberos.KerberosDescriptorUpdateHelper.processIdentity(KerberosDescriptorUpdateHelper.java:360)\n\tat org.apache.ambari.server.state.kerberos.KerberosDescriptorUpdateHelper.processIdentities(KerberosDescriptorUpdateHelper.java:321)\n\tat org.apache.ambari.server.state.kerberos.KerberosDescriptorUpdateHelper.processComponent(KerberosDescriptorUpdateHelper.java:230)\n\tat org.apache.ambari.server.state.kerberos.KerberosDescriptorUpdateHelper.processService(KerberosDescriptorUpdateHelper.java:195)\n\tat org.apache.ambari.server.state.kerberos.KerberosDescriptorUpdateHelper.processServices(KerberosDescriptorUpdateHelper.java:122)\n\tat org.apache.ambari.server.state.kerberos.KerberosDescriptorUpdateHelper.updateUserKerberosDescriptor(KerberosDescriptorUpdateHelper.java:78)\n\tat org.apache.ambari.server.serveraction.upgrades.UpgradeUserKerberosDescriptor.execute(UpgradeUserKerberosDescriptor.java:139)\n\tat org.apache.ambari.server.serveraction.ServerActionExecutor$Worker.execute(ServerActionExecutor.java:517)\n\tat org.apache.ambari.server.serveraction.ServerActionExecutor$Worker.run(ServerActionExecutor.java:454)\n\tat java.lang.Thread.run(Thread.java:748)\n\n{code}\n\n*Cause*\nThis is caused by having a _custom/unexpected_ identity in the user-supplied Kerberos descriptor that is not in the Kerberos descriptor from the initial stack.  \n\n*Solution*\nIgnore the _custom/unexpected_ identity since the user must have added that manually and it is expected that it should remain untouched after the upgrade process. \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "express_upgrade",
         "rolling_upgrade",
         "upgrade"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "NPE during \"Update Kerberos Descriptor\""
   },
   {
      "_id": "13081417",
      "assignee": "aonishuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-06-21 13:03:56",
      "description": "There are 78 python test failures in Ambari agent for ppc64le\n\nError:\n\n{code:java}\nTraceback (most recent call last):\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-common/src/test/python/mock/mock.py\", line 1199, in patched\n    return func(*args, **keywargs)\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-agent/src/test/python/resource_management/TestXmlConfigResource.py\", line 68, in test_action_create_empty_xml_config\n    configuration_attributes={}\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-common/src/main/python/resource_management/core/base.py\", line 155, in __init__\n    self.env.run()\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-common/src/main/python/resource_management/core/environment.py\", line 160, in run\n    self.run_action(resource, action)\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-common/src/main/python/resource_management/core/environment.py\", line 118, in run_action\n    resource.provider)\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-common/src/main/python/resource_management/core/providers/__init__.py\", line 93, in find_provider\n    if resource in os_family_provider:\nUnboundLocalError: local variable 'os_family_provider' referenced before assignment\n{code}\n\nIn Ambari-server, the below tests fail: \n\n\n{code:java}\nERROR: test_configure_default (test_ganglia_server.TestGangliaServer)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/2.0.6/GANGLIA/test_ganglia_server.py\", line 37, in test_configure_default\n    target = RMFTestCase.TARGET_COMMON_SERVICES\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/utils/RMFTestCase.py\", line 155, in executeScript\n    method(RMFTestCase.env, *command_args)\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-common/src/main/python/resource_management/libraries/script/script.py\", line 120, in locking_configure\n    original_configure(obj, *args, **kw)\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/utils/../../../../main/resources/common-services/GANGLIA/3.5.0/package/scripts/ganglia_server.py\", line 78, in configure\n    change_permission()\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/utils/../../../../main/resources/common-services/GANGLIA/3.5.0/package/scripts/ganglia_server.py\", line 93, in change_permission\n    Directory(params.dwoo_path,\nAttributeError: 'module' object has no attribute 'dwoo_path'\n\nERROR: test_install_default (test_ganglia_server.TestGangliaServer)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/2.0.6/GANGLIA/test_ganglia_server.py\", line 79, in test_install_default\n    target = RMFTestCase.TARGET_COMMON_SERVICES\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/utils/RMFTestCase.py\", line 155, in executeScript\n    method(RMFTestCase.env, *command_args)\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/utils/../../../../main/resources/common-services/GANGLIA/3.5.0/package/scripts/ganglia_server.py\", line 41, in install\n    self.configure(env)\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-common/src/main/python/resource_management/libraries/script/script.py\", line 120, in locking_configure\n    original_configure(obj, *args, **kw)\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/utils/../../../../main/resources/common-services/GANGLIA/3.5.0/package/scripts/ganglia_server.py\", line 78, in configure\n    change_permission()\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/utils/../../../../main/resources/common-services/GANGLIA/3.5.0/package/scripts/ganglia_server.py\", line 93, in change_permission\n    Directory(params.dwoo_path,\nAttributeError: 'module' object has no attribute 'dwoo_path'\n\nERROR: test_start_default (test_ganglia_server.TestGangliaServer)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/2.0.6/GANGLIA/test_ganglia_server.py\", line 48, in test_start_default\n    target = RMFTestCase.TARGET_COMMON_SERVICES\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/utils/RMFTestCase.py\", line 155, in executeScript\n    method(RMFTestCase.env, *command_args)\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/utils/../../../../main/resources/common-services/GANGLIA/3.5.0/package/scripts/ganglia_server.py\", line 49, in start\n    self.configure(env)\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-common/src/main/python/resource_management/libraries/script/script.py\", line 120, in locking_configure\n    original_configure(obj, *args, **kw)\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/utils/../../../../main/resources/common-services/GANGLIA/3.5.0/package/scripts/ganglia_server.py\", line 78, in configure\n    change_permission()\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/utils/../../../../main/resources/common-services/GANGLIA/3.5.0/package/scripts/ganglia_server.py\", line 93, in change_permission\n    Directory(params.dwoo_path,\nAttributeError: 'module' object has no attribute 'dwoo_path'\n\nERROR: test_start_default_22_with_phoenix_enabled (test_hbase_regionserver.TestHbaseRegionServer)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-common/src/test/python/mock/mock.py\", line 1199, in patched\n    return func(*args, **keywargs)\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/2.0.6/HBASE/test_hbase_regionserver.py\", line 427, in test_start_default_22_with_phoenix_enabled\n    target = RMFTestCase.TARGET_COMMON_SERVICES)\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/utils/RMFTestCase.py\", line 155, in executeScript\n    method(RMFTestCase.env, *command_args)\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/utils/../../../../main/resources/common-services/HBASE/0.96.0.2.0/package/scripts/hbase_regionserver.py\", line 93, in start\n    self.configure(env) # for security\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-common/src/main/python/resource_management/libraries/script/script.py\", line 120, in locking_configure\n    original_configure(obj, *args, **kw)\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/utils/../../../../main/resources/common-services/HBASE/0.96.0.2.0/package/scripts/hbase_regionserver.py\", line 49, in configure\n    hbase(name='regionserver')\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-common/src/main/python/ambari_commons/os_family_impl.py\", line 89, in thunk\n    return fn(*args, **kwargs)\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/main/resources/common-services/HBASE/0.96.0.2.0/package/scripts/hbase.py\", line 224, in hbase\n    Package(params.phoenix_package,\nAttributeError: 'module' object has no attribute 'phoenix_package'\n\nFAIL: test_clean_default (test_mysql_server.TestMySqlServer)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/2.0.6/HIVE/test_mysql_server.py\", line 124, in test_clean_default\n    self.assert_clean_default()\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/2.0.6/HIVE/test_mysql_server.py\", line 182, in assert_clean_default\n    try_sleep = 5\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/utils/RMFTestCase.py\", line 281, in assertResourceCalled\n    self.assertEquals(name, resource.name)\nAssertionError: 'bash -x /tmp/removeMysqlUser.sh mysql hive c6402.ambari.apache.org' != u'bash -x /tmp/removeMysqlUser.sh mysqld hive c6402.ambari.apache.org'\n\nFAIL: test_clean_secured (test_mysql_server.TestMySqlServer)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/2.0.6/HIVE/test_mysql_server.py\", line 135, in test_clean_secured\n    self.assert_clean_secured()\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/2.0.6/HIVE/test_mysql_server.py\", line 193, in assert_clean_secured\n    try_sleep = 5\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/utils/RMFTestCase.py\", line 281, in assertResourceCalled\n    self.assertEquals(name, resource.name)\nAssertionError: 'bash -x /tmp/removeMysqlUser.sh mysql hive c6402.ambari.apache.org' != u'bash -x /tmp/removeMysqlUser.sh mysqld hive c6402.ambari.apache.org'\n\nFAIL: test_configure_default (test_mysql_server.TestMySqlServer)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/2.0.6/HIVE/test_mysql_server.py\", line 38, in test_configure_default\n    self.assert_configure_default()\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/2.0.6/HIVE/test_mysql_server.py\", line 153, in assert_configure_default\n    try_sleep = 5\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/utils/RMFTestCase.py\", line 281, in assertResourceCalled\n    self.assertEquals(name, resource.name)\nAssertionError: 'bash -x /tmp/addMysqlUser.sh mysql hive \\'!`\"\\'\"\\'\"\\' 1\\' c6402.ambari.apache.org' != u'bash -x /tmp/addMysqlUser.sh mysqld hive \\'!`\"\\'\"\\'\"\\' 1\\' c6402.ambari.apache.org'\n\nFAIL: test_configure_secured (test_mysql_server.TestMySqlServer)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/2.0.6/HIVE/test_mysql_server.py\", line 81, in test_configure_secured\n    self.assert_configure_secured()\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/2.0.6/HIVE/test_mysql_server.py\", line 171, in assert_configure_secured\n    try_sleep = 5\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/utils/RMFTestCase.py\", line 281, in assertResourceCalled\n    self.assertEquals(name, resource.name)\nAssertionError: 'bash -x /tmp/addMysqlUser.sh mysql hive \\'!`\"\\'\"\\'\"\\' 1\\' c6402.ambari.apache.org' != u'bash -x /tmp/addMysqlUser.sh mysqld hive \\'!`\"\\'\"\\'\"\\' 1\\' c6402.ambari.apache.org'\n\nFAIL: test_start_default (test_mysql_server.TestMySqlServer)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/2.0.6/HIVE/test_mysql_server.py\", line 53, in test_start_default\n    sudo = True,\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/utils/RMFTestCase.py\", line 281, in assertResourceCalled\n    self.assertEquals(name, resource.name)\nAssertionError: Tuples differ: ('service', 'mysql', 'start') != ('service', 'mysqld', 'start')\n\nFirst differing element 1:\nmysql\nmysqld\n\n- ('service', 'mysql', 'start')\n+ ('service', 'mysqld', 'start')\n?                   +\n\n\nFAIL: test_start_secured (test_mysql_server.TestMySqlServer)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/2.0.6/HIVE/test_mysql_server.py\", line 96, in test_start_secured\n    sudo = True,\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/utils/RMFTestCase.py\", line 281, in assertResourceCalled\n    self.assertEquals(name, resource.name)\nAssertionError: Tuples differ: ('service', 'mysql', 'start') != ('service', 'mysqld', 'start')\n\nFirst differing element 1:\nmysql\nmysqld\n\n- ('service', 'mysql', 'start')\n+ ('service', 'mysqld', 'start')\n?                   +\n\n\nFAIL: test_stop_default (test_mysql_server.TestMySqlServer)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/2.0.6/HIVE/test_mysql_server.py\", line 68, in test_stop_default\n    sudo = True,\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/utils/RMFTestCase.py\", line 281, in assertResourceCalled\n    self.assertEquals(name, resource.name)\nAssertionError: Tuples differ: ('service', 'mysql', 'stop') != ('service', 'mysqld', 'stop')\n\nFirst differing element 1:\nmysql\nmysqld\n\n- ('service', 'mysql', 'stop')\n+ ('service', 'mysqld', 'stop')\n?                   +\n\n\nFAIL: test_stop_secured (test_mysql_server.TestMySqlServer)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/2.0.6/HIVE/test_mysql_server.py\", line 112, in test_stop_secured\n    sudo = True,\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/utils/RMFTestCase.py\", line 281, in assertResourceCalled\n    self.assertEquals(name, resource.name)\nAssertionError: Tuples differ: ('service', 'mysql', 'stop') != ('service', 'mysqld', 'stop')\n\nFirst differing element 1:\nmysql\nmysqld\n\n- ('service', 'mysql', 'stop')\n+ ('service', 'mysqld', 'stop')\n?                   +\n\n\nFAIL: test_service_check_default (test_service_check.TestServiceCheck)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-common/src/test/python/mock/mock.py\", line 1199, in patched\n    return func(*args, **keywargs)\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/2.0.6/OOZIE/test_service_check.py\", line 40, in test_service_check_default\n    self.assert_service_check()\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/2.0.6/OOZIE/test_service_check.py\", line 153, in assert_service_check\n    try_sleep = 5,\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/utils/RMFTestCase.py\", line 281, in assertResourceCalled\n    self.assertEquals(name, resource.name)\nAssertionError: '/tmp/oozieSmoke2.sh suse /var/lib/oozie /etc/oozie/conf /usr/bin http://c6402.ambari.apache.org:11000/oozie / /etc/hadoop/conf /usr/bin ambari-qa no-op False' != u'/tmp/oozieSmoke2.sh suse-ppc /var/lib/oozie /etc/oozie/conf /usr/bin http://c6402.ambari.apache.org:11000/oozie / /etc/hadoop/conf /usr/bin ambari-qa no-op False'\n\nFAIL: test_service_check_secured (test_service_check.TestServiceCheck)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-common/src/test/python/mock/mock.py\", line 1199, in patched\n    return func(*args, **keywargs)\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/2.0.6/OOZIE/test_service_check.py\", line 53, in test_service_check_secured\n    self.assert_service_check()\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/2.0.6/OOZIE/test_service_check.py\", line 153, in assert_service_check\n    try_sleep = 5,\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/utils/RMFTestCase.py\", line 281, in assertResourceCalled\n    self.assertEquals(name, resource.name)\nAssertionError: '/tmp/oozieSmoke2.sh suse /var/lib/oozie /etc/oozie/conf /usr/bin http://c6402.ambari.apache.org:11000/oozie / /etc/hadoop/conf /usr/bin ambari-qa no-op False' != u'/tmp/oozieSmoke2.sh suse-ppc /var/lib/oozie /etc/oozie/conf /usr/bin http://c6402.ambari.apache.org:11000/oozie / /etc/hadoop/conf /usr/bin ambari-qa no-op False'\n\nFAIL: test_hook_default (test_before_install.TestHookBeforeInstall)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-common/src/test/python/mock/mock.py\", line 1199, in patched\n    return func(*args, **keywargs)\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/2.0.6/hooks/before-INSTALL/test_before_install.py\", line 42, in test_hook_default\n    repo_template='[{{repo_id}}]\\nname={{repo_id}}\\n{% if mirror_list %}mirrorlist={{mirror_list}}{% else %}baseurl={{base_url}}{% endif %}\\n\\npath=/\\nenabled=1\\ngpgcheck=0'\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/utils/RMFTestCase.py\", line 282, in assertResourceCalled\n    self.assertEquals(kwargs, resource.arguments)\nAssertionError: {'base_url': 'http://public-repo-1.hortonworks.com/HDP/centos6/2.x/updates/2.0.6 [truncated]... != {'base_url': u'http://public-repo-1.hortonworks.com/HDP/centos6/2.x/updates/2.0. [truncated]...\n  {'action': ['create'],\n-  'base_url': 'http://public-repo-1.hortonworks.com/HDP/centos6/2.x/updates/2.0.6.0',\n+  'base_url': u'http://public-repo-1.hortonworks.com/HDP/centos6/2.x/updates/2.0.6.0',\n?              +\n\n-  'components': ['HDP', 'main'],\n+  'components': [u'HDP', 'main'],\n?                 +\n\n   'mirror_list': None,\n-  'repo_file_name': 'HDP',\n+  'repo_file_name': u'HDP',\n?                    +\n\n-  'repo_template': '[{{repo_id}}]\\nname={{repo_id}}\\n{% if mirror_list %}mirrorlist={{mirror_list}}{% else %}baseurl={{base_url}}{% endif %}\\n\\npath=/\\nenabled=1\\ngpgcheck=0'}\n+  'repo_template': u'{{package_type}} {{base_url}} {{components}}'}\n\nFAIL: test_hook_default_repository_file (test_before_install.TestHookBeforeInstall)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-common/src/test/python/mock/mock.py\", line 1199, in patched\n    return func(*args, **keywargs)\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/2.0.6/hooks/before-INSTALL/test_before_install.py\", line 80, in test_hook_default_repository_file\n    append_to_file=False)\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/stacks/utils/RMFTestCase.py\", line 282, in assertResourceCalled\n    self.assertEquals(kwargs, resource.arguments)\nAssertionError: {'append_to_file': False, 'base_url': 'http://repo1/HDP/centos5/2.x/updates/2.2. [truncated]... != {'append_to_file': False, 'base_url': u'http://repo1/HDP/centos5/2.x/updates/2.2 [truncated]...\n  {'action': ['create'],\n   'append_to_file': False,\n-  'base_url': 'http://repo1/HDP/centos5/2.x/updates/2.2.0.0',\n+  'base_url': u'http://repo1/HDP/centos5/2.x/updates/2.2.0.0',\n?              +\n\n-  'components': ['HDP', 'main'],\n+  'components': [u'HDP', 'main'],\n?                 +\n\n   'mirror_list': None,\n   'repo_file_name': 'ambari-hdp-4',\n-  'repo_template': '[{{repo_id}}]\\nname={{repo_id}}\\n{% if mirror_list %}mirrorlist={{mirror_list}}{% else %}baseurl={{base_url}}{% endif %}\\n\\npath=/\\nenabled=1\\ngpgcheck=0'}\n+  'repo_template': u'{{package_type}} {{base_url}} {{components}}'}\n\nFAIL: testTransparentHugePage (TestCheckHost.TestCheckHost)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-common/src/test/python/mock/mock.py\", line 1199, in patched\n    return func(*args, **keywargs)\n  File \"/var/lib/jenkins/workspace/ambari-trunk/ambari-server/src/test/python/custom_actions/TestCheckHost.py\", line 407, in testTransparentHugePage\n    self.assertEquals(structured_out_mock.call_args[0][0], {'transparentHugePage' : {'message': 'never', 'exit_code': 0}})\nAssertionError: {'transparentHugePage': {'message': '', 'exit_code': 0}} != {'transparentHugePage': {'message': 'never', 'exit_code': 0}}\n- {'transparentHugePage': {'exit_code': 0, 'message': ''}}\n+ {'transparentHugePage': {'exit_code': 0, 'message': 'never'}}\n?                                                      +++++\n\n{code}\n\n\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "powerpc",
         "ppc64le"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Python tests fail for ambari-server and ambari-agent on ppc64le"
   },
   {
      "_id": "13076202",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-05-31 14:24:34",
      "description": "Get rid of as many Maven warnings as possible:\n\n{noformat}\n[WARNING] \n[WARNING] Some problems were encountered while building the effective model for org.apache.ambari:ambari-web:pom:2.0.0.0-SNAPSHOT\n[WARNING] 'build.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.codehaus.mojo:exec-maven-plugin @ line 161, column 15\n[WARNING] \n[WARNING] Some problems were encountered while building the effective model for org.apache.ambari:ambari-admin:jar:2.0.0.0-SNAPSHOT\n[WARNING] 'build.plugins.plugin.version' for org.codehaus.mojo:exec-maven-plugin is missing. @ line 91, column 15\n[WARNING] \n[WARNING] Some problems were encountered while building the effective model for org.apache.ambari:ambari-metrics-common:jar:2.0.0.0-SNAPSHOT\n[WARNING] 'build.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.apache.maven.plugins:maven-surefire-plugin @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 169, column 15\n[WARNING] 'build.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.codehaus.mojo:build-helper-maven-plugin @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 202, column 15\n[WARNING] 'build.plugins.plugin.version' for org.apache.rat:apache-rat-plugin is missing. @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 282, column 15\n[WARNING] 'build.plugins.plugin.version' for org.apache.maven.plugins:maven-clean-plugin is missing. @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 187, column 15\n[WARNING] \n[WARNING] Some problems were encountered while building the effective model for org.apache.ambari:ambari-metrics-hadoop-sink:jar:2.0.0.0-SNAPSHOT\n[WARNING] 'build.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.apache.maven.plugins:maven-surefire-plugin @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 169, column 15\n[WARNING] 'build.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.codehaus.mojo:build-helper-maven-plugin @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 202, column 15\n[WARNING] 'build.plugins.plugin.version' for org.apache.rat:apache-rat-plugin is missing. @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 282, column 15\n[WARNING] 'build.plugins.plugin.version' for org.apache.maven.plugins:maven-clean-plugin is missing. @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 187, column 15\n[WARNING] \n[WARNING] Some problems were encountered while building the effective model for org.apache.ambari:ambari-metrics-flume-sink:jar:2.0.0.0-SNAPSHOT\n[WARNING] 'build.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.apache.maven.plugins:maven-surefire-plugin @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 169, column 15\n[WARNING] 'build.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.codehaus.mojo:build-helper-maven-plugin @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 202, column 15\n[WARNING] 'build.plugins.plugin.version' for org.apache.rat:apache-rat-plugin is missing. @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 282, column 15\n[WARNING] 'build.plugins.plugin.version' for org.apache.maven.plugins:maven-clean-plugin is missing. @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 187, column 15\n[WARNING] \n[WARNING] Some problems were encountered while building the effective model for org.apache.ambari:ambari-metrics-kafka-sink:jar:2.0.0.0-SNAPSHOT\n[WARNING] 'build.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.apache.maven.plugins:maven-surefire-plugin @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 169, column 15\n[WARNING] 'build.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.codehaus.mojo:build-helper-maven-plugin @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 202, column 15\n[WARNING] 'build.plugins.plugin.version' for org.apache.rat:apache-rat-plugin is missing. @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 282, column 15\n[WARNING] 'build.plugins.plugin.version' for org.apache.maven.plugins:maven-clean-plugin is missing. @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 187, column 15\n[WARNING] \n[WARNING] Some problems were encountered while building the effective model for org.apache.ambari:ambari-metrics-storm-sink:jar:2.0.0.0-SNAPSHOT\n[WARNING] 'build.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.apache.maven.plugins:maven-surefire-plugin @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 169, column 15\n[WARNING] 'build.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.codehaus.mojo:build-helper-maven-plugin @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 202, column 15\n[WARNING] 'build.plugins.plugin.version' for org.apache.rat:apache-rat-plugin is missing. @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 282, column 15\n[WARNING] 'build.plugins.plugin.version' for org.apache.maven.plugins:maven-clean-plugin is missing. @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 187, column 15\n[WARNING] \n[WARNING] Some problems were encountered while building the effective model for org.apache.ambari:ambari-metrics-storm-sink-legacy:jar:2.0.0.0-SNAPSHOT\n[WARNING] 'build.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.apache.maven.plugins:maven-surefire-plugin @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 169, column 15\n[WARNING] 'build.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.codehaus.mojo:build-helper-maven-plugin @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 202, column 15\n[WARNING] 'build.plugins.plugin.version' for org.apache.rat:apache-rat-plugin is missing. @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 282, column 15\n[WARNING] 'build.plugins.plugin.version' for org.apache.maven.plugins:maven-clean-plugin is missing. @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 187, column 15\n[WARNING] \n[WARNING] Some problems were encountered while building the effective model for org.apache.ambari:ambari-metrics-timelineservice:jar:2.0.0.0-SNAPSHOT\n[WARNING] 'build.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.apache.maven.plugins:maven-surefire-plugin @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 169, column 15\n[WARNING] 'build.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.codehaus.mojo:build-helper-maven-plugin @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 202, column 15\n[WARNING] 'build.plugins.plugin.version' for org.apache.rat:apache-rat-plugin is missing. @ line 252, column 15\n[WARNING] 'build.plugins.plugin.version' for org.apache.maven.plugins:maven-clean-plugin is missing. @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 187, column 15\n[WARNING] \n[WARNING] Some problems were encountered while building the effective model for org.apache.ambari:ambari-metrics-host-monitoring:pom:2.0.0.0-SNAPSHOT\n[WARNING] 'build.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.apache.maven.plugins:maven-surefire-plugin @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 169, column 15\n[WARNING] 'build.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.codehaus.mojo:build-helper-maven-plugin @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 202, column 15\n[WARNING] 'build.plugins.plugin.version' for org.codehaus.mojo:exec-maven-plugin is missing. @ line 86, column 15\n[WARNING] 'build.plugins.plugin.version' for org.apache.rat:apache-rat-plugin is missing. @ line 110, column 15\n[WARNING] \n[WARNING] Some problems were encountered while building the effective model for org.apache.ambari:ambari-metrics-grafana:pom:2.1.0.0.0\n[WARNING] 'build.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.apache.maven.plugins:maven-surefire-plugin @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 169, column 15\n[WARNING] 'build.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.codehaus.mojo:build-helper-maven-plugin @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 202, column 15\n[WARNING] 'build.plugins.plugin.version' for org.apache.rat:apache-rat-plugin is missing. @ line 64, column 15\n[WARNING] 'build.plugins.plugin.version' for org.apache.maven.plugins:maven-clean-plugin is missing. @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 187, column 15\n[WARNING] \n[WARNING] Some problems were encountered while building the effective model for org.apache.ambari:ambari-metrics-assembly:pom:2.0.0.0-SNAPSHOT\n[WARNING] 'build.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.apache.maven.plugins:maven-surefire-plugin @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 169, column 15\n[WARNING] 'build.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.codehaus.mojo:build-helper-maven-plugin @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 202, column 15\n[WARNING] 'build.plugins.plugin.version' for org.apache.rat:apache-rat-plugin is missing. @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 282, column 15\n[WARNING] 'build.plugins.plugin.version' for org.apache.maven.plugins:maven-clean-plugin is missing. @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 187, column 15\n[WARNING] \n[WARNING] Some problems were encountered while building the effective model for org.apache.ambari:ambari-metrics-host-aggregator:jar:2.0.0.0-SNAPSHOT\n[WARNING] 'build.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.apache.maven.plugins:maven-surefire-plugin @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 169, column 15\n[WARNING] 'build.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.codehaus.mojo:build-helper-maven-plugin @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 202, column 15\n[WARNING] 'build.plugins.plugin.version' for org.apache.rat:apache-rat-plugin is missing. @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 282, column 15\n[WARNING] 'build.plugins.plugin.version' for org.apache.maven.plugins:maven-clean-plugin is missing. @ org.apache.ambari:ambari-metrics:2.0.0.0-SNAPSHOT, /home/jenkins/jenkins-slave/workspace/Ambari-trunk-Commit/ambari-metrics/pom.xml, line 187, column 15\n[WARNING] \n[WARNING] Some problems were encountered while building the effective model for org.apache.ambari:ambari-metrics:pom:2.0.0.0-SNAPSHOT\n[WARNING] 'build.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.apache.maven.plugins:maven-surefire-plugin @ line 169, column 15\n[WARNING] 'build.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.codehaus.mojo:build-helper-maven-plugin @ line 202, column 15\n[WARNING] 'build.plugins.plugin.version' for org.apache.rat:apache-rat-plugin is missing. @ line 282, column 15\n[WARNING] 'build.plugins.plugin.version' for org.apache.maven.plugins:maven-clean-plugin is missing. @ line 187, column 15\n[WARNING] \n[WARNING] Some problems were encountered while building the effective model for org.apache.ambari:ambari-server:jar:2.0.0.0-SNAPSHOT\n[WARNING] 'build.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.apache.maven.plugins:maven-antrun-plugin @ line 699, column 15\n[WARNING] 'build.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.apache.maven.plugins:maven-antrun-plugin @ line 735, column 15\n[WARNING] 'build.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.codehaus.mojo:exec-maven-plugin @ line 824, column 15\n[WARNING] 'build.plugins.plugin.version' for org.codehaus.mojo:properties-maven-plugin is missing. @ line 469, column 15\n[WARNING] \n[WARNING] Some problems were encountered while building the effective model for org.apache.ambari:ambari-funtest:jar:2.0.0.0-SNAPSHOT\n[WARNING] 'dependencies.dependency.(groupId:artifactId:type:classifier)' must be unique: org.apache.httpcomponents:httpclient:jar -> version 4.2.5 vs 4.5.2 @ line 559, column 17\n[WARNING] 'build.plugins.plugin.version' for org.apache.maven.plugins:maven-failsafe-plugin is missing. @ line 52, column 15\n[WARNING] \n[WARNING] Some problems were encountered while building the effective model for org.apache.ambari:ambari-agent:jar:2.0.0.0-SNAPSHOT\n[WARNING] 'build.plugins.plugin.version' for org.codehaus.mojo:properties-maven-plugin is missing. @ line 207, column 15\n[WARNING] \n[WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.\n[WARNING] \n[WARNING] For this reason, future Maven versions might no longer support building such malformed projects.\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Eliminate Maven warnings"
   },
   {
      "_id": "13076196",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-05-31 14:00:24",
      "description": "Clean up Ambari Server source code warnings.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/15",
         "id": "15",
         "description": "Created by Jira Software - do not edit or delete. Issue type for a big user story that needs to be broken down.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21137&avatarType=issuetype",
         "name": "Epic",
         "subtask": false,
         "avatarId": 21137
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Code cleanup"
   },
   {
      "_id": "13075924",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-05-30 18:40:55",
      "description": "Update Database Access Layer to Support New Database Schema for Improved User Account Management.  \n\n* Update {{org.apache.ambari.server.orm.entities.UserEntity}}\n* Update {{org.apache.ambari.server.orm.dao.UserDAO}}\n* Add {{org.apache.ambari.server.orm.entities.UserAuthenticationEntity}}\n* Add {{org.apache.ambari.server.orm.dao.UserAuthenticationDAO}}\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "user_management"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Update Database Access Layer to Support New Database Schema for Improved User Account Management"
   },
   {
      "_id": "13069272",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-05-04 20:39:13",
      "description": "LDAPS connections to an Active Directory when enabling Kerberos should validate the server's SSL certificate.  The current implementation skips validation checks to help avoid SSL issues; however this is not secure. Also the _trusting_ SSL connection may not support the more secure SSL protocols - TLSv1.2.\n\nA flag in the {{ambari.properties}} file ({{kerberos.operation.verify.kdc.trust}}) should be available to allow for the user to select either a _trusting_  SSL connection or a validating (non-trusting) SSL connection to be used.  The default should be to use the standard (non-trusting) SSL connection. \n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "active-directory",
         "active_directory",
         "kerberos",
         "ssl"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "LDAPS connections to an Active Directory when enabling Kerberos should validate the server's SSL certificate"
   },
   {
      "_id": "13068235",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-05-01 20:50:29",
      "description": "User management tables in the DB should be:\n\n*{{users}}*\n||Name||Type||Description||\n|user_id|INTEGER|Internal unique identifier|\n|principal_id|INTEGER|Foreign key from adminprincipal table|\n|user_name|VARCHAR|Unique, case-insensitive, login identifier expected to be used when logging into Ambari|\n|active|BOOLEAN|Active/not active flag|\n|consecutive_failures|INTEGER|The number a failed authorization attempts since the last successful authentication|\n|active_widgets_layout|VARCHAR| |\n|display_name|VARCHAR|Cosmetic name value to show the user in user interfaces|\n|local_username|VARCHAR|Case-sensitive username to use when impersonating user in facilities like Ambari Views|\n|create_time|TIMESTAMP|Creation time for this account in Ambari|\n* Primary Key: {{user_id}}\n* Foreign Key: {{principal_id}} -> {{adminprincipal.principal_id}}\n\n*{{user_authentication}}*\n||Name||Type||Description||\n|user_authentication_id|INTEGER|Primary key for this table|\n|user_id|INTEGER|Foreign key from users table|\n|authentication_type|VARCHAR|Type of authentication system - LOCAL, LDAP,  KERBEROS, JTW, PAM, etc...\n|authentication_key|VARCHAR|Type-specific key (or identifier):\n* LOCAL: the user's password (digest)\n* LDAP: the user\u2019s distinguished name\n* KERBEROS: the user\u2019s principal\n* etc...|\n|create_time|TIMESTAMP|Creation time of this record\n|update_time|TIMESTAMP|Update time for this record, can be used to enforce password retention times|\n* Primary Key: {{user_authentication_id}}\n* Foreign Key: {{user_id}} -> {{users.user_id}}\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "user_management"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Create Database Schema for Improved User Account Management"
   },
   {
      "_id": "13067658",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-04-28 11:10:18",
      "description": "The schema file should be idempotent so that we can retry the script in case of exception.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Create idempotent Ambari DB Schema SQL script for AzureDB"
   },
   {
      "_id": "13067461",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323901",
            "id": "12323901",
            "name": "ambari-shell",
            "description": "Ambari Shell"
         }
      ],
      "created": "2017-04-27 17:52:45",
      "description": "HDP 2.6 stack introduced settings for ACLs on the Yarn Resource Manager HA state store. In `yarn-site/yarn.resourcemanager.zk-acl` the ACL user is set to `rm`. \n\nIf this user name does not match the primary component of the Yarn RM Kerberos principal in `yarn-site/yarn.resourcemanager.principal`, then Yarn is unable to access the state store and RM will stop immediately after start.\n\nDuring the Kerberos wizard there needs to be a check to see if these settings are out of sync. Or, the zk-acl setting needs to somehow reference the principal and extract the primary root through a variable.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Custom RM principal causes zookeeper HA state store to be inaccessible"
   },
   {
      "_id": "13067086",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-04-26 15:24:44",
      "description": "Update the Ambari REST API to allow for GET, POST, PUT, and DELETE operations on the authentication sources related to an Ambari user account.\n\n* * {{/api/v1/users/:USERNAME/sources}}\n** List a user\u2019s authentication sources\n** Add a new authentication source for a user\n\n* {{/api/v1/users/:USERNAME/sources/:SOURCE_ID}}\n** Get details on a specific authentication source for a user\n** Modify details for a specific authentication source for a user\n\nUpdate the following entry points, ensuring backwards compatibility where possible:\n\n* {{/api/v1/users}}\n** List all users\n** Add a new user\n** Backward compatibility: Set password should create or update the appropriate user_authentication record. \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "rest_api",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "BE: Extend Ambari REST API to Support User Account Management Improvements"
   },
   {
      "_id": "13067078",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-04-26 14:52:52",
      "description": "Update the backend for improved user management.  \n\nUser management tables in the DB should be:\n\n*{{users}}*\n||Name||Type||Description||\n|user_id|INTEGER|Internal unique identifier|\n|principal_id|INTEGER|Foreign key from adminprincipal table|\n|user_name|VARCHAR|Unique, case-insensitive, login identifier expected to be used when logging into Ambari|\n|create_time|TIMESTAMP|Creation time for this account in Ambari|\n|active|BOOLEAN|Active/not active flag|\n|consecutive_failed_auth_attemps|INTEGER|The number a failed authorization attempts since the last successful authentication|\n|active_widgets_layout|VARCHAR| |\n|display_name|VARCHAR|Cosmetic name value to show the user in user interfaces|\n|local_username|VARCHAR|Case-sensitive username to use when impersonating user in facilities like Ambari Views|\n* Primary Key: {{user_id}}\n* Foreign Key: {{principal_id}} -> {{adminprincipal.principal_id}}\n\n*{{user_authentication}}*\n||Name||Type||Description||\n|user_authentication_id|INTEGER|Primary key for this table|\n|user_id|INTEGER|Foreign key from users table|\n|authentication_type|VARCHAR|Type of authentication system - LOCAL, LDAP,  KERBEROS, JTW, PAM, etc...\n|authentication_key|VARCHAR|Type-specific key (or identifier):\n* LOCAL: the user's password (digest)\n* LDAP: the user\u2019s distinguished name\n* KERBEROS: the user\u2019s principal\n* etc...|\n|create_time|TIMESTAMP|Creation time of this record\n|update_time|TIMESTAMP|Update time for this record, can be used to enforce password retention times|\n* Primary Key: {{user_authentication_id}}\n* Foreign Key: {{user_id}} -> {{users.user_id}}\n\nJava code needs to change accordingly.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "authentication",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "BE: Improve User Account Management "
   },
   {
      "_id": "13067077",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2017-04-26 14:51:45",
      "description": "As of Ambari 2.4, user management is confusing and tends to lead to inconsistent results during synchronization and authentication.  With the addition of new mechanisms such as Kerberos and PAM, this will only get worse.  Therefore, there is a need to rework how Ambari manages users to ensure that new authentication facilities are easily integrated.\n\nThe following problems need to be solved:\n\n* *Case-sensitivity*\nSome authentication sources are case sensitive and some are not.  Ambari inconsistently handles the case of user names leading to confusing where user metadata is being created or being overwritten.  This issue extends from the front end through the backend and to the database layer.   \n\n* *Username Collisions*\nThere are several cases where username collisions occur.  One is where a username exists as a local user as well as an external user.  For example, the initial administrator account has is a local user account with the username of \"admin\".  There may also be an external user account with the username \"admin\". In some cases Ambari will treat both accounts as the same user, converting the local account during synchronization operation to an LDAP account. However in other cases, Ambari will treat the accounts as separate users and create a separate account.  \n\n* *REST API*\nDue to the implementation of the user resource in the REST API, there is no way to distinguish between user accounts with the same username and different data sources. For example usera/LOCAL vs usera/LDAP.  This is because the primary key for user resources is only the username field.  This make managing users confusing since the REST API entrypoint for user resources is /api/v1/users/:USERNAME and there is no way to retrieve or set the details for a specific user. \n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/15",
         "id": "15",
         "description": "Created by Jira Software - do not edit or delete. Issue type for a big user story that needs to be broken down.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21137&avatarType=issuetype",
         "name": "Epic",
         "subtask": false,
         "avatarId": 21137
      },
      "labels": [
         "authentication",
         "pull-request-available",
         "security",
         "user_management"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Improve User Account Management Within Ambari"
   },
   {
      "_id": "13064399",
      "assignee": "amagyar",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-04-17 13:48:32",
      "description": "Characters used in usernames should be constrained such that they cannot contain the following characters:\n\n* Less than symbols ( < )\n* Greater than symbols ( > )\n* Ampersand ( & )\n* Back slashes ( \\ )\n* Backtick ( ` )\n* Pipe ( | )\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "BE: Characters used in usernames should be constrained "
   },
   {
      "_id": "13058663",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323906",
            "id": "12323906",
            "name": "security",
            "description": "Ambari security features, including Kerberos"
         }
      ],
      "created": "2017-03-23 17:00:56",
      "description": "I notice that the explicit enabling of various protocols still includes SSLv2Hello and SSLv3, which are severely broken protocols with numerous known vulnerabilities and not necessary for legacy compatibility. Even TLSv1 and TLSv1.1 have been [discouraged since February 2014|https://community.qualys.com/thread/12421], when all modern browsers supported TLSv1.2. Is there any reason Ambari still needs to enable support for these legacy protocols, and are there any other mitigating controls put in place to prevent downgrade, brute force, padding oracle, and weak parameter attacks against these protocols? Thanks. \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "security",
         "ssl",
         "tls"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Remove the use of legacy SSL and TLS protocol versions"
   },
   {
      "_id": "13057423",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-03-20 04:52:24",
      "description": "Disabling security is failing with :\n{code}\nStack Advisor reported an error: AttributeError: 'NoneType' object has no attribute 'replace'\nStdOut file: /var/run/ambari-server/stack-recommendations/26/stackadvisor.out\n\nStdErr file: /var/run/ambari-server/stack-recommendations/26/stackadvisor.err\n{code}\n\nError file shows :\n{code}\nTraceback (most recent call last):\n  File \"/var/lib/ambari-server/resources/scripts/stack_advisor.py\", line 166, in <module>\n    main(sys.argv)\n  File \"/var/lib/ambari-server/resources/scripts/stack_advisor.py\", line 116, in main\n    result = stackAdvisor.recommendConfigurations(services, hosts)\n  File \"/var/lib/ambari-server/resources/scripts/../stacks/stack_advisor.py\", line 775, in recommendConfigurations\n    calculation(configurations, clusterSummary, services, hosts)\n  File \"/var/lib/ambari-server/resources/scripts/./../stacks/HDP/2.5/services/stack_advisor.py\", line 480, in recommendStormConfigurations\n    storm_nimbus_impersonation_acl.replace('{{storm_bare_jaas_principal}}', storm_bare_jaas_principal)\nAttributeError: 'NoneType' object has no attribute 'replace'\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "stack_advisor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Disabling security fails with AttributeError"
   },
   {
      "_id": "13056369",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-03-15 17:34:06",
      "description": "When I create a new user from Ambari UI and let\u2019s say give him \u2018Cluster User\u2019 role; later go to Users page it shows the permissions as seen in the screenshot\n\nThe UI display is fine, however when I make an API call like below\n/api/v1/users/tom/privileges?fields=*\n \nIt shows three entries for each auto_<view>_instance privilege. As an example: for \u2018AUTO_FILES_INSTANCE\u2019 I see three entries like:\napi/v1/users/tom/privileges/6\napi/v1/users/tom/privileges/56\napi/v1/users/tom/privileges/106\n \nand so on, so we have 16 entries (One for Cluster.User + 3 * privileges for each of five View instances)\n \nThe same behavior is seen for groups too like: /api/v1/groups/gp1/privileges?fields=* \n\n*Example*\nIt is expected that only one of the following rows exists:\n{noformat}\nambaricustom=> select * from adminprivilege where privilege_id in (6, 56, 106);\nprivilege_id | permission_id | resource_id | principal_id\n--------------+---------------+-------------+--------------\n            6 |             4 |          54 |            8\n           56 |             4 |          54 |            8\n          106 |             4 |          54 |            8\n(3 rows)\n{noformat}\n \n* permission_id (4): VIEW.USER\n* resource_id (54): AUTO_FILES_INSTANCE\n* principal_id (8): CLUSTER.USER\n\n*Cause*\nWhen Ambari server restarts, it installs the automatically created view instances without first checking to see if they have been previously created. Each restart of Ambari server will create a new set of duplicated records.\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "system_test"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Duplicate entries in DB for auto_<view>_instance privileges upon Ambari server restart"
   },
   {
      "_id": "13050320",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-03-12 12:07:52",
      "description": "STR\n1. Deploy HDP-2.5.0.0 with Ambari-2.5.0.0 (secure MIT cluster installed via blueprint)\n2. Express Upgrade the cluster to 2.6.0.0\n3. Disable Kerberos\n4. Observed that Atlas Metadata server start failed with below errors:\n{code}\nTraceback (most recent call last):\n  File \"/var/lib/ambari-agent/cache/common-services/ATLAS/0.1.0.2.3/package/scripts/metadata_server.py\", line 249, in <module>\n    MetadataServer().execute()\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/script/script.py\", line 282, in execute\n    method(env)\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/script/script.py\", line 720, in restart\n    self.start(env, upgrade_type=upgrade_type)\n  File \"/var/lib/ambari-agent/cache/common-services/ATLAS/0.1.0.2.3/package/scripts/metadata_server.py\", line 102, in start\n    user=params.hbase_user\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/base.py\", line 155, in __init__\n    self.env.run()\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/environment.py\", line 160, in run\n    self.run_action(resource, action)\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/environment.py\", line 124, in run_action\n    provider_action()\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/providers/system.py\", line 262, in action_run\n    tries=self.resource.tries, try_sleep=self.resource.try_sleep)\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/shell.py\", line 72, in inner\n    result = function(command, **kwargs)\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/shell.py\", line 102, in checked_call\n    tries=tries, try_sleep=try_sleep, timeout_kill_strategy=timeout_kill_strategy)\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/shell.py\", line 150, in _call_wrapper\n    result = _call(command, **kwargs_copy)\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/shell.py\", line 303, in _call\n    raise ExecutionFailed(err_msg, code, out, err)\nresource_management.core.exceptions.ExecutionFailed: Execution of 'cat /var/lib/ambari-agent/tmp/atlas_hbase_setup.rb | hbase shell -n' returned 1. ######## Hortonworks #############\nThis is MOTD message, added for testing in qe infra\natlas_titan\nATLAS_ENTITY_AUDIT_EVENTS\natlas\nTABLE\nATLAS_ENTITY_AUDIT_EVENTS\natlas_titan\n2 row(s) in 0.2000 seconds\n\nnil\nTABLE\nATLAS_ENTITY_AUDIT_EVENTS\natlas_titan\n2 row(s) in 0.0030 seconds\n\nnil\njava exception\nERROR Java::OrgApacheHadoopHbaseIpc::RemoteWithExtrasException: org.apache.hadoop.hbase.exceptions.UnknownProtocolException: No registered coprocessor service found for name AccessControlService in region hbase:acl,,1480905643891.19e697cf0c4be8a99c54e39aea069b29.\n\tat org.apache.hadoop.hbase.regionserver.HRegion.execService(HRegion.java:7692)\n\tat org.apache.hadoop.hbase.regionserver.RSRpcServices.execServiceOnRegion(RSRpcServices.java:1897)\n\tat org.apache.hadoop.hbase.regionserver.RSRpcServices.execService(RSRpcServices.java:1879)\n\tat org.apache.hadoop.hbase.protobuf.generated.ClientProtos$ClientService$2.callBlockingMethod(ClientProtos.java:32299)\n\tat org.apache.hadoop.hbase.ipc.RpcServer.call(RpcServer.java:2141)\n\tat org.apache.hadoop.hbase.ipc.CallRunner.run(CallRunner.java:112)\n\tat org.apache.hadoop.hbase.ipc.RpcExecutor$Handler.run(RpcExecutor.java:187)\n\tat org.apache.hadoop.hbase.ipc.RpcExecutor$Handler.run(RpcExecutor.java:167)\n{code}\n\n*Cause*\nWhen disabling Kerberos, the stack advisor recommendations are not properly applied due to the order of operations and various conditionals.\n\n*Solution*\nEnsure that the stack advisor recommendations are properly applied when disabling Kerberos. \n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "system_test"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Atlas MetaData server start fails while granting permissions to HBase tables after unkerberizing the cluster"
   },
   {
      "_id": "13049026",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-03-07 21:15:20",
      "description": "When SPNEGO authentication is enabled for Hadoop in a cluster where NN HA is enabled, PXF Process alert fails with the following errors in the ambari-agent.log file \n\n{noformat}\nERROR 2017-03-07 18:03:58,417 jmx.py:44 - Getting jmx metrics from NN failed. URL: http://c6401.ambari.apache.org:50070/jmx?qry=Hadoop:service=NameNode,name=FSNamesy\nstem\nTraceback (most recent call last):\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/functions/jmx.py\", line 41, in get_value_from_jmx\n    data_dict = json.loads(data)\n  File \"/usr/lib/python2.6/site-packages/ambari_simplejson/__init__.py\", line 307, in loads\n    return _default_decoder.decode(s)\n  File \"/usr/lib/python2.6/site-packages/ambari_simplejson/decoder.py\", line 335, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n  File \"/usr/lib/python2.6/site-packages/ambari_simplejson/decoder.py\", line 353, in raw_decode\n    raise ValueError(\"No JSON object could be decoded\")\nValueError: No JSON object could be decoded\nINFO 2017-03-07 18:04:02,769 logger.py:71 - call['ambari-sudo.sh su hdfs -l -s /bin/bash -c 'curl --negotiate -u : -s '\"'\"'http://c6402.ambari.apache.org:50070/jmx?qry=Hadoop:service=NameNode,name=FSNamesystem'\"'\"' 1>/tmp/tmphTXg76 2>/tmp/tmp5bm2nM''] {'quiet': False}\nINFO 2017-03-07 18:04:02,797 logger.py:71 - call returned (0, '')\nERROR 2017-03-07 18:04:02,798 jmx.py:44 - Getting jmx metrics from NN failed. URL: http://c6402.ambari.apache.org:50070/jmx?qry=Hadoop:service=NameNode,name=FSNamesystem\nTraceback (most recent call last):\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/functions/jmx.py\", line 41, in get_value_from_jmx\n    data_dict = json.loads(data)\n  File \"/usr/lib/python2.6/site-packages/ambari_simplejson/__init__.py\", line 307, in loads\n    return _default_decoder.decode(s)\n  File \"/usr/lib/python2.6/site-packages/ambari_simplejson/decoder.py\", line 335, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n  File \"/usr/lib/python2.6/site-packages/ambari_simplejson/decoder.py\", line 353, in raw_decode\n    raise ValueError(\"No JSON object could be decoded\")\nValueError: No JSON object could be decoded\n{noformat}\n\n*Cause*\nDuring the test for the {{PXF Process}} alert, the Active NN is found using a JMX call.  This call requires SPNEGO authentication since SPNEGO authentication is turned on for the Hadoop web interfaces. However, a valid Kerberos ticket is not found in the configured user's Kerberos ticket cache. In this case, the configured users is the HDFS user - which technically is not necessary. \n\nThis occurs in \n{code:title=common-services/PXF/3.0.0/package/alerts/api_status.py:137}\n    if CLUSTER_ENV_SECURITY in configurations and configurations[CLUSTER_ENV_SECURITY].lower() == \"true\":\n      if 'dfs.nameservices' in configurations[HDFS_SITE]:\n        namenode_address = get_active_namenode(ConfigDictionary(configurations[HDFS_SITE]), configurations[CLUSTER_ENV_SECURITY], configurations[HADOOP_ENV_HDFS_USER])[1]\n      else:\n        namenode_address = configurations[HDFS_SITE]['dfs.namenode.http-address']\n\n      token = _get_delegation_token(namenode_address,\n                                     configurations[HADOOP_ENV_HDFS_USER],\n                                     configurations[HADOOP_ENV_HDFS_USER_KEYTAB],\n                                     configurations[HADOOP_ENV_HDFS_PRINCIPAL_NAME],\n                                     None)\n      commonPXFHeaders.update({\"X-GP-TOKEN\": token})\n{code}\n\nInside the call at \n\n{code}\nnamenode_address = get_active_namenode(ConfigDictionary(configurations[HDFS_SITE]), configurations[CLUSTER_ENV_SECURITY], configurations[HADOOP_ENV_HDFS_USER])[1]\n{code}\n\n*Solution*\nEnsure the configured user's Kerberos ticket cache contains a valid ticket before querying for the active NN. Possibly change the acting user to one executing the PXF component. \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "PHD",
         "PXF",
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "When SPNEGO authentication is enabled for Hadoop in a cluster with NN HA, PXF Process alert fails"
   },
   {
      "_id": "13048699",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-03-06 23:57:35",
      "description": "From stack 2.5 onwards {{xasecure.audit.jaas.Client.option.principal/ranger-hbase-audit}} needs to have principal value available under {{hbase.master.kerberos.principal/hbase-site}}\n\nTo achieve that added below block of code under hbase [kerberos.json|https://github.com/apache/ambari/blob/branch-2.5/ambari-server/src/main/resources/stacks/HDP/2.5/services/HBASE/kerberos.json]\n{noformat}\n{\n              \"name\": \"/HBASE/HBASE_MASTER/hbase_master_hbase\",\n              \"principal\": {\n                \"configuration\": \"ranger-hbase-audit/xasecure.audit.jaas.Client.option.principal\"\n              },\n              \"keytab\": {\n                \"configuration\": \"ranger-hbase-audit/xasecure.audit.jaas.Client.option.keyTab\"\n              }\n}\n{noformat}\n\nBut on test cluster, {{xasecure.audit.jaas.Client.option.principal/ranger-hbase-audit}} property is not showing the expected value. It is showing the principal/keytab values of {{ams_hbase_master_hbase}} identity. \n\nBecause of wrong reference of principal audit to solr is not working in kerberos environment, as security.json have below entry instead of {{hbase@EXAMPLE.COM}}\n{noformat}\n\"amshbase@EXAMPLE.COM\":[\n        \"ranger_audit_user\",\n        \"dev\"]\n{noformat}\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos identity reference not working for ranger-audit property in hbase"
   },
   {
      "_id": "13048104",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-03-03 16:49:05",
      "description": "HBase Master CPU Utilization Alert is in unknown state due to kinit error:\n\n{noformat}\nExecution of '/usr/bin/kinit -c /var/lib/ambari-agent/tmp/curl_krb_cache/metric_alert_ambari-qa_cc_56787c2122a8214ca9775f3433361f8b -kt HTTP/_HOST@EXAMPLE.COM /etc/security/keytabs/spnego.service.keytab > /dev/null' returned 1. kinit: Client not found in Kerberos database while getting initial credentials\n{noformat}\n\nThis issue is also seen in /var/log/krb5kdc.log:\n\n{noformat}\nMar 03 16:43:06 c6401.ambari.apache.org krb5kdc[4749](info): AS_REQ (4 etypes {18 17 16 23}) 192.168.64.101: CLIENT_NOT_FOUND: /etc/security/keytabs/spnego.service.keytab@EXAMPLE.COM for krbtgt/EXAMPLE.COM@EXAMPLE.COM, Client not found in Kerberos database\n{noformat}\n\n*Cause*\nIt appears that the HBASE alerts.json file ({{common-services/HBASE/0.96.0.2.0/alerts.json}}) has swapped values for the {{kerberos_keytab}} and {{kerberos_principal}} properties.\n\n{code}\n      {\n        \"name\": \"hbase_master_cpu\",\n        \"label\": \"HBase Master CPU Utilization\",\n        \"description\": \"This host-level alert is triggered if CPU utilization of the HBase Master exceeds certain warning and critical thresholds. It checks the HBase Master JMX Servlet for the SystemCPULoad property. The threshold values are in percent.\",\n        \"interval\": 5,\n        \"scope\": \"ANY\",\n        \"enabled\": true,\n        \"source\": {\n          \"type\": \"METRIC\",\n          \"uri\": {\n            \"http\": \"{{hbase-site/hbase.master.info.port}}\",\n            \"default_port\": 60010,\n            \"connection_timeout\": 5.0,\n            \"kerberos_keytab\": \"{{hbase-site/hbase.security.authentication.spnego.kerberos.principal}}\",\n            \"kerberos_principal\": \"{{hbase-site/hbase.security.authentication.spnego.kerberos.keytab}}\"\n          },\n          \"reporting\": {\n            \"ok\": {\n              \"text\": \"{1} CPU, load {0:.1%}\"\n            },\n            \"warning\": {\n              \"text\": \"{1} CPU, load {0:.1%}\",\n              \"value\": 200\n            },\n            \"critical\": {\n              \"text\": \"{1} CPU, load {0:.1%}\",\n              \"value\": 250\n            },\n            \"units\" : \"%\",\n            \"type\": \"PERCENT\"\n          },\n          \"jmx\": {\n            \"property_list\": [\n              \"java.lang:type=OperatingSystem/SystemCpuLoad\",\n              \"java.lang:type=OperatingSystem/AvailableProcessors\"\n            ],\n            \"value\": \"{0} * 100\"\n          }\n        }\n      }\n{code}\n\nNotice:\n{code}\n            \"kerberos_keytab\": \"{{hbase-site/hbase.security.authentication.spnego.kerberos.principal}}\",\n            \"kerberos_principal\": \"{{hbase-site/hbase.security.authentication.spnego.kerberos.keytab}}\"\n{code}\n\n*Solution*\nFix values for the {{kerberos_keytab}} and {{kerberos_principal}} properties in {{common-services/HBASE/0.96.0.2.0/alerts.json}}:\n\n{code}\n            \"kerberos_principal\": \"{{hbase-site/hbase.security.authentication.spnego.kerberos.principal}}\",\n            \"kerberos_keytab\": \"{{hbase-site/hbase.security.authentication.spnego.kerberos.keytab}}\"\n{code}\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "alerts",
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "HBase Master CPU Utilization Alert is in unknown state due to kinit error"
   },
   {
      "_id": "13047670",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-03-02 13:03:20",
      "description": "STR\n1. Started EU from HDP-2.5.3 to 2.6.0.0\n2. Reach till \u2018Restart HBASE Master\u2019 task, let it complete,\n3. Stop Ambari server, start it back in a minute\n4. Now open EU wizard again\n\nResult:\nIt shows two tasks under HBASE upgrade group as aborted and continues to next steps. \nEU reached till Finalize screen and allowed to hit Finalize. Thereafter an error for HBase Client was thrown\n\nExpected Result:  Fail EU with \u2018HOLDING_TIMEOUT\u2019 status at 'HBASE' Upgrade Group and let user retry the failed task and then move forward",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "express_upgrade"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Failed task during EU is not reported upfront causing Upgrade to show 'Aborted' after Finalize step"
   },
   {
      "_id": "13046324",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-02-25 22:12:24",
      "description": "Ambari should install the unlimited key JCE policy based on service requirements even if cluster is not Kerberized.  For example, if a service needs the unlimited key JCE policy for an encryption task not related to Kerberos.\n\nOn a similar note, the unlimited key JCE policy is not being distributed to the agents if Kerberos is enabled using the \"manual\" option - as opposed to integrating with an existing KDC. \n\nOn a related note, Ambari Server host automatically unpacks JCE unlimited during \"ambari-server setup\" (unless custom JDK is used).\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "encryption",
         "jce_policy",
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari should install the unlimited key JCE policy based on service requirements even if cluster is not Kerberized"
   },
   {
      "_id": "13044036",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-02-17 16:57:32",
      "description": "Finalize Operations stage fails when Enabling Kerberos using the manual option.\n\n{noformat:title=Error Message}\nFailed to process the identities, could not properly open the KDC operation handler: Must specify a principal but it is null or empty\n{noformat}\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Finalize Operations stage fails when Enabling Kerberos using the manual option"
   },
   {
      "_id": "13038652",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-01-28 16:10:46",
      "description": "Facing issue with local to auth rules. \nambari-qa-cl1@EXAMPLE.COM is getting converted to ambari-qa-cl1 as well as ambari-qa with same ambari configuration ie authentication.kerberos.auth_to_local.rules=DEFAULT.\n\n1st translation : \n{code}\n28 Jan 2017 11:44:45,529  INFO [ambari-client-thread-3298] AmbariAuthToLocalUserDetailsService:102 - Translated ambari-qa-cl1@EXAMPLE.COM to ambari-qa-cl1 using auth-to-local rules during Kerberos authentication.\n{code}\n\n2nd translation :\n{code}\n28 Jan 2017 11:47:36,425  INFO [ambari-client-thread-3172] AmbariAuthToLocalUserDetailsService:102 - Translated ambari-qa-cl1@EXAMPLE.COM to ambari-qa using auth-to-local rules during Kerberos authentication.\n28 Jan 2017 11:47:36,428  WARN [ambari-client-thread-3172] AmbariAuthToLocalUserDetailsService:136 - Failed find user account for user with username of ambari-qa during Kerberos authentication.\n28\n{code}\n\nSince authentication.kerberos.auth_to_local.rules=DEFAULT ,  'ambari-qa-cl1@EXAMPLE.COM' should have been translated to 'ambari-qa-cl1'.\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "authentication",
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Inconsistent auth-to-local rules processing during Kerberos authentication"
   },
   {
      "_id": "13036997",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-01-23 10:10:00",
      "description": "Trailing slash (/) on cluster resource causes incorrect authorization logic flow. It is debatable whether Ambari should allow this, but since it seems to in other cases - like if the user was an Ambari Administrator - this should be fixed. \n\nThe problem occurs in the {{org.apache.ambari.server.security.authorization.AmbariAuthorizationFilter}} where the filter attempts to figure out what the user is trying to get access to.  Since the regular expression for Cluster resources does acknowledge that a trailing \"/\" after the cluster name indicates a cluster, the request does not fall through to the Cluster resource handler ({{org.apache.ambari.server.controller.internal.ClusterResourceProvider}}) for authorization checks.  It uses the legacy logic, which is a little flawed as well.\n\nThe fix for this is to allow the trailing \"/\" in the regular expression representing Cluster requests:\n{code:title=From org/apache/ambari/server/security/authorization/AmbariAuthorizationFilter.java:70}\n  private static final String API_CLUSTERS_PATTERN = API_VERSION_PREFIX + \"/clusters/(\\\\w+)?\";\n{code}\n\n{code:title=To org/apache/ambari/server/security/authorization/AmbariAuthorizationFilter.java:70}\n  private static final String API_CLUSTERS_PATTERN = API_VERSION_PREFIX + \"/clusters/(\\\\w+/?)?\";\n{code}\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Trailing slash (/) on cluster resource causes incorrect authorization logic flow"
   },
   {
      "_id": "13036321",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-01-19 20:03:18",
      "description": "Ldap sync fails when there are special characters in distinguished names. \n\nFor example if there was a user with the distinguished name of {{OU=test/test,OU=users,DC=EXAMPLE,DC=COM}} and that user was a member of a synced group, then the lookup of the user using the membership attribute in the group would fail due to the special character.  \n\nThe error would look something like\n{noformat}\nREASON: Caught exception running LDAP sync. Uncategorized exception occured during LDAP processing; nested exception is javax.naming.NamingException: [LDAP: error code 1 - 000020D6: SvcErr: DSID-031007DB, problem 5012 (DIR_ERROR), data 0\n]; remaining name 'OU=test/test,OU=users,DC=EXAMPLE,DC=COM'\n{noformat}\n\n*Solution*\nUpdate the library versionf for Spring LDAP \n* {{org.springframework.security/spring-security-ldap}} to {{4.0.4.RELEASE}}\n* {{org.springframework.ldap/spring-ldap-core}} to {{2.0.4.RELEASE}}\n\nThen use {{LdapUtils.newLdapName}} to convert a String representing a DN into a {{javax.naming.ldap.LdapName}} and use that object in the search facility executed in {{org.apache.ambari.server.security.ldap.AmbariLdapDataPopulator#getFilteredLdapUsers(java.lang.String, org.springframework.ldap.filter.Filter)}}. \n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "ldap"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Ldap sync fails when there are special characters in distinguished names"
   },
   {
      "_id": "13033176",
      "assignee": "rlevas",
      "components": [],
      "created": "2017-01-09 20:57:38",
      "description": "Use common property for principal name prefix to help with customization of unique principal names.  \n\nAll _headless_ Kerberos identities have a non-unique principal name (across clusters). To help this issue, the cluster name is appended to these principal names by adding \"-$\\{cluster-name|toLower()\\}\" after the principal name component. If the user wants to change this convention, they will need to find all _headless_ principals and make the change. On top of that, when adding new components, they will need to remember to make the change to new _headless_ principal names. \n\nA better solution is to provide a _global_ property named \"principal_suffix\" and use that in each _headless_ principal name. By default the value for this property will be\n\n{code}\nprincipal_suffix=\"-${cluster_name|toLower()}\"\n{code}\n\nIf the user would like not use a prefix (in the event there is only a single cluster connecting to the KDC), the value can be changed to\n\n{code}\nprincipal_suffix=\"\"\n{code}\n\nFinally if the user would like to use some other randomizer, they can set the value to something else. For example\n\n{code}\nprincipal_suffix=\"_12345\"\n{code}\n\nThe property is set in the Kerberos descriptor's \"properties\" block.   For example:\n\n{code}\n{\n  \"properties\": {\n    \"realm\": \"${kerberos-env/realm}\",\n    ...,\n    \"principal_suffix\": \"${cluster_name|toLower()}\"\n  },\n  \"identities\": [\n    ..., \n    {\n      \"name\": \"smokeuser\",\n      \"principal\": {\n        \"value\": \"${cluster-env/smokeuser}-${principal_suffix}@${realm}\",\n        \"type\": \"user\",\n        \"configuration\": \"cluster-env/smokeuser_principal_name\",\n        \"local_username\": \"${cluster-env/smokeuser}\"\n      },\n      ...\n    }\n  ],\n  \"services\": [\n    {\n{code} ",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Use common property for principal name prefix to help with customization of unique principal names"
   },
   {
      "_id": "13032299",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-01-05 16:37:08",
      "description": "Authentication negotiation HTTP response should be automatically sent when needed when Kerberos authentication is enabled.  \n\nThe expected HTTP response during authentication failure when Kerberos authentication into Ambari is enabled is as follows:\n{noformat}\nHTTP/1.1 401 Authentication requested\nWWW-Authenticate: Negotiate\n{noformat}\n\nWhen Kerberos authentication into Ambari is not enabled the expected HTTP response for an authentication failure is:\n{noformat}\nHTTP/1.1 403 Missing authentication token\n{noformat}\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "authentication",
         "kerberos",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Authentication negotiation HTTP response should be sent when Kerberos authentication is enabled"
   },
   {
      "_id": "13032028",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2017-01-04 17:33:32",
      "description": "Following unit tests fails when executed with JDK 1.8\n{code}\nmvn test -Dtest=DataStoreImplTest\nmvn clean test -Dtest=UpgradeCatalog222Test\nmvn test -Dtest=KerberosCheckerTest,AmbariBasicAuthenticationFilterTest\n{code}\nSame unit tests passes if the environment is switched to use JDK 1.7\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "jdk1_8",
         "unit-test"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Executing ambari-server unit tests with JDK 1.8 results in unit test failures"
   },
   {
      "_id": "13029116",
      "assignee": "aonishuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12327511",
            "id": "12327511",
            "name": "ambari-upgrade"
         }
      ],
      "created": "2016-12-19 11:42:28",
      "description": "Steps\n1. Deploy HDP-2.5.0 cluster with Ambari-2.4.1.0\n2. Upgrade Ambari to 2.5.0.0-419\n3. Restart ATS and observe the status of ATS after sometime in Ambari UI\n\nResult:\nATS shows down. Ambari-agent log shows below:\n{code}\nINFO 2016-12-08 16:14:44,419 ActionQueue.py:105 - Adding STATUS_COMMAND for component APP_TIMELINE_SERVER of service YARN of cluster cl1 to the queue.\nINFO 2016-12-08 16:14:44,621 ActionQueue.py:105 - Adding STATUS_COMMAND for component NODEMANAGER of service YARN of cluster cl1 to the queue.\nINFO 2016-12-08 16:14:46,429 PythonReflectiveExecutor.py:65 - Reflective command failed with exception:\nTraceback (most recent call last):\n  File \"/usr/lib/python2.6/site-packages/ambari_agent/PythonReflectiveExecutor.py\", line 57, in run_file\n    imp.load_source('__main__', script)\n  File \"/var/lib/ambari-agent/cache/common-services/YARN/2.1.0.2.0/package/scripts/application_timeline_server.py\", line 155, in <module>\n    ApplicationTimelineServer().execute()\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/script/script.py\", line 282, in execute\n    method(env)\n  File \"/var/lib/ambari-agent/cache/common-services/YARN/2.1.0.2.0/package/scripts/application_timeline_server.py\", line 82, in status\n    only_if = format(\"test -e {yarn_historyserver_pid_file_old}\", user=status_params.yarn_user))\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/base.py\", line 155, in __init__\n    self.env.run()\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/environment.py\", line 143, in run\n    Logger.info_resource(resource)\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/logger.py\", line 87, in info_resource\n    Logger.info(Logger.filter_text(Logger._get_resource_repr(resource)))\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/logger.py\", line 110, in _get_resource_repr\n    return Logger.get_function_repr(repr(resource), resource.arguments, resource)\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/logger.py\", line 180, in get_function_repr\n    return unicode(\"{0} {{{1}}}\", 'UTF-8').format(name, arguments_str)\n  File \"/usr/lib64/python2.6/encodings/utf_8.py\", line 16, in decode\n    return codecs.utf_8_decode(input, errors, True)\nAttributeError: 'NoneType' object has no attribute 'utf_8_decode'\nINFO 2016-12-08 16:14:53,190 Controller.py:283 - Heartbeat (response id = 15365) with server is running...\nINFO 2016-12-08 16:14:55,083 Heartbeat.py:90 - Adding host info/state to heartbeat message.\n{code}\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "upgrade"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "ATS reports as down in Ambari UI after upgrade"
   },
   {
      "_id": "13027933",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-12-13 22:59:48",
      "description": "Add permission to give a role the ability to set services to auto-start. This permission should be allowed at the cluster-level to toggle the feature for the cluster (Manage Service Auto Start Configuration) and at the service-level to toggle the feature for specific services (Manage Service Auto Start). However the service-level feature may not be available via all interfaces. \n\nThe following roles should be able to toggle auto-start at the cluster level:\n* Ambari Administrator\n* Cluster Administrator\n* Cluster Operator\n\nThe following roles should be able to toggle auto-start at the service level:\n* Ambari Administrator\n* Cluster Administrator\n* Cluster Operator\n* Service Administrator",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Add permission for Service Auto Start"
   },
   {
      "_id": "13027427",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12327511",
            "id": "12327511",
            "name": "ambari-upgrade"
         }
      ],
      "created": "2016-12-12 11:56:58",
      "description": "Ambari server upgrade path: 2.2.2.0 to 2.5.0.0-453\nError seen while running 'ambari-server upgrade' command\"\n{code}\nUsing python  /usr/bin/python\nUpgrading ambari-server\nINFO: Loading properties from /etc/ambari-server/conf/ambari.properties\nINFO: Upgrade Ambari Server\nINFO: Updating Ambari Server properties in ambari.properties ...\nINFO: Updating Ambari Server properties in ambari-env.sh ...\nWARNING: Original file ambari-env.sh kept\nWARNING: Original file krb5JAASLogin.conf kept\nINFO: File krb5JAASLogin.conf updated.\nINFO: Loading properties from /etc/ambari-server/conf/ambari.properties\nINFO: Loading properties from /etc/ambari-server/conf/ambari.properties\nINFO: No mpack replay logs found. Skipping replaying mpack commands\nINFO: Loading properties from /etc/ambari-server/conf/ambari.properties\nINFO: Loading properties from /etc/ambari-server/conf/ambari.properties\nINFO: Fixing database objects owner\nINFO: Loading properties from /etc/ambari-server/conf/ambari.properties\nINFO: using SERVICE_NAME instead of SID for Oracle\nINFO: Loading properties from /etc/ambari-server/conf/ambari.properties\nAmbari Server configured for Oracle. Confirm you have made a backup of the Ambari Server database [y/n] (y)? INFO: Loading properties from /etc/ambari-server/conf/ambari.properties\nINFO: Loading properties from /etc/ambari-server/conf/ambari.properties\nINFO: using SERVICE_NAME instead of SID for Oracle\nINFO: Upgrading database schema\nINFO: Loading properties from /etc/ambari-server/conf/ambari.properties\nINFO: Loading properties from /etc/ambari-server/conf/ambari.properties\nINFO: AMBARI_SERVER_LIB is not set, using default /usr/lib/ambari-server\nINFO: using SERVICE_NAME instead of SID for Oracle\nINFO: using SERVICE_NAME instead of SID for Oracle\nINFO: Loading properties from /etc/ambari-server/conf/ambari.properties\nINFO: Loading properties from /etc/ambari-server/conf/ambari.properties\nINFO: about to run command: /usr/jdk64/jdk1.7.0_67/bin/java -cp '/etc/ambari-server/conf:/usr/lib/ambari-server/*:/usr/share/java/ojdbc6.jar' org.apache.ambari.server.upgrade.SchemaUpgradeHelper > /var/log/ambari-server/ambari-server.out 2>&1\nINFO: Return code from schema upgrade command, retcode = 1\nERROR: Error executing schema upgrade, please check the server logs.\nERROR: Error output from schema upgrade command:\nERROR: Exception in thread \"main\" org.apache.ambari.server.AmbariException\n\tat org.apache.ambari.server.upgrade.SchemaUpgradeHelper.executeUpgrade(SchemaUpgradeHelper.java:209)\n\tat org.apache.ambari.server.upgrade.SchemaUpgradeHelper.main(SchemaUpgradeHelper.java:424)\nCaused by: java.lang.NullPointerException\n\tat com.google.inject.persist.jpa.JpaPersistService.begin(JpaPersistService.java:70)\n\tat com.google.inject.persist.jpa.AmbariJpaPersistService.begin(AmbariJpaPersistService.java:29)\n\tat org.apache.ambari.server.orm.AmbariJpaLocalTxnInterceptor.invoke(AmbariJpaLocalTxnInterceptor.java:106)\n\tat org.apache.ambari.server.upgrade.UpgradeCatalog240.executeDDLUpdates(UpgradeCatalog240.java:294)\n\tat org.apache.ambari.server.upgrade.AbstractUpgradeCatalog.upgradeSchema(AbstractUpgradeCatalog.java:938)\n\tat org.apache.ambari.server.upgrade.SchemaUpgradeHelper.executeUpgrade(SchemaUpgradeHelper.java:206)\n\t... 1 more\n\n\nERROR: Ambari server upgrade failed. Please look at /var/log/ambari-server/ambari-server.log, for more details.\nERROR: Exiting with exit code 11. \nREASON: Schema upgrade failed.\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "upgrade"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "NPE during Ambari server schema upgrade"
   },
   {
      "_id": "13026451",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-12-07 19:46:45",
      "description": "{{hadoop.proxyuser.HTTP.hosts}} should not be updated when Hive is installed unless WebHcat is installed.\n\nThis is happening because the following block in the Kerberos descriptor is at the HIVE service level rather than the WEBHCAT_SERVER component level.\n\n{code}\n        {\n          \"core-site\": {\n            \"hadoop.proxyuser.HTTP.hosts\": \"${clusterHostInfo/webhcat_server_host}\"\n          }\n        },\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "hadoop.proxyuser.HTTP.hosts should not be updated when Hive is installed unless WebHcat is installed"
   },
   {
      "_id": "13026442",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-12-07 19:10:14",
      "description": "When disabling Kerberos, {{rm}} should be used when deleting the Ambari Server keytab file(s) rather than the Java {{java.io.File#delete}} method. This is to allow for the file to be removed properly when Ambari is not executed as _root_.  \n\nCurrently the Ambari server keytab files may not be removed due to permission issues. \n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "sudo"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "When disabling Kerberos, rm should be used when deleting the Ambari Server keytab file(s)"
   },
   {
      "_id": "13024634",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-12-01 01:23:02",
      "description": "Fix NPE in UpgradeCatalog250Test.testExecuteDMLUpdates\n\n{noformat}\nRunning org.apache.ambari.server.upgrade.UpgradeCatalog250Test\nTests run: 4, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 1.14 sec <<< FAILURE! - in org.apache.ambari.server.upgrade.UpgradeCatalog250Test\ntestExecuteDMLUpdates(org.apache.ambari.server.upgrade.UpgradeCatalog250Test)  Time elapsed: 0.272 sec  <<< ERROR!\njava.lang.NullPointerException\n\tat org.apache.ambari.server.upgrade.UpgradeCatalog250Test.testExecuteDMLUpdates(UpgradeCatalog250Test.java:234)\n{noformat}\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "unit-test"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Fix NPE in UpgradeCatalog250Test.testExecuteDMLUpdates"
   },
   {
      "_id": "13021846",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-11-18 20:38:33",
      "description": "When authenticating using LDAP where the LDAP server is a Centrify LDAP proxy, a {{NullPointerException}} is being thrown due to unexpected missing LDAP user object attributes. \n\n{noformat}\n10 Nov 2016 08:23:38,789 ERROR [ambari-client-thread-25] AmbariLdapBindAuthenticator:95 - Caught exception\njava.lang.NullPointerException\n\tat org.apache.ambari.server.security.authorization.AmbariLdapBindAuthenticator.authenticate(AmbariLdapBindAuthenticator.java:83)\n\tat org.springframework.security.ldap.authentication.LdapAuthenticationProvider.doAuthentication(LdapAuthenticationProvider.java:178)\n\tat org.springframework.security.ldap.authentication.AbstractLdapAuthenticationProvider.authenticate(AbstractLdapAuthenticationProvider.java:61)\n\tat org.apache.ambari.server.security.authorization.AmbariLdapAuthenticationProvider.authenticate(AmbariLdapAuthenticationProvider.java:73)\n\tat org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:156)\n\tat org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:168)\n\tat org.apache.ambari.server.security.authentication.AmbariAuthenticationFilter.doFilter(AmbariAuthenticationFilter.java:88)\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n\tat org.apache.ambari.server.security.authorization.AmbariUserAuthorizationFilter.doFilter(AmbariUserAuthorizationFilter.java:91)\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n\tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1478)\n\tat org.apache.ambari.server.api.MethodOverrideFilter.doFilter(MethodOverrideFilter.java:72)\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1478)\n\tat org.apache.ambari.server.api.AmbariPersistFilter.doFilter(AmbariPersistFilter.java:47)\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1478)\n\tat org.apache.ambari.server.security.AbstractSecurityHeaderFilter.doFilter(AbstractSecurityHeaderFilter.java:109)\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1478)\n\tat org.eclipse.jetty.servlets.UserAgentFilter.doFilter(UserAgentFilter.java:82)\n\tat org.eclipse.jetty.servlets.GzipFilter.doFilter(GzipFilter.java:294)\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1478)\n\tat org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:499)\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)\n\tat org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:557)\n\tat org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)\n\tat org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1086)\n\tat org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:427)\n\tat org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)\n\tat org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1020)\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)\n\tat org.apache.ambari.server.controller.AmbariHandlerList.processHandlers(AmbariHandlerList.java:212)\n\tat org.apache.ambari.server.controller.AmbariHandlerList.processHandlers(AmbariHandlerList.java:201)\n\tat org.apache.ambari.server.controller.AmbariHandlerList.handle(AmbariHandlerList.java:139)\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)\n\tat org.eclipse.jetty.server.Server.handle(Server.java:370)\n\tat org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:494)\n\tat org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:973)\n\tat org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:1035)\n\tat org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:641)\n\tat org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:231)\n\tat org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82)\n\tat org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:696)\n\tat org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:53)\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)\n\tat java.lang.Thread.run(Thread.java:745)\n{noformat}\n\n*Cause*\nThe cause for this {{NPE}} is related to missing data from the attribute search request made to a Centrify LDAP proxy after a bind has occurred.  Since the query filter at this point is \"{(objectClass=*}}\", the Centrify LDAP proxy does not have enough data to determine what information to return to the caller.  However, the filter was something like \"{(objectClass=posixAccount}}\", it will be able to build a set of attributes to return to the caller since it would determine that the call wants data for a specific _profile_.\n\nThis can be seen by the following {{tcpdump}} entry:\n{code}\nLDAPMessage searchRequest(2) \"uid=user1,ou=people,ou=dev,dc=apache,dc=org\" baseObject\n    messageID: 2\n    protocolOp: searchRequest (3)\n        searchRequest\n            baseObject: uid=user1,ou=people,ou=dev,dc=apache,dc=org\n            scope: baseObject (0)\n            derefAliases: derefAlways (3)\n            sizeLimit: 0\n            timeLimit: 0\n            typesOnly: False\n            Filter: (objectClass=*)\n            attributes: 0 items\n    [Response In: 2]\n    controls: 1 item\n{code}\n\nNote the filter line above: *{{Filter: (objectClass=*)}}*\n\nFrom the Centrify LDAP proxy logs, the following lines can be seen showing that no mapping is avaialbe:\n\n{noformat}\nNov  8 12:13:45 host1 slapd: cdc search start with filterstr: (objectClass=*)\nNov  8 12:13:45 host1 slapd: cdc search: objectType =  ( is mapped to NONE)\nNov  8 12:13:45 host1 slapd: cdc search after translation filter = (objectClass=*)\n{noformat}\n\nThis search filter is hardcoded in {{com.sun.jndi.ldap.LdapCtx}} as seen in http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/com/sun/jndi/ldap/LdapCtx.java#1308.\n\nThis code is invoked from the Spring LDAP library after attempting to authenticate using the Spring org.springframework.security.ldap.authentication.BindAuthenticator class. \n\n*Solution*\nTo solve this, Ambari should avoid using {{org.springframework.security.ldap.authentication.BindAuthenticator}} to authenticate users via LDAP so that more control can be had over when and how user attributes are obtained. \n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "ldap"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "NPE when authenticating via a Centrify LDAP proxy"
   },
   {
      "_id": "13018986",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-11-07 20:45:18",
      "description": "Optionally force username from LDAP authentication data to be lowercase in Ambari based on LDAP import configuration.\n\nIn some cases the username declared in the relevant LDAP object is in all uppercase characters when the local Hadoop cluster expects the username to be all lowercase. As of Ambari 2.4.0, the username specified from the LDAP data is used to override the username known to Ambari.  This overwritten data may be in all uppercase characters, potentially breaking local username conventions. \n\nTo help this scenario, provide a configuration option to force the username obtained from the LDAP object to be converted to all lowercase character. \n\nFor example {{authentication.ldap.username.forceLowercase}}.\n\nThis optional configuration value is to default to false to maintain current functionality. \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "ldap"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Optionally force username from LDAP authentication data to be lowercase in Ambari"
   },
   {
      "_id": "13011057",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-10-10 14:36:02",
      "description": "Ambari should be able to create arbitrary Kerberos identities for itself as declared in the Kerberos Descriptor.\n\nCurrently, Ambari is hard-coded to create identities for itself and SPNEGO, but that may not be good enough for all scenarios. Therefore, there needs to be an {{AMBARI}} service block in the Kerberos descriptor to allow for arbitrary identities to be defined for the Ambari server - similar to how any other service  is defined in the Kerberos descriptor. \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Ambari should be able to create arbitrary Kerberos identities for itself as declared in the Kerberos Descriptor"
   },
   {
      "_id": "13010152",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-10-06 13:29:01",
      "description": "Kerberos related server-side actions should not time out in minutes as specified in configuration.  Some Kerberos-related task can potentially take a much longer time based on number of hosts and components installed in the cluster. \n\nThe {{Create Principals}} and {{Create Keytab Files}} stages need to be set to a rather large timeout value such that\n\n{noformat}\nif  server.task.timeout < X \n  timeout = X;\nelse \n  timeout =  server.task.timeout\n\nWhere X is set to something like 10 hours. \n{noformat}\n\n10 hours seems to be a reasonable timeout value since it is not possible to specified an unlimited amount of time give Ambari's current task processing infrastructure. \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos server actions should not timeout in minutes as specified in configuration"
   },
   {
      "_id": "13007441",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-09-25 13:32:13",
      "description": "When installing a secure cluster using Blueprints, Ambari's {{/etc/ambari-server/conf/krb5JAASLogin.conf}} is not updated to reflect the details of the Ambari Kerberos identity.\n\nThis was introduced by the patch for AMBARI-18406.\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "blueprints",
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Regression: krb5JAASLogin.conf is not updated during secure BP install"
   },
   {
      "_id": "13006547",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-09-21 15:51:13",
      "description": "Enforce granular role-based access control for custom actions.  Such actions are specified in {{/var/lib/ambari-server/resources/custom_action_definitions/system_action_definitions.xml}} \n\nFor example:\n\n{code}\n  <actionDefinition>\n    <actionName>check_host</actionName>\n    <actionType>SYSTEM</actionType>\n    <inputs/>\n    <targetService/>\n    <targetComponent/>\n    <defaultTimeout>60</defaultTimeout>\n    <description>General check for host</description>\n    <targetType>ANY</targetType>\n    <permissions>HOST.ADD_DELETE_HOSTS</permissions>\n  </actionDefinition>\n{code}\n\nThe \"permissions\" element that declare the permissions required to run the action.  These permissions must be used to authorize a user to perform the operation.  A user needs to have one of the listed permissions in order to be authorized. \n\nThe relevant API entry points are:\n* {{/api/v1/requests}}\n* {{/api/v1/requests/clusters/:CLUSTER_NAME/request}}\n\nExample:  The user executing the following REST API call must be assigned a role that has the {{HOST.ADD_DELETE_HOSTS}} authorization for the relevant cluster\n\n{noformat}\nPOST /api/v1/requests\n{\n  \"RequestInfo\": {\n    \"action\": \"check_host\",\n    \"log_output\": \"false\",\n    \"context\": \"Check host\",\n    \"parameters\": {\n      \"check_execute_list\": \"last_agent_env_check,installed_packages,existing_repos,transparentHugePage\",\n      \"jdk_location\": \"http://host1.example.com:8080/resources/\",\n      \"threshold\": \"20\"\n    }\n  },\n  \"Requests/resource_filters\": [\n    {\n      \"hosts\": \"host1.example.com\"\n    }\n  ]\n}\n{noformat}\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Enforce granular role-based access control for custom actions"
   },
   {
      "_id": "13005232",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-09-15 18:11:15",
      "description": "Users should be able to authenticate to use Ambari by providing a Kerberos token using SPNEGO - Simple and Protected GSSAPI Negotiation Mechanism.  This includes access to the Ambari REST API as well as the Ambari web-based UI. \n\nThe implementation should support the ability to perform the full SPNEGO handshake as well as access requests directly providing the appropriate HTTP header containing the Kerberos token. For example:\n\n{noformat}\nAuthorization: Negotiate YIICcgY...r/vJcLO\n{noformat}\n\nIn the full handshake model\n# The client requests access to a web resource\n# The server responds with an HTTP 401 status ({{Unauthorized}}), including the header {{WWW-Authenticate: Negotiate}}\n# The client generates the Kerberos data and creates a new request containing the authentication header - {{Authorization: Negotiate YIICcgY...r/vJcLO}}\n\nSince Ambari needs to generally return a HTTP status of 403 ({{Forbidden}}) when authentication is needed, a _hint_ must be sent along with the request indicate to Ambari that Kerberos authentication is desired.  If this _hint_ is received, then Ambari will respond with the appropriate status and header to initiate SPNEGO with the client. This _hint_ is an Ambari-specific header named \"X-Negotiate-Authentication\" with the value of \"true\":\n\n{noformat}\nX-Negotiate-Authentication: true\n{noformat}\n\nNo matter what the handshake mechanism is (or lack of), once the Kerberos token is received by Ambari, Ambari is to parse and validate the token.  If a failure occurs, Ambari is to respond with the appropriate HTTP status and related header(s).  Upon success, the user's principal name is retrieved and converted into a _local_ user name.  The use of an auth-to-local rule set processor may be needed to perform this translation.  Using this _local_ username, an appropriate Ambari user account is located and used as the authenticated users identity - details, privileges, etc.... Failure to find an appropriate Ambari user account is to result in an authentication failure response.\n\n*To enable this feature*, the following properties may be set in {{ambari.properties}}:\n\n{{authentication.kerberos.enabled}} - Determines whether to use Kerberos (SPNEGO) authentication when connecting Ambari.\n* {{true}} - enables this feature\n* {{false}} - disables this feature (default)\n\n{{authentication.kerberos.spnego.principal}} - The Kerberos principal name to use when verifying user-supplied Kerberos tokens for authentication via SPNEGO.\n* HTTP/_HOST  (default)\n\nauthentication.kerberos.spnego.keytab.file - The Kerberos keytab file to use when verifying user-supplied Kerberos tokens for authentication via SPNEGO.\n*  /etc/security/keytabs/spnego.service.keytab (default)\n\n{{authentication.kerberos.user.types}} - A comma-delimited (ordered) list of preferred user types to use when finding the Ambari user account for the user-supplied Kerberos identity during authentication via SPNEGO.\n* LDAP (default)\n\n{{authentication.kerberos.auth_to_local.rules}} - The auth-to-local rules set to use when translating a user's principal name to a local user name during authentication via SPNEGO.\n* DEFAULT (default)\n* Rules are to be separated by \"/n\":\n{noformat}\nauthentication.kerberos.auth_to_local.rules=RULE:[1:$1@$0](ambari-server-c1@EXAMPLE.COM)s/.*/admin/\\nDEFAULT\n{noformat}\n\n\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "authentication",
         "kerberos",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Create authentication filter to perform Kerberos authentication for Ambari"
   },
   {
      "_id": "13004430",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-09-12 21:35:02",
      "description": "Create a Spring authentication filter to encapsulate the various Ambari authentication methods since the Spring filter chain allows for a single authentication filter and Ambari needs to allow for multiple, optional, authentication filters to handle one of (but not limited to) the following authentication methods:\n\n* Basic Auth \n* SSO (JWT)\n* Kerberos token\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "authentication",
         "kerberos",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Create authentication filter to encapsulate the various Ambari authentication methods"
   },
   {
      "_id": "13004382",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-09-12 18:29:20",
      "description": "Add the followng Ambari configuration options to support Kerberos token authentication\n\n* {{authentication.kerberos.enabled}}\n** Determines whether to use Kerberos (SPNEGO) authentication when connecting Ambari:  {{true}} to enable this feature; {{false}}, otherwise\n* {{authentication.kerberos.spnego.principal}}\n** The Kerberos principal name to use when verifying user-supplied Kerberos tokens for authentication via SPNEGO\n* {{authentication.kerberos.spnego.keytab.file}}\n** The Kerberos keytab file to use when verifying user-supplied Kerberos tokens for authentication via SPNEGO\n* {{authentication.kerberos.user.types}}\n** A comma-delimited (ordered) list of preferred user types to use when finding the Ambari user account for the user-supplied Kerberos identity during authentication via SPNEGO\n* {{authentication.kerberos.auth_to_local.rules}}\n** The auth-to-local rules set to use when translating a user's principal name to a local user name during authentication via SPNEGO.\n\nNOTE: These properties are in the {{ambari.properties}} file since this feature may be enabled whether the rest of the cluster has Kerberos enabled or not. \n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "authentication",
         "kerberos",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Add Ambari configuration options to support Kerberos token authentication"
   },
   {
      "_id": "13004380",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-09-12 18:27:20",
      "description": "Users should be able to authenticate to use Ambari by providing a Kerberos token using SPNEGO - Simple and Protected GSSAPI Negotiation Mechanism.  This includes access to the Ambari REST API as well as the Ambari web-based UI. \n\nThe implementation should support the ability to perform the full SPNEGO handshake as well as access requests directly providing the appropriate HTTP header containing the Kerberos token. For example:\n\n{noformat}\nAuthorization: Negotiate YIICcgY...r/vJcLO\n{noformat}\n\nIn the full handshake model\n# The client requests access to a web resource\n# The server responds with an HTTP 401 status ({{Unauthorized}}), including the header {{WWW-Authenticate: Negotiate}}\n# The client generates the Kerberos data and creates a new request containing the authentication header - {{Authorization: Negotiate YIICcgY...r/vJcLO}}\n\nSince Ambari needs to generally return a HTTP status of 403 ({{Forbidden}}) when authentication is needed, a _hint_ must be sent along with the request indicate to Ambari that Kerberos authentication is desired.  If this _hint_ is received, then Ambari will respond with the appropriate status and header to initiate SPNEGO with the client. This _hint_ is an Ambari-specific header named \"X-Negotiate-Authentication\" with the value of \"true\":\n\n{noformat}\nX-Negotiate-Authentication: true\n{noformat}\n\nNo matter what the handshake mechanism is (or lack of), once the Kerberos token is received by Ambari, Ambari is to parse and validate the token.  If a failure occurs, Ambari is to respond with the appropriate HTTP status and related header(s).  Upon success, the user's principal name is retrieved and converted into a _local_ user name.  The use of an auth-to-local rule set processor may be needed to perform this translation.  Using this _local_ username, an appropriate Ambari user account is located and used as the authenticated users identity - details, privileges, etc.... Failure to find an appropriate Ambari user account is to result in an authentication failure response.\n\n\n\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/15",
         "id": "15",
         "description": "Created by Jira Software - do not edit or delete. Issue type for a big user story that needs to be broken down.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21137&avatarType=issuetype",
         "name": "Epic",
         "subtask": false,
         "avatarId": 21137
      },
      "labels": [
         "authentication",
         "kerberos",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari authentication with Kerberos token"
   },
   {
      "_id": "13004379",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-09-12 18:27:10",
      "description": "Users should be able to authenticate to use Ambari by providing a Kerberos token using SPNEGO - Simple and Protected GSSAPI Negotiation Mechanism.  This includes access to the Ambari REST API as well as the Ambari web-based UI. \n\nThe implementation should support the ability to perform the full SPNEGO handshake as well as access requests directly providing the appropriate HTTP header containing the Kerberos token. For example:\n\n{noformat}\nAuthorization: Negotiate YIICcgY...r/vJcLO\n{noformat}\n\nIn the full handshake model\n# The client requests access to a web resource\n# The server responds with an HTTP 401 status ({{Unauthorized}}), including the header {{WWW-Authenticate: Negotiate}}\n# The client generates the Kerberos data and creates a new request containing the authentication header - {{Authorization: Negotiate YIICcgY...r/vJcLO}}\n\nSince Ambari needs to generally return a HTTP status of 403 ({{Forbidden}}) when authentication is needed, a _hint_ must be sent along with the request indicate to Ambari that Kerberos authentication is desired.  If this _hint_ is received, then Ambari will respond with the appropriate status and header to initiate SPNEGO with the client. This _hint_ is an Ambari-specific header named \"X-Authentication-Type\" with the value of \"kerberos\":\n\n{noformat}\nX-Authentication-Type: kerberos\n{noformat}\n\nNo matter what the handshake mechanism is (or lack of), once the Kerberos token is received by Ambari, Ambari is to parse and validate the token.  If a failure occurs, Ambari is to respond with the appropriate HTTP status and related header(s).  Upon success, the user's principal name is retrieved and converted into a _local_ user name.  The use of an auth-to-local rule set processor may be needed to perform this translation.  Using this _local_ username, an appropriate Ambari user account is located and used as the authenticated users identity - details, privileges, etc.... Failure to find an appropriate Ambari user account is to result in an authentication failure response.\n\n\n\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/15",
         "id": "15",
         "description": "Created by Jira Software - do not edit or delete. Issue type for a big user story that needs to be broken down.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21137&avatarType=issuetype",
         "name": "Epic",
         "subtask": false,
         "avatarId": 21137
      },
      "labels": [
         "authentication",
         "kerberos",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari authentication with Kerberos token"
   },
   {
      "_id": "13004321",
      "assignee": "adoroszlai",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-09-12 15:27:33",
      "description": "maven-compiler-plugin version 3.0 has a [bug|https://issues.apache.org/jira/browse/MCOMPILER-187] that causes all classes to be recompiled even if no classes have changed.\n\n{noformat}\n[INFO] --- maven-compiler-plugin:3.0:compile (default-compile) @ ambari-server ---\n[INFO] Changes detected - recompiling the module!\n[INFO] Compiling 1720 source files ...\n...\n[INFO] --- maven-compiler-plugin:3.0:testCompile (default-testCompile) @ ambari-server ---\n[INFO] Changes detected - recompiling the module!\n[INFO] Compiling 760 source files ...\n{noformat}\n\nversion 3.1+ has [another, related bug|https://issues.apache.org/jira/browse/MCOMPILER-209] that causes all classes to be compiled even if only one has changed, although it seems to correctly detect the \"no change\" case.\n\n{noformat}\n[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ ambari-server ---\n[INFO] Changes detected - recompiling the module!\n[INFO] Compiling 1720 source files ...\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
         "name": "Minor",
         "id": "4"
      },
      "projectname": "AMBARI",
      "summary": "All classes recompiled due to Maven bug, even if none changed"
   },
   {
      "_id": "13003348",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-09-07 18:34:31",
      "description": "Steps to repro:\n* Install Ambari 2.2.2\n* Install HDP-2.4.x cluster with Atlas\n* Stop Atlas\n* Upgrade Ambari to 2.4\n* Delete Atlas service\n* Upgrade the cluster to HDP-2.5.x cluster\n* Add Atlas service.\n\n*Below config properties are missing from atlas-applicataion.properties file for Atlas, Storm, Falcon, Hive services.*\n#atlas.jaas.KafkaClient.option.keyTab = /etc/security/keytabs/atlas.service.keytab\n#atlas.jaas.KafkaClient.option.principal = atlas/_HOST@EXAMPLE.COM\n\nFrom HDP 2.4 to 2.5, the kerberos.json file for Atlas changed.\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos_descriptor",
         "upgrade"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "After upgrading cluster from HDP-2.4.x to HDP-2.5.x and added atlas service - missing kafka security properties"
   },
   {
      "_id": "12996898",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-08-12 09:51:20",
      "description": "Enabling name node HA is failing at journal node install for cluster operator user. Looking at network from the chrome browser, looks like there is a 403.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "240RMApproved",
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Enable Namenode HA failing at install journal nodes with cluster operator user"
   },
   {
      "_id": "12996288",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-08-10 14:17:32",
      "description": "Add Kerberos Automation documentation to Ambari source tree so it may be versioned.  This documentation should be added as MD (markdown) files to {{.../ambari-server/docs/security/kerberos}}.\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/20",
         "id": "20",
         "description": "Documentation or Website",
         "iconUrl": "https://issues.apache.org/jira/images/icons/issuetypes/documentation.png",
         "name": "Documentation",
         "subtask": false
      },
      "labels": [
         "documentation",
         "kerberos",
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
         "name": "Minor",
         "id": "4"
      },
      "projectname": "AMBARI",
      "summary": "Add Kerberos Automation documentation to Ambari source tree so it may be versioned "
   },
   {
      "_id": "12994361",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-08-02 18:49:47",
      "description": "Kerberos identity definitions in Kerberos descriptors should explicitly declare a reference rather than rely on the identity's _name_ attribute. \n\nCurrently, the set of Kerberos identities declared at a service-level or a component-level can contain identities with unique names.  For example using:\n\n{code}\n  \"identities\": [\n    {\n      \"name\": \"identity\",\n      \"principal\": {\n        \"value\": \"service/_HOST@${realm}\",\n        \"configuration\": \"service-site/property1.principal\",\n        ...\n      },\n      \"keytab\": {\n        \"file\": \"${keytab_dir}/service.service.keytab\",\n        \"configuration\": \"service-site/property1.keytab\",\n        ...\n      }\n    },\n    {\n      \"name\": \"identity\",\n      \"principal\": {\n        \"value\": \"service/_HOST@${realm}\",\n        \"configuration\": \"service-site/property2.principal\",\n        ...\n      },\n      \"keytab\": {\n        \"file\": \"${keytab_dir}/service.service.keytab\",\n        \"configuration\": \"service-site/property2.keytab\",\n        ...\n      }\n    }\n  ]\n{code}\n\nOnly the first \"identity\" principal is realized and the additional one is ignored, leaving the configurations {{service-site/property2.principal}} and {{service-site/property2.keytab}} untouched when Kerberos is enabled for the service. \n\nTo help this, the 2nd instance can be converted to a reference, overriding only the attributes the need to be changed - like the configurations. \n\n{code}\n  \"identities\": [\n    {\n      \"name\": \"identity\",\n      \"principal\": {\n        \"value\": \"service/_HOST@${realm}\",\n        \"configuration\": \"service-site/property1.principal\",\n        ...\n      },\n      \"keytab\": {\n        \"file\": \"${keytab_dir}/service.service.keytab\",\n        \"configuration\": \"service-site/property1.keytab\",\n        ...\n      }\n    },\n    {\n      \"name\": \"/SERVICE/identity\",\n      \"principal\": {\n        \"configuration\": \"service-site/property2.principal\"\n      },\n      \"keytab\": {\n        \"configuration\": \"service-site/property2.keytab\"\n      }\n    }\n  ]\n{code}\n\nThis allows for both identity declarations to be realized, however this is limited to only the 2 instances. If a 3rd instance is needed (to set an additional configuration), it must look be:\n\n{code}\n    {\n      \"name\": \"/SERVICE/identity\",\n      \"principal\": {\n        \"configuration\": \"service-site/property3.principal\"\n      },\n      \"keytab\": {\n        \"configuration\": \"service-site/property3.keytab\"\n      }\n    }\n{code}\n\nHowever since it's name is the same as the 2nd instance, it will be ignored. \n\nIf explicit references are specified, then multiple uniquely-named identity blocks will be allowed to reference the same base identity, effectively enabling the ability to declare unlimited configurations for the same identity definition:\n\n{code}\n  \"identities\": [\n    {\n      \"name\": \"identity\",\n      \"principal\": {\n        \"value\": \"service/_HOST@${realm}\",\n        \"configuration\": \"service-site/property1.principal\",\n        ...\n      },\n      \"keytab\": {\n        \"file\": \"${keytab_dir}/service.service.keytab\",\n        \"configuration\": \"service-site/property1.keytab\",\n        ...\n      }\n    },\n    {\n      \"name\": \"identitiy_reference1\",\n      \"reference\": \"/SERVICE/identity\",\n      \"principal\": {\n        \"configuration\": \"service-site/property2.principal\"\n      },\n      \"keytab\": {\n        \"configuration\": \"service-site/property2.keytab\"\n      }\n    },\n    {\n      \"name\": \"identitiy_reference2\",\n      \"reference\": \"/SERVICE/identity\",\n      \"principal\": {\n        \"configuration\": \"service-site/property3.principal\"\n      },\n      \"keytab\": {\n        \"configuration\": \"service-site/property3.keytab\"\n      }\n    }\n  ]\n{code}\n\nNOTE: Backwards compatibility must be maintained when implementing this as to not break existing Kerberos descriptors. So identity block names the look like paths are to continue to be treated as references. \n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos identity definitions in Kerberos descriptors should explicitly declare a reference"
   },
   {
      "_id": "12994251",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-08-02 11:22:05",
      "description": "Allow multiple configurations for a Kerberos identity principal and keytab definition.\n\nCurrently we allow:\n\n{code}\n{\n              \"name\": \"some_name\",\n              \"principal\": {\n                \"value\": \"foobar/_HOST@${realm}\",\n                \"type\" : \"service\",\n                \"configuration\": \"config1/property1\",\n                \"local_username\" : \"${hadoop-env/hdfs_user}\"\n              },\n              \"keytab\": {\n                \"file\": \"${keytab_dir}/foobar.service.keytab\",\n                \"owner\": {\n                  \"name\": \"${config-env/foobar_user}\",\n                  \"access\": \"r\"\n                },\n                \"group\": {\n                  \"name\": \"${cluster-env/user_group}\",\n                  \"access\": \"\"\n                },\n                \"configuration\": \"config1/property2\"\n              }\n            },\n{code}\n\nbut we should allow for \n\n{code}\n{\n              \"name\": \"some_name\",\n              \"principal\": {\n                \"value\": \"foobar/_HOST@${realm}\",\n                \"type\" : \"service\",\n                \"configurations\": [\"config1/property1\", \"config2/propertyA\"],\n                \"local_username\" : \"${hadoop-env/hdfs_user}\"\n              },\n              \"keytab\": {\n                \"file\": \"${keytab_dir}/foobar.service.keytab\",\n                \"owner\": {\n                  \"name\": \"${config-env/foobar_user}\",\n                  \"access\": \"r\"\n                },\n                \"group\": {\n                  \"name\": \"${cluster-env/user_group}\",\n                  \"access\": \"\"\n                },\n                \"configurations\":[ \"config1/property2\",  \"config2/propertyB\"]\n              }\n            },\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Allow multiple configurations for a Kerberos identity principal and keytab definition"
   },
   {
      "_id": "12993593",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-07-29 17:13:13",
      "description": "The Ambari coverity scan found two \"High impact security\" issues, both SQL Injections.  They are both the same coding issue, but one is in OracleConnector.java, and one is in the analogous method in PostgresConnector.java.\n\nThis is the key description:\n{quote}\n CID 167755 (#1 of 1): SQL injection (SQLI)9. sql_taint: Insecure concatenation of a SQL statement. The value searchClause is tainted.\n\nPerform one of the following to guard against SQL injection attacks.\n* Parameterize the SQL statement using ? positional characters. Bind the tainted values to the ? positional parameters using one of the PreparedStatement.set* methods.\n* Validate user-supplied values against predefined constant values. Concatenate these constant values into the SQL statement.\n* Cast tainted values to safe types such as integers. Concatenate these type safe values into the statement.\n\n[More Information|https://scan3.coverity.com/doc/en/cov_checker_ref.html#id_sql_generic]\n{quote}\n\nThis is the one in OracleConnector.java, lines 32 -55:\n\n{code}\n32  @Override\n  8. taint_path_param: Parameter searchClause receives the tainted data.\n33  protected PreparedStatement getQualifiedPS(Statements statement, String searchClause, Workflows.WorkflowDBEntry.WorkflowFields field, boolean sortAscending, int offset, int limit) throws IOException {\n34    if (db == null)\n35      throw new IOException(\"db not initialized\");\n36\n37    String order = \" ORDER BY \" + field.toString() + \" \" + (sortAscending ? SORT_ASC : SORT_DESC);\n38\n39    String query = \"select * \\n\" +\n40        \"  from ( select \" +\n41//        \"/*+ FIRST_ROWS(n) */ \\n\" +\n42        \"  a.*, ROWNUM rnum \\n\" +\n43        \"      from (\"\n  CID 167755 (#1 of 1): SQL injection (SQLI)9. sql_taint: Insecure concatenation of a SQL statement. The value searchClause is tainted.\n  Perform one of the following to guard against SQL injection attacks.\n\n    Parameterize the SQL statement using ? positional characters. Bind the tainted values to the ? positional parameters using one of the PreparedStatement.set* methods.\n    Validate user-supplied values against predefined constant values. Concatenate these constant values into the SQL statement.\n    Cast tainted values to safe types such as integers. Concatenate these type safe values into the statement.\n\nMore Information\n44        + statement.getStatementString() + searchClause + order +\n45        \") a \\n\" +\n46        \"      where ROWNUM <= \" + (offset + limit) + \") \\n\" +\n47        \"where rnum  >= \" + offset;\n48\n49    try {\n  10. sql_sink: Passing the tainted value query to the SQL API java.sql.Connection.prepareStatement(java.lang.String) may allow an attacker to inject SQL.\n50      return db.prepareStatement(query);\n51    } catch (SQLException e) {\n52      throw new IOException(e);\n53    }\n54\n55  }\n{code}\n\nThis is the one in PostgresConnector.java, lines 495-504:\n\n{code}\n \n   8. taint_path_param: Parameter searchClause receives the tainted data.\n495  protected PreparedStatement getQualifiedPS(Statements statement, String searchClause) throws IOException {\n496    if (db == null)\n497      throw new IOException(\"postgres db not initialized\");\n498    try {\n499      // LOG.debug(\"preparing \" + statement.getStatementString() + searchClause);\n   CID 167743 (#1 of 1): SQL injection (SQLI)9. sql_taint: Insecure concatenation of a SQL statement. The value searchClause is tainted. Passing the tainted command to the SQL API java.sql.Connection.prepareStatement(java.lang.String) may allow an attacker to inject SQL.\n   Perform one of the following to guard against SQL injection attacks.\n\n    Parameterize the SQL statement using ? positional characters. Bind the tainted values to the ? positional parameters using one of the PreparedStatement.set* methods.\n    Validate user-supplied values against predefined constant values. Concatenate these constant values into the SQL statement.\n    Cast tainted values to safe types such as integers. Concatenate these type safe values into the statement.\n\nMore Information\n500      return db.prepareStatement(statement.getStatementString() + searchClause);\n501    } catch (SQLException e) {\n502      throw new IOException(e);\n503    }\n504  }\n{code}\n\n*Solution*\nRemove code supporting an unsupported REST API call to obtain jobtracker information.  his entry point is handled by {{org.apache.ambari.eventdb.webservice.WorkflowJsonService}}.  By removing this class and cleaning up orphaned code, the SQL injection issue list above will be solved. \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "coverity",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Coverity Scan Security Vulnerability - SQL injection"
   },
   {
      "_id": "12993066",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-07-27 20:54:06",
      "description": "Fix SQOOP Kerberos descriptor to contain a 'component' block. Without this block, a NPE is being thrown.  A {{null}} check should also be performed to avoid future issues. \n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Fix SQOOP Kerberos descriptor to contain a 'component' block"
   },
   {
      "_id": "12992357",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-07-25 17:53:55",
      "description": "Stack advisor property removal recommendations are ignored when regenerating keytabs, leaving properties with empty values.  \n\nThis causes (validation) issues when properties expected to be removed exist but have empty values. ",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "stack_advisor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Stack advisor property removal recommendations are ignored when regenerating keytabs, leaving properties with empty values"
   },
   {
      "_id": "12992105",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-07-24 17:33:56",
      "description": "*Steps*\n# Create a user and assign \"Cluster Administrator\" role\n# As an admin, Register a new version\n# Logout and login as the user created in step 1\n# Try to perform \"Install packages\" operation from UI\n\n*Result*\n\"status\" : 403,\n\"The authenticated user does not have the appropriate authorizations to create the requested resource(s)\"\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Cluster Administrator role is unable to perform 'Install Packages' operation"
   },
   {
      "_id": "12991103",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-07-20 12:45:08",
      "description": "Log\n{noformat}\nTraceback (most recent call last):\n    File \"/var/lib/ambari-agent/cache/common-services/KERBEROS/1.10.3-10/package/scripts/kerberos_client.py\", line 80, in <module>\n      KerberosClient().execute()\n    File \"/usr/lib/python2.6/site-packages/resource_management/libraries/script/script.py\", line 280, in execute\n      method(env)\n    File \"/var/lib/ambari-agent/cache/common-services/KERBEROS/1.10.3-10/package/scripts/kerberos_client.py\", line 28, in install\n      self.install_packages(env)\n    File \"/usr/lib/python2.6/site-packages/resource_management/libraries/script/script.py\", line 545, in install_packages\n      if Script.check_package_condition(package):\n    File \"/usr/lib/python2.6/site-packages/resource_management/libraries/script/script.py\", line 583, in check_package_condition\n      return chooser_method()\n    File \"/usr/lib/python2.6/site-packages/resource_management/libraries/functions/package_conditions.py\", line 93, in should_install_kerberos_server\n      return 'role' in config and not _has_applicable_local_component(\"KERBEROS_CLIENT\")\n  TypeError: _has_applicable_local_component() takes exactly 2 arguments (1 given)\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos Client fails to install"
   },
   {
      "_id": "12990765",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-07-19 13:42:06",
      "description": "When adding new components for existing services, Kerberos-related configuration changes should be processed.  This should happen when an new component, not a new instance of an existing component is installed. \n\nCare must be taken to not reintroduce the issue described in AMBARI-14506 or if unavoidable, proper documentation should be added \n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerbeos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Adding new components for existing services should process Kerberos-related configuration changes"
   },
   {
      "_id": "12990485",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-07-18 17:42:31",
      "description": "Kerberos-related configs are not applied before INSTALL command is built on add service.  \n\nThis occurs when new services and components are added to an existing cluster where Kerberos is enabled. Due to the order of when command detail (JSON) structures are built and when service configurations are set, Kerberos-related configurations will not be available for new services.  This is a regression created by the patch for AMBARI-17629.\n\n*Solution*\nEnsure that Kerberos-related configuration updates are applied before the INSTALL command details are created. \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "regression"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos-related configs are not applied before INSTALL command is built on add service"
   },
   {
      "_id": "12989852",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-07-15 16:16:13",
      "description": "With \"Cluster User\" role, submitting \"install packages\" API call goes through, even though it should be blocked\n\n{code}\n#curl -u cu:1234 -H \"X-Requested-By: ambari\" -i -X  POST http://ambari-server:8080/api/v1/clusters/cl1/stack_versions -d '{\"ClusterStackVersions\":{\"stack\":\"HDP\",\"version\":\"2.3\",\"repository_version\":\"2.3.0.0\"}}'\nHTTP/1.1 202 Accepted\nDate: Wed, 29 Jun 2016 05:55:16 GMT\nX-Frame-Options: DENY\nX-XSS-Protection: 1; mode=block\nSet-Cookie: AMBARISESSIONID=11njwu8py6m511511liub068vj;Path=/;HttpOnly\nExpires: Thu, 01 Jan 1970 00:00:00 GMT\nUser: cu\nContent-Type: text/plain\nVary: Accept-Encoding, User-Agent\nContent-Length: 136\nServer: Jetty(9.2.11.v20150529)\n\n{\n  \"href\" : \"http://ambari-server:8080/api/v1/clusters/cl1/requests/36\",\n  \"Requests\" : {\n    \"id\" : 36,\n    \"status\" : \"Accepted\"\n  }\n}\n{code}\n\nRole of the user \"cu\"\n{code}\n{\n  \"href\" : \"http://ambari-server:8080/api/v1/users/cu/privileges/7\",\n  \"PrivilegeInfo\" : {\n    \"cluster_name\" : \"cl1\",\n    \"permission_label\" : \"Cluster User\",\n    \"permission_name\" : \"CLUSTER.USER\",\n    \"principal_name\" : \"cu\",\n    \"principal_type\" : \"USER\",\n    \"privilege_id\" : 7,\n    \"type\" : \"CLUSTER\",\n    \"user_name\" : \"cu\"\n  }\n}\n{code}\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Cluster user role is permitted to install packages using API"
   },
   {
      "_id": "12988072",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-07-09 20:59:49",
      "description": "The following changes are needed in the stack advisor framework to help with service advisors:\n\n* Add additional logging to show why a service advisor implementation was not loaded\n* Move {{isSecurityEnabled}} from {{stacks/HDP/2.0.6/services/stack_advisor.py}} to a class member of {{DefaultStackAdvisor}} in {{stacks/stack_advisor.py}} so that all stack and service advisors may be able to use it\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "service_advisor",
         "stack_advisor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Changes to stack advisor framework to help with service advisors"
   },
   {
      "_id": "12987891",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-07-08 18:48:35",
      "description": "When adding new services and components to a cluster that was initially created via Blueprints (rather than via the Ambari UI), auth-to-local rules that are expected to be created as indicated by the Kerberos descriptor are not.\n\nIt occurs because the components being installed are in the {{INIT}} state where the logic to determine whether to include the new auth-to-local rules or not expects the components to be in either the {{INSTALLED}} or {{STARTED}} states. This is due to logic added when resolving AMBARI-14232.\n\n*Solution*:\nAllow for auth-to-local rules for new services and components to be added when the state of the components are  {{INIT}} as well as {{INSTALLED}} and {{STARTED}}, when the cluster was installed via Blueprints. \n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "auth_to_local",
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "AUTH_TO_LOCAL rules are not updated when adding services to a Blueprint-installed cluster"
   },
   {
      "_id": "12985006",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-06-29 13:37:39",
      "description": "The {{kafka-broker/authorizer.class.name}} property is not being set properly when Kerberos is enabled.\n\nThe following logic should be followed:\n{noformat}\nif Kerberos is enabled\n  if ranger-kafka-plugin-properties/ranger-kafka-plugin-enabled == yes\n    set authorizer.class.name to \"org.apache.ranger.authorization.kafka.authorizer.RangerKafkaAuthorizer\"\n  else\n    set authorizer.class.name to \"kafka.security.auth.SimpleAclAuthorizer\"\nelse\n  remove authorizer.class.name\n{noformat}\n\nThis should be updated in the stack advisor code. \n\nWhile at it, configurations from Kafka's {{kerberos.json}} file should be moved to the stack advisor to help ensure properties are set in the the same place to help with code maintenance and consistency.\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor",
         "stack_advisor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "authorizer.class.name not being set on secure kafka clusters"
   },
   {
      "_id": "12985004",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-06-29 13:36:29",
      "description": "The {{kafka-broker/authorizer.class.name}} property is not being set properly when Kerberos is enabled.\n\nThe following logic should be followed:\n{noformat}\nif Kerberos is enabled\n  if ranger-kafka-plugin-properties/ranger-kafka-plugin-enabled == yes\n    set authorizer.class.name to \"org.apache.ranger.authorization.kafka.authorizer.RangerKafkaAuthorizer\"\n  else\n    set authorizer.class.name to \"kafka.security.auth.SimpleAclAuthorizer\"\nelse\n  remove authorizer.class.name\n{noformat}\n\nThis should be updated in the stack advisor code. \n\nWhile at it, configurations from Kafka's {{kerberos.json}} file should be moved to the stack advisor to help ensure properties are set in the the same place to help with code maintenance and consistency.\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor",
         "stack_advisor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "authorizer.class.name not being set on secure kafka clusters"
   },
   {
      "_id": "12985003",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-06-29 13:34:48",
      "description": "The {{kafka-broker/authorizer.class.name}} property is not being set properly when Kerberos is enabled.\n\nThe following logic should be followed:\n{noformat}\nif Kerberos is enabled\n  if ranger-kafka-plugin-properties/ranger-kafka-plugin-enabled == yes\n    set authorizer.class.name to \"org.apache.ranger.authorization.kafka.authorizer.RangerKafkaAuthorizer\"\n  else\n    set authorizer.class.name to \"kafka.security.auth.SimpleAclAuthorizer\"\nelse\n  remove authorizer.class.name\n{noformat}\n\nThis should be updated in the stack advisor code. \n\nWhile at it, configurations from Kafka's {{kerberos.json}} file should be moved to the stack advisor to help ensure properties are set in the the same place to help with code maintenance and consistency.\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor",
         "stack_advisor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "authorizer.class.name not being set on secure kafka clusters"
   },
   {
      "_id": "12981050",
      "assignee": "rlevas",
      "components": [],
      "created": "2016-06-20 19:03:52",
      "description": "{{ldap_url}} and {{container_dn}} are expected for MIT security type.  They should only be required for AD integration. \n\n{code:title=Example BP}\n  {\n    \"configurations\": [\n      {\n        \"cluster-env\": {\n          \"properties\": {\n            \"command_retry_max_time_in_sec\": \"1200\"\n          }\n        }\n      },\n      {\n        \"kerberos-env\": {\n          \"properties\": {\n            \"realm\": \"EXAMPLE.COM\",\n            \"kdc_type\": \"mit-kdc\",\n            \"kdc_hosts\": \"kdc.example.com\",\n            \"admin_server_host\": \"kdc.example.com\",\n            \"encryption_types\": \"aes des3-cbc-sha1 rc4 des-cbc-md5\",\n            \"service_check_principal_name\": \"cl1-QutreRP8p3\"\n          }\n        }\n      },\n      {\n        \"krb5-conf\": {\n          \"properties\": {\n            \"domains\": \"\",\n            \"manage_krb5_conf\": \"true\"\n          }\n        }\n      }\n    ],\n    \"host_groups\": [\n      {\n        \"name\": \"host1\",\n        \"cardinality\": \"1\",\n        \"components\": [\n          {\n            \"name\": \"DATANODE\"\n          },\n          {\n            \"name\": \"NFS_GATEWAY\"\n          },\n          {\n            \"name\": \"HDFS_CLIENT\"\n          },\n          {\n            \"name\": \"NODEMANAGER\"\n          },\n          {\n            \"name\": \"YARN_CLIENT\"\n          },\n          {\n            \"name\": \"MAPREDUCE2_CLIENT\"\n          },\n          {\n            \"name\": \"HBASE_REGIONSERVER\"\n          },\n          {\n            \"name\": \"HBASE_CLIENT\"\n          },\n          {\n            \"name\": \"PHOENIX_QUERY_SERVER\"\n          },\n          {\n            \"name\": \"HIVE_CLIENT\"\n          },\n          {\n            \"name\": \"HCAT\"\n          },\n          {\n            \"name\": \"OOZIE_CLIENT\"\n          },\n          {\n            \"name\": \"ZOOKEEPER_CLIENT\"\n          },\n          {\n            \"name\": \"SUPERVISOR\"\n          },\n          {\n            \"name\": \"FALCON_CLIENT\"\n          },\n          {\n            \"name\": \"FLUME_HANDLER\"\n          },\n          {\n            \"name\": \"METRICS_MONITOR\"\n          },\n          {\n            \"name\": \"RANGER_TAGSYNC\"\n          },\n          {\n            \"name\": \"TEZ_CLIENT\"\n          },\n          {\n            \"name\": \"PIG\"\n          },\n          {\n            \"name\": \"SQOOP\"\n          },\n          {\n            \"name\": \"SLIDER\"\n          },\n          {\n            \"name\": \"KERBEROS_CLIENT\"\n          },\n          {\n            \"name\": \"MAHOUT\"\n          },\n          {\n            \"name\": \"HST_AGENT\"\n          },\n          {\n            \"name\": \"LOGSEARCH_LOGFEEDER\"\n          },\n          {\n            \"name\": \"LOGSEARCH_SOLR_CLIENT\"\n          }\n        ]\n      }\n    ],\n    \"Blueprints\": {\n      \"blueprint_name\": \"bp1\",\n      \"stack_name\": \"HDP\",\n      \"stack_version\": \"2.5\"\n    }\n  }\n{code}\n\n{noformat}\ncurl -H \"X-Requested-By:ambari\" -u admin:admin -i -X  POST -d @./bp1.json http://localhost:8080/api/v1/blueprints/bp1\nHTTP/1.1 100 Continue\n\nHTTP/1.1 400 Bad Request\nDate: Mon, 20 Jun 2016 19:02:27 GMT\nX-Frame-Options: DENY\nX-XSS-Protection: 1; mode=block\nSet-Cookie: AMBARISESSIONID=1a4dqzhedwoog4xg8jbu36e2q;Path=/;HttpOnly\nExpires: Thu, 01 Jan 1970 00:00:00 GMT\nUser: admin\nContent-Type: text/plain\nContent-Length: 227\nServer: Jetty(9.2.11.v20150529)\n\n{\n  \"status\" : 400,\n  \"message\" : \"Blueprint configuration validation failed: Missing required properties.  Specify a value for these properties in the blueprint configuration. {host1={kerberos-env=[ldap_url, container_dn]}}\"\n}\n{noformat}\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "AmbariServer looks for ldap_url, container_dn in blueprint even for MIT security type"
   },
   {
      "_id": "12977848",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-06-11 10:29:17",
      "description": "Add SERVICE.VIEW_OPERATIONAL_LOGS authorization to the following roles:\n\n* AMBARI.ADMINISTRATOR \n* CLUSTER.ADMINISTRATOR \n* CLUSTER.OPERATOR \n* SERVICE.ADMINISTRATOR\n\nThis is a DB change adding an authorization record to the {{roleauthorization}} table and relevant records for the different roles to the {{permission_roleauthorization}} table. \n\nThe description/name of the {{SERVICE.VIEW_OPERATIONAL_LOGS}} authorization should be\n{noformat}\nView service operational logs\n{noformat}\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Add SERVICE.VIEW_OPERATIONAL_LOGS authorization to SERVICE.ADMINISTRATOR role and above"
   },
   {
      "_id": "12975730",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-06-04 10:55:45",
      "description": "The description of the SERVICE.ADD_DELETE_SERVICES permission currently reads\n\n{quote}\nAdd Service to cluster\n{quote}\n\nThis should be changed to\n\n{quote}\nAdd/delete services\n{quote}\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Fix description of SERVICE.ADD_DELETE_SERVICES permission"
   },
   {
      "_id": "12975482",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-06-03 13:29:20",
      "description": "Cluster operator and ServiceAdministrator are not allowed to create a config group even though it should be.\n\nIt is visible in the UI but creating it gives a 403 error in the backend and the UI goes for a toss.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Cluster operator and ServiceAdministrator not allowed to create config group"
   },
   {
      "_id": "12975218",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-06-02 16:28:01",
      "description": "Using a serviceoperator user, trying to modify config using the 2 step modification process :\n\nRequest type : POST\nRequest URL : /api/v1/clusters/cl1/configurations\nAuth : serviceadminuser/password\nRequest Body :\n{code}\n{\"type\":\"ams-env\",\"tag\":\"version146474298002\",\"properties\":{\"ambari_metrics_user\":\"ams\",\"metrics_monitor_log_dir\":\"/grid/0/log/metric_monitor_updated\",\"metrics_collector_heapsize\":\"512\",\"metrics_collector_pid_dir\":\"/var/run/ambari-metrics-collector\",\"metrics_collector_log_dir\":\"/grid/0/log/metric_collector\",\"metrics_monitor_pid_dir\":\"/var/run/ambari-metrics-monitor\",\"content\":\"\\n# Set environment variables here.\\n\\n# The java implementation to use. Java 1.6 required.\\nexport JAVA_HOME\\u003d{{java64_home}}\\n\\n# Collector Log directory for log4j\\nexport AMS_COLLECTOR_LOG_DIR\\u003d{{ams_collector_log_dir}}\\n\\n# Monitor Log directory for outfile\\nexport AMS_MONITOR_LOG_DIR\\u003d{{ams_monitor_log_dir}}\\n\\n# Collector pid directory\\nexport AMS_COLLECTOR_PID_DIR\\u003d{{ams_collector_pid_dir}}\\n\\n# Monitor pid directory\\nexport AMS_MONITOR_PID_DIR\\u003d{{ams_monitor_pid_dir}}\\n\\n# AMS HBase pid directory\\nexport AMS_HBASE_PID_DIR\\u003d{{hbase_pid_dir}}\\n\\n# AMS Collector heapsize\\nexport AMS_COLLECTOR_HEAPSIZE\\u003d{{metrics_collector_heapsize}}\\n\\n# HBase normalizer enabled\\nexport AMS_HBASE_NORMALIZER_ENABLED\\u003d{{ams_hbase_normalizer_enabled}}\\n\\n# HBase compaction policy enabled\\nexport AMS_HBASE_FIFO_COMPACTION_ENABLED\\u003d{{ams_hbase_fifo_compaction_enabled}}\\n\\n# HBase Tables Initialization check enabled\\nexport AMS_HBASE_INIT_CHECK_ENABLED\\u003d{{ams_hbase_init_check_enabled}}\\n\\n# AMS Collector options\\nexport AMS_COLLECTOR_OPTS\\u003d\\\"-Djava.library.path\\u003d/usr/lib/ams-hbase/lib/hadoop-native\\\"\\n{% if security_enabled %}\\nexport AMS_COLLECTOR_OPTS\\u003d\\\"$AMS_COLLECTOR_OPTS -Djava.security.auth.login.config\\u003d{{ams_collector_jaas_config_file}}\\\"\\n{% endif %}\\n\\n# AMS Collector GC options\\nexport AMS_COLLECTOR_GC_OPTS\\u003d\\\"-XX:+UseConcMarkSweepGC -verbose:gc -XX:+PrintGCDetails -XX:+PrintGCDateStamps -Xloggc:{{ams_collector_log_dir}}/collector-gc.log-`date +\\u0027%Y%m%d%H%M\\u0027`\\\"\\nexport AMS_COLLECTOR_OPTS\\u003d\\\"$AMS_COLLECTOR_OPTS $AMS_COLLECTOR_GC_OPTS\\\"\\n\\n    \"}}\n{code}\n\nRequest response : \n{code}\n{\n  \"status\": 403,\n  \"message\": \"You do not have permissions to access this resource.\"\n}\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Service admin and cluster operator can't modify service configs through API"
   },
   {
      "_id": "12972445",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-05-24 17:00:55",
      "description": "Cluster operator and the cluster admin must be allowed to add/delete hosts but install of agents using /bootstrap fails with 403\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Cluster operator and cluster admin not allowed to install ambari agent"
   },
   {
      "_id": "12972325",
      "assignee": "aonishuk",
      "components": [],
      "created": "2016-05-24 09:08:15",
      "description": "\n    Traceback (most recent call last):\n      File \"/var/lib/ambari-agent/cache/stacks/HDP/2.0.6/hooks/before-START/scripts/hook.py\", line 39, in <module>\n        BeforeStartHook().execute()\n      File \"/usr/lib/python2.6/site-packages/resource_management/libraries/script/script.py\", line 254, in execute\n        method(env)\n      File \"/var/lib/ambari-agent/cache/stacks/HDP/2.0.6/hooks/before-START/scripts/hook.py\", line 28, in hook\n        import params\n      File \"/var/lib/ambari-agent/cache/stacks/HDP/2.0.6/hooks/before-START/scripts/params.py\", line 145, in <module>\n        metric_collector_hosts += host + ':' + metric_collector_port + ','\n    TypeError: unsupported operand type(s) for +=: 'NoneType' and 'str'\n    Error: Error: Unable to run the custom hook script ['/usr/bin/python', '/var/lib/ambari-agent/cache/stacks/HDP/2.0.6/hooks/before-START/scripts/hook.py', 'START', '/var/lib/ambari-agent/data/command-9.json', '/var/lib/ambari-agent/cache/stacks/HDP/2.0.6/hooks/before-START', '/var/lib/ambari-agent/data/structured-out-9.json', 'INFO', '/var/lib/ambari-agent/tmp']\n    \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "ambari-metrics",
         "ambari-server"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Any start command fails if AMS is installed."
   },
   {
      "_id": "12971378",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-05-20 02:16:09",
      "description": "Configure Ambari Identity phase of Enable Kerberos Wizard fails since Ambari does not have permission perform some root-level file system tasks like chown. \n\nSTR:\n# Install Ambari, executing as non-root\n# Create cluster (Zookeeper-only is fine)\n# Enable Kerberos (any KDC is fine)\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "'Configure Ambari Identity' fails when enabling Kerberos on non-root Ambari server"
   },
   {
      "_id": "12969507",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-05-13 10:23:36",
      "description": "yarn.timeline-service.enabled  property is set to false when Kerberos is enabled. It should set set to true. \n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "yarn.timeline-service.enabled is set to false in secure cluster "
   },
   {
      "_id": "12967386",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-05-11 12:11:22",
      "description": "Change permission_label for role AMBARI.ADMINISTRATOR from \"Administrator\" to \"Ambari Admin\"\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "RBAC: Change permission_label for role AMBARI.ADMINISTRATOR to \"Ambari Admin\""
   },
   {
      "_id": "12967161",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-05-10 18:42:39",
      "description": "Add conditional constraints for Kerberos identities to control when they are created. For example if Kerberos Identity should only be created (and distributed) for a component when some other component or service is installed. \n\nAn example of this would be\n{code}\n{\n  \"name\": \"/HIVE/HIVE_SERVER/hive_server_hive\",\n  \"principal\": {\n    \"configuration\": \"hive-interactive-site/hive.llap.daemon.service.principal\"\n  },\n  \"keytab\": {\n    \"configuration\": \"hive-interactive-site/hive.llap.daemon.keytab.file\"\n  },\n  \"when\" : {\n      \"contains\" : [\"services\", \"HIVE\"]\n  }\n}\n{code}\n\nNote the \"{{when}}\" clause. This indicates that this identity should only be processed when the set of services contains \"HIVE\".  An alternative to this would be to test the set of components for a certain component. \n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Add conditional constraints for Kerberos identities to control when they are created"
   },
   {
      "_id": "12966269",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-05-09 19:01:23",
      "description": "Configuration is loaded:\n{code}\n06 May 2016 10:52:11,998  INFO [qtp-ambari-client-26] ClusterImpl:346 - Service config types loaded: {KAFKA=[ranger-kafka-policymgr-ssl, kafka-log4j, kafka-env, kafka-broker, ranger-kafka-security, ranger-kafka-plugin-properties, ranger-kafka-audit], PIG=[pig-properties, pig-env, pig-log4j], ZEPPELIN=[zeppelin-env, zeppelin-config], LOGSEARCH=[logsearch-service_logs-solrconfig, logsearch-admin-json, logfeeder-log4j, logsearch-env, logsearch-solr-log4j, logfeeder-env, logsearch-audit_logs-solrconfig, logsearch-solr-env, logfeeder-properties, logsearch-properties, logsearch-log4j, logsearch-solr-client-log4j, logsearch-solr-xml], RANGER_KMS=[kms-properties, ranger-kms-security, ranger-kms-site, kms-site, kms-env, dbks-site, ranger-kms-audit, ranger-kms-policymgr-ssl, kms-log4j], MAPREDUCE2=[mapred-site, mapred-env], SLIDER=[slider-log4j, slider-env, slider-client], HIVE=[llap-cli-log4j2, hive-interactive-site, hive-exec-log4j, hive-env, ranger-hive-policymgr-ssl, tez-interactive-site, hive-site, hivemetastore-site, hive-interactive-env, webhcat-env, ranger-hive-plugin-properties, webhcat-site, hive-log4j, ranger-hive-audit, webhcat-log4j, hiveserver2-site, hcat-env, llap-daemon-log4j, ranger-hive-security], TEZ=[tez-env, tez-site], HBASE=[ranger-hbase-security, hbase-env, hbase-policy, hbase-log4j, hbase-site, ranger-hbase-policymgr-ssl, ranger-hbase-audit, ranger-hbase-plugin-properties], RANGER=[admin-properties, tagsync-log4j, ranger-site, ranger-ugsync-site, ranger-admin-site, ranger-tagsync-site, usersync-log4j, tagsync-application-properties, usersync-properties, admin-log4j, ranger-env], OOZIE=[oozie-log4j, oozie-env, oozie-site], FLUME=[flume-env, flume-conf], MAHOUT=[mahout-log4j, mahout-env], HDFS=[ssl-server, hdfs-log4j, ranger-hdfs-audit, ranger-hdfs-plugin-properties, ssl-client, hdfs-site, ranger-hdfs-policymgr-ssl, ranger-hdfs-security, hadoop-policy, hadoop-env, core-site], AMBARI_METRICS=[ams-ssl-client, ams-ssl-server, ams-hbase-log4j, ams-grafana-env, ams-hbase-policy, ams-hbase-security-site, ams-hbase-env, ams-env, ams-grafana-ini, ams-log4j, ams-site, ams-hbase-site], SPARK=[spark-thrift-fairscheduler, spark-thrift-sparkconf, spark-log4j-properties, spark-defaults, spark-metrics-properties, spark-hive-site-override, spark-env], SMARTSENSE=[hst-log4j, hst-server-conf, hst-common-conf, capture-levels, hst-agent-conf, anonymization-rules], YARN=[ranger-yarn-policymgr-ssl, yarn-site, ranger-yarn-audit, ranger-yarn-security, ranger-yarn-plugin-properties, yarn-env, capacity-scheduler, yarn-log4j], FALCON=[falcon-startup.properties, falcon-runtime.properties, falcon-env], SQOOP=[sqoop-site, sqoop-env], ZOOKEEPER=[zoo.cfg, zookeeper-env, zookeeper-log4j], STORM=[ranger-storm-plugin-properties, storm-site, ranger-storm-audit, storm-cluster-log4j, storm-worker-log4j, ranger-storm-policymgr-ssl, ranger-storm-security, storm-env], ATLAS=[atlas-hbase-site, atlas-log4j, atlas-env, application-properties], GANGLIA=[ganglia-env], KNOX=[knoxsso-topology, ranger-knox-security, users-ldif, knox-env, ranger-knox-plugin-properties, gateway-site, gateway-log4j, ranger-knox-policymgr-ssl, ranger-knox-audit, topology, admin-topology, ldap-log4j], KERBEROS=[kerberos-env, krb5-conf], ACCUMULO=[accumulo-log4j, accumulo-env, client, accumulo-site]}\n{code}\n\nBut: \n{noformat}\n06 May 2016 12:43:46,050 ERROR [qtp-ambari-client-171] AbstractResourceProvider:314 - Caught AmbariException when getting a resource\norg.apache.ambari.server.AmbariException: The 'krb5-conf' configuration is not available\n\tat org.apache.ambari.server.controller.KerberosHelperImpl.getKerberosDetails(KerberosHelperImpl.java:1903)\n\tat org.apache.ambari.server.controller.KerberosHelperImpl.addAmbariServerIdentity(KerberosHelperImpl.java:1364)\n\tat org.apache.ambari.server.controller.KerberosHelperImpl.getActiveIdentities(KerberosHelperImpl.java:1283)\n\tat org.apache.ambari.server.controller.internal.HostKerberosIdentityResourceProvider$GetResourcesCommand.invoke(HostKerberosIdentityResourceProvider.java:163)\n\tat org.apache.ambari.server.controller.internal.HostKerberosIdentityResourceProvider$GetResourcesCommand.invoke(HostKerberosIdentityResourceProvider.java:145)\n\tat org.apache.ambari.server.controller.internal.AbstractResourceProvider.getResources(AbstractResourceProvider.java:307)\n\tat org.apache.ambari.server.controller.internal.HostKerberosIdentityResourceProvider.getResources(HostKerberosIdentityResourceProvider.java:134)\n\tat org.apache.ambari.server.controller.internal.ClusterControllerImpl$ExtendedResourceProviderWrapper.queryForResources(ClusterControllerImpl.java:966)\n\tat org.apache.ambari.server.controller.internal.ClusterControllerImpl.getResources(ClusterControllerImpl.java:141)\n\tat org.apache.ambari.server.api.query.QueryImpl.doQuery(QueryImpl.java:512)\n\tat org.apache.ambari.server.api.query.QueryImpl.queryForSubResources(QueryImpl.java:464)\n\tat org.apache.ambari.server.api.query.QueryImpl.queryForResources(QueryImpl.java:437)\n\tat org.apache.ambari.server.api.query.QueryImpl.execute(QueryImpl.java:217)\n\tat org.apache.ambari.server.api.handlers.ReadHandler.handleRequest(ReadHandler.java:69)\n\tat org.apache.ambari.server.api.services.BaseRequest.process(BaseRequest.java:145)\n\tat org.apache.ambari.server.api.services.BaseService.handleRequest(BaseService.java:126)\n\tat org.apache.ambari.server.api.services.BaseService.handleRequest(BaseService.java:90)\n\tat org.apache.ambari.server.api.services.HostService.getHost(HostService.java:80)\n\tat sun.reflect.GeneratedMethodAccessor205.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:606)\n\tat com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)\n{noformat}\n\n*Cause*\nThis is caused in the {{org.apache.ambari.server.controller.internal.HostKerberosIdentityResourceProvider}} when the relevant host is the host where the Ambari server is installed and Kerberos is *_not_* enabled.  \n\nWhen querying information about a host via {{GET /api/v1/clusters/CLUSTERNAME/hosts/HOSTNAME}}, the relevant Kerberos identities for that host are generated.  This happens whether Kerberos is enabled or not.  If the host is the host where the Ambari server is installed, than code is invoked to calculate the Ambari server's Kerberos identity.  In this code, the Kerberos-specific configurations are retrieved. If Kerberos is not enabled, these configurations will not be available and thus the error, \"The 'krb5-conf' configuration is not available\", is encountered. \n\n*Solution*\n# Stop calculating the Kerberos identities when Kerberos is not enabled\n# Protect access to the Kerberos configurations and set default values for needed configuration properties",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "The 'krb5-conf' configuration is not available"
   },
   {
      "_id": "12964955",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-05-04 12:32:17",
      "description": "Authorizations given to role-based principals must be dereferenced upon user login.  These authorizations are dynamically determined based on the user's set of roles.  \n\nIn {{org.apache.ambari.server.security.authorization.AmbariLocalUserDetailsService#loadUserByUsername}}, the set of {{GrantedAuthorities}} the authenticated user is calculated.  During this process, using the set of {{cluster-level roles}} a user is granted, any permissions given to matching role-based principals should be given to the user. \n\nThis essentially work like giving privileges to a group of users calculated at runtime. \n\nA use-case to support the need for this is to assign access to a view to all users with some specific role. Currently we can assign access to a view to a specific user or group by assigning that user or group the {{VIEW.USER}} role applied to the specific view.  To assign access a view to users who have a specific role, a {{role}} will need to behave like a {{principal}}.\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Authorizations given to role-based principals must be dereferenced upon user login"
   },
   {
      "_id": "12964952",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-05-04 12:18:34",
      "description": "To support assigning privileges to users based on their roles provide support in the Ambari database to allow a {{role}} to be referenced as a {{principal}} similar in the way a {{user}} and a {{group}} a referenced as a {principal}}.\n\nA use-case to support the need for this is to assign access to a view to all users with some specific role. Currently we can assign access to a view to a specific user or group by assigning that user or group the {{VIEW.USER}} role applied to the specific view.  To assign access a view to users who have a specific role, a {{role}} will need to behave like a {{principal}}.\n\nThe following changes need to be made to the database:\n\n* Add {{principal_id}} column to the {{adminpermission}} table\n* Create a {{principaltype}} record where the {{principal_type_name}} is '{{ROLE}}'\n* Add records to the {{adminprincpal}} table to represent each role in {{adminpermission}}\n* Update {{adminpermission.principal_id}} to match the relevant records from {{adminprincipal}}\n\nAfter this is complete, {{adminprivilege}} records can be created using roles as principals. \n\nNOTE: special handling will need to be done in the authorization logic to dereference the role associations with the authenticated user, similar in the way this is done for groups. \n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Allow roles to be treated like principals in Ambari DB"
   },
   {
      "_id": "12964660",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-05-03 13:10:02",
      "description": "After AMBARI-16102, we no longer support more than 1 role per user. So we need a clean up when user upgrade to Ambari 2.4. If user has more than 1 role, we should keep the most \"powerful\" role and delete the rest. ",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "rbac",
         "upgrade"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "RBAC: Clean up roles after ambari upgrade"
   },
   {
      "_id": "12961844",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-04-22 19:03:13",
      "description": "When adding a service to a Kerberized cluster and click install nothing happens on the UI and i see the following error in the ambari server logs\n\n{code}\n20 Apr 2016 16:03:56,818  INFO [qtp-ambari-client-2764] KerberosHelperImpl:735 - Adding identity for JOURNALNODE to auth to local mapping\n20 Apr 2016 16:03:56,818  INFO [qtp-ambari-client-2764] KerberosHelperImpl:735 - Adding identity for METRICS_COLLECTOR to auth to local mapping\n20 Apr 2016 16:03:56,857  INFO [qtp-ambari-client-2764] StackAdvisorRunner:47 - Script=/var/lib/ambari-server/resources/scripts/stack_advisor.py, actionDirectory=/var/run/ambari-server/stack-recommendations/323, command=recommend-configurations\n20 Apr 2016 16:03:56,860  INFO [qtp-ambari-client-2764] StackAdvisorRunner:61 - Stack-advisor output=/var/run/ambari-server/stack-recommendations/323/stackadvisor.out, error=/var/run/ambari-server/stack-recommendations/323/stackadvisor.err\n20 Apr 2016 16:03:56,917  INFO [qtp-ambari-client-2764] StackAdvisorRunner:69 - Stack advisor output files\n20 Apr 2016 16:03:56,917  INFO [qtp-ambari-client-2764] StackAdvisorRunner:70 -     advisor script stdout: StackAdvisor implementation for stack HDP, version 2.0.6 was loaded\nStackAdvisor implementation for stack HDP, version 2.1 was loaded\nStackAdvisor implementation for stack HDP, version 2.2 was loaded\nStackAdvisor implementation for stack HDP, version 2.3 was loaded\nStackAdvisor implementation for stack HDP, version 2.4 was loaded\nReturning HDP24StackAdvisor implementation\nError occured in stack advisor.\nError details: 'NoneType' object is not iterable\n20 Apr 2016 16:03:56,917  INFO [qtp-ambari-client-2764] StackAdvisorRunner:71 -     advisor script stderr: Traceback (most recent call last):\n  File \"/var/lib/ambari-server/resources/scripts/stack_advisor.py\", line 158, in <module>\n    main(sys.argv)\n  File \"/var/lib/ambari-server/resources/scripts/stack_advisor.py\", line 109, in main\n    result = stackAdvisor.recommendConfigurations(services, hosts)\n  File \"/var/lib/ambari-server/resources/scripts/../stacks/stack_advisor.py\", line 570, in recommendConfigurations\n    calculation(configurations, clusterSummary, services, hosts)\n  File \"/var/lib/ambari-server/resources/scripts/./../stacks/HDP/2.0.6/services/stack_advisor.py\", line 627, in recommendAmsConfigurations\n    if set(amsCollectorHosts).intersection(dn_hosts):\nTypeError: 'NoneType' object is not iterable\n20 Apr 2016 16:03:56,918  INFO [qtp-ambari-client-2764] AbstractResourceProvider:802 - Caught an exception while updating host components, retrying : org.apache.ambari.server.AmbariException: Stack Advisor reported an error: TypeError: 'NoneType' object is not iterable\nStdOut file: /var/run/ambari-server/stack-recommendations/323/stackadvisor.out\n\nStdErr file: /var/run/ambari-server/stack-recommendations/323/stackadvisor.err\n{code}\n\n*Solution*\nPass to the stack advisor information about all installed services where each component is installed (component host map)\n\n ",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Stack Advisor issue when adding service to Kerberized cluster"
   },
   {
      "_id": "12960863",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-04-21 18:28:54",
      "description": "When re-generating auth-to-local rules where existing rules are already set, the default (or fallback) rule for the default and additional realms is duplicated but the extra instance(s) have the case-insensitive flag:\n\nExample:\n{noformat:title=Was}\n...\nRULE:[1:$1@$0](.*@EXAMPLE.COM)s/@.*//\n...\n{noformat}\n{noformat:title=Becomes}\n...\nRULE:[1:$1@$0](.*@EXAMPLE.COM)s/@.*//\nRULE:[1:$1@$0](.*@EXAMPLE.COM)s/@.*///L\n...\n{noformat}\n\n*Steps to Reproduce*\n# Create cluster with (at least) HDFS\n# Enable Kerberos (do not check the box next to \"Enable case insensitive username rules\"; kerberos-env/case_insensitive_username_rules should be false\n# Edit Kerberos configuration and check \"Enable case insensitive username rules\" to set kerberos-env/case_insensitive_username_rules to true\n# Regenerate Keytabs\n# See duplicate entry in HDFS configs (core-site/hadoop.security.auth_to_local)\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "auth_to_local",
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Auth-to-local rule generation duplicates default rules when adding case-insensitive default rules"
   },
   {
      "_id": "12960745",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-04-21 13:15:05",
      "description": "We had a 1600 unsecured cluster initially, from which 700 nodes were destroyed. Though Ambari-server knew of 1600 hosts, only 900 were heartbeating. At this point we secured the cluster and everything was good. Then we brought back the 700 hosts, which started heartbeating with ambari-server. \n\nAt this point we did 'Regenerate Keytabs' which failed at the 'Create Principals' step (image attached), as it was trying to re-create principal which is already existing with kadmin, and with ambari-server.\n\n*Create Principals*\nStderr:\n{noformat}\n2016-04-21 01:28:52,985 - Failed to create or update principal, HTTP/host1.example.com@EXAMPLE.COM - Failed to create service principal for HTTP/host1.example.com@EXAMPLE.COM\nSTDOUT: Authenticating as principal admin/admin with password.\n\nSTDERR: WARNING: no policy specified for HTTP/host1.example.com@EXAMPLE.COM; defaulting to no policy\nadd_principal: Principal or policy already exists while creating \"HTTP/host1.example.com@EXAMPLE.COM\".\n{noformat}\n\nStdout:\n{noformat}\n2016-04-21 01:27:32,400 - Processing identities...\n2016-04-21 01:28:29,874 - Processing principal, HTTP/host1.example.com@EXAMPLE.COM\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Regenerating keytabs on re-imaged hosts results in error during 'Creating Principals'"
   },
   {
      "_id": "12959876",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-04-19 03:00:29",
      "description": "Attached jstack after firing up the curl call.\n\n{code}\ncurl -u admin:admin -H \"X-Requested-By:ambari\" -i -X POST -d'{\"RequestInfo\":{\"context\":\"Kerberos Service Check\",\"command\":\"KERBEROS_SERVICE_CHECK\",\"operation_level\":{\"level\":\"CLUSTER\",\"cluster_name\":\"c1\"}},\"Requests/resource_filters\":[{\"service_name\":\"KERBEROS\"}]}' http://104.196.89.51:8080/api/v1/clusters/c1/requests\n{code}\n\nBehavior:\n- Call timedout on the UI and wizard cannot proceed further.\n- Exception in the server log after long wait:\n{code}\n12 Apr 2016 23:01:45,231  INFO [qtp-ambari-client-818] AmbariManagementControllerImpl:3376 - Received action execution request, clusterName=c1, request=isCommand :true, action :null, command :KERBEROS_SERVICE_CHECK, inputs :{}, resourceFilters: [RequestResourceFilter{serviceName='KERBEROS', componentName='null', hostNames=[]}], exclusive: false, clusterName :c1\n12 Apr 2016 23:01:45,409  INFO [qtp-ambari-client-818] AmbariCustomCommandExecutionHelper:1135 - Iterating service type Instance in getCommandJson:: HIVE\n12 Apr 2016 23:01:45,410  INFO [qtp-ambari-client-818] AmbariCustomCommandExecutionHelper:1135 - Iterating service type Instance in getCommandJson:: AMBARI_METRICS\n12 Apr 2016 23:01:45,410  INFO [qtp-ambari-client-818] AmbariCustomCommandExecutionHelper:1135 - Iterating service type Instance in getCommandJson:: HDFS\n12 Apr 2016 23:01:45,410  INFO [qtp-ambari-client-818] AmbariCustomCommandExecutionHelper:1135 - Iterating service type Instance in getCommandJson:: MAPREDUCE2\n12 Apr 2016 23:01:45,410  INFO [qtp-ambari-client-818] AmbariCustomCommandExecutionHelper:1135 - Iterating service type Instance in getCommandJson:: OOZIE\n12 Apr 2016 23:01:45,410  INFO [qtp-ambari-client-818] AmbariCustomCommandExecutionHelper:1135 - Iterating service type Instance in getCommandJson:: TEZ\n12 Apr 2016 23:01:45,411  INFO [qtp-ambari-client-818] AmbariCustomCommandExecutionHelper:1135 - Iterating service type Instance in getCommandJson:: HBASE\n12 Apr 2016 23:01:45,411  INFO [qtp-ambari-client-818] AmbariCustomCommandExecutionHelper:1135 - Iterating service type Instance in getCommandJson:: ZOOKEEPER\n12 Apr 2016 23:01:45,411  INFO [qtp-ambari-client-818] AmbariCustomCommandExecutionHelper:1135 - Iterating service type Instance in getCommandJson:: KERBEROS\n12 Apr 2016 23:01:45,411  INFO [qtp-ambari-client-818] AmbariCustomCommandExecutionHelper:1135 - Iterating service type Instance in getCommandJson:: YARN\n12 Apr 2016 23:01:45,411  INFO [qtp-ambari-client-818] AmbariCustomCommandExecutionHelper:1135 - Iterating service type Instance in getCommandJson:: PIG\n12 Apr 2016 23:03:49,984  WARN [qtp-ambari-client-818] MITKerberosOperationHandler:434 - Failed to execute kadmin:\n        Command: /usr/bin/kadmin -s perf-b-3.c.pramod-thangali.internal -p admin -w ******** -r EXAMPLE.COM -q \"get_principal admin\"\n        ExitCode: 1\n        STDOUT: Authenticating as principal admin with password.\n\n        STDERR: kadmin: Client not found in Kerberos database while initializing kadmin interface\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos-wizard",
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos wizard stuck trying to schedule service check operation"
   },
   {
      "_id": "12957737",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-04-11 15:42:52",
      "description": "Provide backward compatibility for {{kdc_host}} in {{krb5-conf}} for {{krb5.conf}} templates.\n\nThis is necessary in the event the {{krb5.conf}} template is not updated during the Ambari 2.4.0 upgrade while the {{kdc_host}} property is renamed to {{kdc-hosts}}. \n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Provide backward compatibility for kdc_host in krb5-conf for krb5.conf templates"
   },
   {
      "_id": "12957505",
      "assignee": "aonishuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-04-10 04:15:48",
      "description": "In templetonSmoke.sh, there are\n1) unnecessary `exit 0`\n2) lack of redirect `>` command\n3) unassigned variable\n\nwe should correct them all to check the HIVE service properly.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "patch-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "HIVE service_check doesn't work properly"
   },
   {
      "_id": "12956188",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-04-05 15:47:54",
      "description": "Because multiple KDCs may exist for an installation (failover, high availability, etc...), Ambari should allow a user to specify multiple KDC hosts to be set while enabling Kerberos and updating the Kerberos service's configuration.\n\nThis should be done by allowing {{kerberos-env/kdc_host}} to accept a (comma-)delimited list of hosts and then parsing that list properly when building the krb5.conf file where each {{kdc_host}} item generates an entry in the relevant realm block.  For example:\n\n{noformat:title=kerberos-env}\n{\n  ...\n \"kdc_hosts\" : \"kdc1.example.com, kdc2.example.com\"\n  ...\n}\n{noformat}\n\n{noformat:title=krb5.conf}\n[realms]\n  EXAMPLE.COM = {\n    ...\n    kdc = kdc1.example.com\n    kdc = kdc2.example.com\n    ...\n  }\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kdc",
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: Allow multiple KDC hosts to be set while enabling Kerberos"
   },
   {
      "_id": "12952995",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-03-23 21:49:39",
      "description": "Problem:\n1. Create a cluster \n2. Create some view instances in amber\n3. Create a local non-admin ambari user\n4. Grant the newly created user access to one of the view instances\n\nLog-in with the non-admin user. The user should only see the view instances it has permission instead of all view instances.\n\nThis seems to have been introduced by https://issues.apache.org/jira/browse/AMBARI-14194",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "rbac",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "RBAC based user access to view instances are not honoured"
   },
   {
      "_id": "12950004",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-03-14 18:41:02",
      "description": "Due to the inconsistent ordering of resources in the set of Resources created in {{org.apache.ambari.server.controller.internal.ArtifactResourceProvider#getResources}}, {{org.apache.ambari.server.controller.internal.ArtifactResourceProviderTest#testDeleteResources}} fails since the test case expects a certain order in which the Resource are processed. \n\nSince it doesn't really make a difference what order the resources are processed when deleting, the test case should be fixed to not care about that. \n\nThe follow test failure has been encountered due to this:\n\n{noformat}\njava.lang.AssertionError: \n  Unexpected method call ArtifactDAO.findByNameAndForeignKeys(\"test-artifact2\", {cluster=500}):\n    ArtifactDAO.findByForeignKeys({cluster=500}): expected: 1, actual: 1\n    ArtifactDAO.findByNameAndForeignKeys(\"test-artifact\", {cluster=500}): expected: 1, actual: 0\n\tat org.easymock.internal.MockInvocationHandler.invoke(MockInvocationHandler.java:44)\n\tat org.easymock.internal.ObjectMethodsFilter.invoke(ObjectMethodsFilter.java:94)\n\tat org.easymock.internal.ClassProxyFactory$MockMethodInterceptor.intercept(ClassProxyFactory.java:97)\n\tat org.apache.ambari.server.orm.dao.ArtifactDAO$$EnhancerByCGLIB$$40076a34.findByNameAndForeignKeys(<generated>)\n\tat org.apache.ambari.server.controller.internal.ArtifactResourceProvider$4.invoke(ArtifactResourceProvider.java:377)\n\tat org.apache.ambari.server.controller.internal.ArtifactResourceProvider$4.invoke(ArtifactResourceProvider.java:365)\n\tat org.apache.ambari.server.controller.internal.AbstractResourceProvider.invokeWithRetry(AbstractResourceProvider.java:451)\n\tat org.apache.ambari.server.controller.internal.AbstractResourceProvider.modifyResources(AbstractResourceProvider.java:332)\n\tat org.apache.ambari.server.controller.internal.ArtifactResourceProvider.deleteResources(ArtifactResourceProvider.java:245)\n\tat org.apache.ambari.server.controller.internal.ArtifactResourceProviderTest.testDeleteResources(ArtifactResourceProviderTest.java:435)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)\n\tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)\n\tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)\n\tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:300)\n\tat org.junit.runner.JUnitCore.run(JUnitCore.java:157)\n\tat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:78)\n\tat com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:212)\n\tat com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:68)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n\tat com.intellij.rt.execution.application.AppMain.main(AppMain.java:140)\n{noformat}\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "unit-test"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Fix ArtifactResourceProviderTest to avoid set ordering issues"
   },
   {
      "_id": "12948831",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-03-10 15:50:19",
      "description": "Provide an entry point in the REST API to retrieve the _composite_ Kerberos descriptor. This includes the default Kerberos descriptor built from the stack definitions overlaid with the (potentially sparse) Kerberos descriptor stored as an artifact of the cluster. \n\nThe entry point should be a read-only sub-resource of \"clusters\", and should only be made available if asked for explicitly due to the size of the data that will be returned.\n\n{noformat:title=Example API call}\nGET /api/v1/clusters/:cluster_name/kerberos_descriptors/COMPOSITE\n{noformat}\n\nNote: Kerberos Descriptors available via this interface are:\n* STACK - the default Kerberos Descriptor from the relevant stack definition\n* USER - the user-suppled updates to the stack default Kerberos Descriptor\n* COMPOSITE - the stack default Kerberos Descriptor with the user-suppled updates applied (this is the Kerberos Descriptor used when performing Kerberos-related operations)\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos_descriptor",
         "rest_api"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Provide composite Kerberos Descriptor via the REST API"
   },
   {
      "_id": "12947689",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-03-07 13:33:01",
      "description": "When generating accounts in an Active Directory, it may be useful to add a unique value to CN's.  In the past generating this value was done by taking the SHA1 hash of the relevant normalized principal name. For example {{ambari-qa-c1@EXAMPLE.COM}} yields {{d9b48cb1c075d3da9fab4855a4031266bab8fb6a}}.  \n\nBecause using SHA1 at all may not be desirable, Ambari should provide options to use the following digest algorithms in the Active Directory account creation attribute template ({{kerberos-env/ad_create_attributes_template}}:\n\n||Attribute Variables||Example||\n|$principal_digest|SHA1 hash of the $normalized_principal|\n|$principal_digest_256|SHA256 hash of the $normalized_principal|\n|$principal_digest_512|SHA512 hash of the $normalized_principal|\n\n   ",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "active-directory",
         "active_directory",
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: Provide SHA256 or SHA512 options for template principal digest"
   },
   {
      "_id": "12944649",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-02-25 20:04:36",
      "description": "We need to add authorization for Auto start services.\n\n*Solution*\n* Users with the ability to modify cluster configurations ({{CLUSTER.MODIFY_CONFIGS}}) should be able to toggle the cluster-level auto start value.\n* Users with the ability to start and stop services ({{SERVICE.START_STOP}}) should be able to toggle the service-level auto start value.\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Authorization for Auto start services"
   },
   {
      "_id": "12942990",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-02-24 15:55:04",
      "description": "If ambari-server upgrade is run again, the following error is encountered. One easy way to test it is to set the version in the DB to an older version and then call ambari-server upgrade.\n\ne.g. {{update metainfo set metainfo_value = '2.2.0' where neatinfo_key = 'version';}}\n \n{code}\nError output from schema upgrade command:\nException in thread \"main\" org.apache.ambari.server.AmbariException: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.5.2.v20140319-9ad6abd): org.eclipse.persistence.exceptions.DatabaseException\nInternal Exception: org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint \"adminpermission_pkey\"\nError Code: 0\nCall: INSERT INTO adminpermission (permission_id, permission_label, permission_name, sort_order, resource_type_id) VALUES (?, ?, ?, ?, ?)\n\tbind => [5 parameters bound]\n\tat org.apache.ambari.server.upgrade.SchemaUpgradeHelper.executeDMLUpdates(SchemaUpgradeHelper.java:233)\n\tat org.apache.ambari.server.upgrade.SchemaUpgradeHelper.main(SchemaUpgradeHelper.java:307)\nCaused by: javax.persistence.RollbackException: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.5.2.v20140319-9ad6abd): org.eclipse.persistence.exceptions.DatabaseException\nInternal Exception: org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint \"adminpermission_pkey\"\nError Code: 0\nCall: INSERT INTO adminpermission (permission_id, permission_label, permission_name, sort_order, resource_type_id) VALUES (?, ?, ?, ?, ?)\n\tbind => [5 parameters bound]\n\tat org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commit(EntityTransactionImpl.java:157)\n\tat org.apache.ambari.server.orm.AmbariJpaLocalTxnInterceptor.invoke(AmbariJpaLocalTxnInterceptor.java:91)\n\tat org.apache.ambari.server.upgrade.UpgradeCatalog230.addNewPermissions(UpgradeCatalog230.java:144)\n\tat org.apache.ambari.server.upgrade.UpgradeCatalog230.executeDMLUpdates(UpgradeCatalog230.java:127)\n\tat org.apache.ambari.server.upgrade.AbstractUpgradeCatalog.upgradeData(AbstractUpgradeCatalog.java:659)\n\tat org.apache.ambari.server.upgrade.SchemaUpgradeHelper.executeDMLUpdates(SchemaUpgradeHelper.java:230)\n\t... 1 more\nCaused by: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.5.2.v20140319-9ad6abd): org.eclipse.persistence.exceptions.DatabaseException\nInternal Exception: org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint \"adminpermission_pkey\"\nError Code: 0\nCall: INSERT INTO adminpermission (permission_id, permission_label, permission_name, sort_order, resource_type_id) VALUES (?, ?, ?, ?, ?)\n\tbind => [5 parameters bound]\n\tat org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:340)\n\tat org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.processExceptionForCommError(DatabaseAccessor.java:1611)\n\tat org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeDirectNoSelect(DatabaseAccessor.java:898)\n\tat org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeNoSelect(DatabaseAccessor.java:962)\n\tat org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:631)\n\tat org.eclipse.persistence.internal.databaseaccess.ParameterizedSQLBatchWritingMechanism.executeBatch(ParameterizedSQLBatchWritingMechanism.java:149)\n\tat org.eclipse.persistence.internal.databaseaccess.ParameterizedSQLBatchWritingMechanism.executeBatchedStatements(ParameterizedSQLBatchWritingMechanism.java:134)\n\tat org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.writesCompleted(DatabaseAccessor.java:1836)\n\tat org.eclipse.persistence.internal.sessions.AbstractSession.writesCompleted(AbstractSession.java:4244)\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "upgrade"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "UpgradeCatalog230 is not idempotent"
   },
   {
      "_id": "12938906",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-02-12 20:12:14",
      "description": "Return privilege information with results from GroupResourceProvider, which is invoked when issuing the following REST API call:\n{noformat}\nGET /api/v1/groups\n{noformat}\n\nThe result set should looks something like:\n{code}\n{\n  \"href\" : \"http://ambari-server:8080/api/v1/groups?fields=privileges/*\",\n  \"items\" : [\n    {\n      \"href\" : \"http:///ambari-server:8080/api/v1/groups/group1\",\n      \"Groups\" : {\n        \"group_name\" : \"group1\"\n      },\n      \"privileges\" : [\n        {\n          \"href\" : \"http://ambari-server:8080/api/v1/groups/group1/privileges/1\",\n          \"PrivilegeInfo\" : {\n            \"cluster_name\" : \"c1\",\n            \"permission_label\" : \"Cluster User\",\n            \"permission_name\" : \"CLUSTER.USER\",\n            \"principal_name\" : \"group1\",\n            \"principal_type\" : \"GROUP\",\n            \"privilege_id\" : 3,\n            \"type\" : \"CLUSTER\",\n            \"group_name\" : \"group1\"\n          }\n        }\n      ]\n    }\n  ]\n}\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Return privilege information with results from GroupResourceProvider"
   },
   {
      "_id": "12938869",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-02-12 18:20:03",
      "description": "Unit tests in {{org.apache.ambari.server.stack.KerberosDescriptorTest}} fail due to moved/missing directory - {{.../ambari/ambari-server/target/classes/stacks}}.  \n\n{{org.apache.ambari.server.stack.KerberosDescriptorTest}} should use {{{.../ambari/ambari-server/src/main/resources/stacks}} instead. ",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "unit-test"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "KerberosDescriptorTest failed due to moved/missing test directory"
   },
   {
      "_id": "12937979",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-02-09 19:30:14",
      "description": "Since it may be desired to order roles in ways other than alphabetically, each role should have an explicit numerical order that may be used by UI's. \n\nRoles should be explicitly ordered by the amount of access privileges they have. \n\n\n||Role Name||Explicit Order Value||\n|Ambari Administrator|1|\n|Cluster Administrator|2|\n|Cluster Operator|3|\n|Service Administrator|4|\n|Service Operator|5|\n|Cluster User|6|\n|View User|7|\n\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Provide explicit ordering for roles"
   },
   {
      "_id": "12937032",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-02-05 13:13:05",
      "description": "When processing the user-specified auth-to-local rules while automatically generating auth-to-local rule sets using {{org.apache.ambari.server.controller.AuthToLocalBuilder}}, some rules fail to render.\n\nThis occurs when escape characters are used in the replacement pattern or replacement string of the rule, where a role looks like:\n\n{code}\nRULE: [n:string](regexp)s/pattern/replacement/[g]\n{code}\n\nTo fix this issue, the regular expression used to parse the rules need to be augmented to allow for those characters.\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Some user-specified auth-to-local rules fail to render when auto generating auth-to-local rules"
   },
   {
      "_id": "12936402",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-02-03 17:35:34",
      "description": "Add an API directive to force toggling Kerberos if the cluster's security type has not changed.  \n\nThis is useful for _retry_ attempts to enable or disable Kerberos when the workflow progressed far enough to store the _new_ security type.  \n\nTrying to enable Kerberos when the cluster's security type is already set to {{KERBEROS}} will result in a successful response from the Ambari server but no actions will be performed.  Same for attempting to disable Kerberos when the cluster's security type is already set to {{NONE}}.  \n\nBy forcing the operation using the {{force_toggle_kerberos=true}} directive, the security type check is avoided, thus allowing the _retry_ operation to proceed. \n\nExample: \n{code}\nPUT /api/v1/clusters/CLUSTER_NAME?force_toggle_kerberos=true\n{\n  \"Clusters\" : {\n    \"security_type\" : \"KERBEROS\"\n    }\n}\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos",
         "rest_api"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Add API directive to force toggling Kerberos if the cluster's security type has not changed"
   },
   {
      "_id": "12935664",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-02-01 16:36:37",
      "description": "Increase timeout for server-side tasks, or make the timeout configurable.\n\nThis is to help in the case where environmental issues cause Kerberos-related commands to take longer than usual, thus increasing the time it takes to process Kerberos server-side actions. If the Kerberos-server side actions timeout, Ambari fails the task and the user is stuck not able to perform the desired Kerberos-related action.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "server-side"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Increase timeout for server-side tasks"
   },
   {
      "_id": "12931653",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-01-16 11:40:13",
      "description": "After disabling Kerberos to fix a user generated issue with a principal name pattern, the auth-to-local mapping(s) were not removed and thus not _fixing_ the issues that were caused: \n\n{noformat:title=Invalid hadoop.security.auth_to_local value}\n <property>\n       <name>hadoop.security.auth_to_local</name>\n       <value>RULE:[1:$1@$0](${hbase_user}@EXAMPLE.COM)s/.*/hbase/\n RULE:[1:$1@$0](${hdfs_user}@EXAMPLE.COM)s/.*/hdfs/\n RULE:[1:$1@$0](${smokeuser}@EXAMPLE.COM)s/.*/ambari-qa/\n RULE:[1:$1@$0](.*@EXAMPLE.COM)s/@.*//\n RULE:[2:$1@$0](amshbase@EXAMPLE.COM)s/.*/ams/\n RULE:[2:$1@$0](amszk@EXAMPLE.COM)s/.*/ams/\n RULE:[2:$1@$0](dn@EXAMPLE.COM)s/.*/hdfs/\n RULE:[2:$1@$0](hbase@EXAMPLE.COM)s/.*/hbase/\n RULE:[2:$1@$0](hive@EXAMPLE.COM)s/.*/hive/\n RULE:[2:$1@$0](jhs@EXAMPLE.COM)s/.*/mapred/\n RULE:[2:$1@$0](jn@EXAMPLE.COM)s/.*/hdfs/\n RULE:[2:$1@$0](nm@EXAMPLE.COM)s/.*/yarn/\n RULE:[2:$1@$0](nn@EXAMPLE.COM)s/.*/hdfs/\n RULE:[2:$1@$0](oozie@EXAMPLE.COM)s/.*/oozie/\n RULE:[2:$1@$0](rm@EXAMPLE.COM)s/.*/yarn/\n RULE:[2:$1@$0](yarn@EXAMPLE.COM)s/.*/yarn/\n DEFAULT</value>\n     </property>\n{noformat}\n\n{noformat:title=Errors in log}\n2016-01-13 21:51:17,825 FATAL datanode.DataNode (DataNode.java:secureMain(2429)) - Exception in secureMain\njava.util.regex.PatternSyntaxException: Illegal repetition near index 0\n${hbase_user}@EXAMPLE.COM\n^\n        at java.util.regex.Pattern.error(Pattern.java:1924)\n        at java.util.regex.Pattern.closure(Pattern.java:3104)\n        at java.util.regex.Pattern.sequence(Pattern.java:2101)\n        at java.util.regex.Pattern.expr(Pattern.java:1964)\n        at java.util.regex.Pattern.compile(Pattern.java:1665)\n        at java.util.regex.Pattern.<init>(Pattern.java:1337)\n        at java.util.regex.Pattern.compile(Pattern.java:1022)\n        at org.apache.hadoop.security.authentication.util.KerberosName$Rule.<init>(KerberosName.java:193)\n        at org.apache.hadoop.security.authentication.util.KerberosName.parseRules(KerberosName.java:336)\n        at org.apache.hadoop.security.authentication.util.KerberosName.setRules(KerberosName.java:397)\n        at org.apache.hadoop.security.HadoopKerberosName.setConfiguration(HadoopKerberosName.java:75)\n        at org.apache.hadoop.security.UserGroupInformation.initialize(UserGroupInformation.java:275)\n        at org.apache.hadoop.security.UserGroupInformation.setConfiguration(UserGroupInformation.java:311)\n        at org.apache.hadoop.hdfs.server.datanode.DataNode.instantiateDataNode(DataNode.java:2192)\n        at org.apache.hadoop.hdfs.server.datanode.DataNode.createDataNode(DataNode.java:2242)\n        at org.apache.hadoop.hdfs.server.datanode.DataNode.secureMain(DataNode.java:2422)\n        at org.apache.hadoop.hdfs.server.datanode.DataNode.main(DataNode.java:2446)\n2016-01-13 21:51:17,830 INFO  util.ExitUtil (ExitUtil.java:terminate(124)) - Exiting with status 1\n2016-01-13 21:51:17,832 INFO  datanode.DataNode (LogAdapter.java:info(45)) - SHUTDOWN_MSG:\n/************************************************************\n{noformat}\n\nThe auth-to-local mappings should be removed when Kerberos is disabled.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "disabling kerberos does not remove auth to local rules"
   },
   {
      "_id": "12931590",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2016-01-15 22:29:43",
      "description": "Kerberos automation logic should use the stack advisor when determining configuration updates.  This will ensure that property updates are valid given the cluster's configuration and whether the cluster was created using the API, UI, or BluePrints.\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos automation logic should use stack advisor when determining configuration updates"
   },
   {
      "_id": "12924678",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-12-29 12:52:27",
      "description": "Failed to deploy Kerberized cluster via Blueprint with custom principal name set in Kerberos descriptor declared in _Cluster Creation Template_ like \n\n{code}\n...\n  \"security\": {\n    \"type\": \"KERBEROS\",\n    \"kerberos_descriptor\": {\n      \"identities\": [\n        {\n          \"name\": \"smokeuser\",\n          \"principal\": {\n            \"value\": \"smokeuser9jJevBQAYGQWnRkuapSEp@${realm}\"\t\t\t\n          }\n        }\n      ]\n    }\n  },\n...\n{code}\n\nThe following error (shown in ambari-server.log) was encountered while the cluster was being built: \n{noformat}\nFailed to create keytab for smokeuser9jJevBQAYGQWnRkuapSEp@EXAMPLE.COM, missing cached file\n{noformat}\n\nh3. Cause\nThis was caused because the Kerberos descriptor in the _Blueprint_ or _Cluster Creation Template_ did not declare the type property of the principal being updated.  This caused the logic in Ambari to assume the principal was a _service_ principal rather than a _user_ (or headless) principal.  Because of this, when merging the updates to the default Kerberos descriptor (from the stack), the {{smokeuser}} principal type was changed _user_ to _service_.  Thus it was skipped over when the _Blueprints_ process executed the phase to ensure (and cache) headless identities.  \n\nThe bug is in the logic parsing the Kerberos descriptor.  By not specifying a principal type, the logic assumes the principal type is _service_; however in this case, the principal type needs to be {{null}}, so that when the user-specified Kerberos descriptor is merged with the default Kerberos descriptor, the default principal type is not changed. \n\n*NOTE:* This is not limited to _Blueprints_, the issue will cause issues if the specified Kerberos descriptor artifact is missing {{principal/type}} properties as well.  See [Set the Kerberos Descriptor|https://cwiki.apache.org/confluence/display/AMBARI/Automated+Kerberizaton#AutomatedKerberizaton-SettheKerberosDescriptor]\n\nh3. Solution\nChange the logic it the Kerberos descriptor parser to allow for the principal type to be {{null}}. Handle this value being {{null}} by consumers of this data such that {{null}} indicates the default value of {{service}}. This will keep the current behavior consistent, and also allow for the merging facility to properly merge principal updates - like changing the principal name pattern without needing to specify the principal type as well. \n\nh3. Workaround\nExplicitly set the {{type}} property of _user_ (or headless) principals in the Kerberos descriptor:\n{code}\n...\n  \"security\": {\n    \"type\": \"KERBEROS\",\n    \"kerberos_descriptor\": {\n      \"identities\": [\n        {\n          \"name\": \"smokeuser\",\n          \"principal\": {\n            \"type\" : \"USER\",\n            \"value\": \"smokeuser9jJevBQAYGQWnRkuapSEp@${realm}\"\t\t\t\n          }\n        }\n      ]\n    }\n  },\n...\n{code}\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Failed to deploy Kerberized cluster via blueprint with custom principal name"
   },
   {
      "_id": "12923615",
      "assignee": "rlevas",
      "components": [],
      "created": "2015-12-22 00:12:33",
      "description": "SERVICE.MANAGE_CONFIG_GROUPS missing from CLUSTER.ADMINISTRATOR and AMBARI.ADMINISTRATOR roles in MySQL create script.\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "SERVICE.MANAGE_CONFIG_GROUPS missing from CLUSTER.ADMINISTRATOR and AMBARI.ADMINISTRATOR roles in MySQL create script"
   },
   {
      "_id": "12921052",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-12-11 13:01:04",
      "description": "Enforce granular role-based access control for ldap sync functions:\n\n|| || Cluster\\\\User || Service\\\\Operator || Service\\\\Administrator || Cluster\\\\Operator || Cluster\\\\Administrator || Administrator ||\n|Sync LDAP users                   |   |   |   |   |   | (+)| \n|Sync LDAP groups                   |   |   |   |   |   |(+)| \n\nEntry points affected:\nGET  /api/v1/ldap_sync_events\nPOST  /api/v1/ldap_sync_events\nDELETE  /api/v1/ldap_sync_events/:event_id\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Enforce granular role-based access control for ldap-sync functions"
   },
   {
      "_id": "12920800",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-12-10 15:59:56",
      "description": "Enforce granular role-based access control for configuration functions:\n\n|| || Cluster\\\\User || Service\\\\Operator || Service\\\\Administrator || Cluster\\\\Operator || Cluster\\\\Administrator || Administrator ||\n|View service configurations           |(+)|(+)|(+)|(+)|(+)|(+)|\n|Compare service configurations        |(+)|(+)|(+)|(+)|(+)|(+)|\n|Manage configuration groups   |   |   |(+)|(+)|(+)|(+)|\n|View host configuration            |(+)|(+)|(+)|(+)|(+)|(+)|\n|View cluster configuration            |(+)|(+)|(+)|(+)|(+)|(+)|\n\nEntry points affected:\n- GET /api/v1/clusters/:clusterId/configurations\n- POST /api/v1/clusters/:clusterId/configurations\n- GET /api/v1/clusters/:clusterId/configurations/service_config_versions\n- GET /api/v1/clusters/:clusterId/config_groups\n- GET /api/v1/clusters/:clusterId/config_groups/:groupId\n- POST /api/v1/clusters/:clusterId/config_groups\n- PUT /api/v1/clusters/:clusterId/config_groups/:groupId\n- DELETE /api/v1/clusters/:clusterId/config_groups/:groupId",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Enforce granular role-based access control for configuration functions"
   },
   {
      "_id": "12920492",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-12-09 17:21:42",
      "description": "The RBAC changes attempt to perform authorization checks on resource-specific identifiers. This is not the intended use of the authorization (admin*/auth*) tables as the resource's adminresource id is to be looked up and an authorization check is to be performed on that. ",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Change authorization resource Id to be adminresource id"
   },
   {
      "_id": "12918951",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-12-04 11:15:51",
      "description": "User with SERVICE.MODIFY_CONFIGS authorization fails with 403 status updating configs\n\n{noformat:title=PUT /api/v1/clusters/:cluster_name}\n[\n  {\n    \"Clusters\": {\n      \"desired_config\": [\n        {\n          \"type\": \"zoo.cfg\",\n          \"tag\": \"version1449226525346\",\n          \"properties\": {\n            \"autopurge.purgeInterval\": \"24\",\n            \"autopurge.snapRetainCount\": \"30\",\n            \"dataDir\": \"/hadoop/zookeeper\",\n            \"tickTime\": \"2000\",\n            \"initLimit\": \"11\",\n            \"syncLimit\": \"5\",\n            \"clientPort\": \"2181\"\n          },\n          \"service_config_version_note\": \"\"\n        }\n      ]\n    }\n  }\n]\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "User with SERVICE.MODIFY_CONFIGS authorization fails with 403 status updating configs"
   },
   {
      "_id": "12918102",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-12-03 19:26:20",
      "description": "Enforce granular role-based access control for ldap sync functions:\n\n|| || Cluster\\\\User || Service\\\\Operator || Service\\\\Administrator || Cluster\\\\Operator || Cluster\\\\Administrator || Administrator ||\n|Sync LDAP users                   |   |   |   |   |   | (+)| \n|Sync LDAP groups                   |   |   |   |   |   |(+)| \n\nEntry points affected:\n* TBD\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "ldap",
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Enforce granular role-based access control for ldap-sync functions"
   },
   {
      "_id": "12918099",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-12-03 19:22:00",
      "description": "Enforce granular role-based access control for Views functions:\n\n|| || View\\\\User || Cluster\\\\User || Service\\\\Operator || Service\\\\Administrator || Cluster\\\\Operator || Cluster\\\\Administrator || Administrator ||\n|Manage Ambari Views           |   |   |   |   |   |   |(+)|\n|Use  Ambari View           |(+) |   |   |   |   |   |   |\n\nEntry points affected:\n* TBD\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "rbac",
         "views"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Enforce granular role-based access control for Views functions"
   },
   {
      "_id": "12918096",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-12-03 19:16:10",
      "description": "Enforce granular role-based access control for configuration functions:\n\n|| || Cluster\\\\User || Service\\\\Operator || Service\\\\Administrator || Cluster\\\\Operator || Cluster\\\\Administrator || Administrator ||\n|View service configurations           |(+)|(+)|(+)|(+)|(+)|(+)|\n|Compare service configurations        |(+)|(+)|(+)|(+)|(+)|(+)|\n|Manage configuration groups   |   |   |(+)|(+)|(+)|(+)|\n|View host configuration            |(+)|(+)|(+)|(+)|(+)|(+)|\n|View cluster configuration            |(+)|(+)|(+)|(+)|(+)|(+)|\n\nEntry points affected:\n* TBD\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Enforce granular role-based access control for configuration functions"
   },
   {
      "_id": "12918092",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-12-03 19:05:13",
      "description": "Enforce granular role-based access control for host functions:\n\n|| || Cluster\\\\User || Service\\\\Operator || Service\\\\Administrator || Cluster\\\\Operator || Cluster\\\\Administrator || Administrator ||\n|Turn on/off maintenance mode  |   |   |   |(+)|(+)|(+)|\n|Add/Delete hosts              |   |   |   |(+)|(+)|(+)|\n|View host details              |(+)|(+)| (+)|(+)|(+)|(+)|\n\nEntry points affected:\n* GET api/vi/hosts\n* GET api/vi/hosts/:host_name\n* POST api/vi/hosts/:host_name\n* PUT api/vi/hosts/:host_name\n* DELETE api/vi/hosts/:host_name\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Enforce granular role-based access control for host functions"
   },
   {
      "_id": "12918091",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-12-03 19:01:58",
      "description": "Enforce granular role-based access control for service functions:\n\n|| || Cluster\\\\User || Service\\\\Operator || Service\\\\Administrator || Cluster\\\\Operator || Cluster\\\\Administrator || Administrator ||\n|Start/Stop/Restart Service    |   |(+)|(+)|(+)|(+)|(+)|\n|Decommission/recommission     |   |(+)|(+)|(+)|(+)|(+)|\n|Run service checks            |   |(+)|(+)|(+)|(+)|(+)|\n|Turn on/off maintenance mode  |   |(+)|(+)|(+)|(+)|(+)|\n|Perform service-specific tasks|   |(+)|(+)|(+)|(+)|(+)|\n|Move to another host          |   |   |(+)|(+)|(+)|(+)|\n|Enable HA                     |   |   |(+)|(+)|(+)|(+)|\n|Add Service to cluster        |   |   |   |   |(+)|(+)|\n|Install components            |   |   |   |(+)|(+)|(+)|\n|Modify service configurations         |   |   |(+)|(+)|(+)|(+)|\n|Set service users and groups  |   |   |   |   |   |(+)|\n\nEntry points affected:\n* GET /api/v1/clusters/:cluster_name/services\n* GET /api/v1/clusters/:cluster_name/services/:service_name\n* POST /api/v1/clusters/:cluster_name/services/:service_name\n* PUT /api/v1/clusters/:cluster_name/services/:service_name\n* DELETE /api/v1/clusters/:cluster_name/services/:service_name\n* GET /api/v1/clusters/:cluster_name/services/:service_name/components\n* GET /api/v1/clusters/:cluster_name/services/:service_name/components/:component_name\n* POST /api/v1/clusters/:cluster_name/services/:service_name/components/:component_name\n* PUT /api/v1/clusters/:cluster_name/services/:service_name/components/:component_name\n* DELETE /api/v1/clusters/:cluster_name/services/:service_name/components/:component_name\n* POST /api/v1/clusters/:cluster_name/hosts\n* POST /api/v1/clusters/:cluster_name/requests",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Enforce granular role-based access control for service functions"
   },
   {
      "_id": "12917646",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-12-02 16:58:55",
      "description": "Enforce granular role-based access control for credential functions\n\nEntry points affected:\n* GET /clusters/:cluster_name/credentials\n* GET /clusters/:cluster_name/credentials/:alias\n* POST /clusters/:cluster_name/credentials/:alias\n* PUT /clusters/:cluster_name/credentials/:alias\n* DELETE /clusters/:cluster_name/credentials/:alias\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Enforce granular role-based access control for credential functions"
   },
   {
      "_id": "12917364",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-12-01 20:05:51",
      "description": "{noformat}\nALTER TABLE permission_roleauthorization ADD CONSTRAINT FK_permission_roleauthorization_permission_id FOREIGN KEY (permission_id) REFERENCES adminpermission(permission_id)\nError report -\nSQL Error: ORA-00972: identifier is too long\n00972. 00000 -  \"identifier is too long\"\n*Cause:    An identifier with more than 30 characters was specified.\n*Action:   Specify at most 30 characters.\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "FK_permission_roleauthorization_permission_id is too long for a constraint identifier"
   },
   {
      "_id": "12917354",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-12-01 19:28:16",
      "description": "Enforce granular role-based access control for alert functions:\n\n|| || Cluster\\\\User || Service\\\\Operator || Service\\\\Administrator || Cluster\\\\Operator || Cluster\\\\Administrator || Administrator ||\n|Manage groups                 |   |   |   |   |   |(+)|\n\nEntry points affected: \n* GET /api/v1/groups\n* GET /api/v1/groups/:group_name\n* PUT /api/v1/groups/:group_name\n* POST /api/v1/groups/:group_name\n* DELETE /api/v1/groups/:group_name\n* GET /api/v1/groups/:group_name/members\n* PUT /api/v1/groups/:group_name/members\n* POST /api/v1/groups/:group_name/members\n* DELETE /api/v1/groups/:group_name/members",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Enforce granular role-based access control for group functions"
   },
   {
      "_id": "12917350",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-12-01 19:15:15",
      "description": "Enforce granular role-based access control for alert functions:\n\n|| || Cluster\\\\User || Service\\\\Operator || Service\\\\Administrator || Cluster\\\\Operator || Cluster\\\\Administrator || Administrator ||\n|View alerts (service)        |(+)|(+)|(+)|(+)|(+)|(+)|\n|Enable/disable alerts (service)          |   |   |(+)|(+)|(+)|(+)|\n|View alerts (cluster)                   |(+)|(+)|(+)|(+)|(+)|(+)|\n|Enable/disable alerts (cluster)         |   |   |   |   |(+)|(+)|\n\nEntry points affected: {color:red}TBD{color}\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Enforce granular role-based access control for alert functions"
   },
   {
      "_id": "12916980",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-11-30 15:15:38",
      "description": "Enforce granular role-based access control for stack version functions:\n\n|| || Cluster\\\\User || Service\\\\Operator || Service\\\\Administrator || Cluster\\\\Operator || Cluster\\\\Administrator || Administrator ||\n|View stack version details    |(+)|(+)|(+)|(+)|(+)|(+)|\n|Manage stack versions         |   |   |   |   |   |(+)|\n|Edit stack repository URLs    |   |   |   |   |   |(+)|\n\nEntry points affected:\n* GET /api/v1/stacks/:stack_name/versions/:version_id\n* GET /api/v1/stacks/:stack_name/versions/:version_id\n* PUT /api/v1/stacks/:stack_name/versions/:version_id\n* POST /api/v1/stacks/:stack_name/versions/:version_id\n* DELETE /api/v1/stacks/:stack_name/versions/:version_id\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "rbac",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Enforce granular role-based access control for stack version functions"
   },
   {
      "_id": "12916193",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-11-25 16:10:32",
      "description": "Enforce granular role-based access control for cluster functions:\n\n|| || Cluster\\\\User || Service\\\\Operator || Service\\\\Administrator || Cluster\\\\Operator || Cluster\\\\Administrator || Administrator ||\n|View status information       |(+)|(+)|(+)|(+)|(+)|(+)|\n|View configuration            |(+)|(+)|(+)|(+)|(+)|(+)|\n|View stack version details    |(+)|(+)|(+)|(+)|(+)|(+)|\n|Enable/disable Kerberos       |   |   |   |   |(+)|(+)|\n|Upgrade/downgrade stack       |   |   |   |   |(+)|(+)|\n|Create new clusters           |   |   |   |   |   |(+)|\n|Rename clusters               |   |   |   |   |   |(+)|\n\nEntry points affected:\n* PUT /api/v1/clusters/:cluster_name \n* POST /api/v1/clusters/:cluster_name \n\n*Note: Read-only requests (GET) are not protected so that the front end is not broken.*\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Enforce granular role-based access control for cluster functions"
   },
   {
      "_id": "12915829",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-11-24 15:51:26",
      "description": "When using {{api.authenticate=false}}, REST requests to the Ambari APIs don't need to contain any user information. As a result, new code being placed which assumes an authenticated user will throw NPE exceptions:\n\n{code}\n      // Ensure that the authenticated user has authorization to get this information\n      if (!isUserAdministrator && !AuthorizationHelper.getAuthenticatedName().equalsIgnoreCase(userName)) {\n        throw new AuthorizationException();\n      }\n{code}\n\n{code}\njava.lang.NullPointerException\n\tat org.apache.ambari.server.controller.internal.ActiveWidgetLayoutResourceProvider.getResources(ActiveWidgetLayoutResourceProvider.java:156)\n\tat org.apache.ambari.server.controller.internal.ClusterControllerImpl$ExtendedResourceProviderWrapper.queryForResources(ClusterControllerImpl.java:946)\n\tat org.apache.ambari.server.controller.internal.ClusterControllerImpl.getResources(ClusterControllerImpl.java:132)\n\tat org.apache.ambari.server.api.query.QueryImpl.doQuery(QueryImpl.java:512)\n\tat org.apache.ambari.server.api.query.QueryImpl.queryForResources(QueryImpl.java:381)\n\tat org.apache.ambari.server.api.query.QueryImpl.execute(QueryImpl.java:217)\n{code}\n\nRecommend changing this option to something like\n\n{code}\napi.authenticated.user=admin\n{code}\n\nThis will preserve the existing functionality while allowing the new code to continue to assume authenticated users.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "api",
         "authentication",
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Change Anonymous API Authentication To A Declared User"
   },
   {
      "_id": "12915084",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-11-21 12:22:21",
      "description": "Fix translation of different view resource type entities to all be of type VIEW. \n\nWhen an Ambari view is added to Ambari, a new resource type ({{adminresourcetype}}) is added.  Each of these types need to resolve to represent a _view_  resource ({{org.apache.ambari.server.security.authorization.ResourceType#VIEW}} so that authorization checks can be performed properly. \n\nFor example:\n{noformat}\n resource_type_id |    resource_type_name\n------------------+---------------------------\n                1 | AMBARI\n                2 | CLUSTER\n                3 | VIEW\n                5 | ADMIN_VIEW{2.1.2}\n                6 | FILES{1.0.0}\n                7 | PIG{1.0.0}\n                8 | CAPACITY-SCHEDULER{1.0.0}\n                9 | TEZ{0.7.0.2.3.2.0-377}\n               10 | SLIDER{2.0.0}\n               11 | HIVE{1.0.0}\n               55 | ADMIN_VIEW{2.2.0.0}\n               56 | TEZ{0.7.0.2.3.2.0-3539}\n{noformat}\n\nThe translation needs to be be:\n\n{noformat}\nAMBARI                    | ResourceType.AMBARI\nCLUSTER                   | ResourceType.CLUSTER\nVIEW                      | ResourceType.VIEW\nADMIN_VIEW{2.1.2}         | ResourceType.VIEW\nFILES{1.0.0}              | ResourceType.VIEW\nPIG{1.0.0}                | ResourceType.VIEW\nCAPACITY-SCHEDULER{1.0.0} | ResourceType.VIEW\nTEZ{0.7.0.2.3.2.0-377}    | ResourceType.VIEW\nSLIDER{2.0.0}             | ResourceType.VIEW\nHIVE{1.0.0}               | ResourceType.VIEW\nADMIN_VIEW{2.2.0.0}       | ResourceType.VIEW\nTEZ{0.7.0.2.3.2.0-3539}   | ResourceType.VIEW\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Fix translation of different view resource type entities to all be of type VIEW"
   },
   {
      "_id": "12915078",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-11-21 10:52:45",
      "description": "Return HTTP 403 on REST API authorization failures.\n\n{code:title=403 Forbidden} \n{\n  \"status\" : 403,\n  \"message\" : \"The authenticated user is not authorized to perform the requested operation\"\n}\n{code}\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Return HTTP 403 on REST API authorization failures"
   },
   {
      "_id": "12914689",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-11-20 00:32:18",
      "description": "Enforce granular role-based access control for user functions:\n\n|| || Cluster\\\\User || Service\\\\Operator || Service\\\\Administrator || Cluster\\\\Operator || Cluster\\\\Administrator || Administrator ||\n|Create new clusters           |   |   |   |   |   |(+)|\n|Manage users                  |   |   |   |   |   |(+)|\n|Assign permissions/roles      |   |   |   |   |   |(+)|\n\nEntry points affected:\n* GET /api/v1/users/:username\n* GET /api/v1/users/:username/widget_layouts\n* GET /api/v1/users/:username/privileges\n* POST /api/v1/users/:username\n* DELETE /api/v1/users/:username\n* PUT /api/v1/users/:username\n* GET /api/v1/priviliges\n* POST /api/v1/priviliges\n* GET /api/v1/priviliges/:privilege_id\n* DELETE /api/v1/priviliges/:privilege_id\n* PUT /api/v1/priviliges/:privilege_id\n* GET /api/v1/clusters/:cluster_name/priviliges\n* GET /api/v1/clusters/:cluster_name/priviliges/:privilege_id\n* POST /api/v1/clusters/:cluster_name/priviliges\n* DELETE /api/v1/clusters/:cluster_name/priviliges/:privilege_id\n* PUT /api/v1/clusters/:cluster_name/priviliges/:privilege_id\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "rbac",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Enforce granular role-based access control for user functions"
   },
   {
      "_id": "12914157",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-11-18 16:30:09",
      "description": "Create base infrastructure to allow for granular role based access control. \n\nThis entails creating a base class to help with authorization checks.  The base class is to contain a default authorization check implementation but allow derived classes to override the logic to implement more sophisticated checks. \n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Create base infrastructure to allow for granular role based access control"
   },
   {
      "_id": "12913466",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-11-16 21:42:13",
      "description": "Create API entry points for getting authorization information.  \n\nThe following entry points need to be created:\n{noformat}\nGET /api/v1/authorizations\nGET /api/v1/permissions/:PERMISSION_ID/authorizations\nGET /api/v1/users/:USERNAME/authorizations\n{noformat}\n\nThe following entry points need to be updated to supply more information:\n{noformat}\nGET /api/v1/permissions/:PERMISSION_ID\n{noformat}\n\n*Note: The data layer is stubbed out and left for implementation in AMBARI-13865*",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Create API entry points for getting authorization information"
   },
   {
      "_id": "12912592",
      "assignee": "rlevas",
      "components": [],
      "created": "2015-11-12 20:11:18",
      "description": "Add authorizations to permissions so that the definition of a permission (or role) is explicit.\n\nA new table needs to be created to store the _authorizations_:\n{code}\nTABLE roleauthorization (\n  authorization_id VARCHAR(100) NOT NULL,\n  authorization_name VARCHAR(255) NOT NULL,\n  resource_type_id INTEGER NOT NULL,\n  PRIMARY KEY(authorization_id)\n)\n{code}\n\nA new table needs to be added to map _authorizations_ to _permissions_\n{code}\nTABLE permission_roleauthorization (\n  permission_id BIGINT NOT NULL,\n  authorization_id VARCHAR(100) NOT NULL,\n  PRIMARY KEY(permission_id, authorization_id)\n);\n{code}\n\nA new Entity needs to be created to hold the authorization record data ({{org.apache.ambari.server.orm.entities.AuthorizationEntity}}).\n\nThe existing PermissionEntity {{org.apache.ambari.server.orm.entities.PermissionEntity}} needs to be updated to include AuthorizationEntities.\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Add authorizations to permissions so that the definition of a permission (or role) is explicit"
   },
   {
      "_id": "12911874",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2015-11-10 15:08:38",
      "description": "Add (descriptive) label to permission resource and database schema to avoid having to hardcode a descriptive name for a permission. For example:\n\n\n||Permission Name||Permission Label||\n|VIEW.USER|View User|\n|CLUSTER.USER|Cluster User|\n|SERVICE.OPERATOR|Service Operator|\n|SERVICE.ADMINISTRATOR|Service Administrator|\n|CLUSTER.OPERATOR|Cluster Operator|\n|CLUSTER.ADMINISTRATOR|Cluster Administrator|\n\nThis descriptive label can be used in user interfaces so that a descriptive (or friendly) name does not have to be hardcoded. \n\n{noformat:title=API Call Example}\nGET api/v1/permissions/1\n\n200 OK\n{\n  \"href\" : \"http://your.ambari.server/api/v1/permissions/1\",\n  \"PermissionInfo\" : {\n    \"permission_id\" : 1,\n    \"permission_name\" : \"AMBARI.ADMIN\",\n    \"permission_label\" : \"Administrator\",\n    \"resource_name\" : \"AMBARI\"\n  }\n}\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "rbac"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Add (descriptive) label to permission resource and database schema"
   },
   {
      "_id": "12911539",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2015-11-09 14:28:09",
      "description": "Rename existing permissions to prepare for the new role base access control naming conventions:\n\n* View User:  {{VIEW.USE}} --> {{VIEW.USER}}\n* Cluster User:  {{CLUSTER.READ}} --> {{CLUSTER.USER}}\n* Cluster Administrator:  {{CLUSTER.OPERATE}} --> {{CLUSTER.ADMINISTRATOR}}\n* Administrator: {{AMBARI.ADMIN}} --> {{AMBARI.ADMINISTRATOR}}\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "permissions",
         "rbac",
         "roles"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Rename existing permissions to prepare for new roles"
   },
   {
      "_id": "12910002",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-11-03 14:16:04",
      "description": "Currently, we distribute the *hdfs* headless principal to pretty much every single host in the cluster.  \nSince *hdfs* is a super user in HDFS, if any one of the hdfs keytabs are compromised on any host, the user can do anything on HDFS.\nWe need to revisit and see if we can restrict the number of hosts to which we distribute the hdfs headless keytab.\nFor example, we can perform necessary HDFS operations on one of the master hosts available, rather than picking an arbitrary client / slave hosts as we do today.\nAlso, we should look into not only hdfs headless keytabs but all other headless ones like hbase, storm, etc.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "hdfs",
         "keytabs",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Minimize HDFS and other headless keytab distribution (security concerns)"
   },
   {
      "_id": "12907520",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-10-23 18:55:36",
      "description": "When adding components to a Kerberized cluster, the set of hosts to create principals for should be limited to only the relevant set.  This is because if a component for an existing service is added to an existing host, principals and keytab files for the existing components will get unnecessarily updated. \n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "When adding components to a Kerberized cluster, the set of hosts to create principals for should be limited to only the relevant set"
   },
   {
      "_id": "12907518",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-10-23 18:47:24",
      "description": "org.apache.ambari.server.actionmanager.ActionScheduler#filterParallelPerHostStages should not filter out stages that contain server-side actions (to be executed on the Ambari server host). This is because tasks in these stages are typically required to complete before other stages on other hosts are executed. \n\nFor example while enabling Kerberos for an added service, principals and keytab files need to be created before the stage to distribute the key tab files. The principal and keytab file creation happens on the Ambari server (as server-side actions) and the distribution tasks happen on the relevant hosts. If the server-side stages are filtered out (in the event multiple stages are pending for the Ambari server host), then one or more might be skipped and the distribution task is queued.  In this scenario, the distribution stage will fail since the required keytab files will not have been created. \n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "actions",
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "ActionScheduler#filterParallelPerHostStages should not filter out stages with server-side actions"
   },
   {
      "_id": "12905052",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-10-15 00:20:07",
      "description": "When upgrading from Ambari 1.7 to 2.1.x, where the source cluster has been Kerberized, keytab files fail to distribute to some hosts.  \n\n*Steps to reproduce*\n# Create cluster with Ambari 1.7.0 (multiple nodes, required)\n# Enable Kerberos (manually)\n# Upgrade to Ambari 2.1.2\n# Enable Kerberos (automated)\n# Not all hosts will receive keytab files\n\n*Cause*\nThis is due to the way Ambari keeps track of which components (on each host) are properly Kerberized.  So if Kerberos was enabled before the upgrade to 2.x, at some point the agents will report back to Ambari that its components are secured with Kerberos.  Ambari will then use this data to determine which hosts need to be processed when enabling Kerberos. If some of the hosts have reported back before the determination of which hosts need to be process, those hosts will most-likely be skipped and thus, the new keytab files will not be distributed to them.\n\n*Solution*\nThe solution is to remove outdated code previously used to determine how to handle scenarios where new services are added to a Kerberized cluster.  This code compared the existing services' security state with some desired security state.  If they matched, then no work needed to be done.  The state in particular is {{SECURED_KERBEROS}} and can be seen in the {{security_state}} column of the {{hostcomponentstate}} table.  \n\nThe code in question is outdated since new services being added to a Kerberized cluster no longer  requires the invocation of the {{KerberosHelper.toggleKerberos}} method.  The current implementing invokes more granular code to  configure the relevant service(s) and generate the Kerberos identities in a more granular fashion during state changes rather then after the fact. \n ",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "upgrade"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari 1.7 to 2.1.x upgrade with existing Kerberos, keytab files fail to be distributed to some hosts"
   },
   {
      "_id": "12903233",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-10-08 04:13:43",
      "description": "The security-related HTTP headers should be set separately for the Ambari Views then for the Ambari server UI. This is because they have different requirements.  For example the Ambari server UI should not be allowed to execute in an iframe (by default) where Ambari View must be able to execute in an iframe invoked from the same origin.\n\nThe relevant headers are:\n* Strict-Transport-Security\n* X-Frame-Options\n* X-XSS-Protection\n\nThese headers should be configurable via the ambari.properties such that they may be turned on or off - and set to some custom value.\n\nThe default value for this headers should be as follows:\n* Strict-Transport-Security: max-age=31536000\n* X-Frame-Options: SAMEORIGIN\n* X-XSS-Protection: 1; mode=block\n\nStrict-Transport-Security should only be turned on if SSL is enabled.\n\nThe relevant Ambari properties should be:\n* Strict-Transport-Security: views.http.strict-transport-security\n* X-Frame-Options: views.http.x-frame-options\n* X-XSS-Protection: views.http.x-xss-protection\n\nBy setting any of these to be empty, the header is to be turned off (or not set).\n\nFor example:\n{code:title=Sets Strict-Transport-Security to a custom value}\nviews.http.strict-transport-security=max-age=31536000; includeSubDomains\n{code}\n\n{code:title=Turns Strict-Transport-Security off}\nviews.http.strict-transport-security=\n{code}\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Security-related HTTP headers should be set separately for Ambari Views then for Ambari server UI"
   },
   {
      "_id": "12901986",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-10-01 20:32:25",
      "description": "Enhance the Kerberos backend to allow for the retention of KDC administrative credentials.  Once securely stored, users may opt to remove the stored credentials.  \n\nSee AMBARI-13214 for information on the relevant API calls. \n\nThe alias name for the KDC administrator credential should be *kdc.admin.credential*\n\nFor example:\n\n*Create Credential Resource*\n{code}\nPOST /api/v1/clusters/{CLUSTER_NAME}/credentials/kdc.admin.credential\n{\n  \"Credential\" : {\n    \"principal\" : \"admin/admin@EXAMPLE.COM\",\n    \"key\" : \"h4d00p&!\",\n    \"type\" : \"persisted\"\n  }\n}\n{code}\n\n*Update Credential Resource*\n{code}\nPUT /api/v1/clusters/{CLUSTER_NAME}/credentials/kdc.admin.credential\n{\n  \"Credential\" : {\n    \"key\" : \"newpassword\",\n    \"type\" : \"temporary\"\n  }\n}\n{code}\n\n*Get Credential Resource*\n{code}\nGET /api/v1/clusters/{CLUSTER_NAME}/credentials/kdc.admin.credential\n{code}\n\n*Delete Credential Resource*\n{code}\nDELETE /api/v1/clusters/{CLUSTER_NAME}/credentials/kdc.admin.credential\n{code}\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: Retain KDC admin credentials"
   },
   {
      "_id": "12896371",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2015-09-25 10:31:33",
      "description": "Because multiple KDCs may exist for an installation (failover, high availability, etc...), Ambari should allow a user to specify multiple KDC hosts to be set while enabling Kerberos and updating the Kerberos service's configuration.\n\nThis should be done by allowing {{kerberos-env/kdc_host}} to accept a (comma-)delimited list of hosts and then parsing that list properly when building the krb5.conf file where each {{kdc_host}} item generates an entry in the relevant realm block.  For example:\n\n{noformat:title=kerberos-env}\n{\n  ...\n \"kdc_hosts\" : \"kdc1.example.com, kdc2.example.com\"\n  ...\n}\n{noformat}\n\n{noformat:title=krb5.conf}\n[realms]\n  EXAMPLE.COM = {\n    ...\n    kdc = kdc1.example.com\n    kdc = kdc2.example.com\n    ...\n  }\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
         "name": "Minor",
         "id": "4"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: Allow multiple KDC hosts to be set while enabling Kerberos"
   },
   {
      "_id": "12896073",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2015-09-24 10:56:15",
      "description": "After editing the kerberos-env configuration using Ambari's Kerberos service configuration page and saving the new configuration, the {{kdc_type}} property is lost and not saved with the new configuration.\n\n*By loosing this value, any future Kerberos-related operations will fail with errors since the mandatory kerberos-env/kdc_type property will be missing.*\n\n{code:title=kerberos-env before update}\n{\n  \"kdc_type\": \"mit-kdc\",\n  \"password_min_uppercase_letters\": \"1\",\n  \"password_min_whitespace\": \"0\",\n  \"password_min_punctuation\": \"1\",\n  \"password_min_digits\": \"1\",\n  \"encryption_types\": \"aes des3-cbc-sha1 rc4 des-cbc-md5\",\n  \"kdc_create_attributes\": \"\",\n  \"admin_server_host\": \"host1\",\n  \"password_min_lowercase_letters\": \"1\",\n  \"container_dn\": \"\",\n  \"password_length\": \"20\",\n  \"case_insensitive_username_rules\": \"false\",\n  \"manage_identities\": \"true\",\n  \"service_check_principal_name\": \"${cluster_name}-${short_date}\",\n  \"kdc_host\": \"host1\",\n  \"ad_create_attributes_template\": \"\\n{\\n  \\\"objectClass\\\": [\\\"top\\\", \\\"person\\\", \\\"organizationalPerson\\\", \\\"user\\\"],\\n  \\\"cn\\\": \\\"$principal_name\\\",\\n  #if( $is_service )\\n  \\\"servicePrincipalName\\\": \\\"$principal_name\\\",\\n  #end\\n  \\\"userPrincipalName\\\": \\\"$normalized_principal\\\",\\n  \\\"unicodePwd\\\": \\\"$password\\\",\\n  \\\"accountExpires\\\": \\\"0\\\",\\n  \\\"userAccountControl\\\": \\\"66048\\\"\\n}\",\n  \"install_packages\": \"true\",\n  \"realm\": \"EXAMPLE.COM\",\n  \"ldap_url\": \"\",\n  \"executable_search_paths\": \"/usr/bin, /usr/kerberos/bin, /usr/sbin, /usr/lib/mit/bin, /usr/lib/mit/sbin\"\n}\n{code}\n\n{code:title=kerberos-env after update}\n{\n  \"password_min_uppercase_letters\": \"1\",\n  \"password_min_whitespace\": \"0\",\n  \"password_min_punctuation\": \"1\",\n  \"password_min_digits\": \"1\",\n  \"encryption_types\": \"aes des3-cbc-sha1 rc4 des-cbc-md5\",\n  \"kdc_create_attributes\": \"\",\n  \"admin_server_host\": \"hist1:88\",\n  \"password_min_lowercase_letters\": \"1\",\n  \"container_dn\": \"\",\n  \"password_length\": \"20\",\n  \"case_insensitive_username_rules\": \"false\",\n  \"manage_identities\": \"true\",\n  \"service_check_principal_name\": \"${cluster_name}-${short_date}\",\n  \"kdc_host\": \"host1:88\",\n  \"ad_create_attributes_template\": \"\\n{\\n  \\\"objectClass\\\": [\\\"top\\\", \\\"person\\\", \\\"organizationalPerson\\\", \\\"user\\\"],\\n  \\\"cn\\\": \\\"$principal_name\\\",\\n  #if( $is_service )\\n  \\\"servicePrincipalName\\\": \\\"$principal_name\\\",\\n  #end\\n  \\\"userPrincipalName\\\": \\\"$normalized_principal\\\",\\n  \\\"unicodePwd\\\": \\\"$password\\\",\\n  \\\"accountExpires\\\": \\\"0\\\",\\n  \\\"userAccountControl\\\": \\\"66048\\\"\\n}\",\n  \"install_packages\": \"true\",\n  \"realm\": \"EXAMPLE.COM\",\n  \"ldap_url\": \"\",\n  \"executable_search_paths\": \"/usr/bin, /usr/kerberos/bin, /usr/sbin, /usr/lib/mit/bin, /usr/lib/mit/sbin\"\n}\n{code}\n\n{code:title=Javascript Error}\nUncaught TypeError: Cannot read property 'get' of undefined\nApp.MainServiceInfoConfigsController.Em.Controller.extend.prepareConfigObjects @ app.js:22525\nApp.MainServiceInfoConfigsController.Em.Controller.extend.parseConfigData @ app.js:22490\nApp.ConfigsLoader.Em.Mixin.create.loadCurrentVersionsSuccess @ app.js:61506\nEm.Object.extend.send.opt.success @ app.js:154010\nf.Callbacks.o @ vendor.js:125\nf.Callbacks.p.fireWith @ vendor.js:125\nw @ vendor.js:127\nf.support.ajax.f.ajaxTransport.c.send.d @ vendor.js:127\napp.js:55160 App.componentConfigMapper execution time: 1.048ms\n{code}\n\n*Steps to reproduce*\n# Create cluster (Zookeeper-only is fine)\n# Enable Kerberos (any KDC, MIT KDC is fine)\n# Browse to Kerberos service configuration page\n# Change a value (maybe add or remove the port for the KDC server value)\n# Save the configuration\n# After view refreshes, the waiting icon appears and does not go away\n\n*Workaround*\nManually add the {{kerberos-env/kdc_type}} property back to the current kerberos-env configuration.  The value must be either \"mit-kdc\" or \"active-directory\" and must be the correct one for the configuration.  Once this is done, Ambari should be restarted so that any cached configuration data is refreshed. \n\nThis can also be fixed using {{/var/lib/ambari-server/resources/scripts/configs.sh}}.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "regression"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "kdc_type lost when updating kerberos-env via Kerberos service configuration page"
   },
   {
      "_id": "12895901",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-09-23 20:45:43",
      "description": "Storage of the credentials is to be done using the existing _secure_ credentials provider API which already exits within Ambari.  See {{org.apache.ambari.server.security.encryption.CredentialStoreService}} and {{org.apache.ambari.server.security.encryption.CredentialStoreServiceImpl}}.\n\nCredential may be stored in either Ambari's persistent or temporary secure storage facilities. \n\n*Test capabilities*\n* Request \n{noformat}GET api/v1/clusters/{CLUSTER_NAME}{noformat}\n* Responses\n{code:title=200 OK}\n{\n  ...\n  \"credential_store_properties\" : {\n    \"storage.persistent\" : \"true\",\n    \"storage.temporary\" : \"true\"\n  },\n  ...\n}\n{code}\n\n*Setting the credentials*\n* Request \n{noformat}POST /api/v1/clusters/{CLUSTER_NAME}/credentials/{ALIAS}{noformat}\n{code:title=payload}\n{\n  \"Credential\" : {\n    \"principal\" : \"USERNAME\",\n    \"key\" : \"SECRET\",\n    \"type\" : \"persisted\"\n  }\n}\n{code}\nWhere:\n** principal:  the principal (or username) part of the credential to store\n** key: the secret key part of the credential to store\n** type:  declares the storage facility type: persisted or temporary\n* Responses\n{code:title=200 OK}\n<empty>\n{code}\n{code:title=400 Bad Request}\n{\n  \"status\": 400,\n  \"message\": \"Cannot persist credential in Ambari's secure credential store since secure storage has not yet be configured.  Use ambari-server setup-security to enable this feature.\"\n}\n{code}\n{code:title=403 Forbidden}\n{\n  \"status\": 403,\n  \"message\": \"You do not have permissions to access this resource.\"\n}\n{code}\n\n*Updating the credentials*\n* Request\n{noformat}PUT /api/v1/clusters/{CLUSTER_NAME}/credentials/{ALIAS}{noformat}\n{code:title=payload}\n{\n  \"Credential\" : {\n    \"principal\" : \"USERNAME\",\n    \"key\" : \"SECRET1\",\n    \"type\" : \"persisted\"\n  }\n}\n{code}\nWhere:\n** principal:  the principal (or username) part of the credential to store\n** key: the secret key part of the credential to store\n** type:  declares the storage facility type: persisted or temporary\n* Responses\n{code:title=200 OK}\n<empty>\n{code}\n{code:title=400 Bad Request}\n{\n  \"status\": 400,\n  \"message\": \"Cannot persist credential in Ambari's secure credential store since secure storage has not yet be configured.  Use ambari-server setup-security to enable this feature.\"\n}\n{code}\n{code:title=403 Forbidden}\n{\n  \"status\": 403,\n  \"message\": \"You do not have permissions to access this resource.\"\n}\n{code}\n\n*Removing the credentials*\n* Request\n{noformat}DELETE /api/v1/clusters/{CLUSTER_NAME}/credentials/{ALIAS}{noformat}\n* Responses\n{code:title=200 OK}\n<empty>\n{code}\n{code:title=404 Not Found}\n{\n  \"status\": 404,\n  \"message\": \"Not Found\"\n}\n{code}\n{code:title=403 Forbidden}\n{\n  \"status\": 403,\n  \"message\": \"You do not have permissions to access this resource.\"\n}\n{code}\n\n*Listing credentials*\n* Request\n{noformat}GET /api/v1/clusters/{CLUSTER_NAME}/credentials{noformat}\n* Responses \n{code:title=200 OK}\n{\n  \"href\" : \"http://host:8080/api/v1/clusters/c1/credentials\",\n  \"items\" : [\n    {\n      \"href\" : \"http://host:8080/api/v1/clusters/c1/credentials/kdc.admin.credentials\",\n      \"Credential\" : {\n        \"alias\" : \"kdc.admin.credentials\",\n        \"cluster_name\" : \"c1\"\n      }\n    },\n    {\n      \"href\" : \"http://host:8080/api/v1/clusters/c1/credentials/service.admin.credentials\",\n      \"Credential\" : {\n        \"alias\" : \"service.admin.credentials\",\n        \"cluster_name\" : \"c1\"\n      }\n    }\n  ]\n}\n{code}\n{code:title=404 Not Found}\n{\n  \"status\": 404,\n  \"message\": \"Not Found\"\n}\n{code}\n{code:title=403 Forbidden}\n{\n  \"status\": 403,\n  \"message\": \"You do not have permissions to access this resource.\"\n}\n{code}\n\n*Retrieving credentials*\n* Request\n{noformat}GET /api/v1/clusters/{CLUSTER_NAME}/credentials/{ALIAS}{noformat}\n* Responses \n{code:title=200 OK}\n{\n  \"href\" : \"http://host:8080/api/v1/clusters/c1/credentials/kdc.admin.credentials\",\n  \"Credential\" : {\n    \"alias\" : \"kdc.admin.credentials\",\n    \"cluster_name\" : \"c1\",\n    \"type\" : \"persisted\"\n  }\n}\n{code}\n{code:title=404 Not Found}\n{\n  \"status\": 404,\n  \"message\": \"Not Found\"\n}\n{code}\n{code:title=403 Forbidden}\n{\n  \"status\": 403,\n  \"message\": \"You do not have permissions to access this resource.\"\n}\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Create a credentials resource used to securely set, update, and remove credentials used by Ambari"
   },
   {
      "_id": "12863095",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2015-09-10 15:46:40",
      "description": "Allow user to specify additional realms for auth-to-local rules. This will add _default_ rules for the specified realm(s) to the generated auth-to-local rule sets. For example:\n\n{noformat}\nRULE:[1:$1@$0](.*@USER_REALM.COM)s/@.*//\n{noformat}\n\nThe value should be a (comma) delimited list of realm names set in set of global properties in the Kerberos Descriptor.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos-wizard"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: Allow user to specify additional realms for auth-to-local rules"
   },
   {
      "_id": "12856172",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-08-14 14:23:35",
      "description": "*STR*\nInstall cluster via blueprints\nEnable Kerberos security\nAdd host via blueprints\n\n*Result*\nAdding hosts freeze forever\nIn ambari-server.log:\n{code}\nThe KDC administrator credentials must be set in session by updating the relevant Cluster resource.This may be done by issuing a PUT to the api/v1/clusters/(cluster name) API entry point with the following payload:\n{\n  \"session_attributes\" : {\n    \"kerberos_admin\" : {\"principal\" : \"(PRINCIPAL)\", \"password\" : \"(PASSWORD)\"}\n  }\n{code}\n\n*Cause*\nThis is caused because the KDC administrative credentials are not available when needed during the add host process.  If set in the HTTP session, the credentials are not accessible since the Kerberos logic is executed outside the scope of that HTTP session.  \n\n*Solution*\nStore the KDC credentials to a _more secure_ global credential store that is accessible no matter what the context is.  This storage facility is in-memory and has a retention period of 90 minutes.  This solution refactors the current CredentialStoreService and MasterKeyService classes to allow for file-based and in-memory implementations. It also paves the way for future changes to allow for the KDC administrative credentials to be persisted indefinitely.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "blueprints",
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Adding host via blueprint fails on secure cluster"
   },
   {
      "_id": "12855577",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-08-12 15:12:46",
      "description": "When enabling Kerberos, click Test KDC Connection, things succeed but there is an error printed to ambari-server log. This is happening when the KDC listens only on UDP and the TCP check fails.\n\n{code}\n06 Aug 2015 21:20:16,179 ERROR [qtp-client-29] KdcServerConnectionVerification:133 - Unable to connect to Kerberos Server\n06 Aug 2015 21:20:26,111 ERROR [qtp-client-25] KdcServerConnectionVerification:133 - Unable to connect to Kerberos Server\n{code}\n\n*Solution*\nFix logging to be more explicit to avoid confusion\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: Test KDC Connection succeeds but prints ERROR to ambari server log"
   },
   {
      "_id": "12851489",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-08-04 20:06:14",
      "description": "When executing the Kerberos service check, the following error occurs:\n{code}\nstderr:   /var/lib/ambari-agent/data/errors-24.txt\n\nTraceback (most recent call last):\n  File \"/var/lib/ambari-agent/cache/common-services/KERBEROS/1.10.3-10/package/scripts/service_check.py\", line 81, in <module>\n    KerberosServiceCheck().execute()\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/script/script.py\", line 218, in execute\n    method(env)\n  File \"/var/lib/ambari-agent/cache/common-services/KERBEROS/1.10.3-10/package/scripts/service_check.py\", line 64, in service_check\n    user=params.smoke_user\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/base.py\", line 157, in __init__\n    self.env.run()\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/environment.py\", line 152, in run\n    self.run_action(resource, action)\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/environment.py\", line 118, in run_action\n    provider_action()\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/providers/system.py\", line 258, in action_run\n    tries=self.resource.tries, try_sleep=self.resource.try_sleep)\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/shell.py\", line 70, in inner\n    result = function(command, **kwargs)\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/shell.py\", line 92, in checked_call\n    tries=tries, try_sleep=try_sleep)\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/shell.py\", line 140, in _call_wrapper\n    result = _call(command, **kwargs_copy)\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/shell.py\", line 291, in _call\n    raise Fail(err_msg)\nresource_management.core.exceptions.Fail: Execution of '/usr/bin/kinit -c /var/lib/ambari-agent/data/tmp/kerberos_service_check_cc_dd529fe1e15538ddfe9ce0347604d64c -kt /etc/security/keytabs/kerberos.service_check.080315.keytab MyCluster-080315@EXAMPLE.COM' returned 1. kinit(v5): Credentials cache permissions incorrect when initializing cache /var/lib/ambari-agent/data/tmp/kerberos_service_check_cc_dd529fe1e15538ddfe9ce0347604d64c\n\nstdout:   /var/lib/ambari-agent/data/output-24.txt\n\nPerforming kinit using MyCluster-080315@EXAMPLE.COM\n2015-08-03 19:11:57,085 - Execute['/usr/bin/kinit -c /var/lib/ambari-agent/data/tmp/kerberos_service_check_cc_dd529fe1e15538ddfe9ce0347604d64c -kt /etc/security/keytabs/kerberos.service_check.080315.keytab MyCluster-080315@EXAMPLE.COM'] {'user': 'jambari-qa'}\n2015-08-03 19:11:57,179 - File['/var/lib/ambari-agent/data/tmp/kerberos_service_check_cc_dd529fe1e15538ddfe9ce0347604d64c'] {'action': ['delete']}\n{code}\n\nThis error happens only on SLES, however the cause exists on all platforms.  The other platforms silently ignore the condition; which, however, does not have any bearing on the results of the _kinit_ test. \n\n*Cause*\nThe \"Credentials cache permissions incorrect when initializing cache\" issue is caused by the inability to write the Kerberos ticket cache file to the specified location. In the case it is /var/lib/ambari-agent/data/tmp/kerberos_service_check_cc_dd529fe1e15538ddfe9ce0347604d64c.  The reason for the write failure is that /var/lib/ambari-agent/data/tmp is not writable by the user executing the _kinit_ call - which is the Ambari smoke test user (typically ambari-qa).  The directory's permissions are\n{noformat}\ndrwxr-xr-x. 4 root root 4096 Aug  3 22:20 /var/lib/ambari-agent/data/tmp/\n{noformat}\n\n*Solution*\nIn order for the ambari smoke test user to be able to write to the relevant directory (/var/lib/ambari-agent/data/tmp), the permissions must be set at least as follows\n{noformat}\ndrwxrwxr-x. 4 root hadoop 4096 Aug  3 22:20 /var/lib/ambari-agent/data/tmp/\n{noformat}\nHowever, at the time this directory is created, it is not known what the name of the _hadoop_ group is, so the next best solution is to set the permissions as \n{noformat}\ndrwxrwxrwx. 4 root root 4096 Aug  3 22:20 /var/lib/ambari-agent/data/tmp/\n{noformat}\n\nIf the ambari-agent is installed manually via the relevant package manager, the directory is created with the open permissions (777,  drwxrwxrwx) via the packages install_helper.sh post install script.  However if Ambari installs the agent via SSH, the directory is created with the more restrictive permissions (755, drwxr-xr-x) via the agent bootstrap.py script. \n\nTo make these consistent, the following needs to be changed\n{code:title=bootstrap.py:650}\n   command = \"sudo mkdir -p {0} ; sudo chown -R {1} {0} ; sudo chmod 755 {3} ; sudo chmod 755 {2} ; sudo chmod 755 {0}\".format(\n      self.TEMP_FOLDER, quote_bash_args(params.user), DEFAULT_AGENT_DATA_FOLDER, DEFAULT_AGENT_LIB_FOLDER)\n{code}\nto\n{code:title=bootstrap.py (change)}\n   command = \"sudo mkdir -p {0} ; sudo chown -R {1} {0} ; sudo chmod 755 {3} ; sudo chmod 755 {2} ; sudo chmod 777 {0}\".format(\n      self.TEMP_FOLDER, quote_bash_args(params.user), DEFAULT_AGENT_DATA_FOLDER, DEFAULT_AGENT_LIB_FOLDER)\n{code}\n\n*Note:* self.TEMP_FOLDER contains the path to the Ambari agent temp folder (typically, /var/lib/ambari-agent/data/tmp).\n\n\n\n\n\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "directory-permissions",
         "install"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: fails check during enable Kerb with SLES"
   },
   {
      "_id": "12850567",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-07-31 10:23:19",
      "description": "When regenerating Kerberos principals, ensure Kerberos Descriptor changes are applied to services.  \n\nIt is possible for changes to be made to the Kerberos Descriptor.  One way to propagate these changes into the service configurations is to process the Kerberos Descriptor and update service configurations while performing tasks for the \"Regenerate Keytabs\" operation. \n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "When regenerating Kerberos principals, ensure Kerberos Descriptor changes are applied to services"
   },
   {
      "_id": "12849361",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2015-07-27 16:13:47",
      "description": "During security enabling there is present required property \"kdc_create_attributes\" on Configure Kerberos page. But this property should not be required (or should not be empty be default).",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos-wizard"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "\"kdc_create_attributes\" field should not be required"
   },
   {
      "_id": "12848876",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2015-07-24 12:25:28",
      "description": "Some Kerberos service properties should be final and not be editable outside the wizard.\n\n*kerberos-env*\n* Final and not be editable\n** kdc_type\n** manage_identities\n** install_packages\n** case_insensitive_username_rules\n** realm\n \n* Editable (changing them will require Keytabs to be regenerated and services to be restarted)\n** ldap_url\n** container_dn\n** encryption_types\n** kdc_host\n** admin_server_host\n\n* Editable  (changes will only be seen when [re]generating Kerberos identities and keytab files)\n** password_length\n** password_min_lowercase_letters\n** password_min_uppercase_letters\n** password_min_digits\n** password_min_punctuation\n** password_min_whitespace\n** create_attributes_template\n\n* Editable (changes will only be seen when certain operations are invoked)\n** executable_search_paths\n** service_check_principal_name\n\n*krb5-conf*\n* Final and not be editable\n** domains\n** manage_krb5_conf\n** conf_dir\n** content",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos-wizard"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos configuration properties should be final and uneditable outside the Kerberization wizard."
   },
   {
      "_id": "12846893",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-07-22 13:30:17",
      "description": "Allow for attributes to be set (or unset) for identities created in an MIT (or similar) KDC. \n\nA user should be able to specify a list of attributes to be set or unset while creating identities using the MIT kadmin utility. For example:\n{noformat}\n-requires_preauth max_renew_life=7d\n{noformat}\n\n*Solution*\nAdd a property in {{kerberos-env}} or reuse {{kerberos-env/create_attributes_template}} to store the user-specified attributes.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kdc",
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: Allow setting/clearing attributes for MIT KDC identities"
   },
   {
      "_id": "12845909",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-07-17 15:33:49",
      "description": "When querying for information about services installed in a Kerberized cluster via the REST API, the ServiceResourceProvider always attempts to contact the KDC (or Active Directory) if the KERBEROS service is selected within the query. \n\nThis can be seen about every 15 seconds,  when the UI queries for the state of the services in a Kerberized cluster using the following query:\n{noformat}\nGET  /api/v1/clusters/{cluster_name}/services?fields=ServiceInfo/state,ServiceInfo/maintenance_state&minimal_response=true\n{noformat}\n\nThe result from this query does not contain the KDC connectivity attributes (which is expected), yet the detail are obtained.  \n\nThis issue causes excess overhead in Ambari as well as on the relevant KDC or Active Directory. Also the kdamin.log fills up with messages like:\n{noformat:title=/var/log/kadmind.log}\nJun 29 14:31:42 some-host-1 kadmind[2383](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/some-host-1.c.pramod-thangali.internal@EXAMPLE.COM, addr=10.240.70.128, vers=3, flavor=6\nJun 29 14:31:42 some-host-1 kadmind[2383](Notice): Request: kadm5_get_principal, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/some-host-1.c.pramod-thangali.internal@EXAMPLE.COM, addr=10.240.70.128\nJun 29 14:31:42 some-host-1 kadmind[2383](info): closing down fd 29\nJun 29 14:32:49 some-host-1 kadmind[2383](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/some-host-1.c.pramod-thangali.internal@EXAMPLE.COM, addr=10.240.70.128, vers=3, flavor=6\nJun 29 14:32:49 some-host-1 kadmind[2383](Notice): Request: kadm5_get_principal, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/some-host-1.c.pramod-thangali.internal@EXAMPLE.COM, addr=10.240.70.128\nJun 29 14:32:49 some-host-1 kadmind[2383](info): closing down fd 29\nJun 29 14:34:35 some-host-1 kadmind[2383](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/some-host-1.c.pramod-thangali.internal@EXAMPLE.COM, addr=10.240.70.128, vers=3, flavor=6\nJun 29 14:34:35 some-host-1 kadmind[2383](Notice): Request: kadm5_get_principal, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/some-host-1.c.pramod-thangali.internal@EXAMPLE.COM, addr=10.240.70.128\nJun 29 14:34:35 some-host-1 kadmind[2383](info): closing down fd 29\nJun 29 14:35:28 some-host-1 kadmind[2383](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/some-host-1.c.pramod-thangali.internal@EXAMPLE.COM, addr=10.240.70.128, vers=3, flavor=6\nJun 29 14:35:28 some-host-1 kadmind[2383](Notice): Request: kadm5_get_principal, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/some-host-1.c.pramod-thangali.internal@EXAMPLE.COM, addr=10.240.70.128\nJun 29 14:35:28 some-host-1 kadmind[2383](info): closing down fd 29\n{noformat}\n\n*Solution*\nOnly query for the KDC attributes when explicitly or implicitly queried. This can be done by conditionally setting the relevant properties near {{org/apache/ambari/server/controller/internal/ServiceResourceProvider.java:1394}} by inspecting the request for relevant identifiers using something like the following:\n{code}\nrequestedIds.contains(propertyId) || isPropertyCategoryRequested(propertyId, requestedIds);\n{code}\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "rest_api"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: ServiceResourceProvider queries for KDC connectivity when not needed"
   },
   {
      "_id": "12843873",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-07-09 14:31:03",
      "description": "STR:\n1. Install old version of ambari (2.0.1)\n2. Enable security\n3. Do Ambari only upgrade to ambari2.1.0\n4. Add some component - HiveServer2 or Ooozie server\n5. Try to start added component\n\nActual result:\nStart have been failed. \n\n{code}\nTraceback (most recent call last):\n  File \"/var/lib/ambari-agent/cache/common-\n\nservices/HIVE/0.12.0.2.0/package/scripts/hive_server.py\", line 182, in <module>\n    HiveServer().execute()\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/script/script.py\", \n\nline 216, in execute\n    method(env)\n  File \"/var/lib/ambari-agent/cache/common-\n\nservices/HIVE/0.12.0.2.0/package/scripts/hive_server.py\", line 83, in start\n    self.configure(env) # FOR SECURITY\n  File \"/var/lib/ambari-agent/cache/common-\n\nservices/HIVE/0.12.0.2.0/package/scripts/hive_server.py\", line 54, in configure\n    hive(name='hiveserver2')\n  File \"/usr/lib/python2.6/site-packages/ambari_commons/os_family_impl.py\", line 89, in \n\nthunk\n    return fn(*args, **kwargs)\n  File \"/var/lib/ambari-agent/cache/common-\n\nservices/HIVE/0.12.0.2.0/package/scripts/hive.py\", line 127, in hive\n    mode=params.webhcat_hdfs_user_mode\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/base.py\", line 157, in \n\n__init__\n    self.env.run()\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/environment.py\", line \n\n152, in run\n    self.run_action(resource, action)\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/environment.py\", line \n\n118, in run_action\n    provider_action()\n  File \"/usr/lib/python2.6/site-\n\npackages/resource_management/libraries/providers/hdfs_resource.py\", line 390, in \n\naction_create_on_execute\n    self.action_delayed(\"create\")\n  File \"/usr/lib/python2.6/site-\n\npackages/resource_management/libraries/providers/hdfs_resource.py\", line 387, in \n\naction_delayed\n    self.get_hdfs_resource_executor().action_delayed(action_name, self)\n  File \"/usr/lib/python2.6/site-\n\npackages/resource_management/libraries/providers/hdfs_resource.py\", line 236, in \n\naction_delayed\n    main_resource.kinit()\n  File \"/usr/lib/python2.6/site-\n\npackages/resource_management/libraries/providers/hdfs_resource.py\", line 416, in kinit\n    user=user\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/base.py\", line 157, in \n\n__init__\n    self.env.run()\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/environment.py\", line \n\n152, in run\n    self.run_action(resource, action)\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/environment.py\", line \n\n118, in run_action\n    provider_action()\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/providers/system.py\", \n\nline 254, in action_run\n    tries=self.resource.tries, try_sleep=self.resource.try_sleep)\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/shell.py\", line 70, in \n\ninner\n    result = function(command, **kwargs)\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/shell.py\", line 92, in \n\nchecked_call\n    tries=tries, try_sleep=try_sleep)\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/shell.py\", line 140, in \n\n_call_wrapper\n    result = _call(command, **kwargs_copy)\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/shell.py\", line 291, in \n\n_call\n    raise Fail(err_msg)\nresource_management.core.exceptions.Fail: Execution of '/usr/bin/kinit -kt \n\n/etc/security/keytabs/hdfs.headless.keytab hdfs@EXAMPLE.COM' returned 1. kinit: Keytab \n\ncontains no suitable keys for hdfs@EXAMPLE.COM while getting initial credentials\n{code}\n\n\nExpected results:\nCan start all added components.\n\n*Cause*\nThe Kerberos Descriptor structure changed between Ambari 2.0 and Ambari 2.1.  This change moved the \"hdfs\" Kerberos identity descriptor from the _global_ scope to under the HDFS service. After upgrading from Ambari 2.0 to Ambari 2.1  an additional \"hdfs\" Kerberos identity descriptor was added with the new principal name pattern - $\\{hadoop-env/hdfs_user\\}-$\\{cluster_name\\}@$\\{realm\\}.  This occurred because the stored Kerberos Descriptor contained the _old_ structure, and when Ambari generated a composite Kerberos Descriptor made up of the Kerberos Descriptor compiled from the relevant stack definition with stored changes applied, that additional \"hdfs\" Kerberos identity descriptor was added.  Because if this, the Kerberos logic became _confused_ and overwrote the existing hdfs keytab file with one that contained the new principal name.\n\n*Solution*\nWhile migrating Ambari 2.0 to Ambari 2.1, fix the stored Kerberos Descriptor structure to match the new version's structure.\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "upgrade"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "kinit of hdfs Kerberos identity fails when starting added service(s) after upgrade to Ambari 2.1.0"
   },
   {
      "_id": "12843592",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-07-08 18:10:46",
      "description": "An LDAP error occurs while updating and removing service principals in clusters with Kerberos enabled using Active Directory.\n\nThe following exception is thrown when removing an account:\n{noformat}\njavax.naming.NamingException: [LDAP: error code 1 - 000020D6: SvcErr: DSID-0310081B, problem 5012 (DIR_ERROR), data 0\n]\nnoformat}\n\nThe following exception is thrown when updating an account's password\n{noformat}\njavax.naming.NamingException: [LDAP: error code 1 - 000020D6: SvcErr: DSID-0310081B, problem 5012 (DIR_ERROR), data 0\n^@]\n{noformat}\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "active_directory",
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: LDAP error updating and removing service principals in AD"
   },
   {
      "_id": "12842349",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-07-02 15:44:10",
      "description": "When *adding* Hive to an existing Kerberized cluster, the {{hive-site/hive.metastore.sasl.enabled}} value is set to {{false}} when it should be {{true}}.  If Hive was installed before enabling Kerberos,  \n{{hive-site/hive.metastore.sasl.enabled}} is set to {{true}} after enabling Kerberos.\n\nIf {{hive-site/hive.metastore.sasl.enabled}} is {{false}} in a Kerberized cluster, the following error can be seen in the hiverserver2.log:\n\n{noformat:title=/var/log/hive/hiveserver2.log}\n2015-07-01 23:35:16,128 ERROR [HiveServer2-Handler-Pool: Thread-37]: server.TThreadPoolServer (TThreadPoolServer.java:run(296)) - Error occurred during processing of message.\njava.lang.RuntimeException: org.apache.thrift.transport.TTransportException: Unsupported mechanism type GSSAPI\n        at org.apache.thrift.transport.TSaslServerTransport$Factory.getTransport(TSaslServerTransport.java:219)\n        at org.apache.thrift.server.TThreadPoolServer$WorkerProcess.run(TThreadPoolServer.java:268)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n        at java.lang.Thread.run(Thread.java:745)\nCaused by: org.apache.thrift.transport.TTransportException: Unsupported mechanism type GSSAPI\n        at org.apache.thrift.transport.TSaslTransport.sendAndThrowMessage(TSaslTransport.java:232)\n        at org.apache.thrift.transport.TSaslServerTransport.handleSaslStartMessage(TSaslServerTransport.java:138)\n        at org.apache.thrift.transport.TSaslTransport.open(TSaslTransport.java:271)\n        at org.apache.thrift.transport.TSaslServerTransport.open(TSaslServerTransport.java:41)\n        at org.apache.thrift.transport.TSaslServerTransport$Factory.getTransport(TSaslServerTransport.java:216)\n        ... 4 more\n{noformat}\n\n*Cause*\nIt appears that the front end is updating the Kerberos Descriptor _artifact_ with _old_ data rather than the data the is specified on the stack's Kerberos Descriptor. This occurs during the transition between the \"Review\" and \"Install, Start, Test\" pages of the \"Add Service Wizard\".\n\n*Solution*\nUse the current Kerberos Descriptor's values as default value for the updated Kerberos Descriptor and update only what the user changes in the relevant fields.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "hive-site/hive.metastore.sasl.enabled value incorrect when adding Hive to a Kerberized Cluster"
   },
   {
      "_id": "12842106",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-07-01 21:00:30",
      "description": "HCat Service Check (part of the Hive Service Check) fails in cluster where Kerberos is enabled:\n\n{noformat}\nTest connectivity to hive server\nWaiting for the Hive server to start...\n2015-07-01 18:39:17,173 - Execute['/usr/bin/kinit -kt /etc/security/keytabs/smokeuser.headless.keytab ambari-qa-tezview@EXAMPLE.COM; '] {'user': 'ambari-qa'}\n2015-07-01 18:39:17,321 - Execute['! beeline -u 'jdbc:hive2://c6502.ambari.apache.org:10000/;transportMode=binary;principal=hive/_HOST@EXAMPLE.COM' -e '' 2>&1| awk '{print}'|grep -i -e 'Connection refused' -e 'Invalid URL''] {'path': ['/bin/', '/usr/bin/', '/usr/lib/hive/bin/', '/usr/sbin/'], 'user': 'ambari-qa', 'timeout': 30}\nSuccessfully connected to c6502.ambari.apache.org on port 10000\nSuccessfully connected to Hive at c6502.ambari.apache.org on port 10000 after 6 seconds\n2015-07-01 18:39:23,313 - File['/var/lib/ambari-agent/data/tmp/hcatSmoke.sh'] {'content': StaticFile('hcatSmoke.sh'), 'mode': 0755}\n2015-07-01 18:39:23,314 - Execute['/usr/bin/kinit -kt /etc/security/keytabs/smokeuser.headless.keytab ambari-qa; env JAVA_HOME=/usr/jdk64/jdk1.8.0_40 /var/lib/ambari-agent/data/tmp/hcatSmoke.sh hcatsmokeida8c06641_date390115 prepare'] {'logoutput': True, 'path': ['/usr/sbin', '/usr/local/bin', '/bin', '/usr/bin', '/usr/sbin:/sbin:/usr/lib/ambari-server/*:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin:/var/lib/ambari-agent:/usr/hdp/current/hive-client/bin:/usr/hdp/current/hadoop-client/bin'], 'tries': 3, 'user': 'ambari-qa', 'try_sleep': 5}\nkinit: Keytab contains no suitable keys for ambari-qa@EXAMPLE.COM while getting initial credentials\nWARNING: Use \"yarn jar\" to launch YARN applications.\n{noformat}\n\nThe issue appears to be the wrong principal name in the {{kinit}} command - note the missing cluster name and realm in the principal name value.\n{noformat}\n/usr/bin/kinit -kt /etc/security/keytabs/smokeuser.headless.keytab ambari-qa\n{noformat}\n\n*Cause*\nThe error is caused by the use of the wrong variable when generating the kinit command at common-services/HIVE/0.12.0.2.0/package/scripts/hcat_service_check.py:44\n{noformat}\n        {kinit_path_local} -kt {smoke_user_keytab} {smokeuser}\n{noformat}\n\n*Solution*\nAt common-services/HIVE/0.12.0.2.0/package/scripts/hcat_service_check.py:44, change {{smokeuser}} to {{smokeuser_principal}}.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "hive",
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "HCat Service Check warns keytab contains no suitable keys when Kerberos is enabled"
   },
   {
      "_id": "12841036",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-06-27 01:15:39",
      "description": "In a cluster where AMS is installed but HDFS is _not_ installed, enabling Kerberos fails due to the inability for the server-side Kerberos logic to replace ${hadoop-env/hdfs_user} when generating the metadata used to create principals and distribute keytab files.\n\nThis condition yields the following principal (when the cluster name is AMSNOHDFS and the realm is EXAMPLE.COM)\n{noformat}\n    $\\{hadoop-env/hdfs_user\\}-AMSNOHDFS@EXAMPLE.COM\n{noformat}\n\nThis is successfully created in the (MIT) KDC. Also, the relative keytab file appears to have been successfully created as well.\n\nHowever, when distributing the keytab file and setting the ownership attributes, the agent-side script fails with \n{code}\nTraceback (most recent call last):\n  File \"/var/lib/ambari-agent/cache/common-services/KERBEROS/1.10.3-10/package/scripts/kerberos_client.py\", line 77, in <module>\n    KerberosClient().execute()\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/script/script.py\", line 216, in execute\n    method(env)\n  File \"/var/lib/ambari-agent/cache/common-services/KERBEROS/1.10.3-10/package/scripts/kerberos_client.py\", line 67, in set_keytab\n    self.write_keytab_file()\n  File \"/var/lib/ambari-agent/cache/common-services/KERBEROS/1.10.3-10/package/scripts/kerberos_common.py\", line 397, in write_keytab_file\n    group=group)\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/base.py\", line 157, in __init__\n    self.env.run()\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/environment.py\", line 152, in run\n    self.run_action(resource, action)\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/environment.py\", line 118, in run_action\n    provider_action()\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/providers/system.py\", line 108, in action_create\n    self.resource.group, mode=self.resource.mode, cd_access=self.resource.cd_access)\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/providers/system.py\", line 44, in _ensure_metadata\n    _user_entity = pwd.getpwnam(user)\nKeyError: 'getpwnam(): name not found: $\\{hadoop-env/hdfs_user\\}'\n{code}\n\n*NOTE: \\ needed to be added to the hadoop-env/hdfs_user placeholder due to formatting issue*\n\n*Solution:* \nRemove the HDFS identity reference in AMS and assume the hdfs keytab file will be on the appropriate host(s) when HDFS is installed\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Enabling Kerberos on cluster with AMS and no HDFS fails"
   },
   {
      "_id": "12840700",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-06-26 00:14:05",
      "description": "Installed HDP 2.2 cluster with only storm, zk, kafka, knox.\n\nWhen enabling Kerberos, the _Configure Principals_ page of the _Kerberos Wizard_  prompts for the HDFS Ambari principal and keytab file although HDFS is not installed in cluster.\n\nThe HDFS Ambari principal and keytab file should also not display once enabled. (under Admin > Kerberos).\n\n*Solution*\n* Move the HDFS identity to the HDFS Kerberos Descriptor (from the top-level descriptor). \n* Change references to \"/hdfs\" to be \"/HDFS/hdfs\"\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: prompts for HDFS ambari principals w/o hdfs in cluster"
   },
   {
      "_id": "12840352",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-06-24 21:54:40",
      "description": "* The storm user principals should be derived using the storm user + cluster name: \n{noformat}\nstorm-${cluster_name}@${realm}\n{noformat}\n\n* The keytab name should be consistent with other headless identities: \n{noformat}\nstorm.headless.keytab\n{noformat}\n\n*Solution*\nUpdate Storm's Kerberos descriptor to fix the relevant identitiy ",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: storm headless princ + keytab seem incorrect"
   },
   {
      "_id": "12840257",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-06-24 17:02:13",
      "description": "Falcon Server Web UI alert fails when Kerberos is enabled.  The error message is \n{noformat}\nagent/data/tmp/web_alert_cc_2144dc375b8556f5a0c2629adedd2a99 -kt {{falcon-startup.properties/*.falcon.http.authentication.kerberos.keytab}} {{falcon-startup.properties/*.falcon.http.authentication.kerberos.principal}} > /dev/null' returned 1. kinit: Client not found in Kerberos database while getting initial credentials)\n{noformat}\n\n*Cause*\nThis issue was introduced when the patch for AMBARI-11656 was applied.  \n\nThe issue is related to this line:\n{code:title=ambari_agent/alerts/base_alert.py:217}\n      replacement_match_regex = r\"{{(%s)}}\" % placeholder_key\n{code}\n\nWhen the relative falcon properties are applied, the generated regular expression becomes \n{noformat}\n{{(falcon-startup.properties/*.falcon.http.authentication.kerberos.keytab)}}\n{noformat}\n\nWhich wants to match on values like:\n* falcon-startup.properties.falcon.http.authentication.kerberos.keytab\n* falcon-startup.properties/.falcon.http.authentication.kerberos.keytab\n* falcon-startup.properties/////////////Rfalcon.http.authentication.kerberos.keytab\n\nNot the one we really want - falcon-startup.properties/*.falcon.http.authentication.kerberos.keytab\n\nEither the {{*}} needs to be escaped or the use of regular expressions needs to be changed.\n\n*Solution*\nRemove the regular expression replacement and use somple string replacement instead. ",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "alerts",
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Falcon Server Web UI alert fails when Kerberos is enabled"
   },
   {
      "_id": "12838805",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2015-06-18 14:05:14",
      "description": "*Steps to reproduce:*\n# Launch Enable Kerberos wizard\n# Proceed to Kerberize Cluster step\n# Call to Kerberize Cluster failed\n# Hit Retry\n\n*Actual Result:*\nRetry doesn't work\nJS error: {{Uncaught TypeError: this.unkerberizeCluster is not a function}}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos-wizard"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Retry of Kerberize Cluster doesn't work"
   },
   {
      "_id": "12838173",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2015-06-16 14:06:33",
      "description": "STR:\n* Install cluster with HDFS, Hive and dependcies.\n* Start Kerberos Wizard\n* Proceed to step 3 *Install and Test Kerberos Client*\n* Go back to step2 *Configure Kerberos*\n* Click on next button\n\nAR: Popup with request error shown\n{noformat}\n500 status code recieved on POST method for API: /api/v1/clusters/c1/hosts\n\nError message: org.apache.ambari.server.controller.spi.SystemException: An internal system exception occurred: ServiceComponent not found, clusterName=c1, serviceName=KERBEROS, serviceComponentName=KERBEROS_CLIENT\n{noformat}\nAfter popup confirmation click on Next button doesn't do anything.\nER: No errors shown, user can proceed to the next step.\n\nWorkaround: Refresh page on step2 and hit Next button.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos-wizard"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos Wizard: Moving between steps 2 and 3 back/forward cause API error."
   },
   {
      "_id": "12837801",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2015-06-15 10:37:08",
      "description": "*Steps to reproduce:*\n1. Install Kerberos on the Cluster\n2. Go to Kerberos Configs\n3. Change any value in the configuration\n4. Click Save and Confirm\n\n*Expect Result:*\nThe KDC Type Value should remain unchanged.\nThe user should be able to make further modifications to the configs after this points.\n\n*Actual Result:*\nThe Kerberos KDC Type Value is changed to the descriptive value and thus is unexpected.  Since this is a required field, but cannot be edited, the user can no longer save any changes after this point",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos-wizard"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Kerkeros Service Configs: KDC Type Value is corrupted"
   },
   {
      "_id": "12837406",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-06-12 13:25:54",
      "description": "Due to the fact that the oozie.authentication.kerberos.name.rules are  auto-generated the following rules should be removed from oozie-site.xml from all the stack configurations:\n\n{panel:title=oozie-site.xml}\nRULE:[2:$1@$0]([jt]t@.*TODO-KERBEROS-DOMAIN)s/.*/TODO-MAPREDUSER/\nRULE:[2:$1@$0]([nd]n@.*TODO-KERBEROS-DOMAIN)s/.*/TODO-HDFSUSER/\nRULE:[2:$1@$0](hm@.*TODO-KERBEROS-DOMAIN)s/.*/TODO-HBASE-USER/\nRULE:[2:$1@$0](rs@.*TODO-KERBEROS-DOMAIN)s/.*/TODO-HBASE-USER/\nDEFAULT\n{panel}\n\nNote: this is an update for AMBARI-11179 to fix older stacks. ",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: Oozie auth rules do not look correct"
   },
   {
      "_id": "12836249",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-06-08 19:23:56",
      "description": "Service configs are not updated with enabling Kerberos unless the service has identities to process. This is an issue in the case a client component requires a configuration change when Kerberos is enabled and the Service has no Kerberos identities. \n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Service configs are not updated with enabling Kerberos unless the service has identities to process"
   },
   {
      "_id": "12836110",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-06-08 10:31:33",
      "description": "Oozie restart from Ambari rewrites oozie/conf/adminusers.txt\n\nTo support role separation for Kerberos, we need an additional line added to the end of this file.\n\nThe new line is:\n{noformat}\noozie-admin\n{noformat}\n\nThe new file should be generated as:\n{code}\n#\n# Licensed to the Apache Software Foundation (ASF) under one\n# or more contributor license agreements.  See the NOTICE file\n# distributed with this work for additional information\n# regarding copyright ownership.  The ASF licenses this file\n# to you under the Apache License, Version 2.0 (the\n# \"License\"); you may not use this file except in compliance\n# with the License.  You may obtain a copy of the License at\n#\n#   http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n#\n\n# Users should be set using following rules:\n#\n#     One user name per line\n#     Empty lines and lines starting with '#' are ignored\n\noozie\noozie-admin\n{code}\n\n*Solution*\n1. Replace\n{code:title=common-services/OOZIE/4.0.0.2.0/package/templates/adminusers.txt.j2}\n{{oozie_user}}\n{code}\nwith \n{code:title=common-services/OOZIE/4.0.0.2.0/package/templates/adminusers.txt.j2}\n{% if oozie_admin_users %}\n{% for oozie_admin_user in oozie_admin_users.split(',') %}\n  {{oozie_admin_user}}\n{% endfor %}\n{% endif %}\n{code}\n\n2. Add new property\n{code:title=common-services/OOZIE/4.0.0.2.0/configuration/oozie-env.xml}\n  <property>\n    <name>oozie_admin_users</name>\n    <value>oozie, oozie-admin</value>\n    <description>Oozie admin users.</description>\n  </property>\n{code}\n\n3. If the admin user list needs to change when enabling Kerberos, oozie-env/oozie_admin_users can be set in Oozie's Kerberos descriptor (kerberos.json).\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Ambari creation of oozie/conf/adminusers.txt breaks oozie role seperation for Kerberos"
   },
   {
      "_id": "12835919",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-06-06 11:40:08",
      "description": "In KNOX-HA cluster, noticed that the \u201chadoop.proxyuser.knox.hosts\" property in /etc/hadoop/conf/core-site.xml\n refers to only one node and knox is running on multiple nodes.\n{code}\n <property>\n      <name>hadoop.proxyuser.knox.hosts</name>\n      <value>host1</value>\n    </property>\n{code}\nThe value for this property should include all the knox hosts\n{code}\n <property>\n      <name>hadoop.proxyuser.knox.hosts</name>\n      <value>host1,host4,etc...</value>\n    </property>\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Invalid property value set in core-site.xml when KNOX HA is enabled"
   },
   {
      "_id": "12835914",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-06-06 10:31:42",
      "description": "1) Rollup all headless principal names up to Ambari Principals tab. Currently looks like Storm and Spark are on second tab, under their section, not under Ambari tab with ambari-qa, hdfs, hbase, etc. Also make sure the UI has user readable labels like the others for consistency (see the screen shot. spark.history.kerberos.principal should be \"Spark user principal\" for example).\n\n2) By default, all of these to be cluster-name scoped by default. {code}-${cluster_name}{code} It does no harm for those that don't care... And for those that care about headless principal names to be unique, this ends up being done by default (and saves the user from having to remember to set it this way).\n\nUltimately when users want to add variables to their principal names they will be doing it across the board - whatever we can do to make it easier for users to do so, would be better.  If we had all principals in one pane they can quickly add all of them and visually validate.\n\n*Solution*\nUpdate the details for all _user_ ({{identities/type = user}}) Kerberos Identity entries in {{kerberos.json}} files to add the following to the principal name\n{code}\n-${cluster_name}\n{code}\n\nFor example:\n{code}\n${hadoop-env/hdfs_user}@${realm}\n{code}\n\nto\n\n{code}\n${hadoop-env/hdfs_user}-${cluster_name}@${realm}\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: adjust ambari headless principals for unique names"
   },
   {
      "_id": "12834810",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-06-02 21:01:58",
      "description": "After enabling Kerberos, the value for property *.falcon.http.authentication.kerberos.name.rules is set to \n{code}\nRULE:[1:$1@$0](ambari-qa@EXAMPLE.COM)s/.*/ambari-qa/\nRULE:[1:$1@$0](hdfs@EXAMPLE.COM)s/.*/hdfs/\nRULE:[1:$1@$0](.*@EXAMPLE.COM)s/@.*//\nRULE:[2:$1@$0](amshbase@EXAMPLE.COM)s/.*/ams/\nRULE:[2:$1@$0](amszk@EXAMPLE.COM)s/.*/ams/\nRULE:[2:$1@$0](dn@EXAMPLE.COM)s/.*/hdfs/\nRULE:[2:$1@$0](falcon@EXAMPLE.COM)s/.*/falcon/\nRULE:[2:$1@$0](hive@EXAMPLE.COM)s/.*/hive/\nRULE:[2:$1@$0](jhs@EXAMPLE.COM)s/.*/mapred/\nRULE:[2:$1@$0](jn@EXAMPLE.COM)s/.*/hdfs/\nRULE:[2:$1@$0](nfs@EXAMPLE.COM)s/.*/hdfs/\nRULE:[2:$1@$0](nm@EXAMPLE.COM)s/.*/yarn/\nRULE:[2:$1@$0](nn@EXAMPLE.COM)s/.*/hdfs/\nRULE:[2:$1@$0](oozie@EXAMPLE.COM)s/.*/oozie/\nRULE:[2:$1@$0](rm@EXAMPLE.COM)s/.*/yarn/\nRULE:[2:$1@$0](yarn@EXAMPLE.COM)s/.*/yarn/\nDEFAULT\n{code}\n\nThis is incorrect. The correct value should be \n{code}\nRULE:[1:$1@$0](ambari-qa@EXAMPLE.COM)s/.*/ambari-qa/ \\\nRULE:[1:$1@$0](hdfs@EXAMPLE.COM)s/.*/hdfs/ \\\nRULE:[1:$1@$0](.*@EXAMPLE.COM)s/@.*// \\\nRULE:[2:$1@$0](amshbase@EXAMPLE.COM)s/.*/ams/ \\\nRULE:[2:$1@$0](amszk@EXAMPLE.COM)s/.*/ams/ \\\nRULE:[2:$1@$0](dn@EXAMPLE.COM)s/.*/hdfs/ \\\nRULE:[2:$1@$0](falcon@EXAMPLE.COM)s/.*/falcon/ \\\nRULE:[2:$1@$0](hive@EXAMPLE.COM)s/.*/hive/ \\\nRULE:[2:$1@$0](jhs@EXAMPLE.COM)s/.*/mapred/ \\\nRULE:[2:$1@$0](jn@EXAMPLE.COM)s/.*/hdfs/ \\\nRULE:[2:$1@$0](nfs@EXAMPLE.COM)s/.*/hdfs/ \\\nRULE:[2:$1@$0](nm@EXAMPLE.COM)s/.*/yarn/ \\\nRULE:[2:$1@$0](nn@EXAMPLE.COM)s/.*/hdfs/ \\\nRULE:[2:$1@$0](oozie@EXAMPLE.COM)s/.*/oozie/ \\\nRULE:[2:$1@$0](rm@EXAMPLE.COM)s/.*/yarn/ \\\nRULE:[2:$1@$0](yarn@EXAMPLE.COM)s/.*/yarn/ \\\nDEFAULT\n{code}\n\nPlease notice the \"\\\" at end of each RULE. This is needed because of the type of configuration file the data is in - a (Java) properties file, where properties values must be a single line or escaped if multi-lined. \n\n*Solution*\nConvert the multi-line auth-to-local rule to meet the requirements of the configuration file type by allowing the _concatenation type_ to be specified in the Kerberos descriptor.  The following concatenation types are allowed:\n* *new lines* - each rule is separated by a new line \n* *new_lines_escaped* - each rule is separated by an escaped new line\n* *spaces* - each rule is separated by a whitespace charater\n\n\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Falcon version command failed on secure runs"
   },
   {
      "_id": "12834323",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-06-01 18:27:10",
      "description": "In many situations with large-scale Active Directory deployments, the krb5.conf is managed outside of Ambari.  This krb5.conf file is configured with all of the DC's in the AD domain, and the outbound requests to the KDC from clients are load balanced across those servers.  In many scenarios the user replication latency causes issues with users not found during the test process.  Due to the fact that we generate a new user every time we test, this can get users to a circular situation in which they can never leave this state because of multi-KDC's in their krb5.conf and delay associated with replication.\n\n1) Expose the option to set the test kerberos client principal name (under Advanced kerberos-env)\n2) Default the value to something unique, but less than 20 characters {code}\n${cluster_name}-${short_date}\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: provide option to set test account name"
   },
   {
      "_id": "12832854",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-05-26 20:25:19",
      "description": "Precondition: On the cluster where this was observed, there were previous attempts to kerberize the cluster.\n\nSTR:\nGo through the Enable Kerberos Wizard.\nThe only non-default option taken was to not manage krb5.conf (presented on the second page of the wizard).\n\nChrome developer tool shows that there was a POST on /api/v1/clusters/woah/artifacts/kerberos_descriptor failing with 409.  \n\n{code}\n{\n\"status\" : 409,\n\"message\" : \"Attempted to create an artifact which already exists,\nartifact_name='kerberos_descriptor',\nforeign_keys='{Artifacts/cluster_name=woah}'\"\n}\n{code}\n\nIt doesn't seem like this is the cause of the issue (though we need to investigate).\n\nThe UI keeps showing a spinner for several minutes, then shows a failure.\nThis is because a call to PUT on the cluster resource to set security_type takes more than 3 minutes, and the browser aborts the request.\nHowever, the backend kept moving forward to Kerberize the cluster (ambari-server.log was being tailed to check on progress).\nAfter verifying that all principals and keytabs were generated/distributed, the wizard was closed (the last step of the wizard is to start all services and run service checks, but this was skipped because the previous step failed.)\nThe cluster was in fact successfully Kerberized.\n\n*Note:* The condition is likely to have occurred due to a timeout related to the number of hosts and services in the cluster.  The preparation phase of enabling Kerberos is performed within the handler of the relavant API call. Most of this work should be moved out to a stage which is handled asynchronously.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: UI shows Kerberize Cluster step as failed with a retry button, but the backend keeps moving forward to Kerberize the cluster"
   },
   {
      "_id": "12832853",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-05-26 20:23:48",
      "description": "Precondition: On the cluster where this was observed, there were previous attempts to kerberize the cluster.\n\nSTR:\nGo through the Enable Kerberos Wizard.\nThe only non-default option taken was to not manage krb5.conf (presented on the second page of the wizard).\n\nChrome developer tool shows that there was a POST on /api/v1/clusters/woah/artifacts/kerberos_descriptor failing with 409.  \n\n{code}\n{\n\"status\" : 409,\n\"message\" : \"Attempted to create an artifact which already exists,\nartifact_name='kerberos_descriptor',\nforeign_keys='{Artifacts/cluster_name=woah}'\"\n}\n{code}\n\nIt doesn't seem like this is the cause of the issue (though we need to investigate).\n\nThe UI keeps showing a spinner for several minutes, then shows a failure.\nThis is because a call to PUT on the cluster resource to set security_type takes more than 3 minutes, and the browser aborts the request.\nHowever, the backend kept moving forward to Kerberize the cluster (ambari-server.log was being tailed to check on progress).\nAfter verifying that all principals and keytabs were generated/distributed, the wizard was closed (the last step of the wizard is to start all services and run service checks, but this was skipped because the previous step failed.)\nThe cluster was in fact successfully Kerberized.\n\n*Note:* The condition is likely to have occurred due to a timeout related to the number of hosts and services in the cluster.  The preparation phase of enabling Kerberos is performed within the handler of the relavant API call. Most of this work should be moved out to a stage which is handled asynchronously.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: UI shows Kerberize Cluster step as failed with a retry button, but the backend keeps moving forward to Kerberize the cluster"
   },
   {
      "_id": "12832574",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2015-05-25 21:21:14",
      "description": "In Ambari 1.7.0, we used to display a warning to the end user to create principals/keytabs when:\n* a new service is added to the cluster (Review page)\n* a new host is added to the cluster (Review page)\n* a new component is added to an existing host (dialog popup)\nWe need to bring these back when and only when the cluster is already kerberized with \"Manual\" option.\n\n*Note: This is a fix for an issue that AMBARI-11244 created where if security is disabled, the user is not able to add components on host details page.  Upon clicking on add component nothing happens.*\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: display warning that the user must create/distribute principals and keytabs"
   },
   {
      "_id": "12832381",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-05-23 21:31:34",
      "description": "Creating principals in AD when special characters are involved causes failures.\n\nThe following characters in the CN need to be escaped:\n{noformat}\n/ , \\ # + < > ; \" =\n{noformat}\n\n*Note:* javax.naming.ldap.Rdn will properly escape relative distinguished name parts.\n\n\nThe following characters in the sAMAccountName need to be removed or replaced:\n{noformat}\n[ ] : ; | = + * ? < > / \\\n{noformat}\n\n*Note:* This needs to be done explicitly within the attributes set if a relevant entry exists.\n{code}\n// Replace the following _illegal_ characters: [ ] : ; | = + * ? < > / \\\nvalue = value.toString().replaceAll(\"\\\\[|\\\\]|\\\\:|\\\\;|\\\\||\\\\=|\\\\+|\\\\*|\\\\?|\\\\<|\\\\>|\\\\/|\\\\\\\\\", \"_\");\n{code}\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "active-directory",
         "active_directory",
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: Creating principals in AD when special characters are involved causes failures"
   },
   {
      "_id": "12832341",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2015-05-23 11:29:03",
      "description": "Attempted to disable kerb, fails on step to unkerberize because KDC admin is locked out.\n\nClick retry, can't make it past that.\n\nNeed option to skip and finish \"disable kerberos\" even if Ambari cannot get the principals cleaned up (i.e. cannot access the KDC) Losing access to the KDC and attempting to disable where ambari can't clean-up the principals should be a skip'able step. User should still be able to get to a clean, not-enabled-kerberos-ambari-state w/o accessing the KDC.\n\n*Solution*\nBased on user input, execute API call to disable Kerberos with the *manage_kerberos_identities* _directive_ set to *false*.  Example:\n{code:title=PUT /api/v1/clusters/c1?manage_kerberos_identities=false}\n{\n  \"Clusters\": {\n    \"security_type\" : \"NONE\"\n  }\n}\n{code}\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos-wizard"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos FE: during disable, need option skip if unable to access KDC to remove principals"
   },
   {
      "_id": "12832257",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-05-22 20:19:51",
      "description": "Ambari currently integrates with external authentication systems and is able to authenticate users using enterprise-wide LDAP systems, such as Active Directory, OpenLDAP, and Apache Directory Service. However, more flexibility is now needed to allow for those authenticated users to be segmented into more granular roles.  These roles allow Ambari-level administrators to create different levels of cluster-level administrators to manage certain administrative operations that need to be performed on a cluster. This effectively spreads out the responsibilities of managing a cluster while not handing over total control of the Ambari management facility. \n\nAmbari to provide role-based access controls beyond today's Ambari Admin, Operator and Read-Only permissions.\n\n|| Role || Description ||\n| *Cluster User* (was Read-only) | This exists as of Ambari 1.7.0. Read-only view of cluster information, including configurations, service status and health alerts|\n| *Service Operator* | Provides control of service lifecycle (start/stop/restart/decomm/recom) |\n| *Service Administrator* | Service Operator + ability to re-configure (change/compare/revert), configure HA |\n| *Cluster Operator* | Service Administrator + add/remove hosts and components (for existing services) |\n| *Cluster Administrator* | Cluster Operator + enable/disable kerberos, modify alerts, add service, perform upgrade (renamed from Operator) |\n| Administrator | This exists as of Ambari 1.7.0. Full cluster control + manage user, groups and views and this flag is applicable to any user regardless of Role |\n\nEach role is to have permissions as shown below:\n\n|| || Cluster\\\\User || Service\\\\Operator || Service\\\\Administrator || Cluster\\\\Operator || Cluster\\\\Administrator || Administrator ||\n||Service-level Permissions||\n|View metrics                  |(+)|(+)|(+)|(+)|(+)|(+)|\n|View status information       |(+)|(+)|(+)|(+)|(+)|(+)|\n|View configurations           |(+)|(+)|(+)|(+)|(+)|(+)|\n|Compare configurations        |(+)|(+)|(+)|(+)|(+)|(+)|\n|View alerts        |(+)|(+)|(+)|(+)|(+)|(+)|\n|Start/Stop/Restart Service    |   |(+)|(+)|(+)|(+)|(+)|\n|Decommission/recommission     |   |(+)|(+)|(+)|(+)|(+)|\n|Run service checks            |   |(+)|(+)|(+)|(+)|(+)|\n|Turn on/off maintenance mode  |   |(+)|(+)|(+)|(+)|(+)|\n|Perform service-specific tasks|   |(+)|(+)|(+)|(+)|(+)|\n|Modify configurations         |   |   |(+)|(+)|(+)|(+)|\n|Manage configuration groups   |   |   |(+)|(+)|(+)|(+)|\n|Move to another host          |   |   |(+)|(+)|(+)|(+)|\n|Enable/disable alerts          |   |   |(+)|(+)|(+)|(+)|\n|Enable HA                     |   |   |(+)|(+)|(+)|(+)|\n|Add Service to cluster        |   |   |   |   |(+)|(+)|\n||*Host-level Permissions*||\n|View metrics                  |(+)|(+)|(+)|(+)|(+)|(+)|\n|View status information       |(+)|(+)|(+)|(+)|(+)|(+)|\n|View configuration            |(+)|(+)|(+)|(+)|(+)|(+)|\n|Turn on/off maintenance mode  |   |   |   |(+)|(+)|(+)|\n|Install components            |   |   |   |(+)|(+)|(+)|\n|Add/Delete hosts              |   |   |   |(+)|(+)|(+)|\n||Cluster-level Permissions||\n|View metrics                  |(+)|(+)|(+)|(+)|(+)|(+)|\n|View status information       |(+)|(+)|(+)|(+)|(+)|(+)|\n|View configuration            |(+)|(+)|(+)|(+)|(+)|(+)|\n|View stack version details    |(+)|(+)|(+)|(+)|(+)|(+)|\n|View alerts                   |(+)|(+)|(+)|(+)|(+)|(+)|\n|Enable/disable alerts         |   |   |   |   |(+)|(+)|\n|Enable/disable Kerberos       |   |   |   |   |(+)|(+)|\n|Upgrade/downgrade stack       |   |   |   |   |(+)|(+)|\n||Ambari-level Permissions||\n|Create new clusters           |   |   |   |   |   |(+)|\n|Set service users and groups  |   |   |   |   |   |(+)|\n|Rename clusters               |   |   |   |   |   |(+)|\n|Manage users                  |   |   |   |   |   |(+)|\n|Manage groups                 |   |   |   |   |   |(+)|\n|Manage Ambari Views           |   |   |   |   |   |(+)|\n|Assign permissions/roles      |   |   |   |   |   |(+)|\n|Manage stack versions         |   |   |   |   |   |(+)|\n|Edit stack repository URLs    |   |   |   |   |   |(+)|\n\n*NOTE:  [^AmbariRole-basedAccessControl.pdf] claims the RBAC update is available in Ambari 2.2.0, however it was not implemented until Ambari 2.3.0 and further.*",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/15",
         "id": "15",
         "description": "Created by Jira Software - do not edit or delete. Issue type for a big user story that needs to be broken down.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21137&avatarType=issuetype",
         "name": "Epic",
         "subtask": false,
         "avatarId": 21137
      },
      "labels": [
         "permissions",
         "rbac",
         "roles"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Finer-grained role AuthZ for Ambari Users"
   },
   {
      "_id": "12832018",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-05-22 01:16:00",
      "description": "{noformat}\n1 May 2015 00:18:53,950  INFO [Server Action Executor Worker 256] KerberosServerAction:436 - Processing identities completed.\n21 May 2015 00:18:56,754  INFO [qtp-ambari-agent-83] HeartBeatHandler:822 - SET_KEYTAB called\n21 May 2015 00:18:57,658  INFO [qtp-ambari-agent-83] HeartBeatHandler:822 - SET_KEYTAB called\n21 May 2015 00:18:57,926  INFO [qtp-ambari-agent-83] HeartBeatHandler:822 - SET_KEYTAB called\n21 May 2015 00:19:00,677  INFO [qtp-ambari-agent-83] HeartBeatHandler:822 - SET_KEYTAB called\n21 May 2015 00:19:12,502 ERROR [ambari-action-scheduler] ClusterImpl:2459 - ServiceComponentHost lookup exception\n21 May 2015 00:19:21,850 ERROR [ambari-action-scheduler] ClusterImpl:2459 - ServiceComponentHost lookup exception\n21 May 2015 00:19:21,870  INFO [Server Action Executor Worker 263] KerberosServerAction:332 - Processing identities...\n21 May 2015 00:19:21,873  INFO [Server Action Executor Worker 263] DestroyPrincipalsServerAction:90 - Destroying identity, ambari-qa_ruocwwby@EXAMPLE.COM\n21 May 2015 00:19:22,123 ERROR [Server Action Executor Worker 263] AmbariJpaLocalTxnInterceptor:114 - [DETAILED ERROR] Rollback reason:\nLocal Exception Stack:\nException [EclipseLink-4002] (Eclipse Persistence Services - 2.5.2.v20140319-9ad6abd): org.eclipse.persistence.exceptions.DatabaseException\nInternal Exception: java.sql.SQLIntegrityConstraintViolationException: ORA-02292: integrity constraint (AMBARICUSTOMUSER.FK_KRB_PR_HOST_PRINCIPALNAME) violated - child record found\n\nError Code: 2292\nCall: DELETE FROM kerberos_principal WHERE (principal_name = ?)\n        bind => [1 parameter bound]\n        at org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:331)\n        at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeDirectNoSelect(DatabaseAccessor.java:900)\n        at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeNoSelect(DatabaseAccessor.java:962)\n        at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:631)\n        at org.eclipse.persistence.internal.databaseaccess.ParameterizedSQLBatchWritingMechanism.executeBatch(ParameterizedSQLBatchWritingMechanism.java:149)\n        at org.eclipse.persistence.internal.databaseaccess.ParameterizedSQLBatchWritingMechanism.executeBatchedStatements(ParameterizedSQLBatchWritingMechanism.java:134)\n        at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.writesCompleted(DatabaseAccessor.java:1836)\n        at org.eclipse.persistence.internal.sessions.AbstractSession.writesCompleted(AbstractSession.java:4244)\n        at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.writesCompleted(UnitOfWorkImpl.java:5594)\n        at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.acquireWriteLocks(UnitOfWorkImpl.java:1646)\n        at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitTransactionAfterWriteChanges(UnitOfWorkImpl.java:1614)\n        at org.eclipse.persistence.internal.sessions.RepeatableWriteUnitOfWork.commitRootUnitOfWork(RepeatableWriteUnitOfWork.java:284)\n        at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitAndResume(UnitOfWorkImpl.java:1169)\n        at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commit(EntityTransactionImpl.java:132)\n        at org.apache.ambari.server.orm.AmbariJpaLocalTxnInterceptor.invoke(AmbariJpaLocalTxnInterceptor.java:91)\n        at com.google.inject.internal.InterceptorStackCallback$InterceptedMethodInvocation.proceed(InterceptorStackCallback.java:72)\n        at com.google.inject.internal.InterceptorStackCallback.intercept(InterceptorStackCallback.java:52)\n        at org.apache.ambari.server.orm.dao.KerberosPrincipalDAO$$EnhancerByGuice$$9e172ec6.remove(<generated>)\n        at org.apache.ambari.server.serveraction.kerberos.DestroyPrincipalsServerAction.processIdentity(DestroyPrincipalsServerAction.java:107)\n        at org.apache.ambari.server.serveraction.kerberos.KerberosServerAction.processRecord(KerberosServerAction.java:504)\n        at org.apache.ambari.server.serveraction.kerberos.KerberosServerAction.processIdentities(KerberosServerAction.java:393)\n        at org.apache.ambari.server.serveraction.kerberos.DestroyPrincipalsServerAction.execute(DestroyPrincipalsServerAction.java:64)\n        at org.apache.ambari.server.serveraction.ServerActionExecutor$Worker.execute(ServerActionExecutor.java:504)\n        at org.apache.ambari.server.serveraction.ServerActionExecutor$Worker.run(ServerActionExecutor.java:441)\n        at java.lang.Thread.run(Thread.java:745)\nCaused by: java.sql.SQLIntegrityConstraintViolationException: ORA-02292: integrity constraint (AMBARICUSTOMUSER.FK_KRB_PR_HOST_PRINCIPALNAME) violated - child record found\n\n        at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:440)\n        at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:396)\n        at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:837)\n        at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:445)\n        at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:191)\n        at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:523)\n        at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:207)\n        at oracle.jdbc.driver.T4CPreparedStatement.executeForRows(T4CPreparedStatement.java:1010)\n        at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1315)\n        at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3576)\n        at oracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OraclePreparedStatement.java:3657)\n        at oracle.jdbc.driver.OraclePreparedStatementWrapper.executeUpdate(OraclePreparedStatementWrapper.java:1350)\n        at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeDirectNoSelect(DatabaseAccessor.java:890)\n        ... 23 more\n21 May 2015 00:19:22,126 ERROR [Server Action Executor Worker 263] AmbariJpaLocalTxnInterceptor:122 - [DETAILED ERROR] Internal exception (1) :\njava.sql.SQLIntegrityConstraintViolationException: ORA-02292: integrity constraint (AMBARICUSTOMUSER.FK_KRB_PR_HOST_PRINCIPALNAME) violated - child record found\n\n        at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:440)\n        at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:396)\n        at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:837)\n        at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:445)\n        at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:191)\n        at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:523)\n        at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:207)\n        at oracle.jdbc.driver.T4CPreparedStatement.executeForRows(T4CPreparedStatement.java:1010)\n        at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1315)\n        at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3576)\n        at oracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OraclePreparedStatement.java:3657)\n        at oracle.jdbc.driver.OraclePreparedStatementWrapper.executeUpdate(OraclePreparedStatementWrapper.java:1350)\n        at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeDirectNoSelect(DatabaseAccessor.java:890)\n        at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeNoSelect(DatabaseAccessor.java:962)\n        at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:631)\n        at org.eclipse.persistence.internal.databaseaccess.ParameterizedSQLBatchWritingMechanism.executeBatch(ParameterizedSQLBatchWritingMechanism.java:149)\n        at org.eclipse.persistence.internal.databaseaccess.ParameterizedSQLBatchWritingMechanism.executeBatchedStatements(ParameterizedSQLBatchWritingMechanism.java:134)\n        at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.writesCompleted(DatabaseAccessor.java:1836)\n        at org.eclipse.persistence.internal.sessions.AbstractSession.writesCompleted(AbstractSession.java:4244)\n        at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.writesCompleted(UnitOfWorkImpl.java:5594)\n        at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.acquireWriteLocks(UnitOfWorkImpl.java:1646)\n        at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitTransactionAfterWriteChanges(UnitOfWorkImpl.java:1614)\n        at org.eclipse.persistence.internal.sessions.RepeatableWriteUnitOfWork.commitRootUnitOfWork(RepeatableWriteUnitOfWork.java:284)\n        at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitAndResume(UnitOfWorkImpl.java:1169)\n        at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commit(EntityTransactionImpl.java:132)\n        at org.apache.ambari.server.orm.AmbariJpaLocalTxnInterceptor.invoke(AmbariJpaLocalTxnInterceptor.java:91)\n        at com.google.inject.internal.InterceptorStackCallback$InterceptedMethodInvocation.proceed(InterceptorStackCallback.java:72)\n        at com.google.inject.internal.InterceptorStackCallback.intercept(InterceptorStackCallback.java:52)\n        at org.apache.ambari.server.orm.dao.KerberosPrincipalDAO$$EnhancerByGuice$$9e172ec6.remove(<generated>)\n        at org.apache.ambari.server.serveraction.kerberos.DestroyPrincipalsServerAction.processIdentity(DestroyPrincipalsServerAction.java:107)\n        at org.apache.ambari.server.serveraction.kerberos.KerberosServerAction.processRecord(KerberosServerAction.java:504)\n        at org.apache.ambari.server.serveraction.kerberos.KerberosServerAction.processIdentities(KerberosServerAction.java:393)\n        at org.apache.ambari.server.serveraction.kerberos.DestroyPrincipalsServerAction.execute(DestroyPrincipalsServerAction.java:64)\n        at org.apache.ambari.server.serveraction.ServerActionExecutor$Worker.execute(ServerActionExecutor.java:504)\n        at org.apache.ambari.server.serveraction.ServerActionExecutor$Worker.run(ServerActionExecutor.java:441)\n        at java.lang.Thread.run(Thread.java:745)\n21 May 2015 00:19:22,127  WARN [Server Action Executor Worker 263] DestroyPrincipalsServerAction:119 - Failed to remove identity for ambari-qa_ruocwwby@EXAMPLE.COM from the Ambari database - Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.5.2.v20140319-9ad6abd): org.eclipse.persistence.exceptions.DatabaseException\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "DDL errors seen on a cluster while enabling Kerberos"
   },
   {
      "_id": "12831109",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2015-05-19 18:10:09",
      "description": "Add Service Wizard requests KDC information when cluster is configured for Manual Kerberos. \n\nSee screen shots:\n\n!Ambari - ManKerb 2015-05-11 15-11-04.png!\n\nWhen configured for Kerberos with the _Manual_ option, the _Add Host Wizard_ should not warn about or prompt for KDC details.  The _wizard_ should also allow the user to download a CSV file of expected (user-generated) principals and keytabs files from the Review (or conformation page).  \nAdditional working on the Review/Confirmation page may be needed to inform the user that they should create the principals and keytabs before continuing. \n\nTo know whether the cluster is configured for _manual kerberos_:\n* Cluster.security_type = \"KERBEROS\"\n* kerberos-env/manage_identities = \"false\"",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Add Service Wizard requests KDC information when cluster is configured for Manual Kerberos"
   },
   {
      "_id": "12831083",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2015-05-19 17:11:16",
      "description": "In Ambari 1.7.0, we used to display a warning to the end user to create principals/keytabs when:\n* a new service is added to the cluster (Review page)\n* a new host is added to the cluster (Review page)\n* a new component is added to an existing host (dialog popup)\nWe need to bring these back when and only when the cluster is already kerberized with \"Manual\" option.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: display warning that the user must create/distribute principals and keytabs"
   },
   {
      "_id": "12830542",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-05-17 22:33:15",
      "description": "The webhcat-site/templeton.hive.properties property value substitution should be done by ambari-server.  This value is more complicated than others since the (embedded) hive.metastore.uris property is a list of thrift URIs generated using the set of hosts the Hive Metastore is installed on.  This list of hosts comes from the clusterHostInfo/hive_metastore_host value, which in the KerberosHelper (org.apache.ambari.server.controller.KerberosHelper) is available as a comma-delimited list of hosts.\n\n{code}\nclusterHostInfo/hive_metastore_host = \"host1,host2,host3\"\n{code}\n\nTo generate configuration values when enabling Kerberos, the KerberosHelper class uses org.apache.ambari.server.state.kerberos.AbstractKerberosDescriptor#replaceVariables to replace variables specified in the Kerberos Descriptor.  Currently this mechanism uses a simple replacement scheme, which is not sufficient to generate string using a delimited list of values. \n\nIn order to solve this issue, \"functions\" need to be applied to replacement data before making the substitution.  In this case a \"function\" named \"each\" will be created that takes the following arguments:\n* pattern with placeholders\n* delimiter to use to concatenate values generated using the patter\n* regex to use to split the original string\n\nFor example: \n{code:title=function declaration, commas are escaped when not intended to separate function args}\neach(thrift://%s:9083, \\\\,, \\s*\\,\\s*)\n{code}\n\nTo indicate this function is to be used, the following Kerberos Descriptor variable replacement syntax is to be used:\n{code}\n${clusterHostInfo/hive_metastore_host|each(thrift://%s:9083, \\\\,, \\s*\\,\\s*)}\n{code}\n\nNote: \\ characters need to be escaped in JSON structure values.  For example: \n{code}\n\"some.property\" : \"${clusterHostInfo/hive_metastore_host|each(thrift://%s:9083, \\\\\\\\,, \\\\s*\\\\,\\\\s*)}\"\n{code}\n\nIf clusterHostInfo/hive_metastore_host = \"host1,host2,host3\", the result would be \n{code}\nthrift://host1:9083\\,thrift://host2:9083\\,thrift://host3:9083\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "templeton.hive.properties property value substitution should be done by ambari-server"
   },
   {
      "_id": "12830226",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-05-15 16:52:08",
      "description": "0) create cluster, hDP 2.2, build 1203\n1) Kerb cluster (hdfs, yarn,zk)\n2) add ozzie\n3) add hbase\n4) everything seems ok.\n5) I went and looked at oozie configs, oozie.authentication.kerberos.name.rules property looks like this...is this correct?\n\n{code}\nRULE:[1:$1@$0](ambari-qa-MyCluster@EXAMPLE.COM)s/.*/ambari-qa/\nRULE:[1:$1@$0](hbase-MyCluster@EXAMPLE.COM)s/.*/hbase/\nRULE:[1:$1@$0](hdfs-MyCluster@EXAMPLE.COM)s/.*/hdfs/\nRULE:[1:$1@$0](.*@EXAMPLE.COM)s/@.*//\nRULE:[1:$1@$0](.*@.*TODO-KERBEROS-DOMAIN)s/@.*//\nRULE:[2:$1@$0]([jt]t@.*TODO-KERBEROS-DOMAIN)s/.*/TODO-MAPREDUSER/\nRULE:[2:$1@$0]([nd]n@.*TODO-KERBEROS-DOMAIN)s/.*/TODO-HDFSUSER/\nRULE:[2:$1@$0](dn@EXAMPLE.COM)s/.*/hdfs/\nRULE:[2:$1@$0](hbase@EXAMPLE.COM)s/.*/hbase/\nRULE:[2:$1@$0](hm@.*TODO-KERBEROS-DOMAIN)s/.*/TODO-HBASE-USER/\nRULE:[2:$1@$0](jhs@EXAMPLE.COM)s/.*/mapred/\nRULE:[2:$1@$0](jn@EXAMPLE.COM)s/.*/hdfs/\nRULE:[2:$1@$0](nm@EXAMPLE.COM)s/.*/yarn/\nRULE:[2:$1@$0](nn@EXAMPLE.COM)s/.*/hdfs/\nRULE:[2:$1@$0](oozie@EXAMPLE.COM)s/.*/oozie/\nRULE:[2:$1@$0](rm@EXAMPLE.COM)s/.*/yarn/\nRULE:[2:$1@$0](rs@.*TODO-KERBEROS-DOMAIN)s/.*/TODO-HBASE-USER/\nRULE:[2:$1@$0](yarn@EXAMPLE.COM)s/.*/yarn/\nDEFAULT\n{code}\n\n\n*Solution*\nRemove the following values for oozie-site/oozie.authentication.kerberos.name.rules\n\n{code:title=common-services/OOZIE/4.0.0.2.0/configuration/oozie-site.xml:145}\n      RULE:[2:$1@$0]([jt]t@.*TODO-KERBEROS-DOMAIN)s/.*/TODO-MAPREDUxSER/\n      RULE:[2:$1@$0]([nd]n@.*TODO-KERBEROS-DOMAIN)s/.*/TODO-HDFSUSER/\n      RULE:[2:$1@$0](hm@.*TODO-KERBEROS-DOMAIN)s/.*/TODO-HBASE-USER/\n      RULE:[2:$1@$0](rs@.*TODO-KERBEROS-DOMAIN)s/.*/TODO-HBASE-USER/\n      DEFAULT\n{code}\n\n{code:title=common-services/OOZIE/5.0.0.2.3/configuration/oozie-site.xml:24}\n      RULE:[2:$1@$0]([jt]t@.*TODO-KERBEROS-DOMAIN)s/.*/TODO-MAPREDUxSER/\n      RULE:[2:$1@$0]([nd]n@.*TODO-KERBEROS-DOMAIN)s/.*/TODO-HDFSUSER/\n      RULE:[2:$1@$0](hm@.*TODO-KERBEROS-DOMAIN)s/.*/TODO-HBASE-USER/\n      RULE:[2:$1@$0](rs@.*TODO-KERBEROS-DOMAIN)s/.*/TODO-HBASE-USER/\n      DEFAULT\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "keberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: Oozie auth rules do not look correct"
   },
   {
      "_id": "12830177",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-05-15 14:23:15",
      "description": "Principals fail to be created if whitespace exists in generated passwords.\n\n{code:title=failure condition}\nadd_principal -pw 265 V$^+91axff4i56 ambari-qa@EXAMPLE.COM\n{code}\n\nTo fix this, quotes are needed around the password:\n\n{code:title=fix}\nadd_principal -pw \"265 V$^+91axff4i56\" ambari-qa@EXAMPLE.COM\n{code}\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: Principals fail to be created if whitespace exists in generated passwords"
   },
   {
      "_id": "12829980",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2015-05-14 20:53:31",
      "description": "After enabling kerb manual, the configs tab under Kerberos is incorrect.\n\n1) the type should indicate the accurate type (existing MIT, ad or manual), just like the wizard\n2) the kadmin host is showing red but this is manual and it's not required\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos-wizard"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: service page incorrect with manual"
   },
   {
      "_id": "12829868",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2015-05-14 14:43:22",
      "description": "Kerb cluster, add host.\nSee screen shot\n\nThis issue appears to be a front end issue.  Here is the culprit: \n\n{code:title=app/templates/wizard/step9/step9HostTasksLogPopup.hbs:47}\n{{taskInfo.role}} {{taskInfo.command}}\n{code}\n\nRather then attempting to use the task's _command_detail_ value, the front end only displays the task's _role_ and _command_ values which are constrained by the code to be a certain set of values. The _command_detail_ field does not have that constraint.  \n\nFor the offending items in the relevant view,  the following values are set:\n{code}\nrole: KERBEROS_CLIENT (translated somewhere to \"Kerberos Client\")\ncommand: CUSTOM_COMMAND (translated somewhere to \"custom command\")\ncommand_details: SET_KEYTAB KERBEROS/KERBEROS_CLIENT\n{code}\n\nOn this note there are several items in that same display (for the Ambari server host) that read \"Ambari Server Action execute\". This is the same issue.\n\n!add_service_log.png!\n\nThe background operations view displays these values properly:\n\n!background_operations_log.png!\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Add host kerberos client install does not have command text"
   },
   {
      "_id": "12829865",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2015-05-14 14:29:33",
      "description": "*Steps to reproduce:*\n# Create cluster\n# Enable Kerberos\n# Select Manual Option - See no KDC Host field and test button (correct)\n# Select Back button\n# Select MIT KDC Option - See no KDC Host field and test button (incorrect)\n\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos-wizard"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: Selecting \"Manual\" option and then going back to \"Existing KDC\" option loses KDC host field and connection tester"
   },
   {
      "_id": "12829317",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-05-12 20:18:30",
      "description": "There are some naming consistency issues and there are missing entries in the CSV related to AMS.\n\n*Naming inconsistencies*\n* ams.zookeeper.principal\n** Is: zookeeper/_HOST@$\\{realm\\}\n** Should be: amszk@_HOST$\\{realm\\}\n* ams.zookeeper.keytab \n** Is: $\\{keytab_dir\\}/zk.service.ams.keytab\n** Should be: $\\{keytab_dir\\}/ams-zk.service.keytab\n\n*Missing CSV entries*\n* ams.collector.ketab\n* ams-hbase.regionserver.keytab\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: missing identities for AMS in the CSV"
   },
   {
      "_id": "12828832",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-05-11 14:40:22",
      "description": "{code}\n# falcon admin -version\nERROR: Unable to initialize Falcon Client object\n{code}\n\nIt would also be immensely helpful if we print some logs some where for this. Or create an env var that when set allows us to see debug logs because i have no idea why this error came up and how to debug any further. Nothing ever made it to the server side logs.\n\n*Solution*\nThe *.falcon.http.authentication.kerberos.name.rules need to be uodated such that they are the same as hadoop.security.auth_to_local. To do this, add the following under the relevant service item in the Falcon kerberos.json file:\n\n{code}\n      \"auth_to_local_properties\" : [\n        \"falcon-startup.properties/*.falcon.http.authentication.kerberos.name.rules\"\n      ],\n{code}\n\nFor example:\n\n{code}\n{\n  \"services\": [\n    {\n      \"name\": \"FALCON\",\n      ...\n      \"auth_to_local_properties\" : [\n        \"falcon-startup.properties/*.falcon.http.authentication.kerberos.name.rules\"\n      ],\n      ...\n   }\n ]\n}\n{code}\n\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "falcon",
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "falcon client not initalizing for secure clusters"
   },
   {
      "_id": "12828388",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2015-05-08 15:08:07",
      "description": "Hide create_attributes_template when not configuring for Active Directory since it does not apply for MIT KDC configuration\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos-wizard"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos Wizard: Hide create_attributes_template when not configuring for Active Directory "
   },
   {
      "_id": "12828373",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2015-05-08 14:44:32",
      "description": "Update checkbox \"reqs\" on Page 1 of wizard with choice of Manual Kerb:\n\n* Cluster hosts have network access to the KDC\n* Kerberos client utilities (such as kinit) have been installed on every cluster host\n* The Java Cryptography Extensions (JCE) have been setup on the Ambari Server host and all hosts in the cluster\n* The Service and Ambari Principals will be manually created in the KDC before completing this wizard\n* The keytabs for the Service and Ambari Principals will be manually created and distributed to cluster hosts before completing this wizard\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos-wizard"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: cleanup Manual kerb req text"
   },
   {
      "_id": "12828368",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2015-05-08 13:52:21",
      "description": "enable kerb, select manual kerb option.\n\nAs first task inStop Services, it's performing kerb client install, which is installs 1) kerb packages + 2) overwriting my krb5.conf (shouldn't do either of these since this is a manual kerb).\n\n{code}\n2015-05-05 19:09:31,878 - Skipping installation of existing package krb5-workstation\n2015-05-05 19:09:31,882 - Directory['/etc'] {'owner': 'root', 'group': 'root', 'mode': 0755, 'recursive': True}\n2015-05-05 19:09:32,030 - File['/etc/krb5.conf'] {'owner': 'root', 'content': Template('krb5_conf.j2'), 'group': 'root', 'mode': 0644}\n2015-05-05 19:09:32,206 - Writing File['/etc/krb5.conf'] because contents don't match\n2015-05-05 19:09:32,491 - Execute['ambari-sudo.sh  -H -E touch /var/lib/ambari-agent/data/hdp-select-set-all.performed ; ambari-sudo.sh /usr/bin/hdp-select set all `ambari-python-wrap /usr/bin/hdp-select versions | grep ^2.2 | tail -1`'] {'not_if': 'test -f /var/lib/ambari-agent/data/hdp-select-set-all.performed', 'only_if': 'ls -d /usr/hdp/2.2*'}\n2015-05-05 19:09:32,553 - Skipping Execute['ambari-sudo.sh  -H -E touch /var/lib/ambari-agent/data/hdp-select-set-all.performed ; ambari-sudo.sh /usr/bin/hdp-select set all `ambari-python-wrap /usr/bin/hdp-select versions | grep ^2.2 | tail -1`'] due to not_if\n2\n{code}\n\n*Solution*\nThe wizard needs to set the following configurations when \"Manual\" is selected:\n\n{{kerberos-env/manage_identities}} = \"false\"\n{{kerberos-env/install_packages}} = \"false\"\n{{krb5-conf/manage_krb5_conf}} = \"false\"\n{{kerberos-env/kdc-type}} = \"none\"",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos-wizard"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: manual kerb is installing kerb packages + overwriting krb5.conf"
   },
   {
      "_id": "12828358",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2015-05-08 12:57:17",
      "description": "The CSV file that is downloaded from the Kerberos Wizard does not contain the configured Kerberos identity details - it contains only default data. \n\nThis is due to where in the workflow the Kerberos descriptor is posted to Ambari (as an artifact).  The data *is* posted during the transition between the _Stop Services_ page and the _Kerberize Cluster_ page. The data *should be* posted during the transition between the _Configure Identities_ page and the _Confirm Configuration_ page.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos-wizard"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos Wizard: Downloaded CSV file contains only default data"
   },
   {
      "_id": "12828309",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-05-08 10:08:04",
      "description": "# Deploy cluster\n# Enable security\n# Run Kerberos service check\n\nIn background operations Kerberos service check is named as \"Create principals\"",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos service check is named \"Create principals\""
   },
   {
      "_id": "12828075",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-05-07 18:25:55",
      "description": "If I go through setup of secure cluster, also execute ambari-server setup-security option #3, there are 2 problems:\n# Ambari does not kinit using the specified principal and keytab\n# If I manually kinit, all is well until the ticket expires - I would expect Ambari to renew ticket prior to expiry.\n# The process uses the interactive user's ticket cache (separate Jira: AMBARI-11001)",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "JAAS"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Ambari does not renew kerberos tickets"
   },
   {
      "_id": "12828073",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-05-07 18:22:50",
      "description": "It appears that it is necessary to kinit prior to starting ambari-server, even after ambari-server setup-security (#3). It seems that this should be automatically handled by Ambari. \n\nAmbari-server should NOT use the same ticket cache as the interactive user. \n\nSTR:\n1. kinit\n2. ambari-server start\n3. verify that ambari-server can authenticate with ticket specified in #1\n4. kdestroy\n5. try to authenticate through Ambari again (it will not work)\n\n*Solution*\nEnsure JAAS Login works properly such that the Kerberos tickets for the account that executes Ambari is not relevant.\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "JAAS"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Ambari uses users' interactive ticket cache"
   },
   {
      "_id": "12827792",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2015-05-06 20:10:51",
      "description": "See attached. On page 2 of the Kerb wizard, we have a checkbox for \"manage kerberos identities\". if the user chooses existing MIT or AD on page 1, this is a given. If they choose manage manually, this is not required.\n\nDoesn't seems like there is a need for this checkbox on the wizard since page 1 answers the question.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos-wizard"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: no need for Manage Identities checkbox"
   },
   {
      "_id": "12827786",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2015-05-06 19:38:51",
      "description": "In the *Enable Kerberos Wizard*'s *Configure Kerberos* step when there are configurations that require attention the 'Attention: Some configurations need your attention before you can proceed.\n+Show me properties with issues+' alert shows up.\n\nWhen users click +Show me properties with issues+, and resolve their problems the alert disappears.  The issue is that there is no way to see all of the non-required properties without purposefully messing up one of the required ones so the alert comes back with the \"+Show all properties+\" link in it.\n\nWhat should happen is as follows:\n# If there are properties that require attention, a yellow attention div is presented with \"Attention: Some configurations need your attention before you can proceed.\n+Show me properties with issues+\"\n# The user clicks on that link and start addressing the required configurations.\n# When all of the configurations have been filled out that div is replaced with a green div with \"All configurations have been addressed. +Show all properties+\"\n\nSee attached screenshots for example of issue in current implementation",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos-wizard"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: \"Attention: Some configurations need your attention\" msg in Enable Kerb Wizard hides fields"
   },
   {
      "_id": "12827440",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-05-05 21:38:35",
      "description": "Fix KERBEROS service reference to common services in HDP 2.3\n\nThe metainfo.xml file should read\n{code:title=stacks/HDP/2.3/services/KERBEROS/metainfo.xml}\n<metainfo>\n  <schemaVersion>2.0</schemaVersion>\n  <services>\n    <service>\n      <name>KERBEROS</name>\n      <extends>common-services/KERBEROS/1.10.3-10</extends>\n    </service>\n  </services>\n</metainfo>\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Fix KERBEROS service reference to common services in HDP 2.3"
   },
   {
      "_id": "12826963",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-05-04 16:59:12",
      "description": "{{kerberos-env/kdc_type}} must not be mandatory if {{kerberos-env/manage_identities}} is _false_.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "kerberos-env/kdc_type must not be mandatory if kerberos-env/manage_identities is false."
   },
   {
      "_id": "12826445",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-04-30 22:09:31",
      "description": "Kerberos Identity data is empty when Cluster.security_type does not equal \"KERBEROS\".  \n\nTechnically this seems to make sense since there shouldn't be any relevant Kerberos identities if the cluster isn't configured for Kerberos; however a _chicken-and-the-egg_ condition is encountered when manually enabled Kerberos and a listing of the needed Kerberos identities is needed before Kerberos is to be fully enabled. \n\n*Solution*\nAllow the keberos_identities API end points to generate data even if Cluster.security_type is not equal to \"KERBEROS\".",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos Identity data is empty when Cluster.security_type != KERBEROS"
   },
   {
      "_id": "12826040",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-04-29 18:19:32",
      "description": "The password generator used to generate passwords for identities needs to generate passwords based on a pattern rather than just a random sequence of characters. \n\nWithin the KDC, there may be a policy in place requiring a certain characteristics for the password. By creating a password consisting if 18 characters pulled randomly from {{abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890?.!$%^*()-_+=~}}, there is no guarantee that any specific policy will be met. \n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: Password generator needs to generate passwords based on a pattern to satisfy password policy"
   },
   {
      "_id": "12822521",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-04-21 01:22:19",
      "description": "Use kerberos-env/executable_search_paths to indicate where to look for Kerberos utilities in HBASE agent-side scripts.\n\nSee solution for AMBARI-10452.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Use kerberos-env/executable_search_paths to indicate where to look for Kerberos utilities in HBASE agent-side scripts"
   },
   {
      "_id": "12821979",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-04-17 19:37:38",
      "description": "Add the ability to obtain details about required Kerberos identities for the cluster.   These details should be obtained using a REST API call formatted as a JSON structure.  \n\nResulting JSON block per Kerberos identity:\n{code}\n    \"KerberosIdentity\" : {\n        \"cluster_name\" : \"c1\",\n        \"description\" : \"/spnego\",\n        \"host_name\" : \"host1\",\n        \"keytab_file_group\" : \"hadoop\",\n        \"keytab_file_group_access\" : \"r\",\n        \"keytab_file_installed\" : \"true\",\n        \"keytab_file_mode\" : \"440\",\n        \"keytab_file_owner\" : \"root\",\n        \"keytab_file_owner_access\" : \"r\",\n        \"keytab_file_path\" : \"/etc/security/keytabs/spnego.service.keytab\",\n        \"principal_local_username\" : null,\n        \"principal_name\" : \"HTTP/host1@EXAMPLE.COM\",\n        \"principal_type\" : \"SERVICE\"\n    }\n{code}\n\nThe data will be converted into CSV-formatted data similar to the file exported from Ambari 1.7 (as follows):\n\n||host||description||principal||keytab file name||keytab file base path||keytab file owner||keytab file group||keytab file mode||\n|host1|Ambari Smoke Test User|ambari-qa@EXAMPLE.COM|smokeuser.headless.keytab|/etc/security/keytabs|ambari-qa|hadoop|440|\n|host1|HDFS User|hdfs@EXAMPLE.COM|hdfs.headless.keytab|/etc/security/keytabs|hdfs|hadoop|440|\n|host1|HDFS SPNEGO User|HTTP/host1@EXAMPLE.COM|spnego.service.keytab|/etc/security/keytabs|root|hadoop|440|\n|host1|HDFS SPNEGO User|HTTP/host1@EXAMPLE.COM|spnego.service.keytab|/etc/security/keytabs|root|hadoop|440|\n|host1|DataNode|dn/host1@EXAMPLE.COM|dn.service.keytab|/etc/security/keytabs|hdfs|hadoop|400|\n|host1|NameNode|nn/host1@EXAMPLE.COM|nn.service.keytab|/etc/security/keytabs|hdfs|hadoop|400|\n|host1|ZooKeeper Server|zookeeper/host1@EXAMPLE.COM|zk.service.keytab|/etc/security/keytabs|zookeeper|hadoop|400|\n\n\n*Solution*\nThe following API calls are to be used to obtain the data:\n\n{code:title=GET /api/v1/clusters/c1/hosts?fields=kerberos_identities/*}\n{\n  \"href\" : \"http://ambari:8080/api/v1/clusters/c1/hosts?fields=kerberos_identities/*\",\n  \"items\" : [\n    {\n      \"href\" : \"http://ambari:8080/api/v1/clusters/c1/hosts/host1\",\n      \"Hosts\" : {\n        \"cluster_name\" : \"c1\",\n        \"host_name\" : \"host1\"\n      },\n      \"kerberos_identities\" : [\n        {\n          \"href\" : \"http://ambari:8080/api/v1/clusters/c1/hosts/host1/kerberos_identities/HTTP%2Fhost1%40EXAMPLE.COM\",\n          \"KerberosIdentity\" : {\n            \"cluster_name\" : \"c1\",\n            \"description\" : \"/spnego\",\n            \"host_name\" : \"host1\",\n            \"keytab_file_group\" : \"hadoop\",\n            \"keytab_file_group_access\" : \"r\",\n            \"keytab_file_installed\" : \"true\",\n            \"keytab_file_mode\" : \"440\",\n            \"keytab_file_owner\" : \"root\",\n            \"keytab_file_owner_access\" : \"r\",\n            \"keytab_file_path\" : \"/etc/security/keytabs/spnego.service.keytab\",\n            \"principal_local_username\" : null,\n            \"principal_name\" : \"HTTP/host1@EXAMPLE.COM\",\n            \"principal_type\" : \"SERVICE\"\n          }\n        },\n        {\n          \"href\" : \"http://ambari:8080/api/v1/clusters/c1/hosts/host1/kerberos_identities/ambari-qa%40EXAMPLE.COM\",\n          \"KerberosIdentity\" : {\n            \"cluster_name\" : \"c1\",\n            \"description\" : \"/smokeuser\",\n            \"host_name\" : \"host1\",\n            \"keytab_file_group\" : \"hadoop\",\n            \"keytab_file_group_access\" : \"r\",\n            \"keytab_file_installed\" : \"true\",\n            \"keytab_file_mode\" : \"440\",\n            \"keytab_file_owner\" : \"ambari-qa\",\n            \"keytab_file_owner_access\" : \"r\",\n            \"keytab_file_path\" : \"/etc/security/keytabs/smokeuser.headless.keytab\",\n            \"principal_local_username\" : \"ambari-qa\",\n            \"principal_name\" : \"ambari-qa@EXAMPLE.COM\",\n            \"principal_type\" : \"USER\"\n          }\n        },\n        {\n          \"href\" : \"http://ambari:8080/api/v1/clusters/c1/hosts/host1/kerberos_identities/dn%2Fhost1%40EXAMPLE.COM\",\n          \"KerberosIdentity\" : {\n            \"cluster_name\" : \"c1\",\n            \"description\" : \"datanode_dn\",\n            \"host_name\" : \"host1\",\n            \"keytab_file_group\" : \"hadoop\",\n            \"keytab_file_group_access\" : \"\",\n            \"keytab_file_installed\" : \"true\",\n            \"keytab_file_mode\" : \"400\",\n            \"keytab_file_owner\" : \"hdfs\",\n            \"keytab_file_owner_access\" : \"r\",\n            \"keytab_file_path\" : \"/etc/security/keytabs/dn.service.keytab\",\n            \"principal_local_username\" : \"hdfs\",\n            \"principal_name\" : \"dn/host1@EXAMPLE.COM\",\n            \"principal_type\" : \"SERVICE\"\n          }\n        },\n        {\n          \"href\" : \"http://ambari:8080/api/v1/clusters/c1/hosts/host1/kerberos_identities/hdfs%40EXAMPLE.COM\",\n          \"KerberosIdentity\" : {\n            \"cluster_name\" : \"c1\",\n            \"description\" : \"/hdfs\",\n            \"host_name\" : \"host1\",\n            \"keytab_file_group\" : \"hadoop\",\n            \"keytab_file_group_access\" : \"r\",\n            \"keytab_file_installed\" : \"true\",\n            \"keytab_file_mode\" : \"440\",\n            \"keytab_file_owner\" : \"hdfs\",\n            \"keytab_file_owner_access\" : \"r\",\n            \"keytab_file_path\" : \"/etc/security/keytabs/hdfs.headless.keytab\",\n            \"principal_local_username\" : \"hdfs\",\n            \"principal_name\" : \"hdfs@EXAMPLE.COM\",\n            \"principal_type\" : \"USER\"\n          }\n        },\n        {\n          \"href\" : \"http://ambari:8080/api/v1/clusters/c1/hosts/host1/kerberos_identities/nm%2Fhost1%40EXAMPLE.COM\",\n          \"KerberosIdentity\" : {\n            \"cluster_name\" : \"c1\",\n            \"description\" : \"nodemanager_nm\",\n            \"host_name\" : \"host1\",\n            \"keytab_file_group\" : \"hadoop\",\n            \"keytab_file_group_access\" : \"\",\n            \"keytab_file_installed\" : \"true\",\n            \"keytab_file_mode\" : \"400\",\n            \"keytab_file_owner\" : \"yarn\",\n            \"keytab_file_owner_access\" : \"r\",\n            \"keytab_file_path\" : \"/etc/security/keytabs/nm.service.keytab\",\n            \"principal_local_username\" : \"yarn\",\n            \"principal_name\" : \"nm/host1@EXAMPLE.COM\",\n            \"principal_type\" : \"SERVICE\"\n          }\n        },\n        {\n          \"href\" : \"http://ambari:8080/api/v1/clusters/c1/hosts/host1/kerberos_identities/nn%2Fhost1%40EXAMPLE.COM\",\n          \"KerberosIdentity\" : {\n            \"cluster_name\" : \"c1\",\n            \"description\" : \"namenode_nn\",\n            \"host_name\" : \"host1\",\n            \"keytab_file_group\" : \"hadoop\",\n            \"keytab_file_group_access\" : \"\",\n            \"keytab_file_installed\" : \"true\",\n            \"keytab_file_mode\" : \"400\",\n            \"keytab_file_owner\" : \"hdfs\",\n            \"keytab_file_owner_access\" : \"r\",\n            \"keytab_file_path\" : \"/etc/security/keytabs/nn.service.keytab\",\n            \"principal_local_username\" : \"hdfs\",\n            \"principal_name\" : \"nn/host1@EXAMPLE.COM\",\n            \"principal_type\" : \"SERVICE\"\n          }\n        },\n        {\n          \"href\" : \"http://ambari:8080/api/v1/clusters/c1/hosts/host1/kerberos_identities/zookeeper%2Fhost1%40EXAMPLE.COM\",\n          \"KerberosIdentity\" : {\n            \"cluster_name\" : \"c1\",\n            \"description\" : \"zookeeper_zk\",\n            \"host_name\" : \"host1\",\n            \"keytab_file_group\" : \"hadoop\",\n            \"keytab_file_group_access\" : \"\",\n            \"keytab_file_installed\" : \"true\",\n            \"keytab_file_mode\" : \"400\",\n            \"keytab_file_owner\" : \"zookeeper\",\n            \"keytab_file_owner_access\" : \"r\",\n            \"keytab_file_path\" : \"/etc/security/keytabs/zk.service.keytab\",\n            \"principal_local_username\" : null,\n            \"principal_name\" : \"zookeeper/host1@EXAMPLE.COM\",\n            \"principal_type\" : \"SERVICE\"\n          }\n        }\n      ]\n    },\n    {\n      \"href\" : \"http://ambari:8080/api/v1/clusters/c1/hosts/host2\",\n      \"Hosts\" : {\n        \"cluster_name\" : \"c1\",\n        \"host_name\" : \"host2\"\n      },\n      \"kerberos_identities\" : [\n        {\n          \"href\" : \"http://ambari:8080/api/v1/clusters/c1/hosts/host2/kerberos_identities/HTTP%2Fhost2%40EXAMPLE.COM\",\n          \"KerberosIdentity\" : {\n            \"cluster_name\" : \"c1\",\n            \"description\" : \"/spnego\",\n            \"host_name\" : \"host2\",\n            \"keytab_file_group\" : \"hadoop\",\n            \"keytab_file_group_access\" : \"r\",\n            \"keytab_file_installed\" : \"true\",\n            \"keytab_file_mode\" : \"440\",\n            \"keytab_file_owner\" : \"root\",\n            \"keytab_file_owner_access\" : \"r\",\n            \"keytab_file_path\" : \"/etc/security/keytabs/spnego.service.keytab\",\n            \"principal_local_username\" : null,\n            \"principal_name\" : \"HTTP/host2@EXAMPLE.COM\",\n            \"principal_type\" : \"SERVICE\"\n          }\n        },\n        {\n          \"href\" : \"http://ambari:8080/api/v1/clusters/c1/hosts/host2/kerberos_identities/ambari-qa%40EXAMPLE.COM\",\n          \"KerberosIdentity\" : {\n            \"cluster_name\" : \"c1\",\n            \"description\" : \"/smokeuser\",\n            \"host_name\" : \"host2\",\n            \"keytab_file_group\" : \"hadoop\",\n            \"keytab_file_group_access\" : \"r\",\n            \"keytab_file_installed\" : \"true\",\n            \"keytab_file_mode\" : \"440\",\n            \"keytab_file_owner\" : \"ambari-qa\",\n            \"keytab_file_owner_access\" : \"r\",\n            \"keytab_file_path\" : \"/etc/security/keytabs/smokeuser.headless.keytab\",\n            \"principal_local_username\" : \"ambari-qa\",\n            \"principal_name\" : \"ambari-qa@EXAMPLE.COM\",\n            \"principal_type\" : \"USER\"\n          }\n        },\n        {\n          \"href\" : \"http://ambari:8080/api/v1/clusters/c1/hosts/host2/kerberos_identities/dn%2Fhost2%40EXAMPLE.COM\",\n          \"KerberosIdentity\" : {\n            \"cluster_name\" : \"c1\",\n            \"description\" : \"datanode_dn\",\n            \"host_name\" : \"host2\",\n            \"keytab_file_group\" : \"hadoop\",\n            \"keytab_file_group_access\" : \"\",\n            \"keytab_file_installed\" : \"true\",\n            \"keytab_file_mode\" : \"400\",\n            \"keytab_file_owner\" : \"hdfs\",\n            \"keytab_file_owner_access\" : \"r\",\n            \"keytab_file_path\" : \"/etc/security/keytabs/dn.service.keytab\",\n            \"principal_local_username\" : \"hdfs\",\n            \"principal_name\" : \"dn/host2@EXAMPLE.COM\",\n            \"principal_type\" : \"SERVICE\"\n          }\n        },\n        {\n          \"href\" : \"http://ambari:8080/api/v1/clusters/c1/hosts/host2/kerberos_identities/hdfs%40EXAMPLE.COM\",\n          \"KerberosIdentity\" : {\n            \"cluster_name\" : \"c1\",\n            \"description\" : \"/hdfs\",\n            \"host_name\" : \"host2\",\n            \"keytab_file_group\" : \"hadoop\",\n            \"keytab_file_group_access\" : \"r\",\n            \"keytab_file_installed\" : \"true\",\n            \"keytab_file_mode\" : \"440\",\n            \"keytab_file_owner\" : \"hdfs\",\n            \"keytab_file_owner_access\" : \"r\",\n            \"keytab_file_path\" : \"/etc/security/keytabs/hdfs.headless.keytab\",\n            \"principal_local_username\" : \"hdfs\",\n            \"principal_name\" : \"hdfs@EXAMPLE.COM\",\n            \"principal_type\" : \"USER\"\n          }\n        },\n        {\n          \"href\" : \"http://ambari:8080/api/v1/clusters/c1/hosts/host2/kerberos_identities/jhs%2Fhost2%40EXAMPLE.COM\",\n          \"KerberosIdentity\" : {\n            \"cluster_name\" : \"c1\",\n            \"description\" : \"history_server_jhs\",\n            \"host_name\" : \"host2\",\n            \"keytab_file_group\" : \"hadoop\",\n            \"keytab_file_group_access\" : \"\",\n            \"keytab_file_installed\" : \"true\",\n            \"keytab_file_mode\" : \"400\",\n            \"keytab_file_owner\" : \"mapred\",\n            \"keytab_file_owner_access\" : \"r\",\n            \"keytab_file_path\" : \"/etc/security/keytabs/jhs.service.keytab\",\n            \"principal_local_username\" : \"mapred\",\n            \"principal_name\" : \"jhs/host2@EXAMPLE.COM\",\n            \"principal_type\" : \"SERVICE\"\n          }\n        },\n        {\n          \"href\" : \"http://ambari:8080/api/v1/clusters/c1/hosts/host2/kerberos_identities/nm%2Fhost2%40EXAMPLE.COM\",\n          \"KerberosIdentity\" : {\n            \"cluster_name\" : \"c1\",\n            \"description\" : \"nodemanager_nm\",\n            \"host_name\" : \"host2\",\n            \"keytab_file_group\" : \"hadoop\",\n            \"keytab_file_group_access\" : \"\",\n            \"keytab_file_installed\" : \"true\",\n            \"keytab_file_mode\" : \"400\",\n            \"keytab_file_owner\" : \"yarn\",\n            \"keytab_file_owner_access\" : \"r\",\n            \"keytab_file_path\" : \"/etc/security/keytabs/nm.service.keytab\",\n            \"principal_local_username\" : \"yarn\",\n            \"principal_name\" : \"nm/host2@EXAMPLE.COM\",\n            \"principal_type\" : \"SERVICE\"\n          }\n        },\n        {\n          \"href\" : \"http://ambari:8080/api/v1/clusters/c1/hosts/host2/kerberos_identities/nn%2Fhost2%40EXAMPLE.COM\",\n          \"KerberosIdentity\" : {\n            \"cluster_name\" : \"c1\",\n            \"description\" : \"secondary_namenode_nn\",\n            \"host_name\" : \"host2\",\n            \"keytab_file_group\" : \"hadoop\",\n            \"keytab_file_group_access\" : \"\",\n            \"keytab_file_installed\" : \"true\",\n            \"keytab_file_mode\" : \"400\",\n            \"keytab_file_owner\" : \"hdfs\",\n            \"keytab_file_owner_access\" : \"r\",\n            \"keytab_file_path\" : \"/etc/security/keytabs/nn.service.keytab\",\n            \"principal_local_username\" : \"hdfs\",\n            \"principal_name\" : \"nn/host2@EXAMPLE.COM\",\n            \"principal_type\" : \"SERVICE\"\n          }\n        },\n        {\n          \"href\" : \"http://ambari:8080/api/v1/clusters/c1/hosts/host2/kerberos_identities/rm%2Fhost2%40EXAMPLE.COM\",\n          \"KerberosIdentity\" : {\n            \"cluster_name\" : \"c1\",\n            \"description\" : \"resource_manager_rm\",\n            \"host_name\" : \"host2\",\n            \"keytab_file_group\" : \"hadoop\",\n            \"keytab_file_group_access\" : \"\",\n            \"keytab_file_installed\" : \"true\",\n            \"keytab_file_mode\" : \"400\",\n            \"keytab_file_owner\" : \"yarn\",\n            \"keytab_file_owner_access\" : \"r\",\n            \"keytab_file_path\" : \"/etc/security/keytabs/rm.service.keytab\",\n            \"principal_local_username\" : \"yarn\",\n            \"principal_name\" : \"rm/host2@EXAMPLE.COM\",\n            \"principal_type\" : \"SERVICE\"\n          }\n        },\n        {\n          \"href\" : \"http://ambari:8080/api/v1/clusters/c1/hosts/host2/kerberos_identities/yarn%2Fhost2%40EXAMPLE.COM\",\n          \"KerberosIdentity\" : {\n            \"cluster_name\" : \"c1\",\n            \"description\" : \"app_timeline_server_yarn\",\n            \"host_name\" : \"host2\",\n            \"keytab_file_group\" : \"hadoop\",\n            \"keytab_file_group_access\" : \"\",\n            \"keytab_file_installed\" : \"true\",\n            \"keytab_file_mode\" : \"400\",\n            \"keytab_file_owner\" : \"yarn\",\n            \"keytab_file_owner_access\" : \"r\",\n            \"keytab_file_path\" : \"/etc/security/keytabs/yarn.service.keytab\",\n            \"principal_local_username\" : \"yarn\",\n            \"principal_name\" : \"yarn/host2@EXAMPLE.COM\",\n            \"principal_type\" : \"SERVICE\"\n          }\n        },\n        {\n          \"href\" : \"http://ambari:8080/api/v1/clusters/c1/hosts/host2/kerberos_identities/zookeeper%2Fhost2%40EXAMPLE.COM\",\n          \"KerberosIdentity\" : {\n            \"cluster_name\" : \"c1\",\n            \"description\" : \"zookeeper_zk\",\n            \"host_name\" : \"host2\",\n            \"keytab_file_group\" : \"hadoop\",\n            \"keytab_file_group_access\" : \"\",\n            \"keytab_file_installed\" : \"true\",\n            \"keytab_file_mode\" : \"400\",\n            \"keytab_file_owner\" : \"zookeeper\",\n            \"keytab_file_owner_access\" : \"r\",\n            \"keytab_file_path\" : \"/etc/security/keytabs/zk.service.keytab\",\n            \"principal_local_username\" : null,\n            \"principal_name\" : \"zookeeper/host2@EXAMPLE.COM\",\n            \"principal_type\" : \"SERVICE\"\n          }\n        }\n      ]\n    },\n    {\n      \"href\" : \"http://ambari:8080/api/v1/clusters/c1/hosts/host3\",\n      \"Hosts\" : {\n        \"cluster_name\" : \"c1\",\n        \"host_name\" : \"host3\"\n      },\n      \"kerberos_identities\" : [\n        {\n          \"href\" : \"http://ambari:8080/api/v1/clusters/c1/hosts/host3/kerberos_identities/HTTP%2Fhost3%40EXAMPLE.COM\",\n          \"KerberosIdentity\" : {\n            \"cluster_name\" : \"c1\",\n            \"description\" : \"/spnego\",\n            \"host_name\" : \"host3\",\n            \"keytab_file_group\" : \"hadoop\",\n            \"keytab_file_group_access\" : \"r\",\n            \"keytab_file_installed\" : \"true\",\n            \"keytab_file_mode\" : \"440\",\n            \"keytab_file_owner\" : \"root\",\n            \"keytab_file_owner_access\" : \"r\",\n            \"keytab_file_path\" : \"/etc/security/keytabs/spnego.service.keytab\",\n            \"principal_local_username\" : null,\n            \"principal_name\" : \"HTTP/host3@EXAMPLE.COM\",\n            \"principal_type\" : \"SERVICE\"\n          }\n        },\n        {\n          \"href\" : \"http://ambari:8080/api/v1/clusters/c1/hosts/host3/kerberos_identities/ambari-qa%40EXAMPLE.COM\",\n          \"KerberosIdentity\" : {\n            \"cluster_name\" : \"c1\",\n            \"description\" : \"/smokeuser\",\n            \"host_name\" : \"host3\",\n            \"keytab_file_group\" : \"hadoop\",\n            \"keytab_file_group_access\" : \"r\",\n            \"keytab_file_installed\" : \"true\",\n            \"keytab_file_mode\" : \"440\",\n            \"keytab_file_owner\" : \"ambari-qa\",\n            \"keytab_file_owner_access\" : \"r\",\n            \"keytab_file_path\" : \"/etc/security/keytabs/smokeuser.headless.keytab\",\n            \"principal_local_username\" : \"ambari-qa\",\n            \"principal_name\" : \"ambari-qa@EXAMPLE.COM\",\n            \"principal_type\" : \"USER\"\n          }\n        },\n        {\n          \"href\" : \"http://ambari:8080/api/v1/clusters/c1/hosts/host3/kerberos_identities/amshbase%2Fhost3%40EXAMPLE.COM\",\n          \"KerberosIdentity\" : {\n            \"cluster_name\" : \"c1\",\n            \"description\" : \"ams_hbase_master_hbase\",\n            \"host_name\" : \"host3\",\n            \"keytab_file_group\" : \"hadoop\",\n            \"keytab_file_group_access\" : \"\",\n            \"keytab_file_installed\" : \"true\",\n            \"keytab_file_mode\" : \"400\",\n            \"keytab_file_owner\" : \"ams\",\n            \"keytab_file_owner_access\" : \"r\",\n            \"keytab_file_path\" : \"/etc/security/keytabs/ams-hbase.master.keytab\",\n            \"principal_local_username\" : \"ams\",\n            \"principal_name\" : \"amshbase/host3@EXAMPLE.COM\",\n            \"principal_type\" : \"SERVICE\"\n          }\n        },\n        {\n          \"href\" : \"http://ambari:8080/api/v1/clusters/c1/hosts/host3/kerberos_identities/dn%2Fhost3%40EXAMPLE.COM\",\n          \"KerberosIdentity\" : {\n            \"cluster_name\" : \"c1\",\n            \"description\" : \"datanode_dn\",\n            \"host_name\" : \"host3\",\n            \"keytab_file_group\" : \"hadoop\",\n            \"keytab_file_group_access\" : \"\",\n            \"keytab_file_installed\" : \"true\",\n            \"keytab_file_mode\" : \"400\",\n            \"keytab_file_owner\" : \"hdfs\",\n            \"keytab_file_owner_access\" : \"r\",\n            \"keytab_file_path\" : \"/etc/security/keytabs/dn.service.keytab\",\n            \"principal_local_username\" : \"hdfs\",\n            \"principal_name\" : \"dn/host3@EXAMPLE.COM\",\n            \"principal_type\" : \"SERVICE\"\n          }\n        },\n        {\n          \"href\" : \"http://ambari:8080/api/v1/clusters/c1/hosts/host3/kerberos_identities/hdfs%40EXAMPLE.COM\",\n          \"KerberosIdentity\" : {\n            \"cluster_name\" : \"c1\",\n            \"description\" : \"/hdfs\",\n            \"host_name\" : \"host3\",\n            \"keytab_file_group\" : \"hadoop\",\n            \"keytab_file_group_access\" : \"r\",\n            \"keytab_file_installed\" : \"true\",\n            \"keytab_file_mode\" : \"440\",\n            \"keytab_file_owner\" : \"hdfs\",\n            \"keytab_file_owner_access\" : \"r\",\n            \"keytab_file_path\" : \"/etc/security/keytabs/hdfs.headless.keytab\",\n            \"principal_local_username\" : \"hdfs\",\n            \"principal_name\" : \"hdfs@EXAMPLE.COM\",\n            \"principal_type\" : \"USER\"\n          }\n        },\n        {\n          \"href\" : \"http://ambari:8080/api/v1/clusters/c1/hosts/host3/kerberos_identities/nm%2Fhost3%40EXAMPLE.COM\",\n          \"KerberosIdentity\" : {\n            \"cluster_name\" : \"c1\",\n            \"description\" : \"nodemanager_nm\",\n            \"host_name\" : \"host3\",\n            \"keytab_file_group\" : \"hadoop\",\n            \"keytab_file_group_access\" : \"\",\n            \"keytab_file_installed\" : \"true\",\n            \"keytab_file_mode\" : \"400\",\n            \"keytab_file_owner\" : \"yarn\",\n            \"keytab_file_owner_access\" : \"r\",\n            \"keytab_file_path\" : \"/etc/security/keytabs/nm.service.keytab\",\n            \"principal_local_username\" : \"yarn\",\n            \"principal_name\" : \"nm/host3@EXAMPLE.COM\",\n            \"principal_type\" : \"SERVICE\"\n          }\n        },\n        {\n          \"href\" : \"http://ambari:8080/api/v1/clusters/c1/hosts/host3/kerberos_identities/zookeeper%2Fhost3%40EXAMPLE.COM\",\n          \"KerberosIdentity\" : {\n            \"cluster_name\" : \"c1\",\n            \"description\" : \"ams_zookeeper\",\n            \"host_name\" : \"host3\",\n            \"keytab_file_group\" : \"hadoop\",\n            \"keytab_file_group_access\" : \"\",\n            \"keytab_file_installed\" : \"true\",\n            \"keytab_file_mode\" : \"400\",\n            \"keytab_file_owner\" : \"ams\",\n            \"keytab_file_owner_access\" : \"r\",\n            \"keytab_file_path\" : \"/etc/security/keytabs/zk.service.ams.keytab\",\n            \"principal_local_username\" : \"ams\",\n            \"principal_name\" : \"zookeeper/host3@EXAMPLE.COM\",\n            \"principal_type\" : \"SERVICE\"\n          }\n        }\n      ]\n    }\n  ]\n}\n{code}\n\n{code:title=GET /api/v1/clusters/c1/kerberos_identities?fields=*}\n{\n  \"href\" : \"http://ambari:8080/api/v1/clusters/c1/kerberos_identities?fields=*\",\n  \"items\" : [\n    {\n      \"href\" : \"http://ambari:8080/api/v1/clusters/c1/kerberos_identities/HTTP%2Fhost1%40EXAMPLE.COM\",\n      \"KerberosIdentity\" : {\n        \"cluster_name\" : \"c1\",\n        \"description\" : \"/spnego\",\n        \"host_name\" : \"host1\",\n        \"keytab_file_group\" : \"hadoop\",\n        \"keytab_file_group_access\" : \"r\",\n        \"keytab_file_installed\" : \"true\",\n        \"keytab_file_mode\" : \"440\",\n        \"keytab_file_owner\" : \"root\",\n        \"keytab_file_owner_access\" : \"r\",\n        \"keytab_file_path\" : \"/etc/security/keytabs/spnego.service.keytab\",\n        \"principal_local_username\" : null,\n        \"principal_name\" : \"HTTP/host1@EXAMPLE.COM\",\n        \"principal_type\" : \"SERVICE\"\n      }\n    },\n    {\n      \"href\" : \"http://ambari:8080/api/v1/clusters/c1/kerberos_identities/ambari-qa%40EXAMPLE.COM\",\n      \"KerberosIdentity\" : {\n        \"cluster_name\" : \"c1\",\n        \"description\" : \"/smokeuser\",\n        \"host_name\" : \"host1\",\n        \"keytab_file_group\" : \"hadoop\",\n        \"keytab_file_group_access\" : \"r\",\n        \"keytab_file_installed\" : \"true\",\n        \"keytab_file_mode\" : \"440\",\n        \"keytab_file_owner\" : \"ambari-qa\",\n        \"keytab_file_owner_access\" : \"r\",\n        \"keytab_file_path\" : \"/etc/security/keytabs/smokeuser.headless.keytab\",\n        \"principal_local_username\" : \"ambari-qa\",\n        \"principal_name\" : \"ambari-qa@EXAMPLE.COM\",\n        \"principal_type\" : \"USER\"\n      }\n    },\n    {\n      \"href\" : \"http://ambari:8080/api/v1/clusters/c1/kerberos_identities/dn%2Fhost1%40EXAMPLE.COM\",\n      \"KerberosIdentity\" : {\n        \"cluster_name\" : \"c1\",\n        \"description\" : \"datanode_dn\",\n        \"host_name\" : \"host1\",\n        \"keytab_file_group\" : \"hadoop\",\n        \"keytab_file_group_access\" : \"\",\n        \"keytab_file_installed\" : \"true\",\n        \"keytab_file_mode\" : \"400\",\n        \"keytab_file_owner\" : \"hdfs\",\n        \"keytab_file_owner_access\" : \"r\",\n        \"keytab_file_path\" : \"/etc/security/keytabs/dn.service.keytab\",\n        \"principal_local_username\" : \"hdfs\",\n        \"principal_name\" : \"dn/host1@EXAMPLE.COM\",\n        \"principal_type\" : \"SERVICE\"\n      }\n    },\n    {\n      \"href\" : \"http://ambari:8080/api/v1/clusters/c1/kerberos_identities/hdfs%40EXAMPLE.COM\",\n      \"KerberosIdentity\" : {\n        \"cluster_name\" : \"c1\",\n        \"description\" : \"/hdfs\",\n        \"host_name\" : \"host1\",\n        \"keytab_file_group\" : \"hadoop\",\n        \"keytab_file_group_access\" : \"r\",\n        \"keytab_file_installed\" : \"true\",\n        \"keytab_file_mode\" : \"440\",\n        \"keytab_file_owner\" : \"hdfs\",\n        \"keytab_file_owner_access\" : \"r\",\n        \"keytab_file_path\" : \"/etc/security/keytabs/hdfs.headless.keytab\",\n        \"principal_local_username\" : \"hdfs\",\n        \"principal_name\" : \"hdfs@EXAMPLE.COM\",\n        \"principal_type\" : \"USER\"\n      }\n    },\n    {\n      \"href\" : \"http://ambari:8080/api/v1/clusters/c1/kerberos_identities/nm%2Fhost1%40EXAMPLE.COM\",\n      \"KerberosIdentity\" : {\n        \"cluster_name\" : \"c1\",\n        \"description\" : \"nodemanager_nm\",\n        \"host_name\" : \"host1\",\n        \"keytab_file_group\" : \"hadoop\",\n        \"keytab_file_group_access\" : \"\",\n        \"keytab_file_installed\" : \"true\",\n        \"keytab_file_mode\" : \"400\",\n        \"keytab_file_owner\" : \"yarn\",\n        \"keytab_file_owner_access\" : \"r\",\n        \"keytab_file_path\" : \"/etc/security/keytabs/nm.service.keytab\",\n        \"principal_local_username\" : \"yarn\",\n        \"principal_name\" : \"nm/host1@EXAMPLE.COM\",\n        \"principal_type\" : \"SERVICE\"\n      }\n    },\n    {\n      \"href\" : \"http://ambari:8080/api/v1/clusters/c1/kerberos_identities/nn%2Fhost1%40EXAMPLE.COM\",\n      \"KerberosIdentity\" : {\n        \"cluster_name\" : \"c1\",\n        \"description\" : \"namenode_nn\",\n        \"host_name\" : \"host1\",\n        \"keytab_file_group\" : \"hadoop\",\n        \"keytab_file_group_access\" : \"\",\n        \"keytab_file_installed\" : \"true\",\n        \"keytab_file_mode\" : \"400\",\n        \"keytab_file_owner\" : \"hdfs\",\n        \"keytab_file_owner_access\" : \"r\",\n        \"keytab_file_path\" : \"/etc/security/keytabs/nn.service.keytab\",\n        \"principal_local_username\" : \"hdfs\",\n        \"principal_name\" : \"nn/host1@EXAMPLE.COM\",\n        \"principal_type\" : \"SERVICE\"\n      }\n    },\n    {\n      \"href\" : \"http://ambari:8080/api/v1/clusters/c1/kerberos_identities/zookeeper%2Fhost1%40EXAMPLE.COM\",\n      \"KerberosIdentity\" : {\n        \"cluster_name\" : \"c1\",\n        \"description\" : \"zookeeper_zk\",\n        \"host_name\" : \"host1\",\n        \"keytab_file_group\" : \"hadoop\",\n        \"keytab_file_group_access\" : \"\",\n        \"keytab_file_installed\" : \"true\",\n        \"keytab_file_mode\" : \"400\",\n        \"keytab_file_owner\" : \"zookeeper\",\n        \"keytab_file_owner_access\" : \"r\",\n        \"keytab_file_path\" : \"/etc/security/keytabs/zk.service.keytab\",\n        \"principal_local_username\" : null,\n        \"principal_name\" : \"zookeeper/host1@EXAMPLE.COM\",\n        \"principal_type\" : \"SERVICE\"\n      }\n    },\n    {\n      \"href\" : \"http://ambari:8080/api/v1/clusters/c1/kerberos_identities/HTTP%2Fhost2%40EXAMPLE.COM\",\n      \"KerberosIdentity\" : {\n        \"cluster_name\" : \"c1\",\n        \"description\" : \"/spnego\",\n        \"host_name\" : \"host2\",\n        \"keytab_file_group\" : \"hadoop\",\n        \"keytab_file_group_access\" : \"r\",\n        \"keytab_file_installed\" : \"true\",\n        \"keytab_file_mode\" : \"440\",\n        \"keytab_file_owner\" : \"root\",\n        \"keytab_file_owner_access\" : \"r\",\n        \"keytab_file_path\" : \"/etc/security/keytabs/spnego.service.keytab\",\n        \"principal_local_username\" : null,\n        \"principal_name\" : \"HTTP/host2@EXAMPLE.COM\",\n        \"principal_type\" : \"SERVICE\"\n      }\n    },\n    {\n      \"href\" : \"http://ambari:8080/api/v1/clusters/c1/kerberos_identities/ambari-qa%40EXAMPLE.COM\",\n      \"KerberosIdentity\" : {\n        \"cluster_name\" : \"c1\",\n        \"description\" : \"/smokeuser\",\n        \"host_name\" : \"host2\",\n        \"keytab_file_group\" : \"hadoop\",\n        \"keytab_file_group_access\" : \"r\",\n        \"keytab_file_installed\" : \"true\",\n        \"keytab_file_mode\" : \"440\",\n        \"keytab_file_owner\" : \"ambari-qa\",\n        \"keytab_file_owner_access\" : \"r\",\n        \"keytab_file_path\" : \"/etc/security/keytabs/smokeuser.headless.keytab\",\n        \"principal_local_username\" : \"ambari-qa\",\n        \"principal_name\" : \"ambari-qa@EXAMPLE.COM\",\n        \"principal_type\" : \"USER\"\n      }\n    },\n    {\n      \"href\" : \"http://ambari:8080/api/v1/clusters/c1/kerberos_identities/dn%2Fhost2%40EXAMPLE.COM\",\n      \"KerberosIdentity\" : {\n        \"cluster_name\" : \"c1\",\n        \"description\" : \"datanode_dn\",\n        \"host_name\" : \"host2\",\n        \"keytab_file_group\" : \"hadoop\",\n        \"keytab_file_group_access\" : \"\",\n        \"keytab_file_installed\" : \"true\",\n        \"keytab_file_mode\" : \"400\",\n        \"keytab_file_owner\" : \"hdfs\",\n        \"keytab_file_owner_access\" : \"r\",\n        \"keytab_file_path\" : \"/etc/security/keytabs/dn.service.keytab\",\n        \"principal_local_username\" : \"hdfs\",\n        \"principal_name\" : \"dn/host2@EXAMPLE.COM\",\n        \"principal_type\" : \"SERVICE\"\n      }\n    },\n    {\n      \"href\" : \"http://ambari:8080/api/v1/clusters/c1/kerberos_identities/hdfs%40EXAMPLE.COM\",\n      \"KerberosIdentity\" : {\n        \"cluster_name\" : \"c1\",\n        \"description\" : \"/hdfs\",\n        \"host_name\" : \"host2\",\n        \"keytab_file_group\" : \"hadoop\",\n        \"keytab_file_group_access\" : \"r\",\n        \"keytab_file_installed\" : \"true\",\n        \"keytab_file_mode\" : \"440\",\n        \"keytab_file_owner\" : \"hdfs\",\n        \"keytab_file_owner_access\" : \"r\",\n        \"keytab_file_path\" : \"/etc/security/keytabs/hdfs.headless.keytab\",\n        \"principal_local_username\" : \"hdfs\",\n        \"principal_name\" : \"hdfs@EXAMPLE.COM\",\n        \"principal_type\" : \"USER\"\n      }\n    },\n    {\n      \"href\" : \"http://ambari:8080/api/v1/clusters/c1/kerberos_identities/jhs%2Fhost2%40EXAMPLE.COM\",\n      \"KerberosIdentity\" : {\n        \"cluster_name\" : \"c1\",\n        \"description\" : \"history_server_jhs\",\n        \"host_name\" : \"host2\",\n        \"keytab_file_group\" : \"hadoop\",\n        \"keytab_file_group_access\" : \"\",\n        \"keytab_file_installed\" : \"true\",\n        \"keytab_file_mode\" : \"400\",\n        \"keytab_file_owner\" : \"mapred\",\n        \"keytab_file_owner_access\" : \"r\",\n        \"keytab_file_path\" : \"/etc/security/keytabs/jhs.service.keytab\",\n        \"principal_local_username\" : \"mapred\",\n        \"principal_name\" : \"jhs/host2@EXAMPLE.COM\",\n        \"principal_type\" : \"SERVICE\"\n      }\n    },\n    {\n      \"href\" : \"http://ambari:8080/api/v1/clusters/c1/kerberos_identities/nm%2Fhost2%40EXAMPLE.COM\",\n      \"KerberosIdentity\" : {\n        \"cluster_name\" : \"c1\",\n        \"description\" : \"nodemanager_nm\",\n        \"host_name\" : \"host2\",\n        \"keytab_file_group\" : \"hadoop\",\n        \"keytab_file_group_access\" : \"\",\n        \"keytab_file_installed\" : \"true\",\n        \"keytab_file_mode\" : \"400\",\n        \"keytab_file_owner\" : \"yarn\",\n        \"keytab_file_owner_access\" : \"r\",\n        \"keytab_file_path\" : \"/etc/security/keytabs/nm.service.keytab\",\n        \"principal_local_username\" : \"yarn\",\n        \"principal_name\" : \"nm/host2@EXAMPLE.COM\",\n        \"principal_type\" : \"SERVICE\"\n      }\n    },\n    {\n      \"href\" : \"http://ambari:8080/api/v1/clusters/c1/kerberos_identities/nn%2Fhost2%40EXAMPLE.COM\",\n      \"KerberosIdentity\" : {\n        \"cluster_name\" : \"c1\",\n        \"description\" : \"secondary_namenode_nn\",\n        \"host_name\" : \"host2\",\n        \"keytab_file_group\" : \"hadoop\",\n        \"keytab_file_group_access\" : \"\",\n        \"keytab_file_installed\" : \"true\",\n        \"keytab_file_mode\" : \"400\",\n        \"keytab_file_owner\" : \"hdfs\",\n        \"keytab_file_owner_access\" : \"r\",\n        \"keytab_file_path\" : \"/etc/security/keytabs/nn.service.keytab\",\n        \"principal_local_username\" : \"hdfs\",\n        \"principal_name\" : \"nn/host2@EXAMPLE.COM\",\n        \"principal_type\" : \"SERVICE\"\n      }\n    },\n    {\n      \"href\" : \"http://ambari:8080/api/v1/clusters/c1/kerberos_identities/rm%2Fhost2%40EXAMPLE.COM\",\n      \"KerberosIdentity\" : {\n        \"cluster_name\" : \"c1\",\n        \"description\" : \"resource_manager_rm\",\n        \"host_name\" : \"host2\",\n        \"keytab_file_group\" : \"hadoop\",\n        \"keytab_file_group_access\" : \"\",\n        \"keytab_file_installed\" : \"true\",\n        \"keytab_file_mode\" : \"400\",\n        \"keytab_file_owner\" : \"yarn\",\n        \"keytab_file_owner_access\" : \"r\",\n        \"keytab_file_path\" : \"/etc/security/keytabs/rm.service.keytab\",\n        \"principal_local_username\" : \"yarn\",\n        \"principal_name\" : \"rm/host2@EXAMPLE.COM\",\n        \"principal_type\" : \"SERVICE\"\n      }\n    },\n    {\n      \"href\" : \"http://ambari:8080/api/v1/clusters/c1/kerberos_identities/yarn%2Fhost2%40EXAMPLE.COM\",\n      \"KerberosIdentity\" : {\n        \"cluster_name\" : \"c1\",\n        \"description\" : \"app_timeline_server_yarn\",\n        \"host_name\" : \"host2\",\n        \"keytab_file_group\" : \"hadoop\",\n        \"keytab_file_group_access\" : \"\",\n        \"keytab_file_installed\" : \"true\",\n        \"keytab_file_mode\" : \"400\",\n        \"keytab_file_owner\" : \"yarn\",\n        \"keytab_file_owner_access\" : \"r\",\n        \"keytab_file_path\" : \"/etc/security/keytabs/yarn.service.keytab\",\n        \"principal_local_username\" : \"yarn\",\n        \"principal_name\" : \"yarn/host2@EXAMPLE.COM\",\n        \"principal_type\" : \"SERVICE\"\n      }\n    },\n    {\n      \"href\" : \"http://ambari:8080/api/v1/clusters/c1/kerberos_identities/zookeeper%2Fhost2%40EXAMPLE.COM\",\n      \"KerberosIdentity\" : {\n        \"cluster_name\" : \"c1\",\n        \"description\" : \"zookeeper_zk\",\n        \"host_name\" : \"host2\",\n        \"keytab_file_group\" : \"hadoop\",\n        \"keytab_file_group_access\" : \"\",\n        \"keytab_file_installed\" : \"true\",\n        \"keytab_file_mode\" : \"400\",\n        \"keytab_file_owner\" : \"zookeeper\",\n        \"keytab_file_owner_access\" : \"r\",\n        \"keytab_file_path\" : \"/etc/security/keytabs/zk.service.keytab\",\n        \"principal_local_username\" : null,\n        \"principal_name\" : \"zookeeper/host2@EXAMPLE.COM\",\n        \"principal_type\" : \"SERVICE\"\n      }\n    },\n    {\n      \"href\" : \"http://ambari:8080/api/v1/clusters/c1/kerberos_identities/HTTP%2Fhost3%40EXAMPLE.COM\",\n      \"KerberosIdentity\" : {\n        \"cluster_name\" : \"c1\",\n        \"description\" : \"/spnego\",\n        \"host_name\" : \"host3\",\n        \"keytab_file_group\" : \"hadoop\",\n        \"keytab_file_group_access\" : \"r\",\n        \"keytab_file_installed\" : \"true\",\n        \"keytab_file_mode\" : \"440\",\n        \"keytab_file_owner\" : \"root\",\n        \"keytab_file_owner_access\" : \"r\",\n        \"keytab_file_path\" : \"/etc/security/keytabs/spnego.service.keytab\",\n        \"principal_local_username\" : null,\n        \"principal_name\" : \"HTTP/host3@EXAMPLE.COM\",\n        \"principal_type\" : \"SERVICE\"\n      }\n    },\n    {\n      \"href\" : \"http://ambari:8080/api/v1/clusters/c1/kerberos_identities/ambari-qa%40EXAMPLE.COM\",\n      \"KerberosIdentity\" : {\n        \"cluster_name\" : \"c1\",\n        \"description\" : \"/smokeuser\",\n        \"host_name\" : \"host3\",\n        \"keytab_file_group\" : \"hadoop\",\n        \"keytab_file_group_access\" : \"r\",\n        \"keytab_file_installed\" : \"true\",\n        \"keytab_file_mode\" : \"440\",\n        \"keytab_file_owner\" : \"ambari-qa\",\n        \"keytab_file_owner_access\" : \"r\",\n        \"keytab_file_path\" : \"/etc/security/keytabs/smokeuser.headless.keytab\",\n        \"principal_local_username\" : \"ambari-qa\",\n        \"principal_name\" : \"ambari-qa@EXAMPLE.COM\",\n        \"principal_type\" : \"USER\"\n      }\n    },\n    {\n      \"href\" : \"http://ambari:8080/api/v1/clusters/c1/kerberos_identities/amshbase%2Fhost3%40EXAMPLE.COM\",\n      \"KerberosIdentity\" : {\n        \"cluster_name\" : \"c1\",\n        \"description\" : \"ams_hbase_master_hbase\",\n        \"host_name\" : \"host3\",\n        \"keytab_file_group\" : \"hadoop\",\n        \"keytab_file_group_access\" : \"\",\n        \"keytab_file_installed\" : \"true\",\n        \"keytab_file_mode\" : \"400\",\n        \"keytab_file_owner\" : \"ams\",\n        \"keytab_file_owner_access\" : \"r\",\n        \"keytab_file_path\" : \"/etc/security/keytabs/ams-hbase.master.keytab\",\n        \"principal_local_username\" : \"ams\",\n        \"principal_name\" : \"amshbase/host3@EXAMPLE.COM\",\n        \"principal_type\" : \"SERVICE\"\n      }\n    },\n    {\n      \"href\" : \"http://ambari:8080/api/v1/clusters/c1/kerberos_identities/dn%2Fhost3%40EXAMPLE.COM\",\n      \"KerberosIdentity\" : {\n        \"cluster_name\" : \"c1\",\n        \"description\" : \"datanode_dn\",\n        \"host_name\" : \"host3\",\n        \"keytab_file_group\" : \"hadoop\",\n        \"keytab_file_group_access\" : \"\",\n        \"keytab_file_installed\" : \"true\",\n        \"keytab_file_mode\" : \"400\",\n        \"keytab_file_owner\" : \"hdfs\",\n        \"keytab_file_owner_access\" : \"r\",\n        \"keytab_file_path\" : \"/etc/security/keytabs/dn.service.keytab\",\n        \"principal_local_username\" : \"hdfs\",\n        \"principal_name\" : \"dn/host3@EXAMPLE.COM\",\n        \"principal_type\" : \"SERVICE\"\n      }\n    },\n    {\n      \"href\" : \"http://ambari:8080/api/v1/clusters/c1/kerberos_identities/hdfs%40EXAMPLE.COM\",\n      \"KerberosIdentity\" : {\n        \"cluster_name\" : \"c1\",\n        \"description\" : \"/hdfs\",\n        \"host_name\" : \"host3\",\n        \"keytab_file_group\" : \"hadoop\",\n        \"keytab_file_group_access\" : \"r\",\n        \"keytab_file_installed\" : \"true\",\n        \"keytab_file_mode\" : \"440\",\n        \"keytab_file_owner\" : \"hdfs\",\n        \"keytab_file_owner_access\" : \"r\",\n        \"keytab_file_path\" : \"/etc/security/keytabs/hdfs.headless.keytab\",\n        \"principal_local_username\" : \"hdfs\",\n        \"principal_name\" : \"hdfs@EXAMPLE.COM\",\n        \"principal_type\" : \"USER\"\n      }\n    },\n    {\n      \"href\" : \"http://ambari:8080/api/v1/clusters/c1/kerberos_identities/nm%2Fhost3%40EXAMPLE.COM\",\n      \"KerberosIdentity\" : {\n        \"cluster_name\" : \"c1\",\n        \"description\" : \"nodemanager_nm\",\n        \"host_name\" : \"host3\",\n        \"keytab_file_group\" : \"hadoop\",\n        \"keytab_file_group_access\" : \"\",\n        \"keytab_file_installed\" : \"true\",\n        \"keytab_file_mode\" : \"400\",\n        \"keytab_file_owner\" : \"yarn\",\n        \"keytab_file_owner_access\" : \"r\",\n        \"keytab_file_path\" : \"/etc/security/keytabs/nm.service.keytab\",\n        \"principal_local_username\" : \"yarn\",\n        \"principal_name\" : \"nm/host3@EXAMPLE.COM\",\n        \"principal_type\" : \"SERVICE\"\n      }\n    },\n    {\n      \"href\" : \"http://ambari:8080/api/v1/clusters/c1/kerberos_identities/zookeeper%2Fhost3%40EXAMPLE.COM\",\n      \"KerberosIdentity\" : {\n        \"cluster_name\" : \"c1\",\n        \"description\" : \"ams_zookeeper\",\n        \"host_name\" : \"host3\",\n        \"keytab_file_group\" : \"hadoop\",\n        \"keytab_file_group_access\" : \"\",\n        \"keytab_file_installed\" : \"true\",\n        \"keytab_file_mode\" : \"400\",\n        \"keytab_file_owner\" : \"ams\",\n        \"keytab_file_owner_access\" : \"r\",\n        \"keytab_file_path\" : \"/etc/security/keytabs/zk.service.ams.keytab\",\n        \"principal_local_username\" : \"ams\",\n        \"principal_name\" : \"zookeeper/host3@EXAMPLE.COM\",\n        \"principal_type\" : \"SERVICE\"\n      }\n    }\n  ]\n}\n{code}\n\n{code:title=GET /api/v1/clusters/c1/kerberos_identities?fields=*&format=csv}\nhost,description,principal name,principal type,local username,keytab file path,keytab file owner,keytab file owner access,keytab file group,keytab file group access,keytab file mode,keytab file installed\nhost1,/spnego,HTTP/host1@EXAMPLE.COM,SERVICE,,/etc/security/keytabs/spnego.service.keytab,root,r,hadoop,r,440,true\nhost1,/smokeuser,ambari-qa@EXAMPLE.COM,USER,ambari-qa,/etc/security/keytabs/smokeuser.headless.keytab,ambari-qa,r,hadoop,r,440,true\nhost1,datanode_dn,dn/host1@EXAMPLE.COM,SERVICE,hdfs,/etc/security/keytabs/dn.service.keytab,hdfs,r,hadoop,,400,true\nhost1,/hdfs,hdfs@EXAMPLE.COM,USER,hdfs,/etc/security/keytabs/hdfs.headless.keytab,hdfs,r,hadoop,r,440,true\nhost1,nodemanager_nm,nm/host1@EXAMPLE.COM,SERVICE,yarn,/etc/security/keytabs/nm.service.keytab,yarn,r,hadoop,,400,true\nhost1,namenode_nn,nn/host1@EXAMPLE.COM,SERVICE,hdfs,/etc/security/keytabs/nn.service.keytab,hdfs,r,hadoop,,400,true\nhost1,zookeeper_zk,zookeeper/host1@EXAMPLE.COM,SERVICE,,/etc/security/keytabs/zk.service.keytab,zookeeper,r,hadoop,,400,true\nhost2,/spnego,HTTP/host2@EXAMPLE.COM,SERVICE,,/etc/security/keytabs/spnego.service.keytab,root,r,hadoop,r,440,true\nhost2,/smokeuser,ambari-qa@EXAMPLE.COM,USER,ambari-qa,/etc/security/keytabs/smokeuser.headless.keytab,ambari-qa,r,hadoop,r,440,true\nhost2,datanode_dn,dn/host2@EXAMPLE.COM,SERVICE,hdfs,/etc/security/keytabs/dn.service.keytab,hdfs,r,hadoop,,400,true\nhost2,/hdfs,hdfs@EXAMPLE.COM,USER,hdfs,/etc/security/keytabs/hdfs.headless.keytab,hdfs,r,hadoop,r,440,true\nhost2,history_server_jhs,jhs/host2@EXAMPLE.COM,SERVICE,mapred,/etc/security/keytabs/jhs.service.keytab,mapred,r,hadoop,,400,true\nhost2,nodemanager_nm,nm/host2@EXAMPLE.COM,SERVICE,yarn,/etc/security/keytabs/nm.service.keytab,yarn,r,hadoop,,400,true\nhost2,secondary_namenode_nn,nn/host2@EXAMPLE.COM,SERVICE,hdfs,/etc/security/keytabs/nn.service.keytab,hdfs,r,hadoop,,400,true\nhost2,resource_manager_rm,rm/host2@EXAMPLE.COM,SERVICE,yarn,/etc/security/keytabs/rm.service.keytab,yarn,r,hadoop,,400,true\nhost2,app_timeline_server_yarn,yarn/host2@EXAMPLE.COM,SERVICE,yarn,/etc/security/keytabs/yarn.service.keytab,yarn,r,hadoop,,400,true\nhost2,zookeeper_zk,zookeeper/host2@EXAMPLE.COM,SERVICE,,/etc/security/keytabs/zk.service.keytab,zookeeper,r,hadoop,,400,true\nhost3,/spnego,HTTP/host3@EXAMPLE.COM,SERVICE,,/etc/security/keytabs/spnego.service.keytab,root,r,hadoop,r,440,true\nhost3,/smokeuser,ambari-qa@EXAMPLE.COM,USER,ambari-qa,/etc/security/keytabs/smokeuser.headless.keytab,ambari-qa,r,hadoop,r,440,true\nhost3,ams_hbase_master_hbase,amshbase/host3@EXAMPLE.COM,SERVICE,ams,/etc/security/keytabs/ams-hbase.master.keytab,ams,r,hadoop,,400,true\nhost3,datanode_dn,dn/host3@EXAMPLE.COM,SERVICE,hdfs,/etc/security/keytabs/dn.service.keytab,hdfs,r,hadoop,,400,true\nhost3,/hdfs,hdfs@EXAMPLE.COM,USER,hdfs,/etc/security/keytabs/hdfs.headless.keytab,hdfs,r,hadoop,r,440,true\nhost3,nodemanager_nm,nm/host3@EXAMPLE.COM,SERVICE,yarn,/etc/security/keytabs/nm.service.keytab,yarn,r,hadoop,,400,true\nhost3,ams_zookeeper,zookeeper/host3@EXAMPLE.COM,SERVICE,ams,/etc/security/keytabs/zk.service.ams.keytab,ams,r,hadoop,,400,true\n{code}\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Add the ability to obtain details about required Kerberos identities"
   },
   {
      "_id": "12821690",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-04-16 21:47:26",
      "description": "When attempting to restart the HDFS NameNode after running the Kerberos wizard to enable Kerberos, the NameNode fails to startup.  \n\nThe underlying failure in the ambari-agent appears to be:\n\n\"Traceback (most recent call last):\n  File \"/var/lib/ambari-agent/cache/common-services/HDFS/2.1.0.2.0/package/scripts/namenode.py\", line 298, in <module>\n    NameNode().execute()\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/script/script.py\", line 214, in execute\n    method(env)\n  File \"/var/lib/ambari-agent/cache/common-services/HDFS/2.1.0.2.0/package/scripts/namenode.py\", line 72, in start\n    namenode(action=\"start\", rolling_restart=rolling_restart, env=env)\n  File \"/usr/lib/python2.6/site-packages/ambari_commons/os_family_impl.py\", line 89, in thunk\n    return fn(*args, **kwargs)\n  File \"/var/lib/ambari-agent/cache/common-services/HDFS/2.1.0.2.0/package/scripts/hdfs_namenode.py\", line 38, in namenode\n    setup_ranger_hdfs()\n  File \"/var/lib/ambari-agent/cache/common-services/HDFS/2.1.0.2.0/package/scripts/setup_ranger_hdfs.py\", line 66, in setup_ranger_hdfs\n    hdfs_repo_data = hdfs_repo_properties()\n  File \"/var/lib/ambari-agent/cache/common-services/HDFS/2.1.0.2.0/package/scripts/setup_ranger_hdfs.py\", line 194, in hdfs_repo_properties\n    config_dict['dfs.datanode.kerberos.principal'] = params._dn_principal_name\nAttributeError: 'module' object has no attribute '_dn_principal_name'\"\n\nThis keeps the HDFS NameNode from starting up properly after Kerberos is Enabled, and this seems to keep the process of Enabling Kerberos from completing.  \n\nThe problem appears to be a Python coding issue where _private_ variables (declared with a leading underscore) are not imported from {{common-services/HDFS/2.1.0.2.0/package/scripts/params_linux.py}} into {{common-services/HDFS/2.1.0.2.0/package/scripts/setup_ranger_hdfs.py}}.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "NameNode Restart fails after attempt to Kerberize Cluster"
   },
   {
      "_id": "12820969",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-04-14 21:18:58",
      "description": "In some environments, the Kerberos Client packages are already installed on the machines and the operator does not want to install the OS kerberos client packages.\n\nAmbari should provide an option in the Enable Kerberos Wizard to not install Kerberos Clients on the machines.\n\nUnder the Advanced krb.conf section, at the bottom, expose this checkbox for this option:\n\n{code}\n[ ] Do not install Kerberos Client packages\n{code}\n\nAfter enabling Kerberos, this configuration option should be visible under the Services > Kerberos > Configs.\n\nThis would instruct Ambari to not install the Kerberos Client packages when installing the Kerberos Client component. We can still have Ambari install the Kerberos Client component, just circumvent the install packages.\n\n*Note:* If selected, it is assumed that the user will install packages containing executables compatible with the MIT Kerberos 5 version 1.10.3",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Provide option to not install Kerberos Client packages"
   },
   {
      "_id": "12820902",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-04-14 18:46:43",
      "description": "Add the ability to enable Kerberos and not manage identities.  This should be done by allowing a user to specify whether all relevant Kerberos identities _should_ or _should not_ be managed by Ambari.  \n\nA *kerberos-env* property named *manage_identities* is to be added where its value may be either _true_ or _false_.  By default the value is _true_ (or rather _not false_).  \n\nIf _not false_, Ambari will access the registered KDC to create, update, and delete Kerberos identities as needed.  Ambari will also create, distribute, and delete keytab files as needed. Because of this, the KDC administrator credentials are required. This is the current behavior of Ambari 2.0.0.\n\nIf _false_, Ambari will *not* access the registered KDC to create, update, or delete Kerberos identities.  It will also *not* create, distribute, or delete keytab files. Not KDC administrator credentials will be needed.\n\nNote: a lot of this work has been done for AMBARI-10305.  A current known problem with the solution for AMBARI-10305 is that the Kerberos service check fails when kerberos-env/manage_identities is false due to missing data since the special smoke user was not created.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Add the ability to enable Kerberos and not manage identities"
   },
   {
      "_id": "12820899",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323904",
            "id": "12323904",
            "name": "alerts",
            "description": "Ambari Alerts System"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-04-14 18:41:23",
      "description": "Provide an option for users that want to enable Kerberos in the cluster via Ambari but do not want any automation. With this option, ambari will not require any access to the KDC, will not install kerberos clients, will not attempt to generate any principals or keytabs and will not distribute any keytabs. Keytab regeneration will not be available, and when there are changes to the cluster (add service, add/remove/change host), the user is responsible for creating principals and making sure the appropriate keytabs are in place on the host for proper cluster function (although Ambari should handle updating any configs).\n\nEffectively, this above option provides a manual Kerberos option for users that are looking to have the similar \"hands-off\" ambari kerberos experience of 1.7.0 or earlier.\n\nOn the Kerberos Wizard, provide an option (below Existing MIT KDC and Existing Active Directory):\n\n[ ] Manage Kerberos principals and keytabs manually\n\nWhich will send the wizard thru a path that does not prompt for KDC information, or attempt to install clients or create principals/keytabs. The user should have a chance to Configure Identities as part of the wizard and the wizard will push the configs, performs restarts, etc. Users should have an option to download a CSV of principals, keytabs, hosts, locations, permissions, ownership.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/15",
         "id": "15",
         "description": "Created by Jira Software - do not edit or delete. Issue type for a big user story that needs to be broken down.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21137&avatarType=issuetype",
         "name": "Epic",
         "subtask": false,
         "avatarId": 21137
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Manually enable Kerberos security"
   },
   {
      "_id": "12820294",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-04-11 11:07:32",
      "description": "PROBLEM: Ambari is unable to start services after running the Enable Security wizard on a cluster that uses a non-standard path to the Kerberos utilities, such as kinit.\n\nSTEPS TO REPRODUCE: \n1. Start with non-Kerberized cluster (2.2 Sandbox works fine)\n2. Move Kerberos utilities from /usr/bin/ to a new location, example: /usr/myorg/bin/\n3. Run 'Enable Security' wizard in Ambari, specify new path for kinit, Apply\n4. Watch 'Start All Services' step fail\n5. Attempt to 'Restart all components with Stale Configs for HDFS,' which fails with the following error:\n\nFail: Execution of ' -kt /etc/security/keytabs/hdfs.headless.keytab hdfs' returned 127. -bash: -kt: command not found\n\nDue to the error that occurs with trying to manually restart the HDFS service, it seems like kinit_path_local is empty when the path to kinit is modified. It looks like each service uses the function from:\n./ambari-common/src/main/python/resource_management/libraries/functions/get_kinit_path.py\n\nBut typically only these three hardcoded paths are passed to that function:\n/usr/bin, /usr/kerberos/bin, /usr/sbin\n\nThe custom path defined in Ambari is never passed to that function, so the result is always empty.\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Ambari unable to start services using non-default kinit_path_local"
   },
   {
      "_id": "12787208",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-04-01 00:35:43",
      "description": "Attempted to disable kerb, fails on step to unkerberize because KDC admin is locked out.\n\nClick retry, can't make it past that.\n\nNeed option to skip and finish \"disable kerberos\" even if Ambari cannot get the principals cleaned up (i.e. cannot access the KDC) Losing access to the KDC and attempting to disable where ambari can't clean-up the principals should be a skip'able step. User should still be able to get to a clean, not-enabled-kerberos-ambari-state w/o accessing the KDC.\n\n*Solution*\nAdd a flag to the kerberos-env configuration to specify whether Kerberos identities should be managed by Ambari (true, default) or not (false).  This flag is to be overridable via a _directive_ like {{manage_identities=false}} when disabling Kerberos, which will skip over any KDC administrative processes. ",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: during disable, need option skip if unable to access KDC to remove principals"
   },
   {
      "_id": "12786203",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-03-27 13:51:24",
      "description": "Principal and Keytab configuration specifications are ignored when disabling Kerberos and thus they are not updated or removed as needed.\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Principal and Keytab configuration specifications are ignored when disabling Kerberos"
   },
   {
      "_id": "12784826",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-03-23 14:36:52",
      "description": "From nimbus.log\n{code}\n java.lang.NullPointerException: null\n\tat backtype.storm.security.auth.authorizer.SimpleACLAuthorizer.permit(SimpleACLAuthorizer.java:93) ~[storm-core-0.9.3.2.2.3.0-2611.jar:0.9.3.2.2.3.0-2611]\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.7.0_67]\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) ~[na:1.7.0_67]\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.7.0_67]\n\tat java.lang.reflect.Method.invoke(Method.java:606) ~[na:1.7.0_67]\n\tat clojure.lang.Reflector.invokeMatchingMethod(Reflector.java:93) ~[clojure-1.5.1.jar:na]\n\tat clojure.lang.Reflector.invokeInstanceMethod(Reflector.java:28) ~[clojure-1.5.1.jar:na]\n\tat backtype.storm.daemon.nimbus$check_authorization_BANG_.invoke(nimbus.clj:773) ~[storm-core-0.9.3.2.2.3.0-2611.jar:0.9.3.2.2.3.0-2611]\n\tat backtype.storm.daemon.nimbus$check_authorization_BANG_.invoke(nimbus.clj:777) ~[storm-core-0.9.3.2.2.3.0-2611.jar:0.9.3.2.2.3.0-2611]\n\tat backtype.storm.daemon.nimbus$fn__4017$exec_fn__1597__auto__$reify__4032.getClusterInfo(nimbus.clj:1215) ~[storm-core-0.9.3.2.2.3.0-2611.jar:0.9.3.2.2.3.0-2611]\n\tat backtype.storm.generated.Nimbus$Processor$getClusterInfo.getResult(Nimbus.java:1668) ~[storm-core-0.9.3.2.2.3.0-2611.jar:0.9.3.2.2.3.0-2611]\n\tat backtype.storm.generated.Nimbus$Processor$getClusterInfo.getResult(Nimbus.java:1656) ~[storm-core-0.9.3.2.2.3.0-2611.jar:0.9.3.2.2.3.0-2611]\n\tat org.apache.thrift7.ProcessFunction.process(ProcessFunction.java:32) ~[storm-core-0.9.3.2.2.3.0-2611.jar:0.9.3.2.2.3.0-2611]\n\tat org.apache.thrift7.TBaseProcessor.process(TBaseProcessor.java:34) ~[storm-core-0.9.3.2.2.3.0-2611.jar:0.9.3.2.2.3.0-2611]\n\tat backtype.storm.security.auth.SimpleTransportPlugin$SimpleWrapProcessor.process(SimpleTransportPlugin.java:156) ~[storm-core-0.9.3.2.2.3.0-2611.jar:0.9.3.2.2.3.0-2611]\n\tat org.apache.thrift7.server.TNonblockingServer$FrameBuffer.invoke(TNonblockingServer.java:632) ~[storm-core-0.9.3.2.2.3.0-2611.jar:0.9.3.2.2.3.0-2611]\n\tat org.apache.thrift7.server.THsHaServer$Invocation.run(THsHaServer.java:201) [storm-core-0.9.3.2.2.3.0-2611.jar:0.9.3.2.2.3.0-2611]\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [na:1.7.0_67]\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [na:1.7.0_67]\n{code}\n\n*Solution*\nThe solution is to remove configuration properties that do not have default values when disabling Kerberos.\n\n{code}\nFor each property updated per the Kerberos descriptor\n    Look up the default value from the stack definition\n    If a value is found, update the property to that \"default\" value\n    If a value is not found, remove the value from the configuration\n{code}\n\nFor Storm in particular, remove the following properties:\n- storm-site/drpc.authorizer\n- storm-site/nimbus.authorizer\n- storm-site/storm.principal.tolocal\n- storm-site/ui.filter",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Storm service check failed after disabling security"
   },
   {
      "_id": "12782947",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-03-18 17:29:11",
      "description": "*STR*\nInstall HDP\nEnable security\nAdd host with datanode\n\n*Result*\nFor added host there is an alert:\nConnection failed to http://c6404.ambari.apache.org:1022\nManually this webpage is avaliable\n\n*Expected*\nNo alert\n\n*Cause*\nThe error that gets generated is \n{code}\nLocal variable 'error_msg' might be referenced before assignment\n{code}\n\n*Solution*\nFix Python code by initializing {{error_msg}} properly.,",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "alerts"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Wrong alert on added host on secure cluster"
   },
   {
      "_id": "12782535",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-03-17 11:07:16",
      "description": "When Kerberos is enabled, Hive components show alerts due to the following error:\n\n{code}\nWARNING 2015-03-16 06:01:08,253 base_alert.py:140 - [Alert][hive_metastore_process] Unable to execute alert. Execution of '/usr/bin/kinit -kt /etc/security/keytabs/smokeuser.headless.keytab ambari-qa; ' returned 1. kinit: Keytab contains no suitable keys for ambari-qa@REALM while getting initial credentials\n{code}\n\nThis occurs because the alert logic for Hive uses {{cluster-env/smokeuser}} rather than {{cluster-env/smokeuser_principal_name}} to get the principal name for the smoke test identity. \n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "alerts",
         "kerbeos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Hive alert on secured cluster"
   },
   {
      "_id": "12781984",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-03-14 09:48:29",
      "description": "# Create cluster\n# Enable security\n# Logout or restart Ambari server\n# Go to Kerberos service page\n# Click service actions\n# Click Run Service Check\n# Nothing happens",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos service check doesn't work is new HTTP session is created"
   },
   {
      "_id": "12781640",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-03-12 22:44:36",
      "description": "The path(s) to the Kerberos utilities (kadmin, klist, etc...) should be configurable so that the utilities can be found if using custom Kerberos packages. \n\nThis should work for both the Ambari server and agent-side functions. \n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "The path(s) to the Kerberos utilities (kadmin, klist, etc...) should be configurable"
   },
   {
      "_id": "12781567",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-03-12 17:51:20",
      "description": "1.Go to installed cluster\n2.Open Enable Security wizard\n3.Proceed to step Configure Identities\n4.Go to advanced tab\nsome principal values on Hive panel are empty",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Some of Hive principal fields doesn't have default value when enabling security"
   },
   {
      "_id": "12781564",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-03-12 17:35:52",
      "description": "On stage of installing kerberos clients appears error 500 with text:\r\n{code:java}\r\nAn internal system exception occurred; Unexpected error condition executing kadmin command\u00a7\r\n{code}\r\nThis is due to a bad search path used to find kadmin. It should be able to be set by a user.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "500 error on installing kerberos clients"
   },
   {
      "_id": "12781524",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-03-12 15:30:14",
      "description": "*Cluster*: http://172.18.145.129:8080\nSTR:\n1)Deploy old version with all services\n2)Make ambari only upgrade to 2.0.0 .\n3)Enable security\n\nExpected result:\nEnable security is passed.\n\nActual result\nKERBEROS_SERVICE_CHECK is failed after Ambari only upgrade from 1.6.0 to 2.0.0 when enable securitty\n{code}\n--------------------------------------------------------------------------------\n{\n  \"href\" : \"http://172.18.145.129:8080/api/v1/clusters/cl1/requests/8/tasks/258\",\n  \"Tasks\" : {\n    \"attempt_cnt\" : 1,\n    \"cluster_name\" : \"cl1\",\n    \"command\" : \"SERVICE_CHECK\",\n    \"command_detail\" : \"SERVICE_CHECK KERBEROS\",\n    \"end_time\" : 1426091879341,\n    \"error_log\" : \"/var/lib/ambari-agent/data/errors-258.txt\",\n    \"exit_code\" : 1,\n    \"host_name\" : \"amb-upg160-rhel5oracle1426082627-9.cs1cloud.internal\",\n    \"id\" : 258,\n    \"output_log\" : \"/var/lib/ambari-agent/data/output-258.txt\",\n    \"request_id\" : 8,\n    \"role\" : \"KERBEROS_SERVICE_CHECK\",\n    \"stage_id\" : 4,\n    \"start_time\" : 1426091872413,\n    \"status\" : \"FAILED\",\n    \"stderr\" : \"Traceback (most recent call last):\\n  File \\\"/var/lib/ambari-agent/cache/common-services/KERBEROS/1.10.3-10/package/scripts/service_check.py\\\", line 61, in <module>\\n    KerberosServiceCheck().execute()\\n  File \\\"/usr/lib/python2.6/site-packages/resource_management/libraries/script/script.py\\\", line 214, in execute\\n    method(env)\\n  File \\\"/var/lib/ambari-agent/cache/common-services/KERBEROS/1.10.3-10/package/scripts/service_check.py\\\", line 55, in service_check\\n    os.remove(ccache_file_path)\\nOSError: [Errno 2] No such file or directory: '/var/lib/ambari-agent/data/tmp/kerberos_service_check_cc_49ae9e4ea129d8216306a4a6e431c812'\",\n    \"stdout\" : \"Performing kinit using ambari-qa_vvwbohue@EXAMPLE.COM\\n2015-03-11 16:37:59,095 - u\\\"Execute['/usr/kerberos/bin/kinit -c /var/lib/ambari-agent/data/tmp/kerberos_service_check_cc_49ae9e4ea129d8216306a4a6e431c812 -kt /etc/security/keytabs/kerberos.service_check.vvwbohue.keytab ambari-qa_vvwbohue@EXAMPLE.COM']\\\" {}\",\n    \"structured_out\" : { }\n  }\n}\n--------------------------------------------------------------------------------\n\n{code}\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Test Kerberos Client (KERBEROS_SERVICE_CHECK) is failed after Ambari only upgrade from 1.6.0 to 2.0.0 when enable securitty (Centos 5.9)"
   },
   {
      "_id": "12781015",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-03-10 22:39:09",
      "description": "The password generator used to generate passwords for identities needs to generate passwords based on a rule set rather than just a random sequence of characters. \n\nIn a KDC (MIT or Active Directory), there may be a policy in place requiring a certain characteristics for the password. By creating a password consisting if 18 characters pulled randomly from {{abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890?.!$%^*()-_+=~}}, there is no guarantee that any specific policy will be met. \n\nThe following rules should be settable:\n* Length\n* Minimum number of lowercase letters (a-z)\n* Minimum number of uppercase letters (A-Z)\n* Minimum number of digits (0-9)\n* Minimum number of punctuation characters ({{?.!$%^*()-_+=~}})",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: Password generator needs to generate passwords based on rules to satisfy password policy"
   },
   {
      "_id": "12780985",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-03-10 20:45:17",
      "description": "setup ambari-server to run with non-root daemon (ambari-server setup, select a non-root daemon account) and the following exception will be thrown when creating identities in an Active Directory when enabling Kerberos.\n\n{code}\njava.lang.RuntimeException: Velocity could not be initialized!\n\tat org.apache.velocity.runtime.RuntimeInstance.requireInitialization(RuntimeInstance.java:307)\n\tat org.apache.velocity.runtime.RuntimeInstance.parse(RuntimeInstance.java:1196)\n\tat org.apache.velocity.runtime.RuntimeInstance.parse(RuntimeInstance.java:1181)\n\tat org.apache.velocity.runtime.RuntimeInstance.evaluate(RuntimeInstance.java:1297)\n\tat org.apache.velocity.runtime.RuntimeInstance.evaluate(RuntimeInstance.java:1265)\n\tat org.apache.velocity.app.Velocity.evaluate(Velocity.java:180)\n\tat org.apache.ambari.server.view.ViewContextImpl.parameterize(ViewContextImpl.java:381)\n\tat org.apache.ambari.server.view.ViewContextImpl.getProperties(ViewContextImpl.java:194)\n\tat org.apache.ambari.view.filebrowser.HdfsService.getApi(HdfsService.java:67)\n\tat org.apache.ambari.view.filebrowser.FileOperationService.listdir(FileOperationService.java:60)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:606)\n\tat com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)\n\tat com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205)\n\tat com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)\n\tat com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)\n\tat com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)\n\tat com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:134)\n\tat com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)\n\tat com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:134)\n\tat com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)\n\tat com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:134)\n\tat com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)\n\tat com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:134)\n\tat com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)\n\tat com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:134)\n\tat com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)\n\tat com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)\n\tat com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)\n\tat com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)\n\tat com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)\n\tat com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)\n\tat com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:820)\n\tat org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:652)\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1329)\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n\tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n\tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n\tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n\tat org.apache.ambari.server.security.authorization.AmbariAuthorizationFilter.doFilter(AmbariAuthorizationFilter.java:166)\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n\tat org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n\tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1300)\n\tat org.apache.ambari.server.api.MethodOverrideFilter.doFilter(MethodOverrideFilter.java:72)\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1300)\n\tat org.apache.ambari.server.api.AmbariPersistFilter.doFilter(AmbariPersistFilter.java:47)\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1300)\n\tat org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:445)\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)\n\tat org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:559)\n\tat org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:227)\n\tat org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1038)\n\tat org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:374)\n\tat org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:189)\n\tat org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:972)\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)\n\tat org.apache.ambari.server.controller.FailsafeHandlerList.handle(FailsafeHandlerList.java:132)\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)\n\tat org.eclipse.jetty.server.Server.handle(Server.java:363)\n\tat org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:483)\n\tat org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:920)\n\tat org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:982)\n\tat org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:635)\n\tat org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)\n\tat org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82)\n\tat org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:627)\n\tat org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:51)\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)\n\tat java.lang.Thread.run(Thread.java:745)\nCaused by: org.apache.velocity.exception.VelocityException: Error initializing log: Failed to initialize an instance of org.apache.velocity.runtime.log.Log4JLogChute with the current runtime configuration.\n\tat org.apache.velocity.runtime.RuntimeInstance.initializeLog(RuntimeInstance.java:875)\n\tat org.apache.velocity.runtime.RuntimeInstance.init(RuntimeInstance.java:262)\n\tat org.apache.velocity.runtime.RuntimeInstance.requireInitialization(RuntimeInstance.java:302)\n\t... 93 more\nCaused by: org.apache.velocity.exception.VelocityException: Failed to initialize an instance of org.apache.velocity.runtime.log.Log4JLogChute with the current runtime configuration.\n\tat org.apache.velocity.runtime.log.LogManager.createLogChute(LogManager.java:220)\n\tat org.apache.velocity.runtime.log.LogManager.updateLog(LogManager.java:269)\n\tat org.apache.velocity.runtime.RuntimeInstance.initializeLog(RuntimeInstance.java:871)\n\t... 95 more\nCaused by: java.lang.RuntimeException: Error configuring Log4JLogChute : \n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)\n\tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n\tat java.lang.reflect.Constructor.newInstance(Constructor.java:526)\n\tat org.apache.velocity.util.ExceptionUtils.createWithCause(ExceptionUtils.java:67)\n\tat org.apache.velocity.util.ExceptionUtils.createRuntimeException(ExceptionUtils.java:45)\n\tat org.apache.velocity.runtime.log.Log4JLogChute.initAppender(Log4JLogChute.java:133)\n\tat org.apache.velocity.runtime.log.Log4JLogChute.init(Log4JLogChute.java:85)\n\tat org.apache.velocity.runtime.log.LogManager.createLogChute(LogManager.java:157)\n\t... 97 more\nCaused by: java.io.FileNotFoundException: velocity.log (Permission denied)\n\tat java.io.FileOutputStream.open(Native Method)\n\tat java.io.FileOutputStream.<init>(FileOutputStream.java:221)\n\tat java.io.FileOutputStream.<init>(FileOutputStream.java:142)\n\tat org.apache.log4j.FileAppender.setFile(FileAppender.java:294)\n\tat org.apache.log4j.RollingFileAppender.setFile(RollingFileAppender.java:207)\n\tat org.apache.log4j.FileAppender.<init>(FileAppender.java:110)\n\tat org.apache.log4j.RollingFileAppender.<init>(RollingFileAppender.java:79)\n\tat org.apache.velocity.runtime.log.Log4JLogChute.initAppender(Log4JLogChute.java:118)\n\t... 99 more\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: Run ambari-server using non-root causes issues with AD velocity engine"
   },
   {
      "_id": "12780561",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-03-09 18:17:10",
      "description": "A downed host behaves a little differently then a host that is up and in a maintenance state.  \n\nIt appears that where a downed host is not included in steps to install the Kerberos client nor is it included when choosing a host to run the service check on. \n\nHowever a host that is up and in maintenance mode is not included in steps to install the Kerberos client, but may be selected as the host to run the service check on. Resulting in this error:\n\n{code}\n2015-03-04 20:58:03,164 - Error while executing command 'service_check':\nTraceback (most recent call last):\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/script/script.py\", line 208, in execute\n    method(env)\n  File \"/var/lib/ambari-agent/cache/common-services/KERBEROS/1.10.3-10/package/scripts/service_check.py\", line 58, in service_check\n    raise Fail(err_msg)\nFail: Failed to execute kinit test due to principal or keytab not found or available\n{code}\n\nThe error is correct in that the keytab has not been distributed to it, this is because the Kerberos Client has not been installed on it.  \n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Maintenance Mode Hosts do not get keytabs"
   },
   {
      "_id": "12780474",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-03-09 10:56:04",
      "description": "Oozie connection refused: unable to initialize service, Cannot get password from user.\n\n{noformat}\norg.apache.oozie.service.ServiceException: E0100: Could not initialize service [org.apache.oozie.service.HadoopAccessorService], Login failure for oozie/ip-172-31-34-48.ec2.internal@EXAMPLE.COM from keytab /etc/security/keytabs/oozie.service.keytab: javax.security.auth.login.LoginException: Unable to obtain password from user\n\n\tat org.apache.oozie.service.HadoopAccessorService.kerberosInit(HadoopAccessorService.java:187)\n\tat org.apache.oozie.service.HadoopAccessorService.init(HadoopAccessorService.java:130)\n\tat org.apache.oozie.service.HadoopAccessorService.init(HadoopAccessorService.java:101)\n\tat org.apache.oozie.service.Services.setServiceInternal(Services.java:383)\n\tat org.apache.oozie.service.Services.setService(Services.java:369)\n\tat org.apache.oozie.service.Services.loadServices(Services.java:302)\n\tat org.apache.oozie.service.Services.init(Services.java:210)\n\tat org.apache.oozie.servlet.ServicesLoader.contextInitialized(ServicesLoader.java:45)\n\tat org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4210)\n\tat org.apache.catalina.core.StandardContext.start(StandardContext.java:4709)\n\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)\n\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)\n\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:583)\n\tat org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:675)\n\tat org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:601)\n\tat org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:502)\n\tat org.apache.catalina.startup.HostConfig.start(HostConfig.java:1317)\n\tat org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)\n\tat org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)\n\tat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1065)\n\tat org.apache.catalina.core.StandardHost.start(StandardHost.java:822)\n\tat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)\n\tat org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)\n\tat org.apache.catalina.core.StandardService.start(StandardService.java:525)\n\tat org.apache.catalina.core.StandardServer.start(StandardServer.java:754)\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:595)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:606)\n\tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)\nCaused by: java.io.IOException: Login failure for oozie/ip-172-31-34-48.ec2.internal@EXAMPLE.COM from keytab /etc/security/keytabs/oozie.service.keytab: javax.security.auth.login.LoginException: Unable to obtain password from user\n\n\tat org.apache.hadoop.security.UserGroupInformation.loginUserFromKeytab(UserGroupInformation.java:935)\n\tat org.apache.oozie.service.HadoopAccessorService.kerberosInit(HadoopAccessorService.java:179)\n\t... 31 more\nCaused by: javax.security.auth.login.LoginException: Unable to obtain password from user\n\n\tat com.sun.security.auth.module.Krb5LoginModule.promptForPass(Krb5LoginModule.java:856)\n\tat com.sun.security.auth.module.Krb5LoginModule.attemptAuthentication(Krb5LoginModule.java:719)\n\tat com.sun.security.auth.module.Krb5LoginModule.login(Krb5LoginModule.java:584)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:606)\n\tat javax.security.auth.login.LoginContext.invoke(LoginContext.java:762)\n\tat javax.security.auth.login.LoginContext.access$000(LoginContext.java:203)\n\tat javax.security.auth.login.LoginContext$4.run(LoginContext.java:690)\n\tat javax.security.auth.login.LoginContext$4.run(LoginContext.java:688)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat javax.security.auth.login.LoginContext.invokePriv(LoginContext.java:687)\n\tat javax.security.auth.login.LoginContext.login(LoginContext.java:595)\n\tat org.apache.hadoop.security.UserGroupInformation.loginUserFromKeytab(UserGroupInformation.java:926)\n\t... 32 more\n{noformat}\n\nThis issue is really related to unexpected data in the oozie-site.xml file. It is expected that the principals names contain {{_HOST}} rather than the resolved hostname. This appears to be a viable solution for Oozie version 4.1.0.2.2.2.0, but not for version 4.0.0.2.0.14.0.\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Oozie connection refused: unable to initialize service, Cannot get password from user."
   },
   {
      "_id": "12780444",
      "assignee": "rlevas",
      "components": [],
      "created": "2015-03-09 09:48:54",
      "description": "Storm logviewer uses the same UI.filter config thats being used for Storm UI.\nIn secure mode storm UI uses SPENGO to authenticate user to access the UI.\nSimilarly logviewer also does the same .\nBut in Ambari 1.7 we advise user to create HTTP/storm-ui@REALM and this gets added to storm.yaml.\nAs this is bound to a host storm logviewers which are running one per supervisor won't be able to use this key .\n\nSolution:\nThere is a configuration problem in the {{/etc/storm/conf/storm.yaml}} file.  In particular the issue is here:\n{code:title=/etc/storm/conf/storm.yaml:109}\nui.filter.params:\n  \"type\": \"kerberos\"\n  \"kerberos.principal\": \"HTTP/host-2.internal@EXAMPLE.COM\"\n  \"kerberos.keytab\": \"/etc/security/keytabs/spnego.service.keytab\"\n  \"kerberos.name.rules\": \"DEFAULT\"\n{code}\n\nThe {{kerberos.principal}} value should be the SPNEGO principal for the localhost, not the host where the UI server is running.  In this example, the localhost is *host-4.internal*  so the {{kerberos.principal}} value should be *HTTP/host-4.internal@EXAMPLE.COM* not *HTTP/host-2.internal@EXAMPLE.COM*.  The Storm UI server is running on *host-2.internal*\n\nThe fix for this should be in the code around \n\n{code:title=common-services/STORM/0.9.1.2.1/package/scripts/params.py:103} \n    _storm_ui_jaas_principal_name = config['configurations']['storm-env']['storm_ui_principal_name']\n    storm_ui_host = default(\"/clusterHostInfo/storm_ui_server_hosts\", [])\n    storm_ui_jaas_principal = _storm_ui_jaas_principal_name.replace('_HOST',storm_ui_host[0].lower())\n{code}\n\n{{storm_ui_jaas_principal}} is then used in the template to build the storm.yaml file.  \n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari storm logviewer in secure mode doesn't work"
   },
   {
      "_id": "12779592",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-03-04 21:26:07",
      "description": "It should be possible to deploy Ambari on a host that does not include any other services.\n\nThe primary issue is that Ambari needs to be able to distribute keytabs to other hosts even if Ambari-Server is not running on a host with services that would otherwise have forced the Ambari-Server to be included in the keytab distribution process.\n\nTo be clear, the following use case should be supported:\n\n* The Ambari-Server is deployed on a host with no other services \n** Other services are deployed on hosts separate from Ambari-Server\n* addHost should be possible\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Ambari must support deployment on separate host"
   },
   {
      "_id": "12779275",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-03-04 02:37:36",
      "description": "1) using build 440\n2) three node cluster, hdfs, yarn, mr, tez, hive, zk, pig, ams\n3) setup nnha, rmha\n4) enabled kerb\n5) all is good\n6) added second hive metastore\n7) added second hiveserver2\n8) all is good\n9) added host with DN and clients\n10) keytabs are not created on the new host. i was not prompted for kdc creds. basically, i did 1-9 all in one shot, never logging out.\n\nAs a workaround #1:\n- Attempted to regen keytabs, with \"missing only\" checkbox checked. it looks like it remade all principals and keytabs for the cluster but didn't distribute the keytabs. That is concerning that this might be an additional issue for another JIRA maybe. Anycase: didn't result in getting keytabs on my new host.\n\nAs a workaround #2:\n- Attempted regen keytabs all. Made all princs and keytabs and distributed for cluster hosts except my new host. So no lock here either.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: Add Host did not generate keytabs"
   },
   {
      "_id": "12779272",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-03-04 02:16:07",
      "description": "Fix minor issues with test_security_status test cases",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Fix minor issues with test_security_status test cases"
   },
   {
      "_id": "12779166",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-03-03 20:03:01",
      "description": "Storm principal is marked as a _service_ rather than a _user_ principal. This will cause issues when adding hosts with Supervisor on it due to Ambari's lack of caching of service principals.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Storm principal is marked as a service rather than a user principal, causes issue adding hosts with Supervisor"
   },
   {
      "_id": "12779129",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-03-03 17:55:56",
      "description": "core-site.xml having wrong value for hadoop.proxyuser.HTTP.groups\n\n{code}\n<property>\n<name>hadoop.proxyuser.HTTP.groups</name>\n<value>${core-site/proxyuser_group}</value>\n</property>\n{code}\n\nIt should be \n\n{code}\n<property>\n<name>hadoop.proxyuser.HTTP.groups</name>\n<value>users</value>\n</property>\n{code}\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "core-site.xml having wrong value for hadoop.proxyuser.HTTP.groups"
   },
   {
      "_id": "12779076",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         }
      ],
      "created": "2015-03-03 14:00:18",
      "description": "security_status test cases sporadically fail due to import of status_params module. For example {{test_security_status}} in {{stacks/2.0.6/HDFS/test_hdfs_client.py}} imports {{status_params.py}} which is not in the test directory path. \n\nInstead of importing  {{status_params.py}}, use values from  {{self.config_dict}}\n\nExample:\n\n{code:title=Before}\n    cached_kinit_executor_mock.called_with(status_params.kinit_path_local,\n                                           status_params.hdfs_user,\n                                           status_params.hdfs_user_keytab,\n                                           status_params.hdfs_user_principal,\n                                           status_params.hostname,\n                                           status_params.tmp_dir)\n{code}\n\n{code:title=After}\n    cached_kinit_executor_mock.called_with(\n      '/usr/bin/kinit',\n      self.config_dict['configurations']['hadoop-env']['hdfs_user'],\n      self.config_dict['configurations']['hadoop-env']['hdfs_user_keytab'],\n      self.config_dict['configurations']['hadoop-env']['hdfs_user_principal_name'],\n      self.config_dict['hostname'],\n      '/tmp'\n    )\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "security_status test cases sporadically fail due to import of status_params module"
   },
   {
      "_id": "12778522",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-02-28 22:07:38",
      "description": "The Kerberos _service check_ needs to generate it's own unique identity to use for testing and then destroy it when complete.  This will ensure that any _known_ identities (such as the smokeuser, usually ambari-qa) does not accidentally get removed if shared between clusters or if the service check is run after Kerberos is enabled. \n\nThe service check must perform the following steps:\n\n# Create a unique principal in the relevant KDC (server)\n# Test that the principal can be used to authenticate via kinit (agent)\n# Destroy the principal (server)\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: Kerberos Service Check needs to generate and destroy it's own unique identity for testing"
   },
   {
      "_id": "12777738",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-02-26 01:43:23",
      "description": "{code}\nINFO 2015-01-19 14:00:32,786 PythonExecutor.py:114 - Result: {'structuredOut': {u'securityIssuesFound': u'Configuration file hbase-site did not pass the vali\ndation. Reason: Property hbase.regionserver.keytab.file does not exist', u'processes': [], u'securityState': u'UNSECURED'}, 'stdout': '2015-01-19 10:10:12,89\n4 - Error while executing command \\'status\\':\\nTraceback (most recent call last):\\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/scr\nipt/script.py\", line 184, in execute\\n    method(env)\\n  File \"/var/lib/ambari-agent/cache/common-services/HDFS/2.1.0.2.0/package/scripts/datanode.py\", line \n90, in status\\n    check_process_status(status_params.datanode_pid_file)\\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/functions/ch\neck_process_status.py\", line 41, in check_process_status\\n    raise ComponentIsNotRunning()\\nComponentIsNotRunning\\n2015-01-19 10:10:50,579 - Error while exe\ncuting command \\'status\\':\\nTraceback (most recent call last):\\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/script/script.py\", lin\ne 184, in execute\\n    method(env)\\n  File \"/var/lib/ambari-agent/cache/common-services/HDFS/2.1.0.2.0/package/scripts/datanode.py\", line 90, in status\\n    \ncheck_process_status(status_params.datanode_pid_file)\\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/functions/check_process_status.\npy\", line 41, in check_process_status\\n    raise ComponentIsNotRunning()\\nComponentIsNotRunning\\n2015-01-19 10:12:46,728 - Error while executing command \\'st\natus\\':\\nTraceback (most recent call last):\\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/script/script.py\", line 184, in execute\\n\n    method(env)\\n  File \"/var/lib/ambari-agent/cache/common-services/HDFS/2.1.0.2.0/package/scripts/datanode.py\", line 90, in status\\n    check_process_statu\ns(status_params.datanode_pid_file)\\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/functions/check_process_status.py\", line 41, in ch\neck_process_status\\n    raise ComponentIsNotRunning()\\nComponentIsNotRunning\\n2015-01-19 10:12:47,149 - Error while executing command \\'status\\':\\nTraceback \n(most recent call last):\\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/script/script.py\", line 184, in execute\\n    method(env)\\n  \nFile \"/var/lib/ambari-agent/cache/common-services/FLUME/1.4.0.2.0/package/scripts/flume_handler.py\", line 86, in status\\n    raise ComponentIsNotRunning()\\nC\nomponentIsNotRunning\\n2015-01-19 10:13:46,533 - Error while executing command \\'status\\':\\nTraceback (most recent call last):\\n  File \"/usr/lib/python2.6/sit\ne-packages/resource_management/libraries/script/script.py\", line 184, in execute\\n    method(env)\\n  File \"/var/lib/ambari-agent/cache/common-services/HBASE/\n0.96.0.2.0/package/scripts/hbase_master.py\", line 73, in status\\n    check_process_status(pid_file)\\n  File \"/usr/lib/python2.6/site-packages/resource_manage\nment/libraries/functions/check_process_status.py\", line 41, in check_process_status\\n    raise ComponentIsNotRunning()\\nComponentIsNotRunning\\n2015-01-19 10:\n13:47,003 - Error while executing command \\'status\\':\\nTraceback (most recent call last):\\n  File \"/usr/lib/python2.6/site-packages/resource_management/libra\nries/script/script.py\", line 184, in execute\\n    method(env)\\n  File \"/var/lib/ambari-agent/cache/common-services/HDFS/2.1.0.2.0/package/scripts/datanode.py\n\", line 90, in status\\n    check_process_status(status_params.datanode_pid_file)\\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/func\ntions/check_process_status.py\", line 41, in check_process_status\\n    raise ComponentIsNotRunning()\\nComponentIsNotRunning\\n2015-01-19 10:13:47,438 - Error w\nhile executing command \\'status\\':\\nTraceback (most recent call last):\\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/script/script.\npy\", line 184, in execute\\n    method(env)\\n  File \"/var/lib/ambari-agent/cache/common-services/HBASE/0.96.0.2.0/package/scripts/hbase_regionserver.py\", line\n 76, in status\\n    check_process_status(pid_file)\\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/functions/check_process_status.py\"\n, line 41, in check_process_status\\n    raise ComponentIsNotRunning()\\nComponentIsNotRunning\\n2015-01-19 10:13:47,872 - Error while executing command \\'statu\ns\\':\\nTraceback (most recent call last):\\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/script/script.py\", line 184, in execute\\n   \n method(env)\\n  File \"/var/lib/ambari-agent/cache/common-services/FLUME/1.4.0.2.0/package/scripts/flume_handler.py\", line 86, in status\\n    raise ComponentI\nsNotRunning()\\nComponentIsNotRunning\\n2015-01-19 10:19:39,410 - Error while executing command \\'status\\':\\nTraceback (most recent call last):\\n  File \"/usr/l\nib/python2.6/site-packages/resource_management/libraries/script/script.py\", line 184, in execute\\n    method(env)\\n  File \"/var/lib/ambari-agent/cache/common\n-services/HDFS/2.1.0.2.0/package/scripts/namenode.py\", line 110, in status\\n    check_process_status(status_params.namenode_pid_file)\\n  File \"/usr/lib/pytho\nn2.6/site-packages/resource_management/libraries/functions/check_process_status.py\", line 41, in check_process_status\\n    raise ComponentIsNotRunning()\\nCom\nponentIsNotRunning\\n2015-01-19 10:19:40,004 - Error while executing command \\'status\\':\\nTraceback (most recent call last):\\n  File \"/usr/lib/python2.6/site-\npackages/resource_management/libraries/script/script.py\", line 184, in execute\\n    method(env)\\n  File \"/var/lib/ambari-agent/cache/common-services/HBASE/0.\n96.0.2.0/package/scripts/hbase_master.py\", line 73, in status\\n    check_process_status(pid_file)\\n  File \"/usr/lib/python2.6/site-packages/resource_manageme\nnt/libraries/functions/check_process_status.py\", line 41, in check_process_status\\n    raise ComponentIsNotRunning()\\nComponentIsNotRunning\\n2015-01-19 10:19\n:40,420 - Error while executing command \\'status\\':\\nTraceback (most recent call last):\\n  File \"/usr/lib/python2.6/site-packages/resource_management/librari\nes/script/script.py\", line 184, in execute\\n    method(env)\\n  File \"/var/lib/ambari-agent/cache/common-services/HDFS/2.1.0.2.0/package/scripts/namenode.py\",\n line 110, in status\\n    check_process_status(status_params.namenode_pid_file)\\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/funct\nions/check_process_status.py\", line 41, in check_process_status\\n    raise ComponentIsNotRunning()\\nComponentIsNotRunning\\n2015-01-19 10:19:40,852 - Error wh\nile executing command \\'status\\':\\nTraceback (most recent call last):\\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/script/script.p\ny\", line 184, in execute\\n    method(env)\\n  File \"/var/lib/ambari-agent/cache/common-services/HBASE/0.96.0.2.0/package/scripts/hbase_master.py\", line 73, in\n status\\n    check_process_status(pid_file)\\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/functions/check_process_status.py\", line \n41, in check_process_status\\n    raise ComponentIsNotRunning()\\nComponentIsNotRunning\\n2015-01-19 10:19:41,278 - Error while executing command \\'status\\':\\nT\nraceback (most recent call last):\\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/script/script.py\", line 184, in execute\\n    method\n(env)\\n  File \"/var/lib/ambari-agent/cache/common-services/KAFKA/0.8.1.2.2/package/scripts/kafka_broker.py\", line 70, in status\\n    check_process_status(sta\ntus_params.kafka_pid_file)\\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/functions/check_process_status.py\", line 41, in check_proc\ness_status\\n    raise ComponentIsNotRunning()\\nComponentIsNotRunning\\n2015-01-19 10:19:41,676 - Error while executing command \\'status\\':\\nTraceback (most re\ncent call last):\\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/script/script.py\", line 184, in execute\\n    method(env)\\n  File \"/v\nar/lib/ambari-agent/cache/common-services/HDFS/2.1.0.2.0/package/scripts/datanode.py\", line 90, in status\\n    check_process_status(status_params.datanode_pi\nd_file)\\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/functions/check_process_status.py\", line 41, in check_process_status\\n    rai\nse ComponentIsNotRunning()\\nComponentIsNotRunning\\n2015-01-19 10:19:42,112 - Error while executing command \\'status\\':\\nTraceback (most recent call last):\\n \n File \"/usr/lib/python2.6/site-packages/resource_management/libraries/script/script.py\", line 184, in execute\\n    method(env)\\n  File \"/var/lib/ambari-agent\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Agent is spamming logs with exceptions "
   },
   {
      "_id": "12777389",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-02-25 01:46:18",
      "description": "The local user mapping for the hdfs headless principal not set in Kerberos descriptor.  It should be set to {{hadoop-env/hdfs_user}}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Local user mapping for hdfs headless principal not set in Kerberos descriptor"
   },
   {
      "_id": "12777381",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         }
      ],
      "created": "2015-02-25 01:17:16",
      "description": "After enabling Kerberos, the root user has the spnego user set for it \n\n{code}\n[root@c6501 ~]# klist\nTicket cache: FILE:/tmp/krb5cc_0\nDefault principal: HTTP/c6501.ambari.apache.org@EXAMPLE.COM\n\nValid starting     Expires            Service principal\n02/18/15 22:14:51  02/19/15 22:14:51  krbtgt/EXAMPLE.COM@EXAMPLE.COM\n\trenew until 02/18/15 22:14:51\n{code}\n\nIt appears that the issue is related to the agent-side scheduler and/or some job that is scheduled to run periodically. Apparently some job is kinit-ing with the SPNEGO identity as the running user (root in this case) without changing the ticket cache. Thus whenever the job runs the root user's ticket cache gets changed to contain the SPNEGO identity's ticket.\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "keytabs"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Root user has spnego (HTTP) kerberos ticket set after Kerberos is enabled, root should have no ticket."
   },
   {
      "_id": "12777236",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-02-24 18:14:23",
      "description": "On 2.0 and 2.1 stack oozie server failed with following error:\n{noformat}\n2015-02-23 16:23:54,474  WARN NativeCodeLoader:62 - SERVER[] Unable to load native-hadoop library for your platform... using builtin-java classes where applicable\n2015-02-23 16:23:54,821 FATAL Services:533 - SERVER[] USER[-] GROUP[-] E0100: Could not initialize service [org.apache.oozie.service.HadoopAccessorService], Login failure for oozie/_HOST@EXAMPLE.COM from keytab /etc/security/keytabs/oozie.service.keytab\norg.apache.oozie.service.ServiceException: E0100: Could not initialize service [org.apache.oozie.service.HadoopAccessorService], Login failure for oozie/_HOST@EXAMPLE.COM from keytab /etc/security/keytabs/oozie.service.keytab\n\tat org.apache.oozie.service.HadoopAccessorService.kerberosInit(HadoopAccessorService.java:182)\n\tat org.apache.oozie.service.HadoopAccessorService.init(HadoopAccessorService.java:127)\n\tat org.apache.oozie.service.HadoopAccessorService.init(HadoopAccessorService.java:98)\n\tat org.apache.oozie.service.Services.setServiceInternal(Services.java:372)\n\tat org.apache.oozie.service.Services.setService(Services.java:358)\n\tat org.apache.oozie.service.Services.loadServices(Services.java:291)\n\tat org.apache.oozie.service.Services.init(Services.java:212)\n\tat org.apache.oozie.servlet.ServicesLoader.contextInitialized(ServicesLoader.java:39)\n\tat org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)\n\tat org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)\n\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)\n\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)\n\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)\n\tat org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:675)\n\tat org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:601)\n\tat org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:502)\n\tat org.apache.catalina.startup.HostConfig.start(HostConfig.java:1317)\n\tat org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)\n\tat org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)\n\tat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1065)\n\tat org.apache.catalina.core.StandardHost.start(StandardHost.java:840)\n\tat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)\n\tat org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)\n\tat org.apache.catalina.core.StandardService.start(StandardService.java:525)\n\tat org.apache.catalina.core.StandardServer.start(StandardServer.java:754)\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:595)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:606)\n\tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)\nCaused by: java.io.IOException: Login failure for oozie/_HOST@EXAMPLE.COM from keytab /etc/security/keytabs/oozie.service.keytab\n\tat org.apache.hadoop.security.UserGroupInformation.loginUserFromKeytab(UserGroupInformation.java:870)\n\tat org.apache.oozie.service.HadoopAccessorService.kerberosInit(HadoopAccessorService.java:174)\n\t... 31 more\nCaused by: javax.security.auth.login.LoginException: Unable to obtain password from user\n\n\tat com.sun.security.auth.module.Krb5LoginModule.promptForPass(Krb5LoginModule.java:856)\n\tat com.sun.security.auth.module.Krb5LoginModule.attemptAuthentication(Krb5LoginModule.java:719)\n\tat com.sun.security.auth.module.Krb5LoginModule.login(Krb5LoginModule.java:584)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:606)\n\tat javax.security.auth.login.LoginContext.invoke(LoginContext.java:762)\n\tat javax.security.auth.login.LoginContext.access$000(LoginContext.java:203)\n\tat javax.security.auth.login.LoginContext$4.run(LoginContext.java:690)\n\tat javax.security.auth.login.LoginContext$4.run(LoginContext.java:688)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat javax.security.auth.login.LoginContext.invokePriv(LoginContext.java:687)\n\tat javax.security.auth.login.LoginContext.login(LoginContext.java:595)\n\tat org.apache.hadoop.security.UserGroupInformation.loginUserFromKeytab(UserGroupInformation.java:861)\n\t... 32 more\n2015-02-23 16:23:54,833  INFO Services:539 - SERVER[] Shutdown\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Oozie failed to start in secured cluster for stacks 2.0 and 2.1"
   },
   {
      "_id": "12776851",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-02-23 14:59:26",
      "description": "After smoke test user is created during the Check Kerberos task at the beginning of the wizard, delete the principal because later in the wizard the user might have changed the principal name, making this principal unused. ",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: check kerb task should delete smoke user principal "
   },
   {
      "_id": "12776758",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-02-23 02:52:22",
      "description": "On last stage, storm service check failed \n{code}\n1017 [main] INFO  backtype.storm.StormSubmitter - Generated ZooKeeper secret payload for MD5-digest: -5540876373091122649:-7113320937502691642\n1021 [main] INFO  backtype.storm.security.auth.AuthUtils - Got AutoCreds []\n1039 [main] WARN  org.apache.storm.curator.retry.ExponentialBackoffRetry - maxRetries too large (60000). Pinning to 29\n1043 [main] INFO  backtype.storm.utils.StormBoundedExponentialBackoffRetry - The baseSleepTimeMs [2000] the maxSleepTimeMs [5] the maxRetries [60000]\n1043 [main] WARN  backtype.storm.utils.StormBoundedExponentialBackoffRetry - Misconfiguration: the baseSleepTimeMs [2000] can't be greater than the maxSleepTimeMs [5].\n1847 [main] INFO  org.apache.storm.zookeeper.Login - successfully logged in.\nException in thread \"main\" java.lang.RuntimeException: javax.security.sasl.SaslException: Failure to initialize security context [Caused by GSSException: Invalid name provided (Mechanism level: Illegal character in realm name; one of: '/', ':', '' (600))]\n\tat backtype.storm.security.auth.ThriftClient.reconnect(ThriftClient.java:99)\n\tat backtype.storm.security.auth.ThriftClient.<init>(ThriftClient.java:66)\n\tat backtype.storm.utils.NimbusClient.<init>(NimbusClient.java:52)\n\tat backtype.storm.utils.NimbusClient.getConfiguredClient(NimbusClient.java:36)\n\tat backtype.storm.StormSubmitter.submitTopology(StormSubmitter.java:211)\n\tat backtype.storm.StormSubmitter.submitTopology(StormSubmitter.java:157)\n\tat storm.starter.WordCountTopology.main(WordCountTopology.java:77)\nCaused by: javax.security.sasl.SaslException: Failure to initialize security context [Caused by GSSException: Invalid name provided (Mechanism level: Illegal character in realm name; one of: '/', ':', '' (600))]\n\tat com.sun.security.sasl.gsskerb.GssKrb5Client.<init>(GssKrb5Client.java:150)\n\tat com.sun.security.sasl.gsskerb.FactoryImpl.createSaslClient(FactoryImpl.java:63)\n\tat javax.security.sasl.Sasl.createSaslClient(Sasl.java:372)\n\tat org.apache.thrift7.transport.TSaslClientTransport.<init>(TSaslClientTransport.java:72)\n\tat backtype.storm.security.auth.kerberos.KerberosSaslTransportPlugin.connect(KerberosSaslTransportPlugin.java:127)\n\tat backtype.storm.security.auth.TBackoffConnect.doConnectWithRetry(TBackoffConnect.java:48)\n\tat backtype.storm.security.auth.ThriftClient.reconnect(ThriftClient.java:97)\n\t... 6 more\nCaused by: GSSException: Invalid name provided (Mechanism level: Illegal character in realm name; one of: '/', ':', '' (600))\n\tat sun.security.jgss.krb5.Krb5NameElement.getInstance(Krb5NameElement.java:127)\n\tat sun.security.jgss.krb5.Krb5MechFactory.getNameElement(Krb5MechFactory.java:95)\n\tat sun.security.jgss.GSSManagerImpl.getNameElement(GSSManagerImpl.java:202)\n\tat sun.security.jgss.GSSNameImpl.getElement(GSSNameImpl.java:472)\n\tat sun.security.jgss.GSSNameImpl.init(GSSNameImpl.java:201)\n\tat sun.security.jgss.GSSNameImpl.<init>(GSSNameImpl.java:170)\n\tat sun.security.jgss.GSSManagerImpl.createName(GSSManagerImpl.java:137)\n\tat com.sun.security.sasl.gsskerb.GssKrb5Client.<init>(GssKrb5Client.java:108)\n\t... 12 more\n{code}\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Storm service check failed after enabling security with existing AD"
   },
   {
      "_id": "12776742",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-02-22 22:50:38",
      "description": "Note: I don't believe the below is specific to add host, but related to the prompting and how the set admin cred works in case of a blank password. I hit this during testing of add host though.\n\n- install cluster, kerberize\n- add host (be sure to use a new browser so you know it will prompt for kerb admin credentials)\n- got to the review part of add host, click deploy\n- prompted for admin creds (as expected)\n- tried messing around by putting in bad creds and that seemed to work...\n- expect when I put in the right admin cred principal name (admin/admin) but a blank password. I was surprised it allowed me to click save (because the password field was blank)\n- so I click save, dialog disappears and I am cannot get it to re-prompt.\n- this is what it PUT and the response was blank...\n \n{code}\n[{\"session_attributes\":{\"kerberos_admin\":{\"principal\":\"admin/admin\",\"password\":\"\"}}}]:\nResponse Headersview source\n{code}\n\nin ambari-server.log, nothing\n\n{code}\n17:58:05,860  INFO [qtp1257282095-603] AmbariManagementControllerImpl:1171 - Received a updateCluster request, clusterId=2, clusterName=MyCluster, securityType=null, request={ clusterName=MyCluster, clusterId=2, provisioningState=null, securityType=null, stackVersion=HDP-2.2, desired_scv=null, hosts=[] }\n{code}\n\n- back in wizard doesn't solve it. had to completely exit wizard and ambari web to start again\n\nThe overall issue is how the credentials are being validated.  If no password is being set, the command to test the credentials when using a MIT KDC generates the following command:\n{code}\nkadmin -p admin/admin -w \"\" -r EXAMPLE.COM -q 'get_principal admin/admin'\n{code}\n\nThe empty password ({{-w \"\"}}) in the command creates an interactive session where the command is waiting for data on STDIN, thus hanging the process.\n\nAn empty password should not cause the same behavior when using Active Directory.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: fails when entering admin principal with blank password "
   },
   {
      "_id": "12776671",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-02-21 23:23:40",
      "description": "1. Installed cluster on three hosts c6401, c6402, c6403\n2. using oracle jdk 1.7, put JCE in place on all hosts\n3. ambari-agent stop on c6403 (which just has DN, ZK and NM)\n4. Enable kerberos, which means c6403 does not get keytabs\n5. ambari-agent start on c6403\n6. go to regen keytabs. Clicked to only do missing. c6403 does not get keytabs.\n7. go to regen keytabs. just left the default which should do all. No hosts get the keytabs.\n\nWhat I found is since the Kerberos client didn't get installed on c6403, the \"Set keytab kerberos client\" command is \"Host Role in invalid state\". I went to that host, and did install clients from the UI to get the kerberos client installed. Once that happened, I could then regen keytabs.\n\nThe main issue: Regen only works if all hosts can regen. Once c6403 did not have a client, and Host Role in invalid state, it didn't do keytabs for any other hosts.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "keytabs"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: regenerate keytabs not handled for all hosts"
   },
   {
      "_id": "12776155",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-02-19 14:01:37",
      "description": "{code}\n2015-02-13 11:32:12,437 - Error while executing command 'start':\nTraceback (most recent call last):\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/script/script.py\", line 184, in execute\n    method(env)\n  File \"/var/lib/ambari-agent/cache/common-services/ZOOKEEPER/3.4.5.2.0/package/scripts/zookeeper_server.py\", line 78, in start\n    zookeeper_service(action = 'start')\n  File \"/var/lib/ambari-agent/cache/common-services/ZOOKEEPER/3.4.5.2.0/package/scripts/zookeeper_service.py\", line 38, in zookeeper_service\n    kinit_cmd = format(\"{kinit_path_local} -kt {smoke_user_keytab} {smokeuser_principal};\")\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/functions/format.py\", line 83, in format\n    return ConfigurationFormatter().format(format_string, args, **result)\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/functions/format.py\", line 47, in format\n    result_protected = self.vformat(format_string, args, all_params)\n  File \"/usr/lib64/python2.6/string.py\", line 549, in vformat\n    result = self._vformat(format_string, args, kwargs, used_args, 2)\n  File \"/usr/lib64/python2.6/string.py\", line 582, in _vformat\n    result.append(self.format_field(obj, format_spec))\n  File \"/usr/lib64/python2.6/string.py\", line 599, in format_field\n    return format(value, format_spec)\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/script/config_dictionary.py\", line 79, in __getattr__\n    raise Fail(\"Configuration parameter '\"+self.name+\"' was not found in configurations dictionary!\")\nFail: Configuration parameter 'smokeuser_principal_name' was not found in configurations dictionary!\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "upgrade"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Zookeeper start failed after upgrading secured cluster"
   },
   {
      "_id": "12775424",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-02-16 17:47:31",
      "description": "When adding a service to a _Kerberized_ cluster, the {{INSTALL}} stage for that service tends to fail due to missing Kerberos properties, principals and keytabs. \n\nTo solve this issue, when a new service is added to a _Kerberized_ cluster the following needs to occur before that service can attempt to transition into it's {{INSTALLED}} state:\n# Kerberos-specific properties need to be created or set\n# Principals need to be created\n# Keytab files need to be generated\n# Keytab files need to be distributed \n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: Adding a service to a Kerberized cluster requires Kerberos-related tasks occur before INSTALL stage"
   },
   {
      "_id": "12775409",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2015-02-16 16:58:13",
      "description": "Enabling security hangs after ambari upgrade on centos (1.4.4 -> 2.0.0)\n\nThis appears to be an issue with how the Kerberos service is attached to stacks.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Security enabling fails after ambari only upgrade"
   },
   {
      "_id": "12775130",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2015-02-14 12:38:04",
      "description": "After the cluster is deployed, tried to enable security. In the Configure kerberos step - Advanced krb5.conf tab, of the wizard there appears 2 new required properties as shown in the attachment. Please let us know the value of these properties if it has to be set by the user or if this should be present by default. This blocks security enabling",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Required Properties in Configure Kerberos Step"
   },
   {
      "_id": "12775022",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-02-13 20:42:34",
      "description": "Escape special characters in Distinguished Names used for queries in Active Directory, else query (or attribute updates) will fail with an error like\n\n{code}\n[LDAP: error code 1 - 000020D6: SvcErr: DSID-0310081B, problem 5012 (DIR_ERROR), data 0 ^@]\n{code}\n\nThe following characters should be escaped using a {{\\}}:\n* Forward Slash {{/}}\n* Comma\t{{,}}\n* Backslash character\n* Pound sign (hash sign)\t{{#}}\n* Plus sign {{+}}\n* Less than symbol\t{{<}}\n* Greater than symbol {{>}}\n* Semicolon {{;}}\n* Double quote (quotation mark) {{\"}}\n* Equal sign {{=}}\n* Leading or trailing spaces\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: Escape special characters in Distinguished Names used for queries in Active Directory"
   },
   {
      "_id": "12774667",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323906",
            "id": "12323906",
            "name": "security",
            "description": "Ambari security features, including Kerberos"
         }
      ],
      "created": "2015-02-12 19:23:57",
      "description": "Oozie server fails to start with the error: \"Fail: Configuration parameter 'oozie.service.HadoopAccessorService.kerberos.principal' was not found in configurations dictionary!\"\n\nSteps to reproduce:\nCreate a non-kerberized cluster\nI used the following blueprint\n{code}\n{   \n  \"host_groups\" : [\n    {\n      \"name\" : \"host_group_1\",\n      \"components\" : [      \n        {\n          \"name\" : \"NODEMANAGER\"\n        },\n        {\n          \"name\" : \"NAMENODE\"\n        },\n        {\n          \"name\" : \"HISTORYSERVER\"\n        },\n        {\n          \"name\" : \"ZOOKEEPER_SERVER\"\n        },\n        {\n          \"name\" : \"SECONDARY_NAMENODE\"\n        },\n        {\n          \"name\" : \"RESOURCEMANAGER\"\n        },  \n        {\n          \"name\" : \"APP_TIMELINE_SERVER\"\n        },        \n        {\n          \"name\" : \"DATANODE\"\n        },\n        {\n          \"name\" : \"YARN_CLIENT\"\n        },\n        {\n          \"name\" : \"ZOOKEEPER_CLIENT\"\n        },\n        {\n          \"name\" : \"MAPREDUCE2_CLIENT\"\n        }     \n      ],\n      \"cardinality\" : \"1\"\n    }\n  ],\n  \"Blueprints\" : {\n    \"stack_name\" : \"HDP\",\n    \"stack_version\" : \"2.2\"\n  }\n}\n{code}\n- manually unzip UnlimitedJCEPolicy\n- manually install MIT KDC\n- Using UI, kerberize the existing cluster\n- Using the UI, add the Oozie service\n\nOOZIE_SERVER failed to start and the above noted exception was from the log that is exposed via the UI for the oozie start operation.\nAccording to Robert Levas this property is in the kerberos descriptor it should be set.\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "keberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "When adding the Oozie service to a kerberized cluster OOZIE_SERVER doesn't start"
   },
   {
      "_id": "12774643",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2015-02-12 17:51:59",
      "description": "Was installed cluster with HDFS, MapReduce2, YARN, Tez, ZooKeeper, AMS services. After that was added Kerberos service. Create Principals operation was failed with error:\n{noformat}\n2015-02-09 11:17:13,376 - Error while executing command 'set_keytab':\nTraceback (most recent call last):\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/script/script.py\", line 184, in execute\n    method(env)\n  File \"/var/lib/ambari-agent/cache/common-services/KERBEROS/1.10.3-10/package/scripts/kerberos_client.py\", line 59, in set_keytab\n    KerberosScript.write_keytab_file()\n  File \"/var/lib/ambari-agent/cache/common-services/KERBEROS/1.10.3-10/package/scripts/kerberos_common.py\", line 395, in write_keytab_file\n    group=group)\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/base.py\", line 148, in __init__\n    self.env.run()\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/environment.py\", line 151, in run\n    self.run_action(resource, action)\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/environment.py\", line 117, in run_action\n    provider_action()\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/providers/system.py\", line 133, in action_create\n    self.resource.group, mode=self.resource.mode, cd_access=self.resource.cd_access)\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/providers/system.py\", line 65, in _ensure_metadata\n    uid = _coerce_uid(user)\n  File \"/usr/lib/python2.6/site-packages/resource_management/core/providers/system.py\", line 46, in _coerce_uid\n    raise Fail(\"User %s doesn't exist.\" % user)\n{noformat}\n\nAlive cluster: http://ec2-52-1-1-157.compute-1.amazonaws.com:8080/",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kertberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Set Keytab Kerberos Client operation fails"
   },
   {
      "_id": "12774314",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2015-02-11 18:56:14",
      "description": "Currently, the {{kdc_type}} value is being set in the {{krb5-conf}} configuration, it needs to be set in the {{kerberos-env}} since the data lies outside the realm of the krb5.conf file. \n  ",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Set kdc_type in kerberos-env rather than krb5-conf configuration"
   },
   {
      "_id": "12774305",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2015-02-11 18:36:38",
      "description": "In some environments, the kerb client krb5.conf is already managed on the machines and ambari cannot generate or modify it.\n\nNeed to provide option to not have ambari create/overwrite krb5.conf. See slide 2 of the attached for the proposed option to give users the ability to disable ambari trying to create/write the kerb client config.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: provide option to not generate kerb client krb5.conf"
   },
   {
      "_id": "12773917",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2015-02-10 18:39:33",
      "description": "After enabling Kerberos, testing with Ambari 2.0.0 Build #401, found this config is missed:\n\n{code}\ncore-site/hadoop.http.authentication.kerberos.keytab : $KRB_KEYTAB_PATH/spnego.service.keytab\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: missing config properties after enabling Kerberos"
   },
   {
      "_id": "12773019",
      "assignee": "rlevas",
      "components": [],
      "created": "2015-02-06 14:54:08",
      "description": "Due to changes from some previous patch the response from the API call to regenerate keytabs is being clobbered. \n\nThis was broken in patch for AMBARI-9406",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "keytabs"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: Keytab regeneration not invoked when initiated via API"
   },
   {
      "_id": "12771915",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-02-03 02:27:21",
      "description": "Do not validate host health or maintenance state when enabling Kerberos",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: Do not validate host health or maintenance state when enabling Kerberos"
   },
   {
      "_id": "12771094",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-01-29 19:32:40",
      "description": "Though the Kerberos descriptor was saved with the customized value for smokeuser \n{noformat}(${cluster-env/smokeuser}/c1@${realm}){noformat} \n\nbut the generated principal had the default value (i.e without /c1) and the corresponding configurations also had the default value \n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Service configurations are not updated as customized in the descriptor"
   },
   {
      "_id": "12770815",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-01-28 22:13:24",
      "description": "Create API entry point to initiate Kerberos keytab regeneration for the cluster:\n{code}\nPUT /api/v1/clusters/{clustername}?regenerate_keytabs=true\n{\n  \"Clusters\" : {\n    \"security_type\" : \"KERBEROS\"\n  }\n}\n{code}\n\nThe entry point should invoke code to determine which principals need to be updated and then generate the following stages:\n# Update Principal Passwords\n# Generate Keytabs\n# Distribute Keytab\n\nThis could be done in a method within {{org.apache.ambari.server.controller.KerberosHelper}} named {{regenerateKeytabs}} and flow similarly to {{org.apache.ambari.server.controller.KerberosHelper#toggleKerberos}}\n\nA Server-side action implementation already exists for generating keytabs - see {{org.apache.ambari.server.serveraction.kerberos.CreateKeytabFilesServerAction}}.\nA process is already in place to distribute keytabs - {{org/apache/ambari/server/controller/KerberosHelper.java:1192}}\nA new Server-side action _may_ need to be created to update relavant principal passwords, however {{org.apache.ambari.server.serveraction.kerberos.CreatePrincipalsServerAction}} may work for this, unaltered.\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos",
         "keytabs"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Implement Keytab regeneration"
   },
   {
      "_id": "12770462",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-01-27 20:41:25",
      "description": "Implement the ability to disable Kerberos from a cluster that was previously configured for Kerberos.\n\nThis entails reverting configuration properties set when Kerberos was enabled to default values found in the stack. \n\nPrincipals will not be destroyed in the KDC and ketyab files will not be removed from hosts.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Implement unkerberize for kerberized cluster"
   },
   {
      "_id": "12770430",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2015-01-27 18:56:17",
      "description": "Remove toLowerCase() from userPrincipalName in default Kerberos principal create template. This is creating an issue with principals that have upper-cased characters and Active Directory such that when kinit-ing, authenticating fails:\n\n{code:title=kinit -V -k -t /etc/security/keytabs/spnego.service.keytab }\nHTTP/c6501.ambari.apache.org\nUsing default cache: /tmp/krb5cc_0\nUsing principal: HTTP/c6501.ambari.apache.org@HDP01.LOCAL\nUsing keytab: /etc/security/keytabs/spnego.service.keytab\nkinit: Preauthentication failed while getting initial credentials\n{code}\n\nAn example of the offending template is as follows:\n{code:title=from kerberos-env.xml}\n{\n  \"objectClass\": [\"top\", \"person\", \"organizationalPerson\", \"user\"],\n  \"cn\": \"$principal_name\",\n  #if( $is_service )\n  \"servicePrincipalName\": \"$principal_name\",\n  #end\n  \"userPrincipalName\": \"$normalized_principal.toLowerCase()\",\n  \"unicodePwd\": \"$password\",\n  \"accountExpires\": \"0\",\n  \"userAccountControl\": \"66048\"\n}\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "active_directory",
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Remove toLowerCase() from userPrincipalName in default Kerberos principal create template"
   },
   {
      "_id": "12770386",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-01-27 15:59:26",
      "description": "After enabling Kerberos, {{cluster-env/security_enabled}} is {{false}} when it should be {{true}}. This is causing component to not start up with Kerberos enabled and thus failing.\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "keberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "cluster-env/security_enabled not set to true when Kerberos is enabled in cluster"
   },
   {
      "_id": "12769963",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-01-25 20:17:56",
      "description": "This appears to be happening when the KDC and/or KDC Admin hosts do not point to a valid KDC, and when the relevant KDC does not _handle_ the indicated realm.\n\nFor the *host* issue, (in the cases that I tested), a {{org.apache.ambari.server.serveraction.kerberos.KerberosKDCConnectionException}} is being thrown but not caught to re-throw a {{java.lang.IllegalArgumentException}}, which would generate the expected 400 error.\n\nFor the *realm* issue, the following error string is not being captured by the logic to produce a {{org.apache.ambari.server.serveraction.kerberos.KerberosRealmException}}. \n{code}\nkadmin: Cannot find KDC for requested realm while initializing kadmin interface\n{code}\nIn any case, {{org.apache.ambari.server.serveraction.kerberos.KerberosRealmException}} is not being caught to re-throw a {{java.lang.IllegalArgumentException}}, which would generate the expected 400 error.\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: when unable to connect to KDC admin, need to inform user"
   },
   {
      "_id": "12769955",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-01-25 18:19:57",
      "description": "While generating principals, host/<hostname>@REALM principals are created.  These should not be created.\n\nAnd they are ending-up in the resulting keytab. For example:\n\n{code}\n[root@c6402 keytabs]# klist -kt nn.service.keytab \nKeytab name: FILE:nn.service.keytab\nKVNO Timestamp         Principal\n---- ----------------- --------------------------------------------------------\n   1 01/24/15 18:07:51 nn/c6402.ambari.apache.org@EXAMPLE.COM\n   1 01/24/15 18:07:51 nn/c6402.ambari.apache.org@EXAMPLE.COM\n   1 01/24/15 18:07:51 nn/c6402.ambari.apache.org@EXAMPLE.COM\n   1 01/24/15 18:07:51 nn/c6402.ambari.apache.org@EXAMPLE.COM\n   1 01/24/15 18:07:51 nn/c6402.ambari.apache.org@EXAMPLE.COM\n   1 01/24/15 18:07:51 host/c6402.ambari.apache.org@EXAMPLE.COM\n   1 01/24/15 18:07:51 host/c6402.ambari.apache.org@EXAMPLE.COM\n   1 01/24/15 18:07:51 host/c6402.ambari.apache.org@EXAMPLE.COM\n   1 01/24/15 18:07:51 host/c6402.ambari.apache.org@EXAMPLE.COM\n   1 01/24/15 18:07:51 host/c6402.ambari.apache.org@EXAMPLE.COM\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos",
         "keytabs"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: host/<hostname>@REALM principals are created (should not be created)"
   },
   {
      "_id": "12769795",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-01-24 01:25:30",
      "description": "There's no stdout to indicate progress / success for the tasks for principal generation / keytab generation, etc.\n\nAlso, even just to know what command is actually being run to create the principal, that will help folks with debugging. Or is that only shown in case of a failure. Just want to make sure in the case of a problem, there is output there to help folks.\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos: Need stdout to show info on Kerberos-related tasks"
   },
   {
      "_id": "12769705",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2015-01-23 18:22:12",
      "description": "We need to implement automatic keytab / principal for AMS in case of HDFS backed HDFS.\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Automate Kerberos support for AMS"
   },
   {
      "_id": "12769623",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2015-01-23 12:06:50",
      "description": "Remove toLowerCase() from userPrincipalName in default Kerberos principal create template. This is creating an issue with principals that have upper-cased characters and Active Directory such that when kinit-ing, authenticating fails:\n\n{code:title=kinit -V -k -t /etc/security/keytabs/spnego.service.keytab }\nHTTP/c6501.ambari.apache.org\nUsing default cache: /tmp/krb5cc_0\nUsing principal: HTTP/c6501.ambari.apache.org@HDP01.LOCAL\nUsing keytab: /etc/security/keytabs/spnego.service.keytab\nkinit: Preauthentication failed while getting initial credentials\n{code}\n\nAn example of the offending template is as follows:\n{code:title=from kerberos-env.xml}\n{\n  \"objectClass\": [\"top\", \"person\", \"organizationalPerson\", \"user\"],\n  \"cn\": \"$principal_name\",\n  #if( $is_service )\n  \"servicePrincipalName\": \"$principal_name\",\n  #end\n  \"userPrincipalName\": \"$normalized_principal.toLowerCase()\",\n  \"unicodePwd\": \"$password\",\n  \"accountExpires\": \"0\",\n  \"userAccountControl\": \"66048\"\n}\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "active-directory",
         "active_directory",
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Remove toLowerCase() from userPrincipalName in default Kerberos principal create template"
   },
   {
      "_id": "12769417",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         }
      ],
      "created": "2015-01-22 19:55:48",
      "description": "After enabling Kerberos MapReduce2 Service Check failed with issue writing to local file system:\n\n{code}\nInit:\ndrwxrwxr-x 5 yarn hadoop 4096 Jan 22 00:01 /hadoop/yarn/local\ndrwxr-xr-x 3 yarn hadoop 4096 Jan 22 00:00 /hadoop/yarn/local/usercache\ndrwxr-x--- 4 yarn hadoop 4096 Jan 22 00:00 /hadoop/yarn/local/usercache/ambari-qa\ndrwx--x--- 2 yarn hadoop 4096 Jan 22 00:01 /hadoop/yarn/local/usercache/ambari-qa/appcache\n\nKerb:\ndrwxrwxr-x 5 yarn hadoop 4096 Jan 22 01:23 /hadoop/yarn/local\ndrwxr-xr-x 3 yarn hadoop 4096 Jan 22 00:00 /hadoop/yarn/local/usercache\ndrwxr-s--- 4 ambari-qa hadoop 4096 Jan 22 00:00 /hadoop/yarn/local/usercache/ambari-qa\ndrwx--x--- 2 yarn hadoop 4096 Jan 22 00:01 /hadoop/yarn/local/usercache/ambari-qa/appcache\n\nCan't create directory /hadoop/yarn/local/usercache/ambari-qa/appcache/application_1421889721625_0001 - Permission denied\nmain : user is ambari-qa\nmain : requested yarn user is ambari-qa\n{code}\n\nThe service check does not fail when run before enabling Kerberos.\n\n\n{code:title=Filesystem BEFORE enabling Kerberos}\ndrwxrwxr-x 5 yarn hadoop 4096 Jan 22 00:01 /hadoop/yarn/local\ndrwxr-xr-x 3 yarn hadoop 4096 Jan 22 00:00 /hadoop/yarn/local/usercache\ndrwxr-x--- 4 yarn hadoop 4096 Jan 22 00:00 /hadoop/yarn/local/usercache/ambari-qa\ndrwx--x--- 2 yarn hadoop 4096 Jan 22 00:01 /hadoop/yarn/local/usercache/ambari-qa/appcache\n{code}\n\n{code:title=Filesystem AFTER enabling Kerberos}\ndrwxrwxr-x 5 yarn hadoop 4096 Jan 22 01:23 /hadoop/yarn/local\ndrwxr-xr-x 3 yarn hadoop 4096 Jan 22 00:00 /hadoop/yarn/local/usercache\ndrwxr-s--- 4 ambari-qa hadoop 4096 Jan 22 00:00 /hadoop/yarn/local/usercache/ambari-qa\ndrwx--x--- 2 yarn hadoop 4096 Jan 22 00:01 /hadoop/yarn/local/usercache/ambari-qa/appcache\n{code}\n\nIt appears that the user executing the task is {{ambari-qa}} after enabling Kerberos, there is no indication what user is executing the task before enabling Kerberos.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "mapreduce"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "MapReduce2 Service Check fails after enabling Kerberos with permission issue in local filesystem"
   },
   {
      "_id": "12769280",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-01-22 12:04:28",
      "description": "The logic to enable or disable Kerberos is typically invoked when the Cluster resource is updated. This occurs for several reasons, not all of them indicate the state of Kerberos should be altered.  \n\nBy processing all updated to the Cluster resource, the enable/disable Kerberos may get invoked when not necessary causing _noise_ on the task list and potentially generating an error condition if the KDC administrator credentials are not available.  Certain states of the system will trigger the enable/disable Kerberos logic to perform tasks requiring the KDC administrator credentials. If not explicitly handing the security state change, this behavior is not desired. \n\nTo solve the issue, test the request on the update Cluster resource to see if the security state property (cluster-env/security_enabled) has been altered, if so invoke enable/disable Kerberos logic; else do not invoke enable/disable Kerberos logic. \n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Ensure enable/disable Kerberos logic should invoke only when state of security flag is changed"
   },
   {
      "_id": "12769053",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         }
      ],
      "created": "2015-01-21 18:34:23",
      "description": "The JAAS configuration file parser used in determining the security state of some components (like ZooKeeper and HBase) leaves trailing quote in quoted values. \n\nFor example:\n\n{code}\nClient {\ncom.sun.security.auth.module.Krb5LoginModule required\nuseKeyTab=true\nstoreKey=true\nuseTicketCache=false\nkeyTab=\"/etc/security/keytabs/hbase.service.keytab\"\nprincipal=\"hbase/vp-ambari-ranger-med-0120-2.cs1cloud.internal@EXAMPLE.COM\";\n};\n{code}\n\nThe value for {{keytab}} is being parsed as {{/etc/security/keytabs/hbase.service.keytab\"}} rather than {{/etc/security/keytabs/hbase.service.keytab}}.\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "JAAS configuration file parser leaves trailing quote in quoted values"
   },
   {
      "_id": "12768950",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-01-21 11:07:55",
      "description": "Add {{getUpdateDirectives}} method to {{org.apache.ambari.server.api.resources.ResourceDefinition}}:\n\n{code}\n  public Collection<String> getUpdateDirectives();\n{code}\n\nAdd default implementation to {{org.apache.ambari.server.api.resources.BaseResourceDefinition}} to return an empty Set\n\nUpdate {{org.apache.ambari.server.api.services.RequestFactory}} to process _update directives_ like it processes _create directives_ - see {{org.apache.ambari.server.api.services.RequestFactory#createPostRequest}}\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "api"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Add getUpdateDirectives to org.apache.ambari.server.api.resources.ResourceDefinition and use when handling PUT requests"
   },
   {
      "_id": "12768863",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-01-21 02:58:41",
      "description": "1) During \"ambari-server setup\", if user chooses JDK option 1 or 2 (where ambari automatically downloads JDK and JCE), setup should copy the JCE file to /resources and install the JCE on the ambari server.\n\n2) Also need an \"ambari-server setup-jce\" command to put JCE zip in place on Ambari Server and install on Ambari Server in cases where user chose option 3 custom jdk during setup.\n\n{code}\nambari-server setup-jce /path/to/downloaded/jce/policy/zip/file\n{code}\n\n1) user downloads JCE zip file\n2) user runs \"ambari-server setup-jce /tmp/UnlimitedJCEPolicyJDK7.zip\" (for example)\n3) setup-jce copies zip file into ambari-server /resources\n4) setup-jce ambari.properties and set jce.name= to name of the zip file\n5) setup-jce installs JCE on ambari-server\n6) inform user to restart ambari-server\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari Server setup to install and copy JCE policy file in-place (handle both Default / Custom JDK scenarios)"
   },
   {
      "_id": "12768646",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-01-20 11:17:58",
      "description": "Add ability to append a random value to values in LDAP attributes when generating principals in Active Directory.\n\nFor example the {{cn}} and {{sAMAccountName}} attributes must be unique.  In some caes the {{cn}} is not allowed to have {{/}} characters and in all cases the {{sAMAccountName}} is not allow to have {{/}} characters. Therefore to generate values for these attributes, the _instance_ part of the principal needs to be stripped off and a random string needs to be appended. \n\nThis can be seen where the principal is {{nn/c6501.ambari.apache.org@EXAMPLE.COM}}.  The {{cn}} would typically be {{nn/c6501.ambari.apache.org}}.  Providing for a random string would allow the {{cn}} value to be something like {{nn-ythnskdtarsjko5fsdfdsb}}. Since the {{sAMAccountName}} can be at most 20 characters, it would be {{nn-ythnskdtarsjko5fs}}.\n\nSince the generation of the attributes and values is done using a Velocity template, this random string will need to be generated and stored in the Velocity engine context before processing the template.\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "active_directory",
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Add the ability to append a random value to values in LDAP attributes when generating principals in Active Directory"
   },
   {
      "_id": "12767990",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-01-16 11:12:45",
      "description": "When generating keytab files the set of keys to be generated should be determined by the set of encryption types listed in {{kerberos-env/encryption_types}}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "keytabs"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Keytab generation should use kerberos-env/encryption_types when creating key entries"
   },
   {
      "_id": "12767982",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-01-16 10:58:34",
      "description": "The properties used to create accounts in an Active Directory, related to principal creation, should be configurable such that a user may specify the required fields and their values (with variable replacement).\n\nThis may be done using a simple structure like XML or JSON, however a template facility (like Jinja2) may be more useful since conditional paths may be built in.  The template should be stored in the {{kerberos-env}} configuration.\n\nAn example of a need for a conditional path in a template is related to _service_ accounts vs _user_ accounts.  A _service_ account (such as nn/\\_HOST@REALM) should have the {{servicePrincipalName}} field set to the service's principal, where this value shouldn't be set for a _user_ account (such as hdfs@REALM).\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "active_directory",
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Principal creation for Active Directory accounts should be configurable"
   },
   {
      "_id": "12767759",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-01-15 15:43:59",
      "description": "Intercept call to execute SERVICE_CHECK for KERBEROS service and (if necessary) create and distribute test user keytab.\n\nIt will be hard coded that the test user information is taken from the \"smokeuser\" identity in the relevant clusters Kerberos descriptor.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Test principal and keytab required for service check should be created as part of kerberos service check action"
   },
   {
      "_id": "12767580",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-01-14 23:14:08",
      "description": "In the API response for Kerberizing the cluster, stage_context is set to \"Process Kerberos Operations\" for all operations.  This needs to be more specific (e.g., Generate Principals, Generate Keytabs, Distribute Keytabs, etc).  \n\nDue to the current behavior, \"Kerberize Cluster\" page repeatedly shows \"Process Kerberos Operations\" one after another and it doesn't make much sense to the end user.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Need to provide meaningful names for the stage context in Kerb API call response"
   },
   {
      "_id": "12767439",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-01-14 14:40:56",
      "description": "Split up principal components and realm in Kerberos descriptor and flow throw application separately.  The realm may be optional in the Kerberos Principal descriptor, taking the value from the default realm.\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Split up principal components and realm in Kerberos descriptor"
   },
   {
      "_id": "12767438",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-01-14 14:32:04",
      "description": "Get {{kdc_type}} from {{kerberos-env}} rather than {{krb5-conf}} configuration",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Get kdc_type from kerberos-env rather than krb5-conf configuration"
   },
   {
      "_id": "12766515",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2015-01-09 19:50:42",
      "description": "Add principal _type_ to Kerberos descriptor to declare whether is principal is a service principal or a user principal.\n\nThis is needed for Active Directory since service principals needs to be created differently than user principals. \n ",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Add principal type to Kerberos descriptor"
   },
   {
      "_id": "12765927",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-01-09 02:41:57",
      "description": "Pass LDAP URL and Principal container DN to Active Directory operations handler.\n\nThe data will be stored in the {{kerberos-env}} configuration using the following properties:\n\n* ldap_url - The URL to the Active Directory LDAP Interface\n* container_dn - The distinguished name (DN) of the container used store service principals",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "active-directory",
         "kerberos",
         "ldap"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Pass LDAP URL and Principal container DN to Active Directory operations handler"
   },
   {
      "_id": "12765779",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-01-08 16:05:23",
      "description": "Update each component's security state using the security status value from the _heartbeat_ message.\n\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Capture security state from components for use in enabling or disabling Kerberos"
   },
   {
      "_id": "12765539",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2015-01-08 03:17:11",
      "description": "The Storm service components should indicate security state when queried by Ambari Agent via STATUS_COMMAND.  Each component should determine it's state as follows:\n\nh3. DRPC_SERVER\nh4. Indicators\n* Command JSON\n** config\\['configurations']\\['cluster-env']\\['security_enabled'] \n*** = \u201ctrue\u201d\n* Configuration File: params.conf_dir + \u2018/storm-jaas.conf\u2019\n** StormServer/keyTab\n*** not empty\n*** path exists and is readable\n*** required\n** StormServer/principal\n*** not empty\n*** required\n\nh4. Pseudocode\n{code}\nif indicators imply security is on and validate\n    if kinit(drpc server master principal) succeeds\n        state = SECURED_KERBEROS\n    else\n        state = ERROR \nelse\n    state = UNSECURED\n{code}\n\nh3. STORM_UI_SERVER\nh4. Indicators\n* Command JSON\n** config\\['configurations']\\['cluster-env']\\['security_enabled'] \n*** = \u201ctrue\u201d\n* Configuration File: params.conf_dir + \u2018/storm-jaas.conf\u2019\n** StormClient/keyTab\n*** not empty\n*** path exists and is readable\n*** required\n** StormClient/principal\n*** not empty\n*** required\n\nh4. Pseudocode\n{code}\nif indicators imply security is on and validate\n    if kinit(storm ui server principal) succeeds\n        state = SECURED_KERBEROS\n    else\n        state = ERROR \nelse\n    state = UNSECURED\n{code}\n\nh3. NIMBUS\nh4. Indicators\n* Command JSON\n** config\\['configurations']\\['cluster-env']\\['security_enabled'] \n*** = \u201ctrue\u201d\n* Configuration File: params.conf_dir + \u2018/storm-jaas.conf\u2019\n** StormServer/keyTab\n*** not empty\n*** path exists and is readable\n*** required\n** StormServer/principal\n*** not empty\n*** required\n\nh4. Pseudocode\n{code}\nif indicators imply security is on and validate\n    if kinit(nimbus master principal) succeeds\n        state = SECURED_KERBEROS\n    else\n        state = ERROR \nelse\n    state = UNSECURED\n{code}\n\n_*Note*_: Due to the _cost_ of calling {{kinit}} results should be cached for a period of time before retrying.  This may be an issue depending on the frequency of the heartbeat timeout.\n_*Note*_: {{kinit}} calls should specify a _temporary_ cache file which should be destroyed after command is executed - BUG-29477\n\n_*Note*_: There may be additional work related to _REST gateway impersonation_",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "keberos",
         "storm"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Storm service components should indicate security state"
   },
   {
      "_id": "12765201",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-01-06 20:34:26",
      "description": "Provide the standard error code that will be returned along with the error message.\n\nIf administrative credentials are not available\n{code:title=400 Bad Request}\n{\n  \"status\" : 400,\n  \"message\" : \"java.lang.IllegalArgumentException: Missing KDC administrator credentials.\\nThe KDC administrator credentials must be set in session by updating the relevant Cluster resource.This may be done by issuing a PUT to the api/v1/clusters/(cluster name) API entry point with the following payload:\\n{\\n  \\\"session_attributes\\\" : {\\n    \\\"kerberos_admin\\\" : {\\\"principal\\\" : \\\"(PRINCIPAL)\\\", \\\"password\\\" : \\\"(PASSWORD)\\\"}\\n  }\\n}\"\n}\n{code}\n\nIf administrative credentials are not valid, for example, incorrect principal or password (or keytab)\n{code:title=400 Bad Request}\n{\n  \"status\" : 400,\n  \"message\" : \"java.lang.IllegalArgumentException: Invalid KDC administrator credentials.\\nThe KDC administrator credentials must be set in session by updating the relevant Cluster resource.This may be done by issuing a PUT to the api/v1/clusters/(cluster name) API entry point with the following payload:\\n{\\n  \\\"session_attributes\\\" : {\\n    \\\"kerberos_admin\\\" : {\\\"principal\\\" : \\\"(PRINCIPAL)\\\", \\\"password\\\" : \\\"(PASSWORD)\\\"}\\n  }\\n}\"\n}\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kdc_credentials",
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Design admin principal session expiration handling API call"
   },
   {
      "_id": "12765120",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-01-06 14:50:33",
      "description": "Identity references fail to deference for service-level references in Kerberos descriptor parser.  For example:\n\n{code}\n/SERVICE/identity\n{code}\n\nGlobal references appear to work. Example:\n\n{code}\n/identity\n{code}\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Identity references fail to deference for service-level references in Kerberos descriptor parser"
   },
   {
      "_id": "12765113",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-01-06 14:09:23",
      "description": "Variable replacement fails for some (complicated) values in {{org.apache.ambari.server.state.kerberos.AbstractKerberosDescriptor#replaceVariables}}.\n\nFor example \n{code}\nhive.metastore.local=false,hive.metastore.uris=thrift://${host}:9083,hive.metastore.sasl.enabled=true,hive.metastore.execute.setugi=true,hive.metastore.warehouse.dir=/apps/hive/warehouse,hive.exec.mode.local.auto=false,hive.metastore.kerberos.principal=hive/_HOST@${realm}\n{code}\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Variable replacement fails for some (complicated) values in org.apache.ambari.server.state.kerberos.AbstractKerberosDescriptor#replaceVariables"
   },
   {
      "_id": "12764542",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2015-01-02 16:49:22",
      "description": "Use a cluster property rather than {{cluster-env/security_enabled}} to enable or disable Kerberos.  Since {{cluster-env/security_enabled}} is used by services to determine if Kerberos is enabled or not, it should not be set before completing the process of enabling or disabling Kerberos.  To declare whether the cluster enable or disable Kerberos, a property on the cluster should be set.  The property should be called {{security_type}} and must have one of the following values:\n* NONE\n* KERBEROS \n\nBy using {{cluster-env/security_enabled}}, the configuration property gets set to \"true\" before Kerberos is filly enabled.   This is causing issues with stopping services so that the updated Kerberos-related configurations can be set.\n\nExample API call to enable Kerberos\n{code:title=PUT /api/v1/clusters/c1}\n{\n  \"Clusters\" : {\n    \"security_type\" : \"KERBEROS\"\n  }\n}\n{code}\n\nExample API call to disable Kerberos\n{code:title=PUT /api/v1/clusters/c1}\n{\n  \"Clusters\" : {\n    \"security_type\" : \"NONE\"\n  }\n}\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Use cluster property rather than cluster-env/security_enabled to enable or disable Kerberos"
   },
   {
      "_id": "12764272",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         }
      ],
      "created": "2014-12-30 20:48:08",
      "description": "Fix unit tests in `resource_management.TestSecurityCommons.TestSecurityCommons`",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerbeo"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Fix unit tests in resource_management.TestSecurityCommons.TestSecurityCommons"
   },
   {
      "_id": "12764057",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2014-12-29 18:14:03",
      "description": "Distributed keytab files have the incorrect owner and group access controls.  Keytab files have the following (generally incorrect) ACLs:\n\n{code}\n-rw-r---- 1 root root\n{code}\n\nACLs should be applied as indicated by the Kerberos descriptor",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "acl",
         "kerberos",
         "keytabs"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Distributed keytab files have the incorrect owner and group access controls"
   },
   {
      "_id": "12763929",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2014-12-28 15:23:50",
      "description": "JobHistoryServer Fails to pass service check in Kerberized cluster due to kerberos to local account mapping failure \n\n{code}\norg.apache.hadoop.ipc.RemoteException(org.apache.hadoop.security.AccessControlException): Permission denied: user=jhs, access=READ_EXECUTE, inode=\"/mr-history/done/2014\":mapred:hadoop:drwxrwx---\n{code}\n\n{{core-site}} {{auth_to_local}} fails to map {{jhs/_HOST}} to {{mapred}} user.\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "JobHistoryServer Fails to pass service check in Kerberized cluster"
   },
   {
      "_id": "12763839",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2014-12-26 17:34:06",
      "description": "The ambari-agent log is filling up with messages like\n\n{code}\n2014-12-24 21:14:02,209 - Error while executing command \\'security_status\\':\nTraceback (most recent call last):\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/script/script.py\", line 150, in execute\n    method = self.choose_method_to_execute(command_name)\n  File \"/usr/lib/python2.6/site-packages/resource_management/libraries/script/script.py\", line 168, \nin choose_method_to_execute\n    raise Fail(\"Script \\'{0}\\' has no method \\'{1}\\'\".format(sys.argv[0], command_name))\nFail: Script \\'/var/lib/ambari-agent/cache/common-services/HBASE/0.96.0.2.0/package/scripts/hbase_master.py\\' has no method \\'security_status\\'\n{code}\n\nThis should be corrected by adding a default implementation to avoid such messages.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Agent is spamming logs with tracebacks of \"Error while executing command \\'security_status\\\""
   },
   {
      "_id": "12763557",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2014-12-23 21:17:20",
      "description": "The Knox service components should indicate security state when queried by Ambari Agent via STATUS_COMMAND.  Each component should determine it's state as follows:\n\nh2. KNOX_GATEWAY\nh3. Indicators\n* Command JSON\n** config\\['configurations']\\['cluster-env']\\['security_enabled'] \n*** = \u201ctrue\u201d\n* Configuration File: knox_conf_dir + '/krb5JAASLogin.conf'\n** keyTab\n*** not empty\n*** path exists and is readable\n*** required\n** principal\n*** not empty\n*** required\n\nh3. Pseudocode\n{code}\nif indicators imply security is on and validate\n    if kinit(principal) succeeds\n        state = SECURED_KERBEROS\n    else\n        state = ERROR \nelse\n    state = UNSECURED\n{code}\n\n_*Note*_: Due to the _cost_ of calling {{kinit}} results should be cached for a period of time before retrying.  This may be an issue depending on the frequency of the heartbeat timeout.\n_*Note*_: {{kinit}} calls should specify a _temporary_ cache file which should be destroyed after command is executed - BUG-29477",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Knox service components should indicate security state"
   },
   {
      "_id": "12763539",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2014-12-23 20:04:41",
      "description": "The core-site properties defined in the kerberos descriptor for knox gateway component does not take effect.\n\nThis is due to an invalid Kerberos descriptor file.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor",
         "q"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "core-site properties defined in the kerberos descriptor for knox gateway component does not take effect"
   },
   {
      "_id": "12763325",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         }
      ],
      "created": "2014-12-22 22:22:54",
      "description": "When performing a security state check, using {{kinit}}, the {{kinit}} call should specify a _temporary_ cache file which is to be destroyed after the test is complete.  \n\nThis can be accomplished using the {{kinit}} {{-c <cache file>}} option.\n{code}\nkinit -c <temporary file>...\n{code}\n\nThe cache should be destroyed using {{kdestroy}} with its {{-c <cache file>}} option.\n{code}\nkdestroy -c <temporary file>\n{code}\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Security state check must use a temporary cache that is to be destroyed when test is complete"
   },
   {
      "_id": "12763238",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2014-12-22 15:09:51",
      "description": "The _Update Service Configurations_ Kerberos task (implemented by {{org.apache.ambari.server.serveraction.kerberos.UpdateKerberosConfigsServerAction}}) fails when there is no work to do.  This task should exit nicely if the data file indicating the workload are not available since this tends to indicate that there is no work to do.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos",
         "server-side"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Update Service Configurations Kerberos task fails when there is no work to do"
   },
   {
      "_id": "12763209",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2014-12-22 12:02:44",
      "description": "The Kerberos-related tasks show incorrect names in the UI ops list. More friendly names should be displayed rather than 'Ambari Server Action Execute' when displaying task list.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos",
         "tasks"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Fix Kerberos-related tasks to show friendly names in UI ops list"
   },
   {
      "_id": "12763165",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2014-12-22 05:19:09",
      "description": "Configuration keys in Kerberos descriptors should allow for variable replacement. For example a typical {{configurations}} block may look like \n{code}\n\"configurations\" : [\n \"core-site\": {\n     \"hadoop.proxyuser.hive.groups\":\"${hadoop-env/proxyuser_group}\"\n   },\n  \"hive-site\": {\n   .....\n  },\n  \"webhcat-site\": {\n  ....\n }\n]\n{code}\n\nHowever some configuration keys need to be dynamically generated and should be generated using the existing variable replacement feature in {{org.apache.ambari.server.state.kerberos.AbstractKerberosDescriptor}}.  For example: \n{code}\n\"configurations\": [\n  \"core-site\": {\n     \"hadoop.proxyuser.${hive-env/hive_user}.groups\":\"${hadoop-env/proxyuser_group}\"\n   },\n  \"hive-site\": {\n   .....\n  },\n  \"webhcat-site\": {\n  ....\n }\n] \n{code}\n\nThe configuration key {{hadoop.proxyuser.$\\{hive-env/hive_user\\}.groups}} should be processed such that _$\\{hive-env/hive_user\\}_ is replaced some value like {{hive}} to yield  {{hadoop.proxyuser.hive.groups}} \n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Configuration keys in Kerberos descriptors should allow for variable replacement"
   },
   {
      "_id": "12763147",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2014-12-22 01:02:53",
      "description": "Dynamically created keytab files containing keys created in an MIT KDC have the incorrect key number value. This issue causes an authentication error when kinit-ing using the invalid keytab file.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "keytabs",
         "server-side"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Dynamically created keytab files containing keys created in an MIT KDC have the incorrect key number value"
   },
   {
      "_id": "12763002",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2014-12-19 21:58:09",
      "description": "During automated keytab generation, an entry  with the following encryption type must be added else certain services will fail to start up or properly when Kerberos is enabled:\n\n{code}AES256 CTS mode with HMAC SHA1-96{code}\n\nFor example, NAMENODE will fail with the following errors:\n\n{code}\n2014-12-19 21:45:56,101 WARN  server.AuthenticationFilter (AuthenticationFilter.java:doFilter(551)) - Authentication exception: GSSException: Failure unspecified at GSS-API level (Mechanism level: Invalid argument (400) - Cannot find key of appropriate type to decrypt AP REP - AES256 CTS mode with HMAC SHA1-96)\norg.apache.hadoop.security.authentication.client.AuthenticationException: GSSException: Failure unspecified at GSS-API level (Mechanism level: Invalid argument (400) - Cannot find key of appropriate type to decrypt AP REP - AES256 CTS mode with HMAC SHA1-96)\n\tat org.apache.hadoop.security.authentication.server.KerberosAuthenticationHandler.authenticate(KerberosAuthenticationHandler.java:399)\n\tat org.apache.hadoop.security.authentication.server.AuthenticationFilter.doFilter(AuthenticationFilter.java:507)\n\tat org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)\n\tat org.apache.hadoop.http.HttpServer2$QuotingInputFilter.doFilter(HttpServer2.java:1224)\n\tat org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)\n\tat org.apache.hadoop.http.NoCacheFilter.doFilter(NoCacheFilter.java:45)\n\tat org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)\n\tat org.apache.hadoop.http.NoCacheFilter.doFilter(NoCacheFilter.java:45)\n\tat org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)\n\tat org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:399)\n\tat org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)\n\tat org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)\n\tat org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766)\n\tat org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450)\n\tat org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)\n\tat org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)\n\tat org.mortbay.jetty.Server.handle(Server.java:326)\n\tat org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)\n\tat org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:928)\n\tat org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:549)\n\tat org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)\n\tat org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)\n\tat org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410)\n\tat org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)\nCaused by: GSSException: Failure unspecified at GSS-API level (Mechanism level: Invalid argument (400) - Cannot find key of appropriate type to decrypt AP REP - AES256 CTS mode with HMAC SHA1-96)\n\tat sun.security.jgss.krb5.Krb5Context.acceptSecContext(Krb5Context.java:788)\n\tat sun.security.jgss.GSSContextImpl.acceptSecContext(GSSContextImpl.java:342)\n\tat sun.security.jgss.GSSContextImpl.acceptSecContext(GSSContextImpl.java:285)\n\tat sun.security.jgss.spnego.SpNegoContext.GSS_acceptSecContext(SpNegoContext.java:875)\n\tat sun.security.jgss.spnego.SpNegoContext.acceptSecContext(SpNegoContext.java:548)\n\tat sun.security.jgss.GSSContextImpl.acceptSecContext(GSSContextImpl.java:342)\n\tat sun.security.jgss.GSSContextImpl.acceptSecContext(GSSContextImpl.java:285)\n\tat org.apache.hadoop.security.authentication.server.KerberosAuthenticationHandler$2.run(KerberosAuthenticationHandler.java:366)\n\tat org.apache.hadoop.security.authentication.server.KerberosAuthenticationHandler$2.run(KerberosAuthenticationHandler.java:348)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat javax.security.auth.Subject.doAs(Subject.java:415)\n\tat org.apache.hadoop.security.authentication.server.KerberosAuthenticationHandler.authenticate(KerberosAuthenticationHandler.java:348)\n\t... 23 more\nCaused by: KrbException: Invalid argument (400) - Cannot find key of appropriate type to decrypt AP REP - AES256 CTS mode with HMAC SHA1-96\n\tat sun.security.krb5.KrbApReq.authenticate(KrbApReq.java:273)\n\tat sun.security.krb5.KrbApReq.<init>(KrbApReq.java:144)\n\tat sun.security.jgss.krb5.InitSecContextToken.<init>(InitSecContextToken.java:108)\n\tat sun.security.jgss.krb5.Krb5Context.acceptSecContext(Krb5Context.java:771)\n\t... 34 more\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "keytabs"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Keytabs need to be created to include the encryption type of AES256 CTS mode with HMAC SHA1-96"
   },
   {
      "_id": "12762617",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2014-12-18 16:31:22",
      "description": "The Zookeeper service components should indicate security state when queried by Ambari Agent via STATUS_COMMAND.  Each component should determine it's state as follows:\n\nh2. ZOOKEEPER_SERVER\nh3. Indicators\n* Command JSON\n** config\\['configurations']\\['cluster-env']\\['security_enabled'] \n*** = \u201ctrue\u201d\n* Configuration File: params.config_dir + '/zookeeper-env.xml'\n** zookeeper_keytab_path\n*** not empty\n*** path exists and is readable\n*** required\n** zookeeper_principal_name\n*** not empty\n*** required\n\nh3. Pseudocode\n{code}\nif indicators imply security is on and validate\n    if kinit(zookeeper_server principal) succeeds\n        state = SECURED_KERBEROS\n    else\n        state = ERROR \nelse\n    state = UNSECURED\n{code}\n\n_*Note*_: Due to the _cost_ of calling {{kinit}} results should be cached for a period of time before retrying.  This may be an issue depending on the frequency of the heartbeat timeout.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "kerberos",
         "security",
         "stack"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Zookeeper service components should indicate security state"
   },
   {
      "_id": "12762612",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2014-12-18 15:56:04",
      "description": "The MAPREDUCE2 service components should indicate security state when queried by Ambari Agent via STATUS_COMMAND.  Each component should determine it's state as follows:\n\nh3. HISTORYSERVER\nh4. Indicators\n* Command JSON\n** config\\['configurations']\\['cluster-env']\\['security_enabled'] \n*** = \u201ctrue\u201d\n* Configuration File: params.hive_client_conf_dir + \u2018mapred-site.xml\u2019\n** mapreduce.jobhistory.principal\n*** not empty\n*** required\n** mapreduce.jobhistory.keytab\n*** not empty\n*** path exists and is readable\n*** required\n** mapreduce.jobhistory.webapp.spnego-principal\n*** not empty\n*** required\n** mapreduce.jobhistory.webapp.spnego-keytab-file\n*** not empty\n*** path exists and is readable\n*** required\n\nh4. Pseudocode\n{code}\nif indicators imply security is on and validate\n    if kinit(mapreduce.jobhistory.principal) succeeds\n        state = SECURED_KERBEROS\n    else\n        state = ERROR \nelse\n    state = UNSECURED\n{code}\n\n_*Note*_: Due to the _cost_ of calling {{kinit}} results should be cached for a period of time before retrying.  This may be an issue depending on the frequency of the heartbeat timeout.\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "kerberos",
         "security",
         "stack"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "MapReduce service components should indicate security state"
   },
   {
      "_id": "12762579",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2014-12-18 14:27:13",
      "description": "Fix HBase Kerberos Descriptor, HBASE_CLIENT is incorrect.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Fix HBase Kerberos Descriptor, HBASE_CLIENT is incorrect"
   },
   {
      "_id": "12762453",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2014-12-18 01:08:05",
      "description": "Replace {{host}} variable with relevant host in Kerberos Descriptors",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Replace ${host} variable with relevant host in Kerberos Descriptors"
   },
   {
      "_id": "12762291",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2014-12-17 14:03:32",
      "description": "When setting the Cluster session attributes, they should be set before performing the update operations since the attributes may be needed during the process.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "session"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Session attributes should be set before performing cluster update operations"
   },
   {
      "_id": "12762036",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2014-12-16 16:18:37",
      "description": "The current mechanism for obtaining and handling KDC administrator credentials is not particularly secure thus allowing any knowledgeable user to potentally gain access to them.\n\nA new mechanism needs to be put in place to security store this data for at least the duration of a HTTP session and potentially longer in the event Ambari allow for long-term storage of this data. \n\nIdeally any solution is generic enough to handle secure data of any type.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "encryption",
         "kdc_credentials",
         "kerberos",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Create a more secure way to obtain and handle KDC administrator credentials"
   },
   {
      "_id": "12761888",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2014-12-15 22:59:26",
      "description": "Add _injected_ {{org.apache.ambari.server.state.Clusters}} into {{org.apache.ambari.server.serveraction.kerberos.KerberosServerAction}} so that the relevant cluster object ({{org.apache.ambari.server.state.Cluster}}) may be retrieved and used to help get access to the KDC administrative credentials. ",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Inject Clusters object into KerberosServerAction"
   },
   {
      "_id": "12761832",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2014-12-15 18:47:47",
      "description": "Add the ability to query the {{org.apache.ambari.server.api.services.AmbariMetaInfo}} instance for the KerberosDescriptor for the relevant stack.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Add method to retrieve KerberosDescriptor from AmbariMetaInfo"
   },
   {
      "_id": "12761613",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2014-12-14 11:17:25",
      "description": "Repro is available at http://162.216.149.62:8080\n\n{code:title=ambari-server.log}\n03:40:34,494 ERROR [qtp227646247-27] KerberosHelper:187 - Invalid 'kdc_type' value: mit-kdc\n03:40:34,494 ERROR [qtp227646247-27] AbstractResourceProvider:338 - Caught AmbariException when modifying a resource\norg.apache.ambari.server.AmbariException: Invalid 'kdc_type' value: mit-kdc\n        at org.apache.ambari.server.controller.KerberosHelper.toggleKerberos(KerberosHelper.java:188)\n        at org.apache.ambari.server.controller.AmbariManagementControllerImpl.updateCluster(AmbariManagementControllerImpl.java:1324)\n        at org.apache.ambari.server.controller.AmbariManagementControllerImpl.updateClusters(AmbariManagementControllerImpl.java:1146)\n        at org.apache.ambari.server.controller.internal.ClusterResourceProvider$2.invoke(ClusterResourceProvider.java:242)\n        at org.apache.ambari.server.controller.internal.ClusterResourceProvider$2.invoke(ClusterResourceProvider.java:239)\n        at org.apache.ambari.server.controller.internal.AbstractResourceProvider.modifyResources(AbstractResourceProvider.java:331)\n        at org.apache.ambari.server.controller.internal.ClusterResourceProvider.updateResources(ClusterResourceProvider.java:239)\n        at org.apache.ambari.server.controller.internal.ClusterControllerImpl.updateResources(ClusterControllerImpl.java:317)\n        at org.apache.ambari.server.api.services.persistence.PersistenceManagerImpl.update(PersistenceManagerImpl.java:100)\n        at org.apache.ambari.server.api.handlers.UpdateHandler.persist(UpdateHandler.java:42)\n        at org.apache.ambari.server.api.handlers.BaseManagementHandler.handleRequest(BaseManagementHandler.java:72)\n        at org.apache.ambari.server.api.services.BaseRequest.process(BaseRequest.java:135)\n        at org.apache.ambari.server.api.services.BaseService.handleRequest(BaseService.java:103)\n        at org.apache.ambari.server.api.services.BaseService.handleRequest(BaseService.java:72)\n        at org.apache.ambari.server.api.services.ClusterService.updateCluster(ClusterService.java:149)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:606)\n        at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)\n        at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205)\n        at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)\n        at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)\n        at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)\n        at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)\n        at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)\n        at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)\n        at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)\n        at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)\n        at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)\n        at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)\n        at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)\n        at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)\n        at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)\n        at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:652)\n        at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1329)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)\n        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)\n        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n        at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n        at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n        at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n        at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n        at org.apache.ambari.server.security.authorization.AmbariAuthorizationFilter.doFilter(AmbariAuthorizationFilter.java:166)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n        at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n        at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)\n        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)\n        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)\n        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)\n        at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1300)\n        at org.apache.ambari.server.api.MethodOverrideFilter.doFilter(MethodOverrideFilter.java:72)\n        at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1300)\n        at org.apache.ambari.server.api.AmbariPersistFilter.doFilter(AmbariPersistFilter.java:47)\n        at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1300)\n        at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:445)\n        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)\n        at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:559)\n        at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:227)\n        at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1038)\n        at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:374)\n        at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:189)\n        at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:972)\n        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)\n        at org.apache.ambari.server.controller.FailsafeHandlerList.handle(FailsafeHandlerList.java:132)\n        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)\n        at org.eclipse.jetty.server.Server.handle(Server.java:363)\n        at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:483)\n        at org.eclipse.jetty.server.AbstractHttpConnection.content(AbstractHttpConnection.java:931)\n        at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.content(AbstractHttpConnection.java:992)\n        at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:856)\n        at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)\n        at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82)\n        at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:627)\n        at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:51)\n        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)\n        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)\n        at java.lang.Thread.run(Thread.java:745)\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos wizard: API call to save krb5-conf configuration fails with server error"
   },
   {
      "_id": "12761543",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2014-12-13 06:11:15",
      "description": "Create orchestrator to manage enabling and disabling Kerberos on a cluster.  This  facility should be triggered from the Cluster resource update handler so updates to the cluster can be used to trigger it.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Create orchestrator to manage enabling and disabling Kerberos on a cluster"
   },
   {
      "_id": "12761100",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2014-12-11 16:31:32",
      "description": "Due to the nature of the data,{{org.apache.ambari.server.serveraction.kerberos.KerberosCredential}} should provide a facility to encrypt and decrypt itself. \n\nFor encryption, the caller should provide the KerberosCredential instance and a key.\n\nFor decryption, the caller should provide the encrypted data (base64-encoded string) and the key.\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "KerberosCredential class should encrypt and decrypt itself"
   },
   {
      "_id": "12761080",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2014-12-11 15:03:20",
      "description": "Provide a facility to write (build) and read a (temporary) file used to hold data needed for updating the configuration data of services to be configured for Kerberos.\n\nThe format of the file should be hidden from the user of this facility, but will probably be CSV.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "configurations",
         "kerberos",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Add Kerberos Configuration Metadata File Builder and Reader"
   },
   {
      "_id": "12760848",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2014-12-10 20:38:01",
      "description": "Pass Injector to ServerActionExecutor so object can be injected into ServerAction implementations.  \n\nThis is needed so that server-side actions can get resources like the AmbariManagementController, Clusters, or etc...\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "actions",
         "server-side"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Pass Injector to ServerActionExecutor so objects can be injected into ServerAction implementations"
   },
   {
      "_id": "12760651",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2014-12-10 05:29:52",
      "description": "Create Kerberos descriptor files for HDFS, YARN, MAPREDUCE2, HBASE, and HIVE services.  Also include changes for stack-level descriptor.\n\nThese files are used to describe the identities and configurations needed to properly enable Kerberos.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "hdfs",
         "kerberos",
         "kerberos_descriptor",
         "mapreduce",
         "service",
         "yarn"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Create Kerberos Descriptors for HDFS, YARN, MAPREDUCE2, HBASE, and HIVE services"
   },
   {
      "_id": "12760641",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2014-12-10 03:41:20",
      "description": "Current Kerberos descriptor handlers assume only a single service may be identified in a service-level Kerberos descriptor file.  However services like YARN include the MAPREDUCE2 service, thus multiple services need to be acknowledged.\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor",
         "stack"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Allow for service-level Kerberos descriptor to contain multiple services"
   },
   {
      "_id": "12760062",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2014-12-08 04:55:12",
      "description": "Update Apache Directory Server Library from 1.5.5 to 2.0.0-M19 to obtain bug fixes needed for future patches. \n\nOne fix in particular is DIRSERVER-1882 (https://issues.apache.org/jira/browse/DIRSERVER-1882).\n\nCurrently, the only dependency on this library are unit test cases:\n* org.apache.ambari.server.security.authorization.AmbariLdapAuthenticationProviderTest\n* org.apache.ambari.server.security.authorization.AmbariLdapAuthenticationProviderForDNWithSpaceTest\n* org.apache.ambari.server.security.authorization.AmbariLdapAuthenticationProviderBaseTest\n\nThese need to be updated to support the new library and associated dependencies. ",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "apacheds",
         "kerberos",
         "ldap"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Update Apache Directory Server Library from 1.5.5 to 2.0.0-M19"
   },
   {
      "_id": "12759426",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2014-12-04 14:13:01",
      "description": "Provide the ability to read in Kerberos descriptor files (kerberos.json) from the stack at various levels (stack-level, service-level) and to merge them into a single hierarchy.  The composite Kerberos descriptor data will be used to control the UI (Kerberos Wizard - see AMBARI-7450).\n\nAn example stack-level Kerberos Descriptor:\n{code}\n{\n  \"properties\": {\n    \"realm\": \"${cluster-env/kerberos_domain}\",\n    \"keytab_dir\": \"/etc/security/keytabs\"\n  },\n  \"identities\": [\n    {\n      \"name\": \"spnego\",\n      \"principal\": {\n        \"value\": \"HTTP/_HOST@${realm}\"\n      },\n      \"keytab\": {\n        \"file\": \"${keytab_dir}/spnego.service.keytab\",\n        \"owner\": {\n          \"name\": \"root\",\n          \"access\": \"r\"\n        },\n        \"group\": {\n          \"name\": \"${cluster-env/user_group}\",\n          \"access\": \"r\"\n        }\n      }\n    }\n  ],\n  \"configurations\": [\n  ]\n}\n{code}\n\nAn example service-level Kerberos Descriptor - HDFS:\n{code}\n{\n  \"configurations\": [\n    {\n      \"core-site\": {\n        \"hadoop.security.authentication\": \"kerberos\",\n        \"hadoop.rpc.protection\": \"authentication; integrity; privacy\",\n        \"hadoop.security.authorization\": \"true\"\n      }\n    }\n  ],\n  \"components\": [\n    {\n      \"name\": \"NAMENODE\",\n      \"identities\": [\n        {\n          \"name\" : \"namenode_nn\",\n          \"principal\": {\n            \"value\": \"nn/_HOST@${realm}\",\n            \"configuration\": \"hdfs-site/dfs.namenode.kerberos.principal\"\n          },\n          \"keytab\": {\n            \"file\": \"${keytab_dir}/nn.service.keytab\",\n            \"owner\": {\n              \"name\": \"${hadoop-env/hdfs_user}\",\n              \"access\": \"r\"\n            },\n            \"group\": {\n              \"name\": \"${cluster-env/user_group}\",\n              \"access\": \"\"\n            },\n            \"configuration\": \"hdfs-site/dfs.namenode.keytab.file\"\n          }\n        },\n        {\n          \"name\" : \"namenode_host\",\n          \"principal\": {\n            \"value\": \"host/_HOST@${realm}\",\n            \"configuration\": \"hdfs-site/dfs.namenode.kerberos.https.principal\"\n          },\n          \"keytab\": {\n            \"file\": \"${keytab_dir}/host.keytab\",\n            \"owner\": {\n              \"name\": \"${hadoop-env/hdfs_user}\",\n              \"access\": \"r\"\n            },\n            \"group\": {\n              \"name\": \"${cluster-env/user_group}\",\n              \"access\": \"\"\n            },\n            \"configuration\": \"hdfs-site/dfs.namenode.keytab.file\"\n          }\n        },\n        {\n          \"name\" : \"/spnego\",\n          \"principal\": {\n            \"configuration\": \"hdfs-site/dfs.web.authentication.kerberos.principal\"\n          },\n          \"keytab\": {\n            \"configuration\": \"hdfs/dfs.web.authentication.kerberos.keytab\"\n          }\n        }\n      ]\n    },\n    {\n      \"name\": \"DATANODE\",\n      \"identities\": [\n        {\n          \"name\" : \"datanode_dn\",\n          \"principal\": {\n            \"value\": \"dn/_HOST@${realm}\",\n            \"configuration\": \"hdfs-site/dfs.namenode.kerberos.principal\"\n          },\n          \"keytab\": {\n            \"file\": \"${keytab_dir}/dn.service.keytab\",\n            \"owner\": {\n              \"name\": \"${hadoop-env/hdfs_user}\",\n              \"access\": \"r\"\n            },\n            \"group\": {\n              \"name\": \"${cluster-env/user_group}\",\n              \"access\": \"\"\n            },\n            \"configuration\": \"hdfs-site/dfs.namenode.keytab.file\"\n          }\n        },\n        {\n          \"name\" : \"datanode_host\",\n          \"principal\": {\n            \"value\": \"host/_HOST@${realm}\",\n            \"configuration\": \"hdfs-site/dfs.datanode.kerberos.https.principal\"\n          },\n          \"keytab\": {\n            \"file\": \"${keytab_dir}/host.keytab.file\",\n            \"owner\": {\n              \"name\": \"${hadoop-env/hdfs_user}\",\n              \"access\": \"r\"\n            },\n            \"group\": {\n              \"name\": \"${cluster-env/user_group}\",\n              \"access\": \"\"\n            },\n            \"configuration\": \"hdfs-site/dfs.namenode.secondary.keytab.file\"\n          }\n        }\n      ]\n    },\n    {\n      \"name\": \"SECONDARY_NAMENODE\",\n      \"identities\": [\n        {\n          \"name\" : \"secondary_namenode_nn\",\n          \"principal\": {\n            \"value\": \"nn/_HOST@${realm}\",\n            \"configuration\": \"hdfs-site/dfs.namenode.secondary.kerberos.principal\"\n          },\n          \"keytab\": {\n            \"file\": \"${keytab_dir}/snn.service.keytab\",\n            \"owner\": {\n              \"name\": \"${hadoop-env/hdfs_user}\",\n              \"access\": \"r\"\n            },\n            \"group\": {\n              \"name\": \"${cluster-env/user_group}\",\n              \"access\": \"\"\n            },\n            \"configuration\": \"hdfs-site/dfs.namenode.secondary.keytab.file\"\n          }\n        },\n        {\n          \"name\" : \"secondary_namenode_host\",\n          \"principal\": {\n            \"value\": \"host/_HOST@${realm}\",\n            \"configuration\": \"hdfs-site/dfs.namenode.secondary.kerberos.https.principal\"\n          },\n          \"keytab\": {\n            \"file\": \"${keytab_dir}/host.keytab.file\",\n            \"owner\": {\n              \"name\": \"${hadoop-env/hdfs_user}\",\n              \"access\": \"r\"\n            },\n            \"group\": {\n              \"name\": \"${cluster-env/user_group}\",\n              \"access\": \"\"\n            },\n            \"configuration\": \"hdfs-site/dfs.namenode.secondary.keytab.file\"\n          }\n        },\n        {\n          \"name\" : \"/spnego\",\n          \"principal\": {\n            \"configuration\": \"hdfs-site/dfs.web.authentication.kerberos.principal\"\n          },\n          \"keytab\": {\n            \"configuration\": \"hdfs/dfs.web.authentication.kerberos.keytab\"\n          }\n        }\n      ]\n    }\n  ]\n}\n{code}\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/3",
         "id": "3",
         "description": "A task that needs to be done.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype",
         "name": "Task",
         "subtask": false,
         "avatarId": 21148
      },
      "labels": [
         "kerberos",
         "kerberos_descriptor",
         "stack"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Provide a way to parse and handle Kerberos descriptors"
   },
   {
      "_id": "12758493",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2014-11-30 12:07:29",
      "description": "The Pig service components should indicate security state when queried by Ambari Agent via STATUS_COMMAND.  Each component should determine it's state as follows:\n\nh3. PIG\nh4. Indicators\n* Command JSON\n** config\\['configurations']\\['cluster-env']\\['security_enabled'] \n*** = \u201ctrue\u201d\n\nh4. Pseudocode\n{code}\nif indicators imply security is on and validate\n    state = SECURED_KERBEROS\nelse\n    state = UNSECURED\n{code}\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "kerberos",
         "pig",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
         "name": "Minor",
         "id": "4"
      },
      "projectname": "AMBARI",
      "summary": "Pig service components should indicate security state"
   },
   {
      "_id": "12758492",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2014-11-30 11:52:34",
      "description": "`The Oozie service components should indicate security state when queried by Ambari Agent via STATUS_COMMAND.  Each component should determine it's state as follows:\n\nh3. OOZIE_SERVER\nh4. Indicators\n* Command JSON\n** config\\['configurations']\\['cluster-env']\\['security_enabled'] \n*** = \u201ctrue\u201d\n* Configuration File: params.conf_dir + \u2018/oozie-site.xml\u2019\n** oozie.service.AuthorizationService.security.enabled\n*** = \u201ctrue\u201d\n*** required\n** oozie.service.HadoopAccessorService.kerberos.enabled\n*** = \u201ctrue\u201d\n*** required\n** local.realm\n*** not empty\n*** required\n** oozie.authentication.type\n*** = \u201ckerberos\u201d\n*** required\n** oozie.authentication.kerberos.principal\n*** not empty\n*** required\n** oozie.authentication.kerberos.keytab\n*** not empty\n*** path exists and is readable\n*** required\n** oozie.authentication.kerberos.name.rules\n*** not empty\n*** required\n** oozie.service.HadoopAccessorService.keytab.file\n*** not empty\n*** path exists and is readable\n*** required\n** oozie.service.HadoopAccessorService.kerberos.principal\n*** not empty\n*** required\n\nh4. Pseudocode\n{code}\nif indicators imply security is on and validate\n    if kinit(oozie principal) && kinit(HadoopAccessorService principal) succeeds\n`        state = SECURED_KERBEROS\n    else\n        state = ERROR \nelse\n    state = UNSECURED\n{code}\n\n_*Note*_: Due to the _cost_ of calling {{kinit}} results should be cached for a period of time before retrying.  This may be an issue depending on the frequency of the heartbeat timeout.\n_*Note*_: {{kinit}} calls should specify a _temporary_ cache file which should be destroyed after command is executed - BUG-29477",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "kerberos",
         "oozie",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Oozie service components should indicate security state"
   },
   {
      "_id": "12758488",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2014-11-30 11:23:37",
      "description": "The Kafka service components should indicate security state when queried by Ambari Agent via STATUS_COMMAND.  Each component should determine it's state as follows:\n\nh3. KAFKA_BROKER\nh4. Indicators\n* Command JSON\n** config\\['configurations']\\['cluster-env']\\['security_enabled'] \n*** = \u201ctrue\u201d\n\nh4. Pseudocode\n{code}\nif indicators imply security is on and validate\n    state = SECURED_KERBEROS\nelse\n    state = UNSECURED\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "kafka",
         "kerberos",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
         "name": "Minor",
         "id": "4"
      },
      "projectname": "AMBARI",
      "summary": "Kafka service components should indicate security state"
   },
   {
      "_id": "12758487",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2014-11-30 11:10:06",
      "description": "The Hive service components should indicate security state when queried by Ambari Agent via STATUS_COMMAND.  Each component should determine it's state as follows:\n\nh3. HIVE_METASTORE\nh4. Indicators\n* Command JSON\n** config\\['configurations']\\['cluster-env']\\['security_enabled'] \n*** = \u201ctrue\u201d\n* Configuration File: params.hive_client_conf_dir + \u2018hive-site.xml\u2019\n** hive.metastore.sasl.enabled\"\n*** = \"true\"\n*** required \n** hive.server2.authentication\n*** = \u201ckerberos\u201d\n*** required\n** hive.security.authorization.enabled\n*** = \u201ctrue\u201d\n*** required\n** hive.metastore.kerberos.principal\n*** not empty\n*** required\n** hive.metastore.kerberos.keytab.file\n*** not empty\n*** path exists and is readable\n*** required\n\nh4. Pseudocode\n{code}\nif indicators imply security is on and validate\n    if kinit(have metastore principal) succeeds\n        state = SECURED_KERBEROS\n    else\n        state = ERROR \nelse\n    state = UNSECURED\n{code}\n\nh3. HIVE_SERVER\nh4. Indicators\n* Command JSON\n** config\\['configurations']\\['cluster-env']\\['security_enabled'] \n*** = \u201ctrue\u201d\n* Configuration File: params.hive_client_conf_dir + \u2018hive-site.xml\u2019\n** hive.metastore.sasl.enabled\"\n*** = \"true\"\n*** required \n** hive.server2.authentication\n*** = \u201ckerberos\u201d\n*** required\n** hive.security.authorization.enabled\n*** = \u201ctrue\u201d\n*** required\n** hive.server2.authentication.kerberos.principal\n*** not empty\n*** required\n** hive.server2.authentication.kerberos.keytab\n*** not empty\n*** path exists and is readable\n*** required\n** hive.server2.authentication.spnego.principal\n*** not empty\n*** required\n** hive.server2.authentication.spnego.keytab\n*** not empty\n*** path exists and is readable\n*** required\n\nh4. Pseudocode\n{code}\nif indicators imply security is on and validate\n    if kinit(hive server principal) succeeds\n        state = SECURED_KERBEROS\n    else\n        state = ERROR \nelse\n    state = UNSECURED\n{code}\n\nh3. WEBHCAT_SERVER\nh4. Indicators\n* Command JSON\n** config\\['configurations']\\['cluster-env']\\['security_enabled'] \n*** = \u201ctrue\u201d\n* Configuration File: params.hive_client_conf_dir + \u2018hive-site.xml\u2019\n** hive.metastore.sasl.enabled\"\n*** = \"true\"\n*** required \n** hive.server2.authentication\n*** = \u201ckerberos\u201d\n*** required\n** hive.security.authorization.enabled\n*** = \u201ctrue\u201d\n*** required\n* Configuration File: params.config_dir + \u2018webhcat-site.xml\u2019\n** templeton.kerberos.secret\n*** = \u201csecret\u201d\n*** required\n** templeton.kerberos.principal\n*** not empty\n*** required\n** templeton.kerberos.keytab\n*** not empty\n*** path exists and is readable\n*** required\n\nh4. Pseudocode\n{code}\nif indicators imply security is on and validate\n    if kinit(webhcat server principal) succeeds\n        state = SECURED_KERBEROS\n    else\n        state = ERROR \nelse\n    state = UNSECURED\n{code}\n\nh3. HIVE_CLIENT\nh4. Indicators\n* Command JSON\n** config\\['configurations']\\['cluster-env']\\['security_enabled'] \n*** = \u201ctrue\u201d\n\nh4. Pseudocode\n{code}\nif indicators imply security is on and validate\n    state = SECURED_KERBEROS\nelse\n    state = UNSECURED\n{code}\n\n_*Note*_: Due to the _cost_ of calling {{kinit}} results should be cached for a period of time before retrying.  This may be an issue depending on the frequency of the heartbeat timeout.\n_*Note*_: {{kinit}} calls should specify a _temporary_ cache file which should be destroyed after command is executed - BUG-29477",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "hcatalog",
         "hive",
         "kerberos",
         "metastore",
         "mysql",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Hive service components should indicate security state"
   },
   {
      "_id": "12758434",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2014-11-29 11:20:11",
      "description": "The HBase service components should indicate security state when queried by Ambari Agent via STATUS_COMMAND.  Each component should determine it's state as follows:\n\nh3. HBASE_MASTER\nh4. Indicators\n* Command JSON\n** config\\['configurations']\\['cluster-env']\\['security_enabled'] \n*** = \u201ctrue\u201d\n* Configuration File: params.hbase_conf_dir + \u2018/hbase-site.xml\u2019\n** hbase.security.authentication\n*** = \u201ckerberos\u201d\n*** required\n** hbase.security.authorization\n*** = \u201ctrue\u201d\n*** required\n** hbase.master.keytab.file\n*** not empty\n*** path exists and is readable\n*** required\n** hbase.master.kerberos.principal\n*** not empty\n*** required\n\nh4. Pseudocode\n{code}\nif indicators imply security is on and validate\n    if kinit(hbase master principal) succeeds\n        state = SECURED_KERBEROS\n    else\n        state = ERROR \nelse\n    state = UNSECURED\n{code}\n\nh3. HBASE_REGIONSERVER\nh4. Indicators\n* Command JSON\n** config\\['configurations']\\['cluster-env']\\['security_enabled'] \n*** = \u201ctrue\u201d\n* Configuration File: params.hbase_conf_dir + \u2018hbase-site.xml\u2019\n** hbase.security.authentication\n*** = \u201ckerberos\u201d\n*** required\n** hbase.security.authorization\n*** = \u201ctrue\u201d\n*** required\n** hbase.regionserver.keytab.file\n*** not empty\n*** path exists and is readable\n*** required\n** hbase.regionserver.kerberos.principal\n*** not empty\n*** required\n\nh4. Pseudocode\n{code}\nif indicators imply security is on and validate\n    if kinit(hbase region server principal) succeeds\n        state = SECURED_KERBEROS\n    else\n        state = ERROR \nelse\n    state = UNSECURED\n{code}\n\n_*Note*_: Due to the _cost_ of calling {{kinit}} results should be cached for a period of time before retrying.  This may be an issue depending on the frequency of the heartbeat timeout.\n_*Note*_: {{kinit}} calls should specify a _temporary_ cache file which should be destroyed after command is executed - BUG-29477\n\n_*Note*_: There may be additional work related to _REST gateway impersonation_",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "hbase",
         "kerberos",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "HBase service components should indicate security state"
   },
   {
      "_id": "12758432",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2014-11-29 10:51:42",
      "description": "The Flume service components should indicate security state when queried by Ambari Agent via STATUS_COMMAND.  Each component should determine it's state as follows:\n\nh3. FLUME_HANDLER\nh4. Indicators\n* Command JSON\n** config\\['configurations']\\['cluster-env']\\['security_enabled'] \n*** = \u201ctrue\u201d\n\nh4. Pseudocode\n{code}\nif indicators imply security is on and validate\n    state = SECURED_KERBEROS\nelse\n    state = UNSECURED\n{code}\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "flume",
         "kerberos",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Flume service components should indicate security state"
   },
   {
      "_id": "12758430",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2014-11-29 10:26:33",
      "description": "The Kerberos service components should indicate security state when queried by Ambari Agent via STATUS_COMMAND.  Each component should determine it's state as follows:\n\nh3. KERBEROS_CLIENT\nh4. Indicators\n* Command JSON\n** config\\['configurations']\\['cluster-env']\\['security_enabled'] \n*** = \u201ctrue\u201d\n** config\\['configurations']\\['cluster-env']\\['smokeuser_keytab'] \n*** not empty\n*** path exists and is readable\n*** required\n** config\\['configurations']\\['cluster-env']\\['smokeuser'] \n*** not empty\n*** required\n\nh4. Pseudocode\n{code}\nif indicators imply security is on and validate\n    if kinit(smoketest user) succeeds\n        state = SECURED_KERBEROS\n    else\n        state = ERROR \nelse\n    state = UNSECURED\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "kerberos",
         "lifecycle",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
         "name": "Minor",
         "id": "4"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos service components should indicate security state"
   },
   {
      "_id": "12758410",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2014-11-29 00:15:44",
      "description": "The YARN service components should indicate security state when queried by Ambari Agent via STATUS_COMMAND.  Each component should determine it's state as follows:\n\nh3. RESOURCEMANAGER\nh4. Indicators\n* Command JSON\n** config\\['configurations']\\['cluster-env']\\['security_enabled'] \n*** = \u201ctrue\u201d\n* Configuration File: /etc/hadoop/conf/yarn-site.xml\n** yarn.timeline-service.enabled\n*** = \"true\"\n*** required\n** yarn.timeline-service.http-authentication.type\n*** = \"kerberos\"\n*** required\n** yarn.acl.enable\n*** = \"true\"\n*** required\n** yarn.resourcemanager.keytab\n*** not empty\n*** path exists and is readable\n*** required\n** yarn.resourcemanager.principal\n*** not empty\n*** required\n** yarn.resourcemanager.webapp.spnego-keytab-file\n*** not empty\n*** path exists and is readable\n*** required\n** yarn.resourcemanager.webapp.spnego-principal\n*** not empty\n*** required\n\nh4. Pseudocode\n{code}\nif indicators imply security is on and validate\n    if kinit(resourcemanager principal) succeeds\n        state = SECURED_KERBEROS\n    else\n        state = ERROR \nelse\n    state = UNSECURED\n{code}\n\nh3. NODEMANAGER\nh4. Indicators\n* Command JSON\n** config\\['configurations']\\['cluster-env']\\['security_enabled'] \n*** = \u201ctrue\u201d\n* Configuration File: /etc/hadoop/conf/yarn-site.xml\n** yarn.timeline-service.enabled\n*** = \"true\"\n*** required\n** yarn.timeline-service.http-authentication.type\n*** = \"kerberos\"\n*** required\n** yarn.acl.enable\n*** = \"true\"\n*** required\n** yarn.nodemanager.keytab\n*** not empty\n*** path exists and is readable\n*** required\n** yarn.nodemanager.principal\n*** not empty\n*** required\n** yarn.nodemanager.webapp.spnego-keytab-file\n*** not empty\n*** path exists and is readable\n*** required\n** yarn.nodemanager.webapp.spnego-principal\n*** not empty\n*** required\n\nh4. Pseudocode\n{code}\nif indicators imply security is on and validate\n    if kinit(nodemanager principal) succeeds\n        state = SECURED_KERBEROS\n    else\n        state = ERROR \nelse\n    state = UNSECURED\n{code}\n\nh3. APP_TIMELINE_SERVER\nh4. Indicators\n* Command JSON\n** config\\['configurations']\\['cluster-env']\\['security_enabled'] \n*** = \u201ctrue\u201d\n* Configuration File: /etc/hadoop/conf/yarn-site.xml\n** yarn.timeline-service.enabled\n*** = \"true\"\n*** required\n** yarn.timeline-service.http-authentication.type\n*** = \"kerberos\"\n*** required\n** yarn.acl.enable\n*** = \"true\"\n*** required\n** yarn.timeline-service.keytab\n*** not empty\n*** path exists and is readable\n*** required\n** yarn.timeline-service.principal\n*** not empty\n*** required\n** yarn.timeline-service.http-authentication.kerberos.keytab\n*** not empty\n*** path exists and is readable\n*** required\n** yarn.timeline-service.http-authentication.kerberos.principal\n*** not empty\n*** required\n\nh4. Pseudocode\n{code}\nif indicators imply security is on and validate\n    if kinit(nodemanager principal) succeeds\n        state = SECURED_KERBEROS\n    else\n        state = ERROR \nelse\n    state = UNSECURED\n{code}\n\n_*Note*_: Due to the _cost_ of calling {{kinit}} results should be cached for a period of time before retrying.  This may be an issue depending on the frequency of the heartbeat timeout.\n_*Note*_: {{kinit}} calls should specify a _temporary_ cache file which should be destroyed after command is executed - BUG-29477",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "kerberos",
         "lifecycle",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "YARN service components should indicate security state"
   },
   {
      "_id": "12758407",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2014-11-28 23:29:34",
      "description": "The Falcon service components should indicate security state when queried by Ambari Agent via STATUS_COMMAND. Each component should determine it's state as follows:\n\nh3. FALCON_CLIENT\nh4. Indicators\n* Command JSON\n** config\\['configurations']\\['cluster-env']\\['security_enabled'] \n*** = \u201ctrue\u201d\n\nh4. PseudoCode\n{code}\nif indicators imply security is on and validate\n    state = SECURED_KERBEROS\nelse\n    state = UNSECURED\n{code}\n\nh3. FALCON_SERVER\nh4. Indicators\n* Command JSON\n** config\\['configurations']\\['cluster-env']\\['security_enabled'] \n*** = \u201ctrue\u201d\n* Configuration File: params.falcon_conf_dir + \u2018/startup.properties\u2019\n** *.falcon.authentication.type\n*** = \u201ckerberos\u201d\n** *.falcon.service.authentication.kerberos.principal\n*** not empty\n*** required\n** *.falcon.service.authentication.kerberos.keytab\n*** not empty\n*** required\n*** path exists and is readable\n** *.dfs.namenode.kerberos.principal\n*** not empty\n*** required\n** *.falcon.http.authentication.type\n*** = \u201ckerberos\u201d\n** *.falcon.http.authentication.kerberos.principal\n*** not empty\n*** required\n** *.falcon.http.authentication.kerberos.keytab\n*** not empty\n*** required\n*** path exists and is readable\n\nh4. Pseudocode\n{code} \nif indicators imply security is on and validate\n    if kinit(falcon principal) && kinit(http principal) succeeds\n        state = SECURED_KERBEROS\n    else\n        state = ERROR \nelse\n    state = UNSECURED\n{code}\n \n_*Note*_: Due to the _cost_ of calling {{kinit}} results should be cached for a period of time before retrying.  This may be an issue depending on the frequency of the heartbeat timeout.\n_*Note*_: {{kinit}} calls should specify a _temporary_ cache file which should be destroyed after command is executed - BUG-29477",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "kerberos",
         "lifecycle",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Falcon service components should indicate security state"
   },
   {
      "_id": "12758405",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2014-11-28 23:10:31",
      "description": "The HDFS service components should indicate security state when queried by Ambari Agent via STATUS_COMMAND.  Each component should determine it's state as follows:\n\nh2. NAMENODE\nh3. Indicators\n* Command JSON\n** config\\['configurations']\\['cluster-env']\\['security_enabled'] \n*** = \u201ctrue\u201d\n* Configuration File: params.hadoop_conf_dir + '/core-site.xml'\n** hadoop.security.authentication\n*** = \u201ckerberos\u201d\n*** required\n** hadoop.security.authorization\n*** = \u201ctrue\u201d\n*** required\n** hadoop.rpc.protection\n*** = \u201cauthentication\u201d\n*** required\n** hadoop.security.auth_to_local\n*** not empty\n*** required\n* Configuration File: /params.hadoop_conf_dir + '/hdfs-site.xml'\n** dfs.namenode.keytab.file\n*** not empty\n*** path exists and is readable\n*** required\n** dfs.namenode.kerberos.principal\n*** not empty\n*** required\n\nh3. Pseudocode\n{code}\nif indicators imply security is on and validate\n    if kinit(namenode principal) && kinit(https principal) succeeds\n        state = SECURED_KERBEROS\n    else\n        state = ERROR \nelse\n    state = UNSECURED\n{code}\n\nh2. DATANODE\nh3. Indicators\n* Command JSON\n** config\\['configurations']\\['cluster-env']\\['security_enabled'] \n*** = \u201ctrue\u201d\n* Configuration File: params.hadoop_conf_dir + '/core-site.xml'\n** hadoop.security.authentication\n*** = \u201ckerberos\u201d\n*** required\n** hadoop.security.authorization\n*** = \u201ctrue\u201d\n*** required\n** hadoop.rpc.protection\n*** = \u201cauthentication\u201d\n*** required\n** hadoop.security.auth_to_local\n*** not empty\n*** required\n* Configuration File: params.hadoop_conf_dir + '/hdfs-site.xml'\n** dfs.datanode.keytab.file\n*** not empty\n*** path exists and is readable\n*** required\n** dfs.datanode.kerberos.principal\n*** not empty\n*** required\n\nh3. Pseudocode\n{code}\nif indicators imply security is on and validate\n    if kinit(datanode principal) && kinit(https principal) succeeds\n        state = SECURED_KERBEROS\n    else\n        state = ERROR \nelse\n    state = UNSECURED\n{code}\n\nh2. SECONDARY_NAMENODE\nh3. Indicators\n* Command JSON\n** config\\['configurations']\\['cluster-env']\\['security_enabled'] \n*** = \u201ctrue\u201d\n* Configuration File: params.hadoop_conf_dir + '/core-site.xml'\n** hadoop.security.authentication\n*** = \u201ckerberos\u201d\n*** required\n** hadoop.security.authorization\n*** = \u201ctrue\u201d\n*** required\n** hadoop.rpc.protection\n*** = \u201cauthentication\u201d\n*** required\n** hadoop.security.auth_to_local\n*** not empty\n*** required\n* Configuration File: params.hadoop_conf_dir + '/hdfs-site.xml'\n** dfs.secondary.namenode.keytab.file\n*** not empty\n*** path exists and is readable\n*** required\n** dfs.secondary.namenode.kerberos.principal\n*** not empty\n*** required\n\nh3. Pseudocode\n{code}\nif indicators imply security is on and validate\n    if kinit(namenode principal) && kinit(https principal) succeeds\n        state = SECURED_KERBEROS\n    else\n        state = ERROR \nelse\n    state = UNSECURED\n{code}\n\nh2. HDFS_CLIENT\nh3. Indicators\n* Command JSON\n** config\\['configurations']\\['cluster-env']\\['security_enabled'] \n*** = \u201ctrue\u201d\n* Configuration File: params.hadoop_conf_dir + '/core-site.xml'\n** hadoop.security.authentication\n*** = \u201ckerberos\u201d\n*** required\n** hadoop.security.authorization\n*** = \u201ctrue\u201d\n*** required\n** hadoop.rpc.protection\n*** = \u201cauthentication\u201d\n*** required\n** hadoop.security.auth_to_local\n*** not empty\n*** required\n* Env Params:  hadoop-env\n** hdfs_user_keytab\n*** not empty\n*** path exists and is readable\n*** required\n** hdfs_user_principal\n*** not empty\n*** required\n\nh3. Pseudocode\n{code}\nif indicators imply security is on and validate\n    if kinit(hdfs user principal) succeeds\n        state = SECURED_KERBEROS\n    else\n        state = ERROR \nelse\n    state = UNSECURED\n{code}\n\nh2. JOURNALNODE\nh3. Indicators\n* Command JSON\n** config\\['configurations']\\['cluster-env']\\['security_enabled'] \n*** = \u201ctrue\u201d\n* Configuration File: params.hadoop_conf_dir + '/core-site.xml'\n** hadoop.security.authentication\n*** = \u201ckerberos\u201d\n*** required\n** hadoop.security.authorization\n*** = \u201ctrue\u201d\n*** required\n** hadoop.rpc.protection\n*** = \u201cauthentication\u201d\n*** required\n** hadoop.security.auth_to_local\n*** not empty\n*** required\n* Configuration File: /params.hadoop_conf_dir + '/hdfs-site.xml'\n** dfs.journalnode.keytab.file\n*** not empty\n*** path exists and is readable\n*** required\n** dfs.journalnode.kerberos.principal\n*** not empty\n*** required\nh3. Pseudocode\n{code}\nif indicators imply security is on and validate\n    state = SECURED_KERBEROS\nelse\n    state = UNSECURED\n{code}\n\nh2. ZKFC\nh3. Indicators\n* Command JSON\n** config\\['configurations']\\['cluster-env']\\['security_enabled'] \n*** = \u201ctrue\u201d\n* Configuration File: params.hadoop_conf_dir + '/core-site.xml'\n** hadoop.security.authentication\n*** = \u201ckerberos\u201d\n*** required\n** hadoop.security.authorization\n*** = \u201ctrue\u201d\n*** required\n** hadoop.rpc.protection\n*** = \u201cauthentication\u201d\n*** required\n** hadoop.security.auth_to_local\n*** not empty\n*** required\n\nh3. Pseudocode\n{code}\nif indicators imply security is on and validate\n    state = SECURED_KERBEROS\nelse\n    state = UNSECURED\n{code}\n\n_*Note*_: Due to the _cost_ of calling {{kinit}} results should be cached for a period of time before retrying.  This may be an issue depending on the frequency of the heartbeat timeout.\n_*Note*_: {{kinit}} calls should specify a _temporary_ cache file which should be destroyed after command is executed - BUG-29477",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "agent",
         "kerberos",
         "lifecycle",
         "security"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "HDFS service components should indicate security state"
   },
   {
      "_id": "12757943",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2014-11-26 10:43:16",
      "description": "Create server-side actions to generate the Kerberos principals and keytabs.  These actions will be used when setting up Kerberos for services when Kerberizing a cluster. \n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/2",
         "id": "2",
         "description": "A new feature of the product, which has yet to be developed.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype",
         "name": "New Feature",
         "subtask": false,
         "avatarId": 21141
      },
      "labels": [
         "kerberos",
         "server-side"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Create server-side actions to create kerberos principals and keytabs"
   },
   {
      "_id": "12757519",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2014-11-24 21:30:49",
      "description": "On Install aand Test kerberos page, If optional values for test principal and test keytab are left blank then test kerberos command (kerberos service check) fails.\n\nThis occurs because test user details are empty rather than missing from the request/configuration.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "api"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Kerberos wizard: Test kerberos command fails when no credentials specified for test user"
   },
   {
      "_id": "12755616",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         }
      ],
      "created": "2014-11-15 16:29:36",
      "description": "In order to properly handle the automated installation or removal of a security infrastructure (like Kerberos) in the cluster, Ambari needs to know whether each component on the hosts of the cluster is properly _secured_ or not.  This information may be compared with data on the Ambari server to help determine what steps should be taken to ensure the cluster is in the correct _secured_ state.\n\nTo do this, the current and desired component security state is maintained in the Ambari database.  The Ambari server will update the desired state details according to whether the cluster is to be secured or not and whether the relevant service has enough metadata to be secured.  If the desired and actual security state details do not match, the Ambari server will take the necessary steps to work towards synchronization. \n\nIn order for a component to indicate its security status, a new property needs to be returned in the {{STATUS_COMMAND}} response message (from the Ambari agent).  This property should be named \u2018securityState\u2019 and should have one of the following values:\n\n* {{UNKNOWN}} - Indicates that it is not known whether the service or component is secured or not\n* {{UNSECURED}} - Indicates service or component is not or should not be secured\n* {{SECURED_KERBEROS}} - Indicates component is or should be secured using Kerberos\n* {{ERROR}} - Indicates the component is not secured due to an error condition\n\nTo properly set this state value, a call needs to be executed per component querying for its specific state.  Due to the differences on how each component is secured and how it may be determined if security is setup what type is configured, and working is it properly, it is necessary for each component to have its own logic for determining this state. Therefore the ambari-agent process will need to call into the component\u2019s configured (lifecycle) script and wait for its response - not unlike how it determines whether the component is up and running.\n\nAfter the infrastructure is in place, each service definition needs to be updated to implement the new security status check function.  The function should perform the following steps:\n\n* Determine if security is enabled or disabled\n** If disabled, return \"UNSECURED\"\n** If enabled, determine what type of security is enabled\n*** If Kerberos is configured\n**** Perform tests (kinit?, ping KDC?) to determine if the configuration appears to be working\n***** If working, return \u201cSECURED_KERBEROS\u201d\n***** If not working, return \u201cERROR\u201d\n*** Else, return \"UNKNOWN\"\n\nIf no function is available, the Ambari agent should return \u201cUNKNOWN\u201d.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/2",
         "id": "2",
         "description": "A new feature of the product, which has yet to be developed.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype",
         "name": "New Feature",
         "subtask": false,
         "avatarId": 21141
      },
      "labels": [
         "kerberos",
         "states"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Components should indicate Security State (via ambari-agent)"
   },
   {
      "_id": "12755470",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2014-11-14 20:16:50",
      "description": "In order to track which services and components have been or need to be secured, several tables need to be updated with a {{security_state}} column to contain one the following values:\n\n* {{UNKNOWN}} - Indicates that it is not known whether the service or component is secured or not\n* {{UNSECURED}} - Indicates service or component is not or should not be secured\n* {{SECURED_KERBEROS}} - Indicates component is or should be secured using Kerberos\n* {{SECURING}} - Indicates the component is in the process of being secured\n* {{UNSECURING}} - Indicates the component is in the process of being unsecured\n* {{ERROR}} - Indicates the component is not secured due to an error condition\n\nThe following tables need to be updated:\n\n* hostcomponentdesiredstate - To indicate whether the component needs security added or removed\n* hostcomponentstate - To indicate whether the component is currently configured for security or not \n* servicedesiredstate - To indicate whether the service (and it components) should or should not be secured",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/2",
         "id": "2",
         "description": "A new feature of the product, which has yet to be developed.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype",
         "name": "New Feature",
         "subtask": false,
         "avatarId": 21141
      },
      "labels": [
         "kerberos"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Add Security State to Ambari database"
   },
   {
      "_id": "12754487",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2014-11-11 15:34:56",
      "description": "To help with _kerberizing_ a cluster, a {{Kerberos Plan}} may be used set relevant security properties for a service.\n\nA {{Kerberos Plan}} is essentially composite {{Kerberos Descriptor}} consisting of details for an entire cluster (as opposed to just a single service).  The details that a Kerberos Plan encapsulates are as follows:\n* Cluster-wide Kerberos Identities\n* Cluster-wide Kerberos-related configurations\n* Service-specific Kerberos Identities\n* Service-specific Kerberos-related configurations\n\nAn (pseudo) Kerberos Plan may be as follows:\n{code}\n{\n  \"identities\": [\n    ... cluster-wide identity specifications ...\n  ],\n  \"configurations\": [\n    ... cluster-wide configuration specifications ...\n  ],\n  \"services\": [\n    {\n      ... service-specific specifications ...\n      \"components\": [\n        ... component-specific specifications ...\n     ]\n    }\n  ]\n}\n{code}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/2",
         "id": "2",
         "description": "A new feature of the product, which has yet to be developed.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype",
         "name": "New Feature",
         "subtask": false,
         "avatarId": 21141
      },
      "labels": [
         "api",
         "kerberos",
         "kerberos_plan",
         "resource"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
         "name": "Blocker",
         "id": "1"
      },
      "projectname": "AMBARI",
      "summary": "Create facility to get and set kerberos plans via REST API"
   },
   {
      "_id": "12754141",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2014-11-10 14:10:47",
      "description": "Provide a way for a caller via the REST API to get information about a service's Kerberos descriptor.  This information should probably be attached to a service resource response.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/2",
         "id": "2",
         "description": "A new feature of the product, which has yet to be developed.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype",
         "name": "New Feature",
         "subtask": false,
         "avatarId": 21141
      },
      "labels": [
         "api",
         "service",
         "stack"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Provide a way to get service-specific Kerberos descriptor via REST API"
   },
   {
      "_id": "12750780",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2014-10-27 14:28:29",
      "description": "Ambari currently handles _client-/agent-side_ commands; however there is no ability to handle _server-side_ commands. Server-side commands should be specified as a task in a stage and managed along with the stage.\n\n*Use Case:*  Generate principals and keytabs on the Ambari server before sending the keytabs to their relevant hosts.\n\n*Implementation:*  To add the concept of a server-side task:\n* update {{org.apache.ambari.server.serveraction.ServerAction}} to be an _abstract class_\n** _server-side_ tasks must implement this class \n* reuse existing _host_role_command_ and _execution_command_ data\n** _server-side_ tasks are to have a role of {{AMBARI_SERVER_ACTION}}\n** _server-side_  execution command data should be encapsulated as JSON and specify the ServerAction implementation class and any needed payload data\n* {{org.apache.ambari.server.actionmanager.ActionScheduler}} and {{org.apache.ambari.server.serveraction.ServerActionManagerImpl}} need to be updated to handle the execution of server-side tasks\n** each _server-side_ task should be executed in its own thread.\n*** _server_side_ tasks should be executed in (staged) order, serially - not in parallel\n*** _server_side_ tasks should ensure not to mess up _stage_ ordering\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/2",
         "id": "2",
         "description": "A new feature of the product, which has yet to be developed.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype",
         "name": "New Feature",
         "subtask": false,
         "avatarId": 21141
      },
      "labels": [
         "ambari-server",
         "commands",
         "server",
         "server-side",
         "tasks"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Allow for server-side commands"
   },
   {
      "_id": "12749306",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2014-10-20 17:39:35",
      "description": "{{ShellCommandUtil.Results}} class should be _public_, _not package_ private. Because it is _package private_, any {{ShellCommandUtil}} public methods returning a {{ShellCommandUtil.Results}} is basically unusable outside of the {{org.apache.ambari.server.utils}} package.\n\nSolution:  Make {{ShellCommandUtil.Results}} and its methods explicitly _public_",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "utils"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
         "name": "Minor",
         "id": "4"
      },
      "projectname": "AMBARI",
      "summary": "ShellCommandUtil.Results class should be public, not package private"
   },
   {
      "_id": "12748780",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2014-10-17 01:20:50",
      "description": "When initializing an instance of the OsFamily class, if the {{os_family.json}} file is not found, the error message specified in the thrown exception is missing the relevant details:\n\n{code}\nCould not load OS family definition from %s file\n{code}\n\nThe absolute path to the file should be presented rather than {{%s}}.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "ambari-server",
         "exception-reporting"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/5",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/trivial.svg",
         "name": "Trivial",
         "id": "5"
      },
      "projectname": "AMBARI",
      "summary": "Error message missing details in OsFamily init method"
   },
   {
      "_id": "12743515",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         }
      ],
      "created": "2014-09-23 13:14:55",
      "description": "Update API to enable the ability to configure services to use Kerberos.  The API call(s) should create necessary Kerberos identities (if necessary) and keytab files, distribute them to the relevant hosts, and update relevant service configurations. \n\nSee [Ambari Cluster Kerberization Technical Document|https://issues.apache.org/jira/secure/attachment/12667192/AmbariClusterKerberization.pdf] for more information.\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/2",
         "id": "2",
         "description": "A new feature of the product, which has yet to be developed.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype",
         "name": "New Feature",
         "subtask": false,
         "avatarId": 21141
      },
      "labels": [
         "api",
         "kerberos",
         "stack"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Update API to enable configuring of services to use Kerberos"
   },
   {
      "_id": "12743514",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2014-09-23 13:10:42",
      "description": "Create a service to manage the (optional) Kerberos server (managed KDC) and client components.\n\nSee [Ambari Cluster Kerberization Technical Document|https://issues.apache.org/jira/secure/attachment/12671235/AmbariClusterKerberization.pdf] for more information.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/2",
         "id": "2",
         "description": "A new feature of the product, which has yet to be developed.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype",
         "name": "New Feature",
         "subtask": false,
         "avatarId": 21141
      },
      "labels": [
         "component",
         "kdc",
         "kerberos",
         "stack"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Create Kerberos Service"
   },
   {
      "_id": "12739906",
      "assignee": "rlevas",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315619",
            "id": "12315619",
            "name": "ambari-server",
            "description": "Ambari Server"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323906",
            "id": "12323906",
            "name": "security",
            "description": "Ambari security features, including Kerberos"
         },
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2014-09-08 16:44:08",
      "description": "*Problem*\nManually installing and setting up Kerberos for a secure Hadoop cluster is error prone, largely manual and a potential source of configuration problems. It requires many steps where configuration files and credentials may need to be distributed across many nodes.  Because of this the process is time consuming and lead to a high probability of user error.\n\nThe problem is exacerbated when the cluster is modified by adding or removing nodes and services.\n\n*Solution*\nUse Ambari to secure the cluster using Kerberos.  By automating the process of setting up Kerberos, the repetitive tasks of distributing configuration details and credentials can be done in parallel to the nodes within the cluster.  This also negates most user-related errors due to the lack of interaction a user has with the process.  \n\nSee [^AmbariClusterKerberization.pdf] for more details.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/15",
         "id": "15",
         "description": "Created by Jira Software - do not edit or delete. Issue type for a big user story that needs to be broken down.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21137&avatarType=issuetype",
         "name": "Epic",
         "subtask": false,
         "avatarId": 21137
      },
      "labels": [
         "active-directory",
         "authentication",
         "kerberos",
         "mit-kerberos",
         "security",
         "stack"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Ambari Automated Kerberization"
   },
   {
      "_id": "12738249",
      "assignee": "aonishuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12323504",
            "id": "12323504",
            "name": "stacks",
            "description": "Ambari Stacks"
         }
      ],
      "created": "2014-09-01 11:51:07",
      "description": "ipc.server.tcpnodelay should be enabled by default (core-site.xml)\n\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "HDP"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "ipc.server.tcpnodelay should be enabled by default"
   },
   {
      "_id": "12693139",
      "assignee": "aonishuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315618",
            "id": "12315618",
            "name": "ambari-agent",
            "description": "Ambari Agent"
         }
      ],
      "created": "2014-02-04 16:42:03",
      "description": "I am using Ambari (1.4.3.38) for hadoop cluster installation and management. All the cluster nodes are built on centos 6.0.\n\nDuring the ambari server installation, ambari-server recognized the primary/cluster os as redhat6 (see ambari.properties). \nDuring the ambari agent bootstrap/host register, ambari-agent regonized the agent os as centos linux6 (see log). \n\nFrom log files (ambari-server.log, ambari-agent.log), I found the inconsistence caused the warning of ambari-agent bootstrapping and failure of host registering.\n\nI'm still not sure why this happen, but I guess it's caused by the differene of os checking methods among ambari server side code, ambari-agent bootstrap script (os_type_check.sh,based on os release file) and registering script (Controller.py/Register.py based on os hardware profile) .\n\nI just share to see if anyone can fix the issue.\n\nBTW, for me, to solve the problem, I manually edited the script files to make it work temporarily:\n\nTo avoid warning of agent bootstrapping, in os_type_check.sh, add current_os=$RH6 above the echo line or add res=0 after case statement;\nTo make the node register work, in Controller.py, add data=data.replace('centos linux','redhat') before sending registering request;\n\nThanks.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "patch"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Host registering failure from primary/agent os checking on centos6"
   },
   {
      "_id": "12669081",
      "assignee": "aonishuk",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2013-09-17 19:00:10",
      "description": "Some issue with the patch given in JIRA-3201\n\nadd testcase for get_hosts , remove create_hosts/create_hosts as of now.\n",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "client"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/4",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
         "name": "Minor",
         "id": "4"
      },
      "projectname": "AMBARI",
      "summary": "Ambar-client updates for JIRA-3201"
   },
   {
      "_id": "12665287",
      "assignee": "mpapirkovskyy",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2013-08-23 18:42:10",
      "description": "Every 20-30 calls for service metrics, latency of the next 5 calls are a multiple of 2 or 3. This might be due to garbage collection. But basically in UI, the updates seem to take longer. \n\nThe call UI makes is\n{noformat}\n/api/v1/clusters/${cluster}/services?fields=components/ServiceComponentInfo,components/host_components,components/host_components/HostRoles,components/host_components/metrics/jvm/memHeapUsedM,components/host_components/metrics/jvm/memHeapCommittedM,components/host_components/metrics/mapred/jobtracker/trackers_decommissioned,components/host_components/metrics/cpu/cpu_wio,components/host_components/metrics/rpc/RpcQueueTime_avg_time,components/host_components/metrics/flume/flume,components/host_components/metrics/yarn/Queue\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "performance"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/3",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
         "name": "Major",
         "id": "3"
      },
      "projectname": "AMBARI",
      "summary": "Service metrics call latency increases by a factor of 2 or 3 every 20-30 calls."
   },
   {
      "_id": "12654919",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2013-06-26 12:17:41",
      "description": "Currently it is very difficult to know what principals and keytabs need to be created on which hosts.\nWe should present this information to the end user in a format that is easy to consume.\nThe user running the wizard may not be the one who will be creating keytabs and principals. We can expose the capability to download a csv file and send it to the appropriate person who may parse the data to create a script to generate principals/keytabs (or do so manually).\nDisplay the attached as a popup after Configure Services step is done.\nLet's show it as a popup so that we don't affect any existing navigation/flow.\nFor generating the content:\nKeytab paths are based on the user input\nPrincipal names are based on the user input\nNameNode host: show the nn and HTTP principals and keytab paths\nJobTracker host: show the jt principal and keytab path\nOozie Server host: show the oozie and HTTP principals and keytab paths\nNagios Server host: show the nagios principal and keytab path\nHBase Master host: show the hbase principal and keytab path\nHive Server host: show the hive principal and keytab path\nWebHCat Server host: show the HTTP principal and keytab path\nZooKeeper Server host: show the zookeeper principal and keytab path\nDataNode host: show the dn principal and keytab path\nTaskTracker host: show the tt principal and keytab path\nRegionServer host: show the hbase principal and keytab path\nIf there are duplicated principals on the same host, display it only once.\nClickng on \"Download CSV\" downloads the CSV file (\"host-principal-keytab-list.csv\"). The same content, except each row is a comma-delimited list with a \\n at the end.",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
         "id": "4",
         "description": "An improvement or enhancement to an existing feature or task.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
         "name": "Improvement",
         "subtask": false,
         "avatarId": 21140
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "Security Wizard: show which principals and keytabs need to be created on which hosts"
   },
   {
      "_id": "12651319",
      "assignee": "atkach",
      "components": [
         {
            "self": "https://issues.apache.org/jira/rest/api/2/component/12315620",
            "id": "12315620",
            "name": "ambari-web",
            "description": "Ambari Web UI"
         }
      ],
      "created": "2013-06-06 12:30:41",
      "description": "After successfully installing a cluster, I saved YARN configs (changed only 1 property). YARN service would not start with ResourceManager saying it cannot bind to port.\n\nTurns out that certain properties in {{yarn-site.xml}} were set to null value.\n{noformat}\n\"yarn.resourcemanager.admin.address\" : \"null\",\n\"yarn.resourcemanager.resource-tracker.address\" : \"null\",\n\"yarn.resourcemanager.scheduler.address\" : \"null\",\n\"yarn.resourcemanager.address\" : \"null\",\n\"yarn.log.server.url\" : \"null\",\n{noformat}\nSimilar problem with MR2 also. The {{mapred-site.xml}} had 19 properties which were null.\n\n{noformat}\n\"mapred.jobtracker.taskScheduler\" : \"null\",\n\"mapred.tasktracker.map.tasks.maximum\" : \"null\",\n\"mapred.hosts.exclude\" : \"null\",\n....\n{noformat}",
      "issuetype": {
         "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
         "id": "1",
         "description": "A problem which impairs or prevents the functions of the product.",
         "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
         "name": "Bug",
         "subtask": false,
         "avatarId": 21133
      },
      "labels": [
         "pull-request-available"
      ],
      "priority": {
         "self": "https://issues.apache.org/jira/rest/api/2/priority/2",
         "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
         "name": "Critical",
         "id": "2"
      },
      "projectname": "AMBARI",
      "summary": "YARN/MR2 do not start after reconfiguring"
   }
]